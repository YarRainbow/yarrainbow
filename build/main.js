/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./animate/LevelContent.json":
/*!***********************************!*\
  !*** ./animate/LevelContent.json ***!
  \***********************************/
/*! exports provided: Shapes, Bitmaps, Sounds, Texts, Timelines, _meta, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"Shapes\":[{\"assetId\":16,\"paths\":[{\"color\":\"#4c367b\",\"alpha\":1,\"d\":[\"m\",85.199997,-14.8,\"q\",80.449997,-21,73.849998,-21,\"l\",-88.349998,-21,\"l\",-88.349998,21.450001,\"l\",73.849998,21.450001,\"q\",80.449997,21.450001,85.199997,15.2,\"q\",89.900002,9,89.900002,0.25,\"l\",89.900002,0.2,\"q\",89.900002,-8.6,85.199997,-14.8,\"c\"],\"stroke\":false}]},{\"assetId\":156,\"paths\":[{\"color\":\"#b3e1f9\",\"alpha\":1,\"d\":[\"m\",-450,-450,\"l\",-450,450,\"l\",450,450,\"l\",450,-450,\"l\",-450,-450,\"c\"],\"stroke\":false}]}],\"Bitmaps\":[{\"assetId\":1,\"height\":339,\"width\":356,\"src\":\"images/level_content/lvl_Group_279.png\",\"name\":\"Group_279\"},{\"assetId\":3,\"height\":328,\"width\":328,\"src\":\"images/level_content/lvl_Group_280.png\",\"name\":\"Group_280\"},{\"assetId\":5,\"height\":328,\"width\":328,\"src\":\"images/level_content/lvl_Group_282.png\",\"name\":\"Group_282\"},{\"assetId\":8,\"height\":292,\"width\":236,\"src\":\"images/level_content/lvl_close.png\",\"name\":\"close\"},{\"assetId\":9,\"height\":281,\"width\":236,\"src\":\"images/level_content/lvl_open.png\",\"name\":\"open\"},{\"assetId\":11,\"height\":53,\"width\":66,\"src\":\"images/level_content/lvl_icon_heart_1.png\",\"name\":\"icon_heart_1\"},{\"assetId\":12,\"height\":51,\"width\":64,\"src\":\"images/level_content/lvl_icon_ho_heart_1.png\",\"name\":\"icon_ho_heart_1\"},{\"assetId\":13,\"height\":72,\"width\":226,\"src\":\"images/level_content/lvl_Heartbase.png\",\"name\":\"Heartbase\"},{\"assetId\":116,\"height\":42,\"width\":176,\"src\":\"images/level_content/lvl_progressbarlight.png\",\"name\":\"progressbarlight\"},{\"assetId\":117,\"height\":42,\"width\":176,\"src\":\"images/level_content/lvl_progressbardark.png\",\"name\":\"progressbardark\"},{\"assetId\":119,\"height\":62,\"width\":271,\"src\":\"images/level_content/lvl_Progressbarbase.png\",\"name\":\"Progressbarbase\"},{\"assetId\":121,\"height\":61,\"width\":62,\"src\":\"images/level_content/lvl_btn_pause.png\",\"name\":\"btn_pause\"},{\"assetId\":122,\"height\":73,\"width\":81,\"src\":\"images/level_content/lvl_pauebase.png\",\"name\":\"pauebase\"},{\"assetId\":128,\"height\":44,\"width\":129,\"src\":\"images/level_content/lvl_Coin_counter.png\",\"name\":\"Coin_counter\"},{\"assetId\":129,\"height\":69,\"width\":129,\"src\":\"images/level_content/lvl_Gold1.png\",\"name\":\"Gold1\"},{\"assetId\":130,\"height\":109,\"width\":171,\"src\":\"images/level_content/lvl_Gold2.png\",\"name\":\"Gold2\"},{\"assetId\":131,\"height\":128,\"width\":166,\"src\":\"images/level_content/lvl_Gold3.png\",\"name\":\"Gold3\"},{\"assetId\":132,\"height\":173,\"width\":324,\"src\":\"images/level_content/lvl_Gold4.png\",\"name\":\"Gold4\"},{\"assetId\":133,\"height\":208,\"width\":341,\"src\":\"images/level_content/lvl_Gold5.png\",\"name\":\"Gold5\"},{\"assetId\":137,\"height\":63,\"width\":256,\"src\":\"images/level_content/lvl_My_coin.png\",\"name\":\"My_coin\"},{\"assetId\":139,\"height\":71,\"width\":97,\"src\":\"images/level_content/lvl_lever_off.png\",\"name\":\"lever_off\"},{\"assetId\":140,\"height\":75,\"width\":101,\"src\":\"images/level_content/lvl_lever_hover.png\",\"name\":\"lever_hover\"},{\"assetId\":141,\"height\":71,\"width\":95,\"src\":\"images/level_content/lvl_lever_on.png\",\"name\":\"lever_on\"},{\"assetId\":143,\"height\":101,\"width\":194,\"src\":\"images/level_content/lvl_1.png\",\"name\":\"1\"},{\"assetId\":144,\"height\":120,\"width\":200,\"src\":\"images/level_content/lvl_2.png\",\"name\":\"2\"},{\"assetId\":145,\"height\":113,\"width\":215,\"src\":\"images/level_content/lvl_3.png\",\"name\":\"3\"},{\"assetId\":146,\"height\":114,\"width\":213,\"src\":\"images/level_content/lvl_4.png\",\"name\":\"4\"},{\"assetId\":147,\"height\":113,\"width\":220,\"src\":\"images/level_content/lvl_5.png\",\"name\":\"5\"},{\"assetId\":148,\"height\":100,\"width\":100,\"src\":\"images/level_content/lvl_firelight.png\",\"name\":\"firelight\"},{\"assetId\":150,\"height\":445,\"width\":445,\"src\":\"images/level_content/lvl_lvl_wasdmain_2_mrm.png\",\"name\":\"lvl_wasdmain_2_mrm\"},{\"assetId\":152,\"height\":380,\"width\":376,\"src\":\"images/level_content/lvl_lvl_wasdmain_mrm.png\",\"name\":\"lvl_wasdmain_mrm\"},{\"assetId\":154,\"height\":2048,\"width\":2048,\"src\":\"images/level_content/lvl_wall.png\",\"name\":\"wall\"},{\"assetId\":157,\"height\":1024,\"width\":1024,\"src\":\"images/level_content/lvl_floor.png\",\"name\":\"floor\"},{\"assetId\":159,\"height\":51,\"width\":37,\"src\":\"images/level_content/lvl_star.png\",\"name\":\"star\"},{\"assetId\":162,\"height\":34,\"width\":67,\"src\":\"images/level_content/lvl_eyes_1.png\",\"name\":\"eyes_1\"},{\"assetId\":163,\"height\":41,\"width\":64,\"src\":\"images/level_content/lvl_eyes_2.png\",\"name\":\"eyes_2\"},{\"assetId\":164,\"height\":40,\"width\":73,\"src\":\"images/level_content/lvl_eyes_3.png\",\"name\":\"eyes_3\"},{\"assetId\":166,\"height\":228,\"width\":241,\"src\":\"images/level_content/lvl_char.png\",\"name\":\"char\"},{\"assetId\":167,\"height\":133,\"width\":273,\"src\":\"images/level_content/lvl_staff_1.png\",\"name\":\"staff_1\"},{\"assetId\":168,\"height\":133,\"width\":273,\"src\":\"images/level_content/lvl_staff_2.png\",\"name\":\"staff_2\"},{\"assetId\":169,\"height\":133,\"width\":273,\"src\":\"images/level_content/lvl_staff_3.png\",\"name\":\"staff_3\"},{\"assetId\":170,\"height\":133,\"width\":273,\"src\":\"images/level_content/lvl_staff_4.png\",\"name\":\"staff_4\"}],\"Sounds\":[],\"Texts\":[{\"assetId\":15,\"aaMode\":{\"mode\":\"advanced\"},\"txt\":\"1:30\",\"behaviour\":{\"type\":\"Dynamic\",\"name\":\"time\",\"isBorderDrawn\":false,\"lineMode\":\"single\",\"isRenderAsHTML\":false,\"isScrollable\":false,\"isSelectable\":false},\"paras\":[{\"startIndex\":0,\"length\":4,\"indent\":0,\"leftMargin\":0,\"rightMargin\":0,\"linespacing\":89,\"alignment\":\"center\",\"textRun\":[{\"startIndex\":0,\"length\":4,\"style\":{\"fontName\":\"AlligatorManRUS\",\"fontSize\":35,\"fontColor\":\"#4c367b\",\"fontStyle\":\"RegularStyle\",\"letterSpacing\":0,\"isRotated\":false,\"isAutoKern\":false,\"baseLineShiftStyle\":\"normal\",\"link\":\"\",\"linkTarget\":\"\"}}]}]},{\"assetId\":15,\"aaMode\":{\"mode\":\"advanced\"},\"txt\":\"1:30\",\"behaviour\":{\"type\":\"Dynamic\",\"name\":\"time\",\"isBorderDrawn\":false,\"lineMode\":\"single\",\"isRenderAsHTML\":false,\"isScrollable\":false,\"isSelectable\":false},\"paras\":[{\"startIndex\":0,\"length\":4,\"indent\":0,\"leftMargin\":0,\"rightMargin\":0,\"linespacing\":89,\"alignment\":\"center\",\"textRun\":[{\"startIndex\":0,\"length\":4,\"style\":{\"fontName\":\"AlligatorManRUS\",\"fontSize\":35,\"fontColor\":\"#4c367b\",\"fontStyle\":\"RegularStyle\",\"letterSpacing\":0,\"isRotated\":false,\"isAutoKern\":false,\"baseLineShiftStyle\":\"normal\",\"link\":\"\",\"linkTarget\":\"\"}}]}]},{\"assetId\":127,\"aaMode\":{\"mode\":\"advanced\"},\"txt\":\"X100,000\",\"behaviour\":{\"type\":\"Dynamic\",\"name\":\"gold_health\",\"isBorderDrawn\":false,\"lineMode\":\"single\",\"isRenderAsHTML\":false,\"isScrollable\":false,\"isSelectable\":false},\"paras\":[{\"startIndex\":0,\"length\":8,\"indent\":0,\"leftMargin\":0,\"rightMargin\":0,\"linespacing\":102,\"alignment\":\"center\",\"textRun\":[{\"startIndex\":0,\"length\":8,\"style\":{\"fontName\":\"AlligatorManRUS\",\"fontSize\":22,\"fontColor\":\"#f7f3ff\",\"fontStyle\":\"RegularStyle\",\"letterSpacing\":0,\"isRotated\":false,\"isAutoKern\":true,\"baseLineShiftStyle\":\"normal\",\"link\":\"\",\"linkTarget\":\"\"}}]}]},{\"assetId\":127,\"aaMode\":{\"mode\":\"advanced\"},\"txt\":\"X100,000\",\"behaviour\":{\"type\":\"Dynamic\",\"name\":\"gold_health\",\"isBorderDrawn\":false,\"lineMode\":\"single\",\"isRenderAsHTML\":false,\"isScrollable\":false,\"isSelectable\":false},\"paras\":[{\"startIndex\":0,\"length\":8,\"indent\":0,\"leftMargin\":0,\"rightMargin\":0,\"linespacing\":102,\"alignment\":\"center\",\"textRun\":[{\"startIndex\":0,\"length\":8,\"style\":{\"fontName\":\"AlligatorManRUS\",\"fontSize\":22,\"fontColor\":\"#f7f3ff\",\"fontStyle\":\"RegularStyle\",\"letterSpacing\":0,\"isRotated\":false,\"isAutoKern\":true,\"baseLineShiftStyle\":\"normal\",\"link\":\"\",\"linkTarget\":\"\"}}]}]},{\"assetId\":136,\"aaMode\":{\"mode\":\"advanced\"},\"txt\":\"Х100,000\",\"behaviour\":{\"type\":\"Dynamic\",\"name\":\"score\",\"isBorderDrawn\":false,\"lineMode\":\"single\",\"isRenderAsHTML\":false,\"isScrollable\":false,\"isSelectable\":false},\"paras\":[{\"startIndex\":0,\"length\":8,\"indent\":0,\"leftMargin\":0,\"rightMargin\":0,\"linespacing\":90,\"alignment\":\"center\",\"textRun\":[{\"startIndex\":0,\"length\":8,\"style\":{\"fontName\":\"Times New Roman\",\"fontSize\":34,\"fontColor\":\"#f7f3ff\",\"fontStyle\":\"RegularStyle\",\"letterSpacing\":0,\"isRotated\":false,\"isAutoKern\":false,\"baseLineShiftStyle\":\"normal\",\"link\":\"\",\"linkTarget\":\"\"}}]}]},{\"assetId\":136,\"aaMode\":{\"mode\":\"advanced\"},\"txt\":\"Х100,000\",\"behaviour\":{\"type\":\"Dynamic\",\"name\":\"score\",\"isBorderDrawn\":false,\"lineMode\":\"single\",\"isRenderAsHTML\":false,\"isScrollable\":false,\"isSelectable\":false},\"paras\":[{\"startIndex\":0,\"length\":8,\"indent\":0,\"leftMargin\":0,\"rightMargin\":0,\"linespacing\":90,\"alignment\":\"center\",\"textRun\":[{\"startIndex\":0,\"length\":8,\"style\":{\"fontName\":\"Times New Roman\",\"fontSize\":34,\"fontColor\":\"#f7f3ff\",\"fontStyle\":\"RegularStyle\",\"letterSpacing\":0,\"isRotated\":false,\"isAutoKern\":false,\"baseLineShiftStyle\":\"normal\",\"link\":\"\",\"linkTarget\":\"\"}}]}]}],\"Timelines\":[{\"assetId\":2,\"type\":\"movieclip\",\"name\":\"btn_dash\",\"totalFrames\":3,\"frames\":[{\"frame\":0,\"labels\":[\"active\"],\"commands\":[{\"type\":\"Place\",\"assetId\":1,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-178,\"ty\":-169.5}}]},{\"frame\":1,\"labels\":[\"hover\"],\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1.099976,\"b\":0,\"c\":0,\"d\":1.099976,\"tx\":-196,\"ty\":-186}}]},{\"frame\":2,\"labels\":[\"press\"],\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.899994,\"b\":0,\"c\":0,\"d\":0.899994,\"tx\":-160,\"ty\":-153}}]}]},{\"assetId\":4,\"type\":\"movieclip\",\"name\":\"btn_teleport\",\"totalFrames\":3,\"frames\":[{\"frame\":0,\"labels\":[\"active\"],\"commands\":[{\"type\":\"Place\",\"assetId\":3,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-164,\"ty\":-164}}]},{\"frame\":1,\"labels\":[\"hover\"],\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1.099976,\"b\":0,\"c\":0,\"d\":1.099976,\"tx\":-180,\"ty\":-180}}]},{\"frame\":2,\"labels\":[\"press\"],\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.899994,\"b\":0,\"c\":0,\"d\":0.899994,\"tx\":-148,\"ty\":-148}}]}]},{\"assetId\":6,\"type\":\"movieclip\",\"name\":\"btn_liver\",\"totalFrames\":3,\"frames\":[{\"frame\":0,\"labels\":[\"active\"],\"commands\":[{\"type\":\"Place\",\"assetId\":5,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-164,\"ty\":-164}}]},{\"frame\":1,\"labels\":[\"hover\"],\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1.099976,\"b\":0,\"c\":0,\"d\":1.099976,\"tx\":-180,\"ty\":-180}}]},{\"frame\":2,\"labels\":[\"press\"],\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.899994,\"b\":0,\"c\":0,\"d\":0.899994,\"tx\":-148,\"ty\":-148}}]}]},{\"assetId\":7,\"type\":\"movieclip\",\"name\":\"btns_effect\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":2,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":0.399994,\"b\":0,\"c\":0,\"d\":0.399994,\"tx\":-65.599998,\"ty\":135.399994},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":4,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":0.399994,\"b\":0,\"c\":0,\"d\":0.399994,\"tx\":71.199997,\"ty\":2},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":2,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":2,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":2,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":6,\"instanceId\":3,\"placeAfter\":2,\"transform\":{\"a\":0.399994,\"b\":0,\"c\":0,\"d\":0.399994,\"tx\":71.199997,\"ty\":-137.600006},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":3,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":3,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":3,\"blendMode\":\"Normal\"}]}]},{\"assetId\":10,\"type\":\"movieclip\",\"name\":\"manhole\",\"totalFrames\":2,\"frames\":[{\"frame\":0,\"labels\":[\"close\"],\"commands\":[{\"type\":\"Place\",\"assetId\":8,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-118,\"ty\":-146}}]},{\"frame\":1,\"labels\":[\"open\"],\"commands\":[{\"type\":\"Remove\",\"instanceId\":1},{\"type\":\"Place\",\"assetId\":9,\"instanceId\":2,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-118,\"ty\":-141}}]}]},{\"assetId\":14,\"type\":\"movieclip\",\"name\":\"life\",\"totalFrames\":4,\"frames\":[{\"frame\":0,\"labels\":[\"h_3\"],\"commands\":[{\"type\":\"Place\",\"assetId\":11,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":150,\"ty\":-30}},{\"type\":\"Place\",\"assetId\":11,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":80,\"ty\":-30}},{\"type\":\"Place\",\"assetId\":11,\"instanceId\":3,\"placeAfter\":2,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":10,\"ty\":-30}},{\"type\":\"Place\",\"assetId\":12,\"instanceId\":4,\"placeAfter\":3,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":150,\"ty\":-27}},{\"type\":\"Place\",\"assetId\":12,\"instanceId\":5,\"placeAfter\":4,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":80,\"ty\":-27}},{\"type\":\"Place\",\"assetId\":12,\"instanceId\":6,\"placeAfter\":5,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":10,\"ty\":-27}},{\"type\":\"Place\",\"assetId\":13,\"instanceId\":7,\"placeAfter\":6,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":0,\"ty\":-36}}]},{\"frame\":1,\"labels\":[\"h_2\"],\"commands\":[{\"type\":\"Remove\",\"instanceId\":1},{\"type\":\"ZOrder\",\"instanceId\":2,\"placeAfter\":0}]},{\"frame\":2,\"labels\":[\"h_1\"],\"commands\":[{\"type\":\"Remove\",\"instanceId\":2},{\"type\":\"ZOrder\",\"instanceId\":3,\"placeAfter\":0}]},{\"frame\":3,\"labels\":[\"h_0\"],\"commands\":[{\"type\":\"Remove\",\"instanceId\":3},{\"type\":\"ZOrder\",\"instanceId\":4,\"placeAfter\":0}]}]},{\"assetId\":118,\"type\":\"movieclip\",\"name\":\"progress_bar_timer\",\"totalFrames\":100,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":16,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":0,\"ty\":0}},{\"type\":\"Place\",\"assetId\":116,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-88,\"ty\":-21}},{\"type\":\"Place\",\"assetId\":117,\"instanceId\":3,\"placeAfter\":2,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-88,\"ty\":-21}},{\"type\":\"Mask\",\"instanceId\":1,\"maskTill\":2}]},{\"frame\":1,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-1.8,\"ty\":0}}]},{\"frame\":2,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-3.6,\"ty\":0}}]},{\"frame\":3,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-5.4,\"ty\":0}}]},{\"frame\":4,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-7.2,\"ty\":0}}]},{\"frame\":5,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-9,\"ty\":0}}]},{\"frame\":6,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-10.8,\"ty\":0}}]},{\"frame\":7,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-12.6,\"ty\":0}}]},{\"frame\":8,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-14.4,\"ty\":0}}]},{\"frame\":9,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-16.15,\"ty\":0}}]},{\"frame\":10,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-17.950001,\"ty\":0}}]},{\"frame\":11,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-19.75,\"ty\":0}}]},{\"frame\":12,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-21.549999,\"ty\":0}}]},{\"frame\":13,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-23.35,\"ty\":0}}]},{\"frame\":14,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-25.15,\"ty\":0}}]},{\"frame\":15,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-26.950001,\"ty\":0}}]},{\"frame\":16,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-28.75,\"ty\":0}}]},{\"frame\":17,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-30.549999,\"ty\":0}}]},{\"frame\":18,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-32.349998,\"ty\":0}}]},{\"frame\":19,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-34.150002,\"ty\":0}}]},{\"frame\":20,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-35.950001,\"ty\":0}}]},{\"frame\":21,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-37.75,\"ty\":0}}]},{\"frame\":22,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-39.549999,\"ty\":0}}]},{\"frame\":23,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-41.349998,\"ty\":0}}]},{\"frame\":24,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-43.150002,\"ty\":0}}]},{\"frame\":25,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-44.900002,\"ty\":0}}]},{\"frame\":26,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-46.700001,\"ty\":0}}]},{\"frame\":27,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-48.5,\"ty\":0}}]},{\"frame\":28,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-50.299999,\"ty\":0}}]},{\"frame\":29,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-52.099998,\"ty\":0}}]},{\"frame\":30,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-53.900002,\"ty\":0}}]},{\"frame\":31,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-55.700001,\"ty\":0}}]},{\"frame\":32,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-57.5,\"ty\":0}}]},{\"frame\":33,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-59.299999,\"ty\":0}}]},{\"frame\":34,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-61.099998,\"ty\":0}}]},{\"frame\":35,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-62.900002,\"ty\":0}}]},{\"frame\":36,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-64.699997,\"ty\":0}}]},{\"frame\":37,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-66.5,\"ty\":0}}]},{\"frame\":38,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-68.300003,\"ty\":0}}]},{\"frame\":39,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-70.099998,\"ty\":0}}]},{\"frame\":40,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-71.900002,\"ty\":0}}]},{\"frame\":41,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-73.699997,\"ty\":0}}]},{\"frame\":42,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-75.449997,\"ty\":0}}]},{\"frame\":43,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-77.25,\"ty\":0}}]},{\"frame\":44,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-79.050003,\"ty\":0}}]},{\"frame\":45,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-80.849998,\"ty\":0}}]},{\"frame\":46,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-82.650002,\"ty\":0}}]},{\"frame\":47,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-84.449997,\"ty\":0}}]},{\"frame\":48,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-86.25,\"ty\":0}}]},{\"frame\":49,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-88.050003,\"ty\":0}}]},{\"frame\":50,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-89.849998,\"ty\":0}}]},{\"frame\":51,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-91.650002,\"ty\":0}}]},{\"frame\":52,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-93.449997,\"ty\":0}}]},{\"frame\":53,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-95.25,\"ty\":0}}]},{\"frame\":54,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-97.050003,\"ty\":0}}]},{\"frame\":55,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-98.849998,\"ty\":0}}]},{\"frame\":56,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-100.650002,\"ty\":0}}]},{\"frame\":57,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-102.449997,\"ty\":0}}]},{\"frame\":58,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-104.199997,\"ty\":0}}]},{\"frame\":59,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-106,\"ty\":0}}]},{\"frame\":60,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-107.800003,\"ty\":0}}]},{\"frame\":61,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-109.599998,\"ty\":0}}]},{\"frame\":62,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-111.400002,\"ty\":0}}]},{\"frame\":63,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-113.199997,\"ty\":0}}]},{\"frame\":64,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-115,\"ty\":0}}]},{\"frame\":65,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-116.800003,\"ty\":0}}]},{\"frame\":66,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-118.599998,\"ty\":0}}]},{\"frame\":67,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-120.400002,\"ty\":0}}]},{\"frame\":68,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-122.199997,\"ty\":0}}]},{\"frame\":69,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-124,\"ty\":0}}]},{\"frame\":70,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-125.800003,\"ty\":0}}]},{\"frame\":71,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-127.599998,\"ty\":0}}]},{\"frame\":72,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-129.399994,\"ty\":0}}]},{\"frame\":73,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-131.199997,\"ty\":0}}]},{\"frame\":74,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-133,\"ty\":0}}]},{\"frame\":75,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-134.75,\"ty\":0}}]},{\"frame\":76,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-136.550003,\"ty\":0}}]},{\"frame\":77,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-138.350006,\"ty\":0}}]},{\"frame\":78,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-140.149994,\"ty\":0}}]},{\"frame\":79,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-141.949997,\"ty\":0}}]},{\"frame\":80,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-143.75,\"ty\":0}}]},{\"frame\":81,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-145.550003,\"ty\":0}}]},{\"frame\":82,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-147.350006,\"ty\":0}}]},{\"frame\":83,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-149.149994,\"ty\":0}}]},{\"frame\":84,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-150.949997,\"ty\":0}}]},{\"frame\":85,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-152.75,\"ty\":0}}]},{\"frame\":86,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-154.550003,\"ty\":0}}]},{\"frame\":87,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-156.350006,\"ty\":0}}]},{\"frame\":88,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-158.149994,\"ty\":0}}]},{\"frame\":89,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-159.949997,\"ty\":0}}]},{\"frame\":90,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-161.75,\"ty\":0}}]},{\"frame\":91,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-163.5,\"ty\":0}}]},{\"frame\":92,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-165.300003,\"ty\":0}}]},{\"frame\":93,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-167.100006,\"ty\":0}}]},{\"frame\":94,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-168.899994,\"ty\":0}}]},{\"frame\":95,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-170.699997,\"ty\":0}}]},{\"frame\":96,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-172.5,\"ty\":0}}]},{\"frame\":97,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-174.300003,\"ty\":0}}]},{\"frame\":98,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-176.100006,\"ty\":0}}]},{\"frame\":99,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-177.899994,\"ty\":0}}]}]},{\"assetId\":120,\"type\":\"movieclip\",\"name\":\"ui_timer\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":15,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-163.600006,\"ty\":-26.049999},\"bounds\":{\"x\":30.450001,\"y\":-2,\"width\":76.300003,\"height\":54.150002}},{\"type\":\"Place\",\"assetId\":118,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":31.5,\"ty\":-4},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":2,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":2,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":2,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":119,\"instanceId\":3,\"placeAfter\":2,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-136,\"ty\":-31}}]}]},{\"assetId\":123,\"type\":\"movieclip\",\"name\":\"btn_pause\",\"totalFrames\":3,\"frames\":[{\"frame\":0,\"labels\":[\"active\"],\"commands\":[{\"type\":\"Place\",\"assetId\":121,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-33,\"ty\":-34}},{\"type\":\"Place\",\"assetId\":122,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-41,\"ty\":-37}}]},{\"frame\":1,\"labels\":[\"hover\"],\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1.099976,\"b\":0,\"c\":0,\"d\":1.099976,\"tx\":-36,\"ty\":-37}},{\"type\":\"Move\",\"instanceId\":2,\"transform\":{\"a\":1.099976,\"b\":0,\"c\":0,\"d\":1.099976,\"tx\":-45,\"ty\":-41}}]},{\"frame\":2,\"labels\":[\"press\"],\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.899994,\"b\":0,\"c\":0,\"d\":0.899994,\"tx\":-30,\"ty\":-31}},{\"type\":\"Move\",\"instanceId\":2,\"transform\":{\"a\":0.899994,\"b\":0,\"c\":0,\"d\":0.899994,\"tx\":-37,\"ty\":-33}}]}]},{\"assetId\":124,\"type\":\"movieclip\",\"name\":\"buttons_pause\",\"totalFrames\":2,\"frames\":[{\"frame\":0,\"labels\":[\"pause\"],\"commands\":[{\"type\":\"Place\",\"assetId\":123,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":0,\"ty\":0},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"}]},{\"frame\":1,\"labels\":[\"play\"],\"commands\":[{\"type\":\"Remove\",\"instanceId\":1}]}]},{\"assetId\":125,\"type\":\"movieclip\",\"name\":\"ui_top_left\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":120,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-231,\"ty\":-1.5},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":124,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-40,\"ty\":0},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":2,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":2,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":2,\"blendMode\":\"Normal\"}]}]},{\"assetId\":126,\"type\":\"movieclip\",\"name\":\"ui_top\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":14,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-317.5,\"ty\":36},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":125,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":247,\"ty\":37.5},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":2,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":2,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":2,\"blendMode\":\"Normal\"}]}]},{\"assetId\":134,\"type\":\"movieclip\",\"name\":\"gold\",\"totalFrames\":5,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":129,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-68,\"ty\":32}}]},{\"frame\":1,\"commands\":[{\"type\":\"Remove\",\"instanceId\":1},{\"type\":\"Place\",\"assetId\":130,\"instanceId\":2,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-93,\"ty\":-5}}]},{\"frame\":2,\"commands\":[{\"type\":\"Remove\",\"instanceId\":2},{\"type\":\"Place\",\"assetId\":131,\"instanceId\":3,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-88,\"ty\":-27}}]},{\"frame\":3,\"commands\":[{\"type\":\"Remove\",\"instanceId\":3},{\"type\":\"Place\",\"assetId\":132,\"instanceId\":4,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-158,\"ty\":-76}}]},{\"frame\":4,\"commands\":[{\"type\":\"Remove\",\"instanceId\":4},{\"type\":\"Place\",\"assetId\":133,\"instanceId\":5,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-171,\"ty\":-104}}]}]},{\"assetId\":135,\"type\":\"movieclip\",\"name\":\"gold_ui\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":127,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-75.699997,\"ty\":-124.449997},\"bounds\":{\"x\":12.8,\"y\":-2,\"width\":116.949997,\"height\":32.099998}},{\"type\":\"Place\",\"assetId\":128,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-68,\"ty\":-126}},{\"type\":\"Place\",\"assetId\":134,\"instanceId\":3,\"placeAfter\":2,\"transform\":{\"a\":0.799973,\"b\":0,\"c\":0,\"d\":0.799973,\"tx\":0,\"ty\":-3},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":3,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":3,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":3,\"blendMode\":\"Normal\"}]}]},{\"assetId\":138,\"type\":\"movieclip\",\"name\":\"ui_bottom\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":136,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-39.549999,\"ty\":-56.700001},\"bounds\":{\"x\":-14.35,\"y\":-2,\"width\":170.850006,\"height\":52.75}},{\"type\":\"Place\",\"assetId\":137,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-128,\"ty\":-63}}]}]},{\"assetId\":142,\"type\":\"movieclip\",\"name\":\"lever\",\"totalFrames\":3,\"frames\":[{\"frame\":0,\"labels\":[\"off\"],\"commands\":[{\"type\":\"Place\",\"assetId\":139,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-49,\"ty\":-36}}]},{\"frame\":1,\"labels\":[\"hover\"],\"commands\":[{\"type\":\"Remove\",\"instanceId\":1},{\"type\":\"Place\",\"assetId\":140,\"instanceId\":2,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-51,\"ty\":-38}}]},{\"frame\":2,\"labels\":[\"on\"],\"commands\":[{\"type\":\"Remove\",\"instanceId\":2},{\"type\":\"Place\",\"assetId\":141,\"instanceId\":3,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-49,\"ty\":-36}}]}]},{\"assetId\":149,\"type\":\"movieclip\",\"name\":\"fireball\",\"totalFrames\":20,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":143,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":0,\"b\":1,\"c\":-1,\"d\":0,\"tx\":50,\"ty\":-51}},{\"type\":\"Place\",\"assetId\":148,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":2.769943,\"b\":0,\"c\":0,\"d\":2.769943,\"tx\":-138,\"ty\":-138}}]},{\"frame\":4,\"commands\":[{\"type\":\"Remove\",\"instanceId\":1},{\"type\":\"Place\",\"assetId\":144,\"instanceId\":3,\"placeAfter\":0,\"transform\":{\"a\":0,\"b\":1,\"c\":-1,\"d\":0,\"tx\":55,\"ty\":-52}},{\"type\":\"ZOrder\",\"instanceId\":2,\"placeAfter\":3}]},{\"frame\":8,\"commands\":[{\"type\":\"Remove\",\"instanceId\":3},{\"type\":\"Place\",\"assetId\":145,\"instanceId\":4,\"placeAfter\":0,\"transform\":{\"a\":0,\"b\":1,\"c\":-1,\"d\":0,\"tx\":55,\"ty\":-54}},{\"type\":\"ZOrder\",\"instanceId\":2,\"placeAfter\":4}]},{\"frame\":12,\"commands\":[{\"type\":\"Remove\",\"instanceId\":4},{\"type\":\"Place\",\"assetId\":146,\"instanceId\":5,\"placeAfter\":0,\"transform\":{\"a\":0,\"b\":1,\"c\":-1,\"d\":0,\"tx\":57,\"ty\":-50}},{\"type\":\"ZOrder\",\"instanceId\":2,\"placeAfter\":5}]},{\"frame\":16,\"commands\":[{\"type\":\"Remove\",\"instanceId\":5},{\"type\":\"Place\",\"assetId\":147,\"instanceId\":6,\"placeAfter\":0,\"transform\":{\"a\":0,\"b\":1,\"c\":-1,\"d\":0,\"tx\":57,\"ty\":-55}},{\"type\":\"ZOrder\",\"instanceId\":2,\"placeAfter\":6}]}]},{\"assetId\":151,\"type\":\"movieclip\",\"name\":\"gamepad_stick\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":150,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-223,\"ty\":-223}}]}]},{\"assetId\":153,\"type\":\"movieclip\",\"name\":\"gamepad_joystick\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":151,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":0,\"ty\":0},\"instanceName\":\"stick\",\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":152,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":0.986801,\"tx\":-188,\"ty\":-188}}]}]},{\"assetId\":155,\"type\":\"movieclip\",\"name\":\"wall\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":154,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-1024,\"ty\":-1024}}]}]},{\"assetId\":158,\"type\":\"movieclip\",\"name\":\"floor\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":156,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":0,\"ty\":0}},{\"type\":\"Place\",\"assetId\":157,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":0.878906,\"b\":0,\"c\":0,\"d\":0.878906,\"tx\":-450,\"ty\":-450}},{\"type\":\"Mask\",\"instanceId\":1,\"maskTill\":2}]}]},{\"assetId\":160,\"type\":\"movieclip\",\"name\":\"Слой_18\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":159,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-18.5,\"ty\":-25.5}}]}]},{\"assetId\":161,\"type\":\"movieclip\",\"name\":\"star_1\",\"totalFrames\":15,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":160,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":0,\"ty\":0},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"}]},{\"frame\":1,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.967178,\"b\":0,\"c\":0,\"d\":0.967178,\"tx\":0,\"ty\":0}}]},{\"frame\":2,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.934357,\"b\":0,\"c\":0,\"d\":0.934357,\"tx\":0,\"ty\":0}}]},{\"frame\":3,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.901535,\"b\":0,\"c\":0,\"d\":0.901535,\"tx\":0,\"ty\":0}}]},{\"frame\":4,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.868729,\"b\":0,\"c\":0,\"d\":0.868729,\"tx\":0,\"ty\":0}}]},{\"frame\":5,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.835907,\"b\":0,\"c\":0,\"d\":0.835907,\"tx\":0,\"ty\":0}}]},{\"frame\":6,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.803085,\"b\":0,\"c\":0,\"d\":0.803085,\"tx\":0,\"ty\":0}}]},{\"frame\":7,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.770264,\"b\":0,\"c\":0,\"d\":0.770264,\"tx\":0,\"ty\":0}}]},{\"frame\":8,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.803079,\"b\":0,\"c\":0,\"d\":0.803079,\"tx\":0,\"ty\":0}}]},{\"frame\":9,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.835894,\"b\":0,\"c\":0,\"d\":0.835894,\"tx\":0,\"ty\":0}}]},{\"frame\":10,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.868721,\"b\":0,\"c\":0,\"d\":0.868721,\"tx\":0,\"ty\":0}}]},{\"frame\":11,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.901524,\"b\":0,\"c\":0,\"d\":0.901524,\"tx\":0,\"ty\":0}}]},{\"frame\":12,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.93434,\"b\":0,\"c\":0,\"d\":0.93434,\"tx\":0,\"ty\":0}}]},{\"frame\":13,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":0.967167,\"b\":0,\"c\":0,\"d\":0.967167,\"tx\":0,\"ty\":0}}]},{\"frame\":14,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":0,\"ty\":0}}]}]},{\"assetId\":165,\"type\":\"movieclip\",\"name\":\"eyes\",\"totalFrames\":3,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":162,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-31,\"ty\":-21}}]},{\"frame\":1,\"commands\":[{\"type\":\"Remove\",\"instanceId\":1},{\"type\":\"Place\",\"assetId\":163,\"instanceId\":2,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-27,\"ty\":-21}}]},{\"frame\":2,\"commands\":[{\"type\":\"Remove\",\"instanceId\":2},{\"type\":\"Place\",\"assetId\":164,\"instanceId\":3,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-37,\"ty\":-21}}]}]},{\"assetId\":171,\"type\":\"movieclip\",\"name\":\"staff\",\"totalFrames\":4,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":167,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-137,\"ty\":-67}}]},{\"frame\":1,\"commands\":[{\"type\":\"Remove\",\"instanceId\":1},{\"type\":\"Place\",\"assetId\":168,\"instanceId\":2,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-137,\"ty\":-67}}]},{\"frame\":2,\"commands\":[{\"type\":\"Remove\",\"instanceId\":2},{\"type\":\"Place\",\"assetId\":169,\"instanceId\":3,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-137,\"ty\":-67}}]},{\"frame\":3,\"commands\":[{\"type\":\"Remove\",\"instanceId\":3},{\"type\":\"Place\",\"assetId\":170,\"instanceId\":4,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-137,\"ty\":-67}}]}]},{\"assetId\":172,\"type\":\"movieclip\",\"name\":\"magician\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":161,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-13.75,\"ty\":-123.349998},\"instanceName\":\"star_2\",\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":161,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":0.452942,\"b\":0,\"c\":0,\"d\":0.452942,\"tx\":-88,\"ty\":-114.800003},\"instanceName\":\"star_1\",\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":2,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":2,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":2,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":161,\"instanceId\":3,\"placeAfter\":2,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-112.5,\"ty\":-91.800003},\"instanceName\":\"star_0\",\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":3,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":3,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":3,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":165,\"instanceId\":4,\"placeAfter\":3,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":27.5,\"ty\":-19.799999},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":4,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":4,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":4,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":166,\"instanceId\":5,\"placeAfter\":4,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-122,\"ty\":-159}},{\"type\":\"Place\",\"assetId\":171,\"instanceId\":6,\"placeAfter\":5,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":17.5,\"ty\":-11.3},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":6,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":6,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":6,\"blendMode\":\"Normal\"}]}]},{\"type\":\"stage\",\"name\":\"LevelContent\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":7,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":914.400024,\"ty\":1632.400024},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":10,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":1390.300049,\"ty\":1477.199951},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":2,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":2,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":2,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":126,\"instanceId\":3,\"placeAfter\":2,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":961.200012,\"ty\":107.5},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":3,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":3,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":3,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":135,\"instanceId\":4,\"placeAfter\":3,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":990.200012,\"ty\":546.049988},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":4,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":4,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":4,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":138,\"instanceId\":5,\"placeAfter\":4,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":965.700012,\"ty\":899},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":5,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":5,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":5,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":142,\"instanceId\":6,\"placeAfter\":5,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":2020,\"ty\":1616.099976},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":6,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":6,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":6,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":149,\"instanceId\":7,\"placeAfter\":6,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":2319.699951,\"ty\":1480.199951},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":7,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":7,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":7,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":153,\"instanceId\":8,\"placeAfter\":7,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":3819.899902,\"ty\":702.25},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":8,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":8,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":8,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":155,\"instanceId\":9,\"placeAfter\":8,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-2187,\"ty\":-94},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":9,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":9,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":9,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":158,\"instanceId\":10,\"placeAfter\":9,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":2864.399902,\"ty\":644.900024},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":10,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":10,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":10,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":172,\"instanceId\":11,\"placeAfter\":10,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":1779.699951,\"ty\":1582.099976},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":11,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":11,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":11,\"blendMode\":\"Normal\"}]}]}],\"_meta\":{\"outputFile\":\"LevelContent.json\",\"stageName\":\"LevelContent\",\"compressJS\":false,\"commonJS\":false,\"compactShapes\":false,\"nameSpace\":\"lib\",\"loopTimeline\":false,\"framerate\":24,\"background\":\"ffffff\",\"width\":1920,\"height\":1080,\"imagesPath\":\"images/level_content/lvl_\",\"spritesheets\":false,\"spritesheetSize\":1024,\"spritesheetScale\":1,\"version\":\"1.2.5\"}}");

/***/ }),

/***/ "./animate/PreloaderScreen.json":
/*!**************************************!*\
  !*** ./animate/PreloaderScreen.json ***!
  \**************************************/
/*! exports provided: Shapes, Bitmaps, Sounds, Texts, Timelines, _meta, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"Shapes\":[{\"assetId\":3,\"paths\":[{\"color\":\"#ffffff\",\"alpha\":1,\"d\":[\"m\",-8.35,-52.25,\"l\",-8.35,52.25,\"l\",8.3,52.25,\"l\",8.3,-52.25,\"l\",-8.35,-52.25,\"c\"],\"stroke\":false}]}],\"Bitmaps\":[{\"assetId\":5,\"height\":70,\"width\":960,\"src\":\"images/preloader_screen/preload_progress_bar.png\",\"name\":\"progress_bar\"},{\"assetId\":6,\"height\":121,\"width\":1015,\"src\":\"images/preloader_screen/preload_bg_progress_bar.png\",\"name\":\"bg_progress_bar\"},{\"assetId\":8,\"height\":1080,\"width\":1920,\"src\":\"images/preloader_screen/preload_bg.png\",\"name\":\"bg\"}],\"Sounds\":[],\"Texts\":[],\"Timelines\":[{\"assetId\":1,\"type\":\"movieclip\",\"name\":\"loader\",\"totalFrames\":35,\"frames\":[]},{\"assetId\":2,\"type\":\"movieclip\",\"name\":\"loader_screen\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":1,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":0.05,\"ty\":-25.950001},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"}]}]},{\"assetId\":11,\"type\":\"movieclip\",\"name\":\"Анимация_1\",\"totalFrames\":22,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":3,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":0,\"ty\":0}}]}]},{\"assetId\":7,\"type\":\"movieclip\",\"name\":\"preloader\",\"totalFrames\":22,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":11,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-479.350006,\"ty\":5.1},\"loop\":false},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Place\",\"assetId\":5,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-482,\"ty\":-32}},{\"type\":\"Place\",\"assetId\":6,\"instanceId\":3,\"placeAfter\":2,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-508,\"ty\":-54}},{\"type\":\"Mask\",\"instanceId\":1,\"maskTill\":2}],\"scripts\":[\"this.stop();\"]},{\"frame\":1,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":3.751587,\"b\":0,\"c\":0,\"d\":1,\"tx\":-456.723267,\"ty\":4.85}}]},{\"frame\":2,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":6.503159,\"b\":0,\"c\":0,\"d\":1,\"tx\":-433.989014,\"ty\":4.6}}]},{\"frame\":3,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":9.25386,\"b\":0,\"c\":0,\"d\":1,\"tx\":-411.287842,\"ty\":4.35}}]},{\"frame\":4,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":12.005447,\"b\":0,\"c\":0,\"d\":1,\"tx\":-388.561035,\"ty\":4.1}}]},{\"frame\":5,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":14.757019,\"b\":0,\"c\":0,\"d\":1,\"tx\":-365.927246,\"ty\":3.85}}]},{\"frame\":6,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":17.508606,\"b\":0,\"c\":0,\"d\":1,\"tx\":-343.200195,\"ty\":3.6}}]},{\"frame\":7,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":20.259308,\"b\":0,\"c\":0,\"d\":1,\"tx\":-320.5,\"ty\":3.35}}]},{\"frame\":8,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":23.01088,\"b\":0,\"c\":0,\"d\":1,\"tx\":-297.81543,\"ty\":3.1}}]},{\"frame\":9,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":25.762466,\"b\":0,\"c\":0,\"d\":1,\"tx\":-275.087891,\"ty\":2.85}}]},{\"frame\":10,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":28.514053,\"b\":0,\"c\":0,\"d\":1,\"tx\":-252.412109,\"ty\":2.6}}]},{\"frame\":11,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":31.26474,\"b\":0,\"c\":0,\"d\":1,\"tx\":-229.703125,\"ty\":2.35}}]},{\"frame\":12,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":34.016327,\"b\":0,\"c\":0,\"d\":1,\"tx\":-207.026367,\"ty\":2.1}}]},{\"frame\":13,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":36.767914,\"b\":0,\"c\":0,\"d\":1,\"tx\":-184.298828,\"ty\":1.85}}]},{\"frame\":14,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":39.519485,\"b\":0,\"c\":0,\"d\":1,\"tx\":-161.615234,\"ty\":1.6}}]},{\"frame\":15,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":42.270187,\"b\":0,\"c\":0,\"d\":1,\"tx\":-138.964844,\"ty\":1.35}}]},{\"frame\":16,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":45.021774,\"b\":0,\"c\":0,\"d\":1,\"tx\":-116.238281,\"ty\":1.1}}]},{\"frame\":17,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":47.773346,\"b\":0,\"c\":0,\"d\":1,\"tx\":-93.554688,\"ty\":0.85}}]},{\"frame\":18,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":50.524933,\"b\":0,\"c\":0,\"d\":1,\"tx\":-70.826172,\"ty\":0.6}}]},{\"frame\":19,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":53.275635,\"b\":0,\"c\":0,\"d\":1,\"tx\":-48.175781,\"ty\":0.35}}]},{\"frame\":20,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":56.027206,\"b\":0,\"c\":0,\"d\":1,\"tx\":-25.443359,\"ty\":0.1}}]},{\"frame\":21,\"commands\":[{\"type\":\"Move\",\"instanceId\":1,\"transform\":{\"a\":58.778793,\"b\":0,\"c\":0,\"d\":1,\"tx\":3.15,\"ty\":-0.1}}]}]},{\"assetId\":9,\"type\":\"movieclip\",\"name\":\"bg\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":8,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":-960,\"ty\":-540}}]}]},{\"assetId\":10,\"type\":\"movieclip\",\"name\":\"preloader_screen\",\"totalFrames\":19,\"frames\":[{\"frame\":0,\"labels\":[\"landscape\"],\"commands\":[{\"type\":\"Place\",\"assetId\":7,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":0.945786,\"b\":0,\"c\":0,\"d\":0.945435,\"tx\":0.45,\"ty\":169.100006},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":9,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":0,\"ty\":0},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":2,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":2,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":2,\"blendMode\":\"Normal\"}],\"scripts\":[\"this.stop();\"]},{\"frame\":9,\"labels\":[\"portrait\"],\"scripts\":[\"this.stop();\"]}]},{\"type\":\"stage\",\"name\":\"PreloaderScreen\",\"totalFrames\":1,\"frames\":[{\"frame\":0,\"commands\":[{\"type\":\"Place\",\"assetId\":2,\"instanceId\":1,\"placeAfter\":0,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":1145.199951,\"ty\":56.049999},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":1,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":1,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":1,\"blendMode\":\"Normal\"},{\"type\":\"Place\",\"assetId\":10,\"instanceId\":2,\"placeAfter\":1,\"transform\":{\"a\":1,\"b\":0,\"c\":0,\"d\":1,\"tx\":859.950012,\"ty\":607.900024},\"loop\":true},{\"type\":\"ColorTransform\",\"instanceId\":2,\"colorMatrix\":{\"r\":1,\"rA\":0,\"g\":1,\"gA\":0,\"b\":1,\"bA\":0,\"a\":1,\"aA\":0}},{\"type\":\"Visibility\",\"instanceId\":2,\"visibility\":true},{\"type\":\"BlendMode\",\"instanceId\":2,\"blendMode\":\"Normal\"}]}]}],\"_meta\":{\"outputFile\":\"PreloaderScreen.json\",\"stageName\":\"PreloaderScreen\",\"compressJS\":false,\"commonJS\":false,\"compactShapes\":false,\"nameSpace\":\"lib\",\"loopTimeline\":false,\"framerate\":24,\"background\":\"ffffff\",\"width\":1920,\"height\":1080,\"imagesPath\":\"images/preloader_screen/preload_\",\"spritesheets\":false,\"spritesheetSize\":1024,\"spritesheetScale\":1,\"version\":\"1.2.5\"}}");

/***/ }),

/***/ "./game-config.json":
/*!**************************!*\
  !*** ./game-config.json ***!
  \**************************/
/*! exports provided: gameId, build, resourcesRoot, resources, imageMin, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"gameId\":\"btc-tron-idle-pvp\",\"build\":{\"standalone\":{\"build\":\"./build/\",\"entry\":\"./src/index.ts\",\"html\":{\"title\":\"btc-tron-idle-pvp\",\"backgroundColor\":\"#000\"}}},\"resourcesRoot\":\"assets\",\"resources\":[{\"from\":\"assets\",\"to\":\"assets\"},{\"from\":\"animate/images\",\"to\":\"assets/images\"}],\"imageMin\":{\"enable\":true,\"ignore\":[]}}");

/***/ }),

/***/ "./node_modules/@denishussar/html5-game-engine/dist/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@denishussar/html5-game-engine/dist/index.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*!
 * HTML5 Game Engine v2.0.5
 * Copyright (C) Denis Gusarov (DenisHussar.com). All rights reserved.
 */
/*! For license information please see index.js.LICENSE.txt */
!function(t,e){ true?module.exports=e():undefined}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};function a(t,e){var n=Reflect.getMetadata("design:type",t,e);n||(n=Reflect.getMetadata("design:type",t.constructor,e)),u.injectProperty(t.constructor,e,n)}function s(t,e,n){if(!e){var r=u.bind(t);r.paramTypes=r.paramTypes||[];var i=Reflect.getMetadata("design:paramtypes",t);r.paramTypes.unshift(i[n])}}Object.defineProperty(e,"__esModule",{value:!0}),e.Scope=e.Container=e.Inject=e.Provides=e.Provided=e.Scoped=e.Singleton=void 0,n(121),e.Singleton=function(t){u.bind(t).scope(p.Singleton)},e.Scoped=function(t){return function(e){u.bind(e).scope(t)}},e.Provided=function(t){return function(e){u.bind(e).provider(t)}},e.Provides=function(t,e){return function(n){u.bind(t).to(n,e)}},e.Inject=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length<3||void 0===t[2])return a.apply(this,t);if(3===t.length&&"number"==typeof t[2])return s.apply(this,t);throw new Error("Invalid @Inject Decorator declaration.")};var l=function(){function t(){}return t.bind=function(t,e){return u.isBound(t)?u.bind(t):(n=t,r=_.decorateConstructor(n),u.bind(n).toConstructor(r),u.bind(t).to(t,e));var n,r},t.get=function(t,e){return u.get(t,e)},t.getType=function(t){return u.getType(t)},t.snapshot=function(e){var n=t.bind(e);t.snapshots.providers.set(e,n.iocprovider),n.iocscope&&t.snapshots.scopes.set(e,n.iocscope)},t.restore=function(e){if(!t.snapshots.providers.has(e))throw new TypeError("Config for source was never snapshoted.");var n=t.bind(e);n.provider(t.snapshots.providers.get(e)),t.snapshots.scopes.has(e)&&n.scope(t.snapshots.scopes.get(e))},t.snapshots={providers:new Map,scopes:new Map},t}();e.Container=l;var u=function(){function t(){}return t.isBound=function(e){c(e);var n=_.getConstructorFromType(e);return!!t.bindings.get(n)},t.bind=function(e){c(e);var n=_.getConstructorFromType(e),r=t.bindings.get(n);return r||(r=new h(n),t.bindings.set(n,r)),r},t.get=function(e,n){var r=t.bind(e);return r.iocprovider&&!n||r.to(r.source,n),r.getInstance(n)},t.getType=function(e){c(e);var n=_.getConstructorFromType(e),r=t.bindings.get(n);if(!r)throw new TypeError("The type "+e.name+" hasn't been registered with the IOC Container");return r.targetSource||r.source},t.injectProperty=function(e,n,r){var i="__"+n;Object.defineProperty(e.prototype,n,{enumerable:!0,get:function(){return this[i]?this[i]:this[i]=t.get(r)},set:function(t){this[i]=t}})},t.assertInstantiable=function(t){if(t.__block_Instantiation)throw new TypeError("Can not instantiate Singleton class. Ask Container for it, using Container.get")},t.bindings=new Map,t}();function c(t){if(!t)throw new TypeError("Invalid type requested to IoC container. Type is not defined.")}var h=function(){function t(t){this.source=t}return t.prototype.to=function(t,e){c(t);var n=_.getConstructorFromType(t);if(this.targetSource=n,this.source===n){var r=this;this.iocprovider={get:function(){var n,i=r.getParameters();if(e){if(!i||0==i.length)throw TypeError("Can not find the view options "+t.toString());i[0]=e}return r.decoratedConstructor?i?new((n=r.decoratedConstructor).bind.apply(n,o([void 0],i))):new r.decoratedConstructor:i?new(t.bind.apply(t,o([void 0],i))):new t}}}else this.iocprovider={get:function(){return u.get(t)}};return this.iocscope&&this.iocscope.reset(this.source),this},t.prototype.provider=function(t){return this.iocprovider=t,this.iocscope&&this.iocscope.reset(this.source),this},t.prototype.scope=function(t){return this.iocscope=t,t===p.Singleton?(this.source.__block_Instantiation=!0,t.reset(this.source)):this.source.__block_Instantiation&&delete this.source.__block_Instantiation,this},t.prototype.withParams=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.paramTypes=t,this},t.prototype.toConstructor=function(t){return this.decoratedConstructor=t,this},t.prototype.getInstance=function(t){return this.iocscope||this.scope(p.Local),this.iocscope.resolve(this.iocprovider,this.source,t)},t.prototype.getParameters=function(){return this.paramTypes?this.paramTypes.map((function(t){return u.get(t)})):null},t}(),p=function(){function t(){}return t.prototype.reset=function(t){},t}();e.Scope=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.resolve=function(t,e,n){return t.get()},e}(p);p.Local=new f;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.resolve=function(t,n,r){var i=e.instances.get(n);return i||(n.__block_Instantiation=!1,i=t.get(),n.__block_Instantiation=!0,e.instances.set(n,i)),i},e.prototype.reset=function(t){e.instances.delete(_.getConstructorFromType(t))},e.instances=new Map,e}(p);p.Singleton=new d;var _=function(){function t(){}return t.decorateConstructor=function(t){var e;return(e=function(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return u.assertInstantiable(t),i}return i(n,e),n}(t)).__parent=t,e},t.hasNamedConstructor=function(t){if(t.name)return"ioc_wrapper"!==t.name;try{var e=t.prototype.constructor.toString().match(this.constructorNameRegEx)[1];return e&&"ioc_wrapper"!==e}catch(t){}return!1},t.getConstructorFromType=function(t){var e=t;if(this.hasNamedConstructor(e))return e;for(e=e.__parent;e;){if(this.hasNamedConstructor(e))return e;e=e.__parent}throw TypeError("Can not identify the base Type for requested target "+t.toString())},t.constructorNameRegEx=/function (\w*)/,t}()},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Enumerable=e.List=void 0;var o=n(49),a=function(){function t(t){void 0===t&&(t=[]),this._elements=t}return t.prototype.add=function(t){this._elements.push(t)},t.prototype.addRange=function(t){var e;(e=this._elements).push.apply(e,t)},t.prototype.aggregate=function(t,e){return this._elements.reduce(t,e)},t.prototype.all=function(t){return this._elements.every(t)},t.prototype.any=function(t){return this._elements.some(t)},t.prototype.average=function(t){return this.sum(t)/this.count(t)},t.prototype.concat=function(e){return new t(this._elements.concat(e.toArray()))},t.prototype.contains=function(t){return this._elements.some((function(e){return e===t}))},t.prototype.count=function(t){return t?this.where(t).count():this._elements.length},t.prototype.defaultIfEmpty=function(e){return this.count()?this:new t([e])},t.prototype.distinct=function(){return this.where((function(t,e,n){return n.indexOf(t)===e}))},t.prototype.elementAt=function(t){return this._elements[t]},t.prototype.elementAtOrDefault=function(t){return this.elementAt(t)||void 0},t.prototype.except=function(t){return this.where((function(e){return!t.contains(e)}))},t.prototype.first=function(t){return t?this.where(t).first():this._elements[0]},t.prototype.firstOrDefault=function(t){return this.count()?this.first(t):void 0},t.prototype.forEach=function(t){return this._elements.forEach(t)},t.prototype.groupBy=function(t,e){return this.aggregate((function(n,r){return n[t(r)]?n[t(r)].push(e(r)):n[t(r)]=[e(r)],n}),{})},t.prototype.groupJoin=function(t,e,n,r){return this.select((function(i,o){return r(i,t.where((function(t){return e(i)===n(t)})))}))},t.prototype.indexOf=function(t){return this._elements.indexOf(t)},t.prototype.insert=function(t,e){if(t<0||t>this._elements.length)throw new TypeError("Index is out of range.");this._elements.splice(t,0,e)},t.prototype.intersect=function(t){return this.where((function(e){return t.contains(e)}))},t.prototype.join=function(t,e,n,r){return this.selectMany((function(i){return t.where((function(t){return n(t)===e(i)})).select((function(t){return r(i,t)}))}))},t.prototype.last=function(t){return t?this.where(t).last():this._elements[this.count()-1]},t.prototype.lastOrDefault=function(t){return this.count()?this.last(t):void 0},t.prototype.max=function(){return this.aggregate((function(t,e){return t>e?t:e}))},t.prototype.min=function(){return this.aggregate((function(t,e){return t<e?t:e}))},t.prototype.orderBy=function(t){return new l(this._elements,s.ComparerForKey(t,!1))},t.prototype.orderByDescending=function(t){return new l(this._elements,s.ComparerForKey(t,!0))},t.prototype.thenBy=function(t){return this.orderBy(t)},t.prototype.thenByDescending=function(t){return this.orderByDescending(t)},t.prototype.remove=function(t){return-1!==this.indexOf(t)&&(this.removeAt(this.indexOf(t)),!0)},t.prototype.removeAll=function(t){return this.where(this._negate(t))},t.prototype.removeAt=function(t){this._elements.splice(t,1)},t.prototype.reverse=function(){return new t(this._elements.reverse())},t.prototype.select=function(e){return new t(this._elements.map(e))},t.prototype.selectMany=function(e){var n=this;return this.aggregate((function(t,r,i){return t.addRange(n.select(e).elementAt(i).toArray()),t}),new t)},t.prototype.sequenceEqual=function(t){return!!this._elements.reduce((function(e,n,r){return t._elements[r]===n?e:void 0}))},t.prototype.single=function(){if(1!==this.count())throw new TypeError("The collection does not contain exactly one element.");return this.first()},t.prototype.singleOrDefault=function(){return this.count()?this.single():void 0},t.prototype.skip=function(e){return new t(this._elements.slice(Math.max(0,e)))},t.prototype.skipWhile=function(t){var e=this;return this.skip(this.aggregate((function(n,r){return t(e.elementAt(n))?++n:n}),0))},t.prototype.sum=function(t){return t?this.select(t).sum():this.aggregate((function(t,e){return t+ +e}),0)},t.prototype.take=function(e){return new t(this._elements.slice(0,Math.max(0,e)))},t.prototype.takeWhile=function(t){var e=this;return this.take(this.aggregate((function(n,r){return t(e.elementAt(n))?++n:n}),0))},t.prototype.toArray=function(){return this._elements},t.prototype.toDictionary=function(t,e){var n=this;return this.aggregate((function(r,i,o){return r[n.select(t).elementAt(o)]=e?n.select(e).elementAt(o):i,r}),{})},t.prototype.toList=function(){return this},t.prototype.toLookup=function(t,e){return this.groupBy(t,e)},t.prototype.union=function(t){return this.concat(t).distinct()},t.prototype.where=function(e){return new t(this._elements.filter(e))},t.prototype.zip=function(t,e){var n=this;return t.count()<this.count()?t.select((function(t,r){return e(n.elementAt(r),t)})):this.select((function(n,r){return e(n,t.elementAt(r))}))},t.prototype.clear=function(){this._elements=[]},t.prototype.shuffle=function(t){void 0===t&&(t=null),null==t&&(t=new o.GameRandom);for(var e,n,r=this._elements.length;0!==r;)n=Math.floor(t.random()*r),r-=1,e=this._elements[r],this._elements[r]=this._elements[n],this._elements[n]=e;return this},t.prototype.random=function(e,n){void 0===n&&(n=null),null==n&&(n=new o.GameRandom);for(var r,i,a=this._elements.length;0!==a;)i=Math.floor(n.random()*a),a-=1,r=this._elements[a],this._elements[a]=this._elements[i],this._elements[i]=r;return new t(this._elements.slice(0,Math.max(0,e)))},t.prototype._negate=function(t){return function(){return!t.apply(this,arguments)}},t}();e.List=a;var s=function(){function t(){}return t.ComparerForKey=function(e,n){return function(r,i){return t.Compare(r,i,e,n)}},t.Compare=function(t,e,n,r){var i=n(t),o=n(e);return i>o?r?-1:1:i<o?r?1:-1:0},t.ComposeComparers=function(t,e){return function(n,r){var i=t(n,r);return i||e(n,r)}},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r._comparer=n,r._elements.sort(r._comparer),r}return i(e,t),e.prototype.ThenBy=function(t){return new e(this._elements,s.ComposeComparers(this._comparer,s.ComparerForKey(t,!1)))},e.prototype.ThenByDescending=function(t){return new e(this._elements,s.ComposeComparers(this._comparer,s.ComparerForKey(t,!0)))},e}(a),u=function(){function t(){}return t.Range=function(t,e){for(var n=new a;e--;)n.add(t++);return n},t.Repeat=function(t,e){for(var n=new a;e--;)n.add(t);return n},t}();e.Enumerable=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseObject=void 0;var r=function(){function t(){this.hashCode=t._hashCode++,this._isInPool=!1}return t._returnObject=function(e){var n=String(e.constructor),r=n in t._maxCountMap?t._maxCountMap[n]:t._defaultMaxCount,i=t._poolsMap[n]=t._poolsMap[n]||[];i.length<r&&(e._isInPool?console.warn("The object is already in the pool."):(e._isInPool=!0,i.push(e)))},t.toString=function(){throw new Error},t.setMaxCount=function(e,n){if((n<0||n!=n)&&(n=0),null!==e)null!==(i=(r=String(e))in t._poolsMap?t._poolsMap[r]:null)&&i.length>n&&(i.length=n),t._maxCountMap[r]=n;else for(var r in t._defaultMaxCount=n,t._poolsMap){var i;(i=t._poolsMap[r]).length>n&&(i.length=n),r in t._maxCountMap&&(t._maxCountMap[r]=n)}},t.clearPool=function(e){if(void 0===e&&(e=null),null!==e){var n=String(e);null!==(i=n in t._poolsMap?t._poolsMap[n]:null)&&i.length>0&&(i.length=0)}else for(var r in t._poolsMap){var i;(i=t._poolsMap[r]).length=0}},t.borrowObject=function(e){var n=String(e),r=n in t._poolsMap?t._poolsMap[n]:null;if(null!==r&&r.length>0){var i=r.pop();return i._isInPool=!1,i}var o=new e;return o._onClear(),o},t.prototype.returnToPool=function(){this._onClear(),t._returnObject(this)},t._hashCode=0,t._defaultMaxCount=3e3,t._maxCountMap={},t._poolsMap={},t}();e.BaseObject=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._u=void 0;var r=function(){function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)}return t.optimizeCb=function(t,e,n){if(void 0===n&&(n=null),void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},t.identity=function(t){return t},t.isFunction=function(e){return t.isObject(e)&&"[object Function]"==Object.prototype.toString.call(e)},t.isObject=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)},t.createAssigner=function(t,e){return void 0===e&&(e=null),function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}},t.matcher=function(e){return e=t.extendOwn({},e),function(n){return t.isMatch(n,e)}},t.cb=function(e,n,r){return void 0===r&&(r=null),null==e?t.identity:t.isFunction(e)?t.optimizeCb(e,n,r):t.isObject(e)?t.matcher(e):t.property(e)},t.property=function(t){return function(e){return null==e?void 0:e[t]}},t.isArrayLike=function(e){var n=t.getLength(e);return"number"==typeof n&&n>=0&&n<=t.MAX_uARRAY_uINDEX},t.createPredicateIndexFinder=function(e){return function(n,r,i){r=t.cb(r,i);for(var o=t.getLength(n),a=e>0?0:o-1;a>=0&&a<o;a+=e)if(r(n[a],a,n))return a;return-1}},t.sortedIndex=function(e,n,r,i){for(var o=(r=t.cb(r,i,1))(n),a=0,s=t.getLength(e);a<s;){var l=Math.floor((a+s)/2);r(e[l])<o?a=l+1:s=l}return a},t.isNaN=function(e){return t.isNumber(e)&&e!==+e},t.isNumber=function(t){return"[object Number]"===toString.call(t)},t.values=function(e){for(var n=t.keys(e),r=n.length,i=Array(r),o=0;o<r;o++)i[o]=e[n[o]];return i},t.createIndexFinder=function(e,n,r){return function(i,o,a){var s=0,l=t.getLength(i);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+l,s):l=a>=0?Math.min(a+1,l):a+l+1;else if(r&&a&&l)return i[a=r(i,o)]===o?a:-1;if(o!=o)return(a=n(t.slice.call(i,s,l),t.isNaN))>=0?a+s:-1;for(a=e>0?s:l-1;a>=0&&a<l;a+=e)if(i[a]===o)return a;return-1}},t.contains=function(e,n,r,i){return void 0===r&&(r=null),void 0===i&&(i=null),t.isArrayLike(e)||(e=t.values(e)),("number"!=typeof r||i)&&(r=0),t.indexOf(e,n,r)>=0},t.collectNonEnumProps=function(e,n){var r=t.nonEnumerableProps.length,i=e.constructor,o=t.isFunction(i)&&i.prototype||t.ObjProto,a="constructor";for(t.has(e,a)&&!t.contains(n,a)&&n.push(a);r--;)(a=t.nonEnumerableProps[r])in e&&e[a]!==o[a]&&!t.contains(n,a)&&n.push(a)},t.keys=function(e){if(!t.isObject(e))return[];if(t.nativeKeys)return t.nativeKeys(e);var n=[];for(var r in e)t.has(e,r)&&n.push(r);return t.hasEnumBug&&t.collectNonEnumProps(e,n),n},t.each=function(e,n,r){var i,o;if(n=t.optimizeCb(n,r),t.isArrayLike(e))for(i=0,o=e.length;i<o;i++)n(e[i],i,e);else{var a=t.keys(e);for(i=0,o=a.length;i<o;i++)n(e[a[i]],a[i],e)}return e},t.map=function(e,n,r){void 0===r&&(r=null),n=t.cb(n,r);for(var i=!t.isArrayLike(e)&&t.keys(e),o=(i||e).length,a=Array(o),s=0;s<o;s++){var l=i?i[s]:s;a[s]=n(e[l],l,e)}return a},t.rest=function(e,n,r){return void 0===r&&(r=null),t.slice.call(e,null==n||r?1:n)},t.allKeys=function(e){if(!t.isObject(e))return[];var n=[];for(var r in e)n.push(r);return t.hasEnumBug&&t.collectNonEnumProps(e,n),n},t.isArguments=function(e){return"[object Arguments]"===t.toString.call(e)},t.flatten=function(e,n,r,i){void 0===i&&(i=null);for(var o=[],a=0,s=i||0,l=t.getLength(e);s<l;s++){var u=e[s];if(t.isArrayLike(u)&&(t.isArray(u)||t.isArguments(u))){n||(u=t.flatten(u,n,r));var c=0,h=u.length;for(o.length+=h;c<h;)o[a++]=u[c++]}else r||(o[a++]=u)}return o},t.pick=function(e,n,r){void 0===r&&(r=null);var i,o,a={},s=e;if(null==s)return a;t.isFunction(n)?(o=t.allKeys(s),i=t.optimizeCb(n,r)):(o=t.flatten(arguments,!1,!1,1),i=function(t,e,n){return e in n},s=Object(s));for(var l=0,u=o.length;l<u;l++){var c=o[l],h=s[c];i(h,c,s)&&(a[c]=h)}return a},t.omit=function(e,n,r){if(void 0===r&&(r=null),t.isFunction(n))n=t.negate(n);else{var i=t.map(t.flatten(arguments,!1,!1,1),String);n=function(e,n){return!t.contains(i,n)}}return t.pick(e,n,r)},t.clone=function(e){return t.isObject(e)?t.isArray(e)?e.slice():t.extend({},e):e},t.all=function(e,n,r){void 0===r&&(r=null),n=t.cb(n,r);for(var i=!t.isArrayLike(e)&&t.keys(e),o=(i||e).length,a=0;a<o;a++){var s=i?i[a]:a;if(!n(e[s],s,e))return!1}return!0},t.eq=function(e,n,r,i){if(void 0===r&&(r=null),void 0===i&&(i=null),e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return e===n;e instanceof t&&(e=e._wrapped),n instanceof t&&(n=n._wrapped);var o={}.toString.call(e);if(o!=={}.toString.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n}var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof n)return!1;var s=e.constructor,l=n.constructor;if(s!==l&&!(t.isFunction(s)&&s instanceof s&&t.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in n)return!1}i=i||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return i[u]===n;if(r.push(e),i.push(n),a){if((u=e.length)!==n.length)return!1;for(;u--;)if(!t.eq(e[u],n[u],r,i))return!1}else{var c,h=t.keys(e);if(u=h.length,t.keys(n).length!==u)return!1;for(;u--;)if(c=h[u],!t.has(n,c)||!t.eq(e[c],n[c],r,i))return!1}return r.pop(),i.pop(),!0},t.isEqual=function(e,n){return t.eq(e,n)},t.ArrayProto=Array.prototype,t.ObjProto=Object.prototype,t.FuncProto=Function.prototype,t.push=t.ArrayProto.push,t.slice=t.ArrayProto.slice,t.toString=t.ObjProto.toString,t.hasOwnProperty=t.ObjProto.hasOwnProperty,t.nativeIsArray=Array.isArray,t.nativeKeys=Object.keys,t.nativeBind=t.FuncProto.bind,t.nativeCreate=Object.create,t.extendOwn=t.createAssigner(t.keys),t.extend=t.createAssigner(t.allKeys),t.isMatch=function(e,n){var r=t.keys(n),i=r.length;if(null==e)return!i;for(var o=Object(e),a=0;a<i;a++){var s=r[a];if(n[s]!==o[s]||!(s in o))return!1}return!0},t.MAX_uARRAY_uINDEX=Math.pow(2,53)-1,t.getLength=t.property("length"),t.findIndex=t.createPredicateIndexFinder(1),t.findLastIndex=t.createPredicateIndexFinder(-1),t.hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),t.nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],t.indexOf=t.createIndexFinder(1,t.findIndex,t.sortedIndex),t.has=function(e,n){return null!=e&&t.hasOwnProperty.call(e,n)},t.isArray=t.nativeIsArray||function(t){return"[object Array]"===toString.call(t)},t.negate=function(t){return function(){return!t.apply(this,arguments)}},t.every=t.all,t}();e._u=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommandBase=void 0;var r=function(){function t(t,e){Object.assign(this,t)}return t.prototype.toString=function(){return"[Command (type:"+this.type+")]"},t.prototype.toFrame=function(t){},t}();e.CommandBase=r},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var l,u=[],c=!1,h=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=s(p);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function _(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(116);Object.defineProperty(e,"Game",{enumerable:!0,get:function(){return r.Game}});var i=n(89);Object.defineProperty(e,"FullScreenManager",{enumerable:!0,get:function(){return i.FullScreenManager}});var o=n(187);Object.defineProperty(e,"GameInstanceBase",{enumerable:!0,get:function(){return o.GameInstanceBase}});var a=n(19);Object.defineProperty(e,"SoundManager",{enumerable:!0,get:function(){return a.SoundManager}});var s=n(48);Object.defineProperty(e,"SoundType",{enumerable:!0,get:function(){return s.SoundType}});var l=n(95);Object.defineProperty(e,"SoundItem",{enumerable:!0,get:function(){return l.SoundItem}});var u=n(56);Object.defineProperty(e,"GamepadsManager",{enumerable:!0,get:function(){return u.GamepadsManager}});var c=n(56);Object.defineProperty(e,"GamepadButtonsEnum",{enumerable:!0,get:function(){return c.GamepadButtonsEnum}});var h=n(45);Object.defineProperty(e,"SimpleBaseController",{enumerable:!0,get:function(){return h.SimpleBaseController}});var p=n(45);Object.defineProperty(e,"SimpleLoadingBaseController",{enumerable:!0,get:function(){return p.SimpleLoadingBaseController}}),Object.defineProperty(e,"SimpleSplashScreenBaseController",{enumerable:!0,get:function(){return p.SimpleSplashScreenBaseController}});var f=n(196);Object.defineProperty(e,"ParticlesBaseController",{enumerable:!0,get:function(){return f.ParticlesBaseController}});var d=n(1);Object.defineProperty(e,"List",{enumerable:!0,get:function(){return d.List}}),Object.defineProperty(e,"Enumerable",{enumerable:!0,get:function(){return d.Enumerable}});var _=n(90);Object.defineProperty(e,"Tween",{enumerable:!0,get:function(){return _.Tween}});var y=n(59);Object.defineProperty(e,"Easing",{enumerable:!0,get:function(){return y.Easing}});var m=n(91);Object.defineProperty(e,"Interpolation",{enumerable:!0,get:function(){return m.Interpolation}});var g=n(98);Object.defineProperty(e,"AnimationBaseController",{enumerable:!0,get:function(){return g.AnimationBaseController}});var v=n(98);Object.defineProperty(e,"AnimationLoadingBaseController",{enumerable:!0,get:function(){return v.AnimationLoadingBaseController}}),Object.defineProperty(e,"AnimationSplashScreenBaseController",{enumerable:!0,get:function(){return v.AnimationSplashScreenBaseController}});var A=n(201);Object.defineProperty(e,"DragonBonesBaseController",{enumerable:!0,get:function(){return A.DragonBonesBaseController}}),Object.defineProperty(e,"DragonBonesLoadingBaseController",{enumerable:!0,get:function(){return A.DragonBonesLoadingBaseController}});var b=n(30);Object.defineProperty(e,"EventsTargetTypeEnum",{enumerable:!0,get:function(){return b.EventsTargetTypeEnum}}),Object.defineProperty(e,"EventsTypeEnum",{enumerable:!0,get:function(){return b.EventsTypeEnum}});var T=n(61);Object.defineProperty(e,"AnimationsEventsTypeEnum",{enumerable:!0,get:function(){return T.AnimationsEventsTypeEnum}});var S=n(33);Object.defineProperty(e,"ResourceItem",{enumerable:!0,get:function(){return S.ResourceItem}}),Object.defineProperty(e,"DragonBonesResourceItem",{enumerable:!0,get:function(){return S.DragonBonesResourceItem}}),Object.defineProperty(e,"SpineResourceItem",{enumerable:!0,get:function(){return S.SpineResourceItem}}),Object.defineProperty(e,"ResourceItemType",{enumerable:!0,get:function(){return S.ResourceItemType}}),Object.defineProperty(e,"FontResourceItem",{enumerable:!0,get:function(){return S.FontResourceItem}}),Object.defineProperty(e,"JsonResourceItem",{enumerable:!0,get:function(){return S.JsonResourceItem}}),Object.defineProperty(e,"ImageResourceItem",{enumerable:!0,get:function(){return S.ImageResourceItem}}),Object.defineProperty(e,"PixiTextureResourceItem",{enumerable:!0,get:function(){return S.PixiTextureResourceItem}});var P=n(87);Object.defineProperty(e,"Key",{enumerable:!0,get:function(){return P.Key}});var w=n(32);Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return w.Queue}});var E=n(16);Object.defineProperty(e,"GameApiBase",{enumerable:!0,get:function(){return E.GameApiBase}});var O=n(28);Object.defineProperty(e,"GameStorageManager",{enumerable:!0,get:function(){return O.GameStorageManager}});var C=n(12);Object.defineProperty(e,"ScreenOrientationEnum",{enumerable:!0,get:function(){return C.ScreenOrientationEnum}});var x=n(96);Object.defineProperty(e,"ModelEvents",{enumerable:!0,get:function(){return x.ModelEvents}});var M=n(80);Object.defineProperty(e,"DragonBonesSlot",{enumerable:!0,get:function(){return M.Slot}});var D=n(61);Object.defineProperty(e,"SpriteTypeEnum",{enumerable:!0,get:function(){return D.SpriteTypeEnum}});var I=n(21);Object.defineProperty(e,"AnimationClipContainer",{enumerable:!0,get:function(){return I.AnimationClipContainer}});var R=n(22);Object.defineProperty(e,"Environment",{enumerable:!0,get:function(){return R.Environment}}),Object.defineProperty(e,"EnvironmentTypeEnum",{enumerable:!0,get:function(){return R.EnvironmentTypeEnum}});var B=n(0);Object.defineProperty(e,"Singleton",{enumerable:!0,get:function(){return B.Singleton}}),Object.defineProperty(e,"Inject",{enumerable:!0,get:function(){return B.Inject}}),Object.defineProperty(e,"Provided",{enumerable:!0,get:function(){return B.Provided}}),Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return B.Scope}}),Object.defineProperty(e,"Scoped",{enumerable:!0,get:function(){return B.Scoped}});var N=n(42);Object.defineProperty(e,"DevicePixelRatio",{enumerable:!0,get:function(){return N.DevicePixelRatio}});var L=n(86);Object.defineProperty(e,"MultiStyleText",{enumerable:!0,get:function(){return L.MultiStyleText}});var k=n(207);Object.defineProperty(e,"DateUtils",{enumerable:!0,get:function(){return k.DateUtils}});var F=n(49);Object.defineProperty(e,"GameRandom",{enumerable:!0,get:function(){return F.GameRandom}});var j=n(3);Object.defineProperty(e,"_u",{enumerable:!0,get:function(){return j._u}});var G=n(44);Object.defineProperty(e,"RootHtml",{enumerable:!0,get:function(){return G.RootHtml}});var V=n(24);Object.defineProperty(e,"MultiplayerPlayer",{enumerable:!0,get:function(){return V.MultiplayerPlayer}});var H=n(208);Object.defineProperty(e,"Multiplayer",{enumerable:!0,get:function(){return H.Multiplayer}});var U=n(111);Object.defineProperty(e,"MultiplayerClientTraceEventsEnum",{enumerable:!0,get:function(){return U.MultiplayerClientTraceEventsEnum}});var X=n(62);Object.defineProperty(e,"LobbyManager",{enumerable:!0,get:function(){return X.LobbyManager}});var W=n(99);Object.defineProperty(e,"LobbyPlayerIOManager",{enumerable:!0,get:function(){return W.LobbyPlayerIOManager}});var z=n(47);Object.defineProperty(e,"MultiplayerClient",{enumerable:!0,get:function(){return z.MultiplayerClient}});var Y=n(239);Object.defineProperty(e,"MultiplayerModelConnectorClient",{enumerable:!0,get:function(){return Y.MultiplayerModelConnectorClient}}),Object.defineProperty(e,"MultiplayerModelConnectorServer",{enumerable:!0,get:function(){return Y.MultiplayerModelConnectorServer}}),Object.defineProperty(e,"MultiplayerModelConnector",{enumerable:!0,get:function(){return Y.MultiplayerModelConnector}});var q=n(58);Object.defineProperty(e,"MobileManager",{enumerable:!0,get:function(){return q.MobileManager}}),Object.defineProperty(e,"MobileWrapperPlatform",{enumerable:!0,get:function(){return q.MobileWrapperPlatform}}),Object.defineProperty(e,"MobileWrapperLogType",{enumerable:!0,get:function(){return q.MobileWrapperLogType}});var K=n(240);Object.defineProperty(e,"GameCenter",{enumerable:!0,get:function(){return K.GameCenter}}),Object.defineProperty(e,"GameCenterPlayer",{enumerable:!0,get:function(){return K.GameCenterPlayer}}),Object.defineProperty(e,"GameCenterPlayerSighInStatusEnum",{enumerable:!0,get:function(){return K.GameCenterPlayerSighInStatusEnum}});var Q=n(241);Object.defineProperty(e,"Three3DBaseController",{enumerable:!0,get:function(){return Q.Three3DBaseController}});var $=n(243);Object.defineProperty(e,"Analytic",{enumerable:!0,get:function(){return $.Analytic}});var J=n(41);Object.defineProperty(e,"AnalyticResources",{enumerable:!0,get:function(){return J.AnalyticResources}});var Z=n(112);Object.defineProperty(e,"AnalyticProviderEnum",{enumerable:!0,get:function(){return Z.AnalyticProviderEnum}});var tt=n(249);Object.defineProperty(e,"ModuleBaseController",{enumerable:!0,get:function(){return tt.ModuleBaseController}});var et=n(250);Object.defineProperty(e,"GameModule",{enumerable:!0,get:function(){return et.GameModule}});var nt=n(57);Object.defineProperty(e,"GameModulesFactory",{enumerable:!0,get:function(){return nt.GameModulesFactory}});var rt=n(66);Object.defineProperty(e,"CollisionBody",{enumerable:!0,get:function(){return rt.CollisionBody}});var it=n(113);Object.defineProperty(e,"CollisionBVH",{enumerable:!0,get:function(){return it.CollisionBVH}});var ot=n(114);Object.defineProperty(e,"CollisionCircle",{enumerable:!0,get:function(){return ot.CollisionCircle}});var at=n(252);Object.defineProperty(e,"Collisions",{enumerable:!0,get:function(){return at.Collisions}});var st=n(115);Object.defineProperty(e,"CollisionPoint",{enumerable:!0,get:function(){return st.CollisionPoint}});var lt=n(69);Object.defineProperty(e,"CollisionPolygon",{enumerable:!0,get:function(){return lt.CollisionPolygon}});var ut=n(67);Object.defineProperty(e,"CollisionResult",{enumerable:!0,get:function(){return ut.CollisionResult}});var ct=n(68);Object.defineProperty(e,"CollisionSAT",{enumerable:!0,get:function(){return ct.CollisionSAT}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GamePerformance=e.GamePerformanceMethod=void 0;var r=0;e.GamePerformanceMethod=function(t,e){return function(n,o,a){var s=a.value;return a.value=function(){var n=this,a=arguments;if(!i._enabled)return s.apply(n,a);r++;var l=performance.now(),u=s.apply(n,a),c=performance.now(),h=c-l;if(h>i.delay){switch(h=Math.round(100*h)/100,t){case"ModelWatchEvent":"background: #222; color: #99f",console.log("-".repeat(r)+" MODEL |"+h+" "+e+" "+n._viewName+" "+n.name+" "+a[0]+" => "+a[1]);break;case"AnimationBaseController":console.log("-".repeat(r)+" AN VIEW |"+h+" "+n.name+" "+n.locator+" => "+e),"_initializeChild"==o?console.log("-".repeat(r)+" CHILD = "+a[1].name):"_addChild"==o?console.log("-".repeat(r)+" CHILD = "+a[1]):"_removeChild"==o&&console.log("-".repeat(r)+" CHILD = "+a[0].name);break;case"_BaseController":console.log("-".repeat(r)+" VIEW |"+h+" "+n.name+" "+n.locator+" => "+e),"_initializeChild"==o?console.log("-".repeat(r)+" CHILD = "+a[1].name):"_addChild"==o?console.log("-".repeat(r)+" CHILD = "+a[1]):"_removeChild"==o&&console.log("-".repeat(r)+" CHILD = "+a[0].name);break;case"Tween":console.log("-".repeat(r)+" TWEEN|"+h+" "+e);break;case"Queue":"background: #222; color: #B200FF",console.log("-".repeat(r)+" QUEUE|"+h+" "+e);break;case"GameInstanceBase":"background: #222; color: #FFB01E",console.log("-".repeat(r)+" QUEUE|"+h+" "+e);break;case"ResourcesLoader":"background: #222; color: #4CB6FF",console.log("-".repeat(r)+" RES  |"+h+" "+e+"-"+a[0]);break;case"PixiAnimationLoader":"background: #222; color: #4CB6FF",console.log("-".repeat(r)+" AN LOAD  |"+h+" "+o+"="+a[0]);break;case"AnimationClipChildFactory":"background: #222; color: #4CB6FF";var p=n._instance.name;n._instance.libraryItem&&(p=n._instance.libraryItem.name),console.log("-".repeat(r)+" AN CHILD FACTORY  |"+h+" "+o+"|"+n._factory.name+" "+p);break;case"AnimationClipFactory":"background: #222; color: #4CB6FF";var f=n.name;console.log("-".repeat(r)+" AN MOVIE CLIP FACTORY  |"+h+" "+o+"|"+f);break;case"AnimationClip":"_stopAll"==o?console.log("-".repeat(r)+" AN |"+h+" "+o+" "+a[0].name):"gotoAndPlayAll"==o?console.log("-".repeat(r)+" AN |"+h+" "+o+" "+n.name+" | "+a[0]):"gotoAndStopAll"==o||"gotoAndStop"==o?console.log("-".repeat(r)+" AN |"+h+" "+o+" "+n.name+" |"+a[0]):"addTimedChild"==o?console.log("-".repeat(r)+" AN |"+h+" "+o+" "+n.name+" |"+a[0].name+" f:"+a[1]+" d:"+a[2]):"_setTimelinePosition"==o?console.log("-".repeat(r)+" AN |"+h+" "+o+" "+n.name):console.log("-".repeat(r)+" AN |"+h+" "+o);break;default:console.log("-".repeat(r)+" ??? |"+h+" "+e)}}return r--,u},a}};var i=function(){function t(){}return t.enabled=function(e){t._enabled=e},t.delay=1,t._enabled=!1,t}();e.GamePerformance=i},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseControllerEmptyLogger=void 0;var i=n(0),o=function(){function t(){}return t.prototype.log=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i]},t.prototype.error=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i]},t.prototype.warn=function(t,e,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o]},t=r([i.Singleton],t)}();e.BaseControllerEmptyLogger=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=void 0;var r=function(){function t(t,e,n,r,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===o&&(o=1),this.x=t,this.y=e,this.skew=n,this.rotation=r,this.scaleX=i,this.scaleY=o}return t.normalizeRadian=function(t){return t=(t+Math.PI)%(2*Math.PI),t+=t>0?-Math.PI:Math.PI},t.prototype.toString=function(){return"[object dragonBones.Transform] x:"+this.x+" y:"+this.y+" skewX:"+180*this.skew/Math.PI+" skewY:"+180*this.rotation/Math.PI+" scaleX:"+this.scaleX+" scaleY:"+this.scaleY},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.skew=t.skew,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this},t.prototype.identity=function(){return this.x=this.y=0,this.skew=this.rotation=0,this.scaleX=this.scaleY=1,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.skew+=t.skew,this.rotation+=t.rotation,this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this},t.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this.skew-=t.skew,this.rotation-=t.rotation,this.scaleX/=t.scaleX,this.scaleY/=t.scaleY,this},t.prototype.fromMatrix=function(e){var n=this.scaleX,r=this.scaleY,i=t.PI_Q;this.x=e.tx,this.y=e.ty,this.rotation=Math.atan(e.b/e.a);var o=Math.atan(-e.c/e.d);return this.scaleX=this.rotation>-i&&this.rotation<i?e.a/Math.cos(this.rotation):e.b/Math.sin(this.rotation),this.scaleY=o>-i&&o<i?e.d/Math.cos(o):-e.c/Math.sin(o),n>=0&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.rotation=this.rotation-Math.PI),r>=0&&this.scaleY<0&&(this.scaleY=-this.scaleY,o-=Math.PI),this.skew=o-this.rotation,this},t.prototype.toMatrix=function(t){return 0===this.rotation?(t.a=1,t.b=0):(t.a=Math.cos(this.rotation),t.b=Math.sin(this.rotation)),0===this.skew?(t.c=-t.b,t.d=t.a):(t.c=-Math.sin(this.skew+this.rotation),t.d=Math.cos(this.skew+this.rotation)),1!==this.scaleX&&(t.a*=this.scaleX,t.b*=this.scaleX),1!==this.scaleY&&(t.c*=this.scaleY,t.d*=this.scaleY),t.tx=this.x,t.ty=this.y,this},t.PI=Math.PI,t.PI_D=2*Math.PI,t.PI_H=Math.PI/2,t.PI_Q=Math.PI/4,t.RAD_DEG=180/Math.PI,t.DEG_RAD=Math.PI/180,t}();e.Transform=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Instance=void 0;var o=n(152),a=n(164),s=n(15),l=n(38),u=function(t){function e(e,n){var r=t.call(this)||this;return r.id=n,r.localName="instance"+n,r.instanceName=null,r.startFrame=0,r.endFrame=-1,r.libraryItem=e,r.initFrame=null,r.placeAfter=0,r.frames={},r.loop=!1,r.renderable=!0,r.isAnimationd=!1,r}return i(e,t),e.prototype.addToFrame=function(t,e){"Place"==(e=o.CommandFactory.create(e)).type?(this.loop=!!e.loop,this.startFrame=t,!this.instanceName&&e.instanceName&&(this.instanceName=e.instanceName),this.placeAfter=e.placeAfter):"Remove"==e.type?this.endFrame=t:"Mask"==e.type&&(this.maskTill=e.maskTill);var n=this.frames[t];n||(n=this.frames[t]=new a.Frame),n.addCommand(e),Object.keys(n).length?this.initFrame||(this.initFrame=n):delete this.frames[t],Object.keys(this.frames).length>1&&(this.isAnimationd=!0)},e.prototype.getDuration=function(t){return this.endFrame>0?this.endFrame-this.startFrame:t-this.startFrame},e.prototype.getFrames=function(){var t,e=this;if(!this.isAnimationd)return null;var n=a.Frame.DEFAULT_VALUES,r=Object.keys(n),i=[],o=function(o){var a=l.frames[o],s=Object.assign({},n,a.toJSON());if(!t)return t=a,a.validKeys.forEach((function(t){e.equals(n[t],a[t])||i.push(t)})),n=s,"continue";for(var u=0,c=r.length;u<c;u++){var h=r[u];l.equals(n[h],a[h])&&(a[h]=null)}var p=a.validKeys;if(p.length)for(u=0;u<p.length;u++){h=p[u];-1==i.indexOf(h)&&i.push(h)}else delete l.frames[o];n=s},l=this;for(var u in this.frames)o(u);return t.clean(i),t.hasValues?(s.DataUtils.optimizeColorTransforms(this.frames),this.frames):null},e.prototype.equals=function(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(!Array.isArray(t))return t===e;for(var n=0;n<t.length;n++)if(!this.equals(t[n],e[n]))return!1;return!0},e.prototype.buildContent=function(t,e,n){throw void 0===e&&(e=!1),"Must override"},e.prototype.render=function(t){var e=new l.AnimationClipChildFactory(this,t);t._children[this.localName]=e,!this.isAnimationd&&this.initFrame&&this.initFrame.render(e)},e}(function(){function t(){this.events={}}return t.prototype.on=function(t,e){var n=this;return"object"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e),function(){return n.removeListener(t,e)}},t.prototype.removeListener=function(t,e){if("object"==typeof this.events[t]){var n=this.events[t].indexOf(e);n>-1&&this.events[t].splice(n,1)}},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];"object"==typeof this.events[t]&&this.events[t].forEach((function(t){return t.apply(e,n)}))},t.prototype.once=function(t,e){var n=this,r=this.on(t,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];r(),e.apply(n,t)}))},t}());e.Instance=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScreenOrientationEnum=void 0,function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape",t[t.PortraitAndLandscape=2]="PortraitAndLandscape"}(e.ScreenOrientationEnum||(e.ScreenOrientationEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.expandFunc=void 0;var r=n(3);e.expandFunc=function(t,e){if("string"==typeof t){var n=t.split(/([.-].*)/);return n.length>1?function(t,e,n,i){void 0===i&&(i=null);var o="string"==typeof t,a="number"==typeof e||null==e;return null==e&&(e=1),i||(i=[]),a||(e=e.replace(/\./g,(function(t,e){return e>8?"-":e+1})).replace(/[^1-9.\-]+/g,"-").replace(/-+$/,"")),function(){for(var s=n||this,l=a?i.concat(r._u.rest(arguments,e)):i.concat(),u=0;u<e.length;u++)"-"!=e[u]&&l.push(arguments[e[u]-1]);return(o?s[t]:t).apply(s,l)}}(n[0],n[1],e):function(){var n=e||this;return n[t].apply(n,arguments)}}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LibraryItem=void 0;var r=function(){function t(t,e){Object.assign(this,e),this.library=t}return t.prototype.create=function(t){throw"Must override"},t}();e.LibraryItem=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataUtils=void 0;var r=function(){function t(){}return t.toPrecision=function(t,e){void 0===e&&(e=null),e=e||2;var n=Math.pow(10,e);return Math.round(t*n)/n},t.stringifySimple=function(t){return JSON.stringify(t,null,"  ").replace(/\"([^(\")"\d\s\-]+)\":/g,"$1:")},t.readableShapes=function(t){return JSON.stringify(t).replace("{","{\n  ").replace("]}","\n  ]\n}").replace(/\:/g,": ").replace(/,/g,", ").replace(/(\"[a-z])/g,"\n    $1").replace(/\],/g,"],\n  ")},t.compressColors=function(t){return t.replace(/([a-f0-9])\1([a-f0-9])\2([a-f0-9])\3/,"$1$2$3")},t.simpleTint=function(t){if(0===t[1]&&0===t[3]&&0===t[5]&&t[0]>=0&&t[2]>=0&&t[4]>=0){var e=Math.round(255*t[0]),n=Math.round(255*t[2]),r="#"+((1<<24)+(e<<16)+(Math.round(255*t[4])<<8)+n).toString(16).slice(1);return this.compressColors(r)}return null},t.optimizeColorTransforms=function(t){var e={};for(var n in t){if(!(i=t[n]).c)return;var r=this.simpleTint(t[n].c);if(null===r)return;e[n]=r}for(var n in t){var i;delete(i=t[n]).c,i.t=e[n]}},t}();e.DataUtils=r},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GameApiBase=void 0;var o=n(7),a=function(){function t(){this._needStartMusic=!1,this._needStartSound=!1}return t.prototype._soundOff=function(){this._soundManager&&(this._soundManager.data.musicOn&&(this._needStartMusic=!0,this._soundManager.muteSoundsByType(!0,o.SoundType.Music)),this._soundManager.data.soundOn&&(this._needStartSound=!0,this._soundManager.muteSoundsByType(!0,o.SoundType.SFX)))},t.prototype._soundOn=function(){this._soundManager&&(this._needStartMusic&&(this._needStartMusic=!1,this._soundManager.muteSoundsByType(!1,o.SoundType.Music)),this._needStartSound&&(this._needStartSound=!1,this._soundManager.muteSoundsByType(!1,o.SoundType.SFX)))},t.prototype._gup=function(t,e){void 0===e&&(e=null),e||(e=location.href),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==n?null:n[1]},t.prototype.initializeABTest=function(t){},t.prototype.registerActions=function(t){},t.prototype.handleGameStart=function(){},t.prototype.handleEventChange=function(){},t.prototype.changeScore=function(t){},t.prototype.handleCustomEvent=function(t,e){},t.prototype.shouldShowInternalGameEnd=function(){return!1},t.prototype.absoluteURL=function(t){return""},t.prototype.handleGameEnd=function(){},t.prototype.setSoundManager=function(t){this._soundManager=t},t.prototype.getPlatform=function(){return""},t.prototype.getArenaName=function(){return"localhost"},t.prototype.getGameConfigUrl=function(){return""},t.prototype.getParam=function(t,e){return e},t.prototype.setArenaName=function(t){},t.prototype.advShowInterstitial=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2]}))}))},t.prototype.advShowReward=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2,!1]}))}))},t.prototype.advRewardAvailable=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2,!1]}))}))},t.prototype.advInterstitialAvailable=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2,!1]}))}))},t}();e.GameApiBase=a},function(t,e,n){"use strict";var r={};function i(t,e,n){n||(n=Error);var i=function(t){var n,r;function i(n,r,i){return t.call(this,function(t,n,r){return"string"==typeof e?e:e(t,n,r)}(n,r,i))||this}return r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=t,r[t]=i}function o(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return String(t)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,n){var r,i,a,s;if("string"==typeof e&&(i="not ",e.substr(!a||a<0?0:+a,i.length)===i)?(r="must not be",e=e.replace(/^not /,"")):r="must be",function(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}(t," argument"))s="The ".concat(t," ").concat(r," ").concat(o(e,"type"));else{var l=function(t,e,n){return"number"!=typeof n&&(n=0),!(n+e.length>t.length)&&-1!==t.indexOf(e,n)}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(l," ").concat(r," ").concat(o(e,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},function(t,e,n){"use strict";(function(e){var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=u;var i=n(102),o=n(107);n(27)(u,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var l=a[s];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(t){if(!(this instanceof u))return new u(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||e.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,n(5))},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.SoundManager=void 0;var o=n(122),a=n(0),s=n(48),l=n(124),u=n(28),c=n(9),h=function(){function t(){this._soundStorageKey="sound-settings",this._sounds=[],this._soundController=new o.SoundController,this._storageManager=a.Container.get(u.GameStorageManager),this.subscribe()}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"musicOn",{get:function(){return this._data.musicOn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"soundOn",{get:function(){return this._data.soundOn},enumerable:!1,configurable:!0}),t.prototype.setMasterVolume=function(t){this._soundController.setMasterVolume(t)},t.prototype.getMasterVolume=function(){return this._soundController.getMasterVolume()},t.prototype.reload=function(t,e){if(this.isAdded(t)){var n=this.getSoundById(t);n.item.unload(),n.item=this._soundController.load(e),n.item.load()}else this._sounds.push({id:t,item:this._soundController.load(e),type:0,delay:1e3});this._soundController.updateMasterVolume()},t.prototype.play=function(t,e,n){void 0===n&&(n=null);var r=this.getSoundById(t);r&&(r.type==s.SoundType.Music&&this._data.musicOn||r.type==s.SoundType.SFX&&this._data.soundOn)&&(r.item.loop(e),null!==n&&r.item.volume(n),r.item.play())},t.prototype.pause=function(t){var e=this.getSoundById(t);e&&e.item.pause()},t.prototype.playSound=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=null);var r=this.getSoundById(t);r&&r.type==s.SoundType.SFX&&this._data.soundOn&&r.delay>=e&&(r.delay=0,r.item.loop(!1),null!==n&&r.item.volume(n),r.item.play())},t.prototype.stop=function(t){var e=this.getSoundById(t);e&&e.item.stop()},t.prototype.changeVolume=function(t,e){var n=this.getSoundById(t);n&&n.item.volume(e)},t.prototype.stopAll=function(){for(var t=0,e=this._sounds;t<e.length;t++){var n=e[t];n.item.loop(!1),n.item.stop()}},t.prototype.muteSoundsByType=function(t,e){switch(e){case s.SoundType.ALL:this._data.soundOn=!t,this._data.musicOn=!t;break;case s.SoundType.SFX:this._data.soundOn=!t;break;case s.SoundType.Music:this._data.musicOn=!t}this.saveData(),this.muteSoundsByTypeInternal(t,e)},t.prototype.muteSoundsByTypeInternal=function(t,e){for(var n=0,r=e==s.SoundType.ALL?this._sounds:this.getSoundsByType(e);n<r.length;n++){r[n].item.mute(t)}},t.prototype.loadSound=function(t,e,n){this.isAdded(t)||(this._sounds.push({id:t,item:this._soundController.load(this.getUrlById(t)),type:e,delay:1e3}),this._logger.log(n,"LoadSound",t),this._soundController.updateMasterVolume())},t.prototype.isSoundPlaying=function(t){var e=this.getSoundById(t);return e&&e.item.playing()},t.prototype.loadData=function(t,e,n){void 0===n&&(n="sound-settings"),this._config=t,this._cdnUrl=e,this._soundStorageKey=n;var r=this._storageManager.loadData(this._soundStorageKey);this._data=r?JSON.parse(r):new l.SoundData},t.prototype.saveData=function(){this._storageManager.saveData(this._soundStorageKey,JSON.stringify(this._data))},t.prototype.isAdded=function(t){return null!=this._sounds.filter((function(e){return e.id==t}))[0]},t.prototype.isLoaded=function(t){if(this.isAdded(t)&&"loaded"==this.getSoundById(t).item.state())return!0;return!1},t.prototype.getSoundById=function(t){return this._sounds.filter((function(e){return e.id==t}))[0]},t.prototype.getSoundsByType=function(t){return this._sounds.filter((function(e){return e.type==t}))},t.prototype.getUrlById=function(t){var e=this._config.filter((function(e){return e.id==t}))[0].path;return""+this._cdnUrl+e},t.prototype.subscribe=function(){var t=this;document.addEventListener("visibilitychange",(function(){t.windowFocusChanged(document.hidden)})),window.addEventListener("focus",(function(){t.windowFocusChanged(!1)}),!1),window.addEventListener("blur",(function(){t.windowFocusChanged(!0)}),!1),window.onpageshow=function(){t.windowFocusChanged(!1)},window.onpagehide=function(){t.windowFocusChanged(!0)},window.onfocus=function(){t.windowFocusChanged(!1)},window.onblur=function(){t.windowFocusChanged(!0)}},t.prototype.windowFocusChanged=function(t){this._data&&this._data.soundOn&&this.muteSoundsByTypeInternal(t,s.SoundType.SFX),this._data&&this._data.musicOn&&this.muteSoundsByTypeInternal(t,s.SoundType.Music)},t.prototype.update=function(t){for(var e=0;e<this._sounds.length;e++){this._sounds[e].delay+=t}},r([a.Inject,i("design:type",u.GameStorageManager)],t.prototype,"_storageManager",void 0),r([a.Inject,i("design:type",c.BaseControllerEmptyLogger)],t.prototype,"_logger",void 0),t=r([a.Singleton,i("design:paramtypes",[])],t)}();e.SoundManager=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.EventObject=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.actionDataToInstance=function(t,n,r){0===t.type?n.type=e.FRAME_EVENT:n.type=10===t.type?e.FRAME_EVENT:e.SOUND_EVENT,n.name=t.name,n.armature=r,n.actionData=t,n.data=t.data,null!==t.bone&&(n.bone=r.getBone(t.bone.name)),null!==t.slot&&(n.slot=r.getSlot(t.slot.name))},e.toString=function(){return"[class dragonBones.EventObject]"},e.prototype._onClear=function(){this.time=0,this.type="",this.name="",this.armature=null,this.bone=null,this.slot=null,this.animationState=null,this.actionData=null,this.data=null},e.START="start",e.LOOP_COMPLETE="loopComplete",e.COMPLETE="complete",e.FADE_IN="fadeIn",e.FADE_IN_COMPLETE="fadeInComplete",e.FADE_OUT="fadeOut",e.FADE_OUT_COMPLETE="fadeOutComplete",e.FRAME_EVENT="frameEvent",e.SOUND_EVENT="soundEvent",e}(n(2).BaseObject);e.EventObject=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationClipContainer=void 0;var a=n(53),s=n(7),l=function(t){function e(e){var n=t.call(this)||this;return n._instanceId=0,n.___scripts=[],n.___children=[],n.__destroyed=!1,n._removeChildrenMask=function(t){for(var e=0;e<n.children.length;e++){var r=n.children[e];r.mask==t&&(r.mask=null)}},n}return i(e,t),e.prototype.update=function(t){for(var n=0;n<this.children.length;n++)this.children[n]instanceof e&&this.children[n].update(t);this._applyChildrenSorted()},e.prototype._applyChildrenSorted=function(){var t=this;if(this.__childrenSorted){var e=null==this.__oldChildrenSorted;if(e||(e=this.__oldChildrenSorted.length!=this.__childrenSorted.length),!e)for(var n=0;n<this.__childrenSorted.length&&!(e=this.__oldChildrenSorted[n]!=this.__childrenSorted[n]);n++);if(e){var r=new PIXI.DisplayObject,i=function(){for(var e=t.children.indexOf(r);e<t.children.length;e++){var n=t.children[e];t.swapChildren(r,n)}};this.addChild(r);for(n=0;n<this.__childrenSorted.length;n++){var o=this.__childrenSorted[n];this.swapChildren(r,o),i()}this.removeChild(r)}this.__oldChildrenSorted=this.__childrenSorted,this.__childrenSorted=null}},e.prototype.renderOrderedItems=function(t){var e=this,n=function(t,n,r){for(;!(t instanceof PIXI.Graphics||t instanceof PIXI.Sprite);){if(!(t.children&&t.children.length>0)){t=null;break}t=t.children[0]}for(var i=n-1;i>=0;i--){var o=e.children[i];if(o.mask=t,o._instanceId==r)return}},r=function(e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i._placeAfter==e)return t.splice(n,1),i}return null},i=function(t){for(var n=0;n<e.children.length;n++){if(e.children[n]._instanceId==t)return n}return-1},o=r(0);o&&(0==this.children.length?this.addChild(o):this.addChildAt(o,this.children.length),o.mode===a.AnimationClip.INDEPENDENT&&o.autoReset&&o._reset());for(var s=0;s<this.children.length;){var l=r(this.children[s]._instanceId);l?(0==this.children.length?this.addChild(l):this.addChildAt(l,s),s=0):s++}for(var u=0;u<t.length;){var c=t[u],h=i(c._placeAfter);h>=0?(0==this.children.length?this.addChild(c):this.addChildAt(c,h),t.splice(u,1),u=0):u++}for(u=0;u<t.length;){var p=t[u];this.addChild(p),t.splice(u,1),u=0}for(var f=0;f<this.children.length;f++){var d=this.children[f];d._maskTill>0&&n(d,f,d._maskTill)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e)},e.prototype.getChild=function(t,e,n){void 0===n&&(n=0);for(var r=e.___children,i=[],o=0;o<r.length;o++)if(r[o].name==t[n]){var a=r[o];t.length<=n+1?i.push(a):i=i.concat(this.getChild(t,a,n+1))}return i},e.prototype.gotoAndPlayChild=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!0);for(var i=t.split("."),o=this.getChild(i,this),a=0;a<o.length;a++){var s=o[a];if(s.loop=n,s.gotoAndPlay(e),r){var l=s._labelDict[e]||e;if(s.___children&&s.___children.length)for(var u=s.___children,c=0;c<u.length;c++){var h=u[c];h.gotoAndPlay&&(h.loop=n,h.gotoAndPlay(l)),this._gotoAndPlayAllChildren(l,h,null,n)}}}},e.prototype._gotoAndPlayAllChildren=function(t,e,n,r){if(void 0===r&&(r=!1),e.___children&&e.___children.length)for(var i=e.___children,o=function(e){var o=i[e];if(o.gotoAndPlay){if(n&&n.any((function(t){return t!=o.name})))return"continue";o.loop=r,o.gotoAndPlay(t)}a._gotoAndPlayAllChildren(t,o)},a=this,s=0;s<i.length;s++)o(s)},e.prototype.gotoAndStopAllChild=function(t){void 0===t&&(t=0),this._gotoAndStopAllChildren(t,this)},e.prototype.gotoAndStopChild=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);for(var r=t.split("."),i=this.getChild(r,this),o=0;o<i.length;o++){var a=i[o];if(a.gotoAndStop(e),n){var s=a._labelDict[e]||e;if(a.___children&&a.___children.length)for(var l=a.___children,u=0;u<l.length;u++){var c=l[u];c.gotoAndStop&&c.autoReset&&c.gotoAndStop(s),this._gotoAndStopAllChildren(s,c)}}}},e.prototype.getChildByQuery=function(t){var e=t.split(".");return this.getChild(e,this)},e.prototype.autoResetChild=function(t,e){for(var n=t.split("."),r=this.getChild(n,this),i=0;i<r.length;i++){r[i].autoReset=e}},e.prototype.loopChild=function(t,e){for(var n=t.split("."),r=this.getChild(n,this),i=0;i<r.length;i++){r[i].loop=e}},e.prototype.visibleChild=function(t,e){for(var n=t.split("."),r=this.getChild(n,this),i=0;i<r.length;i++){r[i].visible=e}},e.prototype.setTextChild=function(t,e){for(var n=t.split("."),r=this.getChild(n,this),i=0;i<r.length;i++){r[i].text=e}},e.prototype.setTextVerticalAlignChild=function(t,e){for(var n=t.split("."),r=this.getChild(n,this),i=0;i<r.length;i++){r[i].vAlign=e}},e.prototype.setTextStyleChild=function(t,e,n){for(var r=t.split("."),i=this.getChild(r,this),a=function(t){var r=i[t],a=r.textStyles.default||{};n&&s._u.each(n,(function(t,e){r.textStyles[e]=t}),l),r.textStyles.default=o(o({},a),e),r.dirty=!0,r.updateStyles()},l=this,u=0;u<i.length;u++)a(u)},e.prototype.setChildScale=function(t,e,n){for(var r=t.split("."),i=this.getChild(r,this),o=0;o<i.length;o++){i[o].scale.set(e,n)}},e.prototype.setChildPosX=function(t,e){for(var n=t.split("."),r=this.getChild(n,this),i=0;i<r.length;i++){r[i].x=e}},e.prototype.setChildPosY=function(t,e){for(var n=t.split("."),r=this.getChild(n,this),i=0;i<r.length;i++){r[i].y=e}},e.prototype.setChildPos=function(t,e,n){for(var r=t.split("."),i=this.getChild(r,this),o=0;o<i.length;o++){var a=i[o];a.x=e,a.y=n}},e.prototype.rotateAnimationClipChild=function(t,e){for(var n=t.split("."),r=this.getChild(n,this),i=0;i<r.length;i++){r[i].rotation=e}},e.prototype._gotoAndStopAllChildren=function(t,e){if(e.___children&&e.___children.length)for(var n=e.___children,r=0;r<n.length;r++){var i=n[r];i.gotoAndStop&&(i.gotoAndStop(t),this._gotoAndStopAllChildren(t,i))}},e.prototype.setDuration=function(t){if(this.___children&&this.___children.length)for(var e=this.___children,n=0;n<e.length;n++){var r=e[n];r.setDuration&&r.setDuration(t)}},e.prototype.setFramerate=function(t){if(this.___children&&this.___children.length)for(var e=this.___children,n=0;n<e.length;n++){var r=e[n];r.setFramerate&&r.setFramerate(t)}},e.prototype.onEvent=function(t,e,n){this.__$eventListeners_=this.__$eventListeners_||{},this.__$eventListeners_[t]=this.__$eventListeners_[t]||[],this.__$eventListeners_[t].push({callback:e,context:n||this})},e.prototype.offEvent=function(t,e){this.__$eventListeners_=this.__$eventListeners_||{};for(var n=this.__$eventListeners_[t]||[],r=0;r<n.length;r++)if(n[r].callback===e)return void n.splice(r,1)},e.prototype.triggerEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.__$eventListeners_=this.__$eventListeners_||{};for(var r=this.__$eventListeners_[t]||[],i=0;i<r.length;i++)r[i].callback.apply(r[i].context,Array.prototype.slice.call(arguments,1))},e}(PIXI.Container);e.AnimationClipContainer=l},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.Environment=e.EnvironmentTypeEnum=void 0,function(t){t[t.pc=2]="pc",t[t.tablet=4]="tablet",t[t.phone=8]="phone"}(r=e.EnvironmentTypeEnum||(e.EnvironmentTypeEnum={}));var i=function(){function t(){}return t.type=r.pc,t}();e.Environment=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},a=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e._BaseController=void 0;var h=n(1),p=n(9),f=n(54),d=n(32),_=n(92),y=n(192),m=n(193),g=n(0),v=n(19),A=n(94),b=n(31),T=n(3),S=n(33),P=n(43),w=n(95),E=n(194),O=n(93),C=n(195),x=n(96),M=n(8),D=n(57),I=function(t){function e(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t.call(this)||this;return i.name=e,i.__queue=new d.Queue,i.__resources=[],i.disposed=!1,i._loadingBlockUI=!0,i._initialized=!1,i._contentLoaded=!1,i._parentContainer=null,i.$childControllers=new _.ChildControllers,i.$resources=new y.ResourcesList,i.$queue=new O.QueueList,i.resourcesLoaderUpdate=!1,i.gameBase=null,i._soundManager=g.Container.get(v.SoundManager),i._watchObject=g.Container.get(A.WatchObject),i._keyboardManager=g.Container.get(f.KeyboardManager),i._renderer=g.Container.get(P.PIXIRenderer),i._logger=g.Container.get(p.BaseControllerEmptyLogger),i._modelEvents=g.Container.get(x.ModelEvents),i.$modelWatches=new m.ModelWatchesList(i._watchObject),i.$keyboard=new E.KeyboardItemsList(i._keyboardManager,i._logger),i.$modelEvents=new C.ModelEventsList(i._modelEvents),i}return i(e,t),e.prototype.error=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];(n=this._logger).error.apply(n,c([this.name,t,e],r))},Object.defineProperty(e.prototype,"loadingBlockUI",{get:function(){return this._loadingBlockUI},set:function(t){for(var e=this.$childControllers.items.toArray(),n=e.length,r=0;r<n;r++)e[r].controller.loadingBlockUI=t;this._loadingBlockUI=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLandscape",{get:function(){return this._isLandscape},set:function(t){this._isLandscape=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._initialized&&this._contentLoaded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentContainer",{get:function(){return this._parentContainer},set:function(t){this._parentContainer=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resourcesLoader",{get:function(){return this.__resourcesLoader},set:function(t){this.__resourcesLoader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"soundManager",{get:function(){return this._soundManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keyboardManager",{get:function(){return this._keyboardManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locator",{get:function(){return(this._parent&&this._parent.locator?this._parent.locator:"")+(this._locator?this._locator+".":"Game.")},set:function(t){this._locator=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showLoadingTimeout",{get:function(){return this.gameBase&&this.gameBase.showLoadingTimeout,-1},set:function(t){this.gameBase&&(this.gameBase.showLoadingTimeout=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{set:function(t){this._parent=t},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.parent&&this.parent.removeChildController(this)},e.prototype.destroyAsync=function(){return l(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.parent?[4,this.parent.removeChildControllerAsync(this,!1)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.configure=function(t){var e=this;this.config=this.getConfiguration(),T._u.each(this.config.resources,(function(t,n){e.$resources.items.add(t)}),this),T._u.each(this.config.childControllers,(function(t,n){(t.controller||t.moduleName||t.module)&&e._addChildController(t,n,!0)}),this)},e.prototype.showLoading=function(t){var e=this;!this.disposed&&this._loadingBlockUI&&this.__queue.push({name:"showLoading",condition:function(t){return!0},action:function(n){e.gameBase.showLoading(t)}})},e.prototype.setLoading=function(t){},e.prototype.initialize=function(t,e){var n=this;return void 0===e&&(e=null),this._parent=t,T._u.each(this.config.childControllers,(function(t,e){t.controller&&n._initializeChildController(t,n.$childControllers[e])}),this),this.$modelWatches.initialize(this.config.modelWatch,this,this.$model,this._logger),this.$modelEvents.initialize(this.config.modelEvents,this,this.$model,this._logger),this.$keyboard.initialize(this.config.keyboard,this),this.$queue.initialize(this.config.queue,this),this.$sounds=new w.SoundsList(this._soundManager),this.$sounds.initialize(this.config.sounds,this),this.onInitialize(),this._initialized=!0,this._contentLoaded=!0,this.contentLoaded(),this.display},e.prototype.addChildController=function(t,e,n){var r=this;void 0===n&&(n=null);var i=this._addChildController(t,e,!0);return this.__resources=this.getResources(),this.__resourcesLoader.load(this.name,this.__resources,(function(){r.disposed||r._initializeChildController(t,r.$childControllers[e],n)}),this),i},e.prototype.addChildControllerAsync=function(t,e,n,r){var i=this;void 0===r&&(r=null);var o=this._addChildController(t,n,!0);return o.resourcesLoader=g.Container.get(b.ResourcesLoader),o.resourcesLoader.setGameInstanceBase(this.gameBase),o.resourcesLoaderUpdate=!0,this.__resources=this.getResources(),e&&this.showLoading(e),new Promise((function(a){i.__queue.push({name:"addChildAsync",condition:function(t){return!e||t>=.01},action:function(s){i.__resourcesLoader.load(i.name,i.__resources,(function(){i.disposed||(i._initializeChildController(t,i.$childControllers[n],r),e&&i.showLoading(!1),a(o))}),i)}})}))},e.prototype.removeChildController=function(t){var e=this.$childControllers.items.firstOrDefault((function(e){return e.controller==t}));this._logger.log(this.locator,"removeChild",e.name),this._removeChildController(e)},e.prototype.removeChildControllerAsync=function(t,e){return void 0===e&&(e=!1),l(this,void 0,void 0,(function(){var n,r=this;return u(this,(function(i){return n=this.$childControllers.items.firstOrDefault((function(e){return e.controller==t})),e&&this.showLoading(e),[2,new Promise((function(t){r.__queue.push({name:"removeChildAsync",condition:function(t){return!e||t>=.01},action:function(i){r._logger.log(r.locator,"removeChildAsync",n.name),r._removeChildController(n),e&&r.showLoading(!1),t()}})}))]}))}))},e.prototype.removeChildControllerByName=function(t){var e=this.$childControllers.items.firstOrDefault((function(e){return e.name==t}));e&&(this._logger.log(this.locator,"removeChildByName",e.name,t),this._removeChildController(e),delete this.$childControllers[t])},e.prototype.removeChildControllerByNameAsync=function(t,e){return void 0===e&&(e=!1),l(this,void 0,void 0,(function(){var n,r=this;return u(this,(function(i){return(n=this.$childControllers.items.firstOrDefault((function(e){return e.name==t})))?(e&&this.showLoading(e),n.controller.visible=!1,[2,new Promise((function(i){r.__queue.push({name:"removeChildByNameAsync",condition:function(t){return!e||t>=.1},action:function(o){r._logger.log(r.locator,"removeChildByNameAsync",n.name,t),r._removeChildController(n),delete r.$childControllers[t],e&&r.showLoading(!1),i()}})}))]):[2]}))}))},e.prototype._removeChildController=function(t){null!=t&&this.$childControllers.items.any((function(e){return e==t}))&&(this.$childControllers.items.remove(t),t.controller.dispose())},e.prototype._addChildController=function(t,e,n){if("items"==e)throw"invalid key";if(this.$childControllers.get(e))throw"view with key='"+e+"' already added";if(t.moduleName){var r=g.Container.get(D.GameModulesFactory).getModule(t.moduleName);t.controller=r.module.getRootController(),t.options=o(o({},r.module.getDefaultOptions()||{}),t.options)}else t.module&&(t.controller=t.module.getRootController(),t.options=o(o({},t.module.getDefaultOptions()||{}),t.options));var i=g.Container.get(t.controller,t.options||{});try{var a=e||i.name;if(this._logger.log(this.locator,"addChild",a,t),i){i.loadingBlockUI=this._loadingBlockUI,i.resourcesLoader=this.__resourcesLoader,t.model&&(i.$model=t.model),i.gameBase=this.gameBase,i.isLandscape=this.isLandscape,i.configure(t),i.config=o(o({},i.config),t.config||{});var s=new _.ChildItem(i);s.viewName=i.name,i.locator=a,s.name=a,i.parent=this,s.controller.parent=this,s.locator=i.locator,this.$childControllers.items.add(s),null!=e&&(this.$childControllers[e]=s)}else console.error(this.name+": error can't find view '"+t.controller+"'")}catch(t){console.error(this.name+": error",t)}return i},e.prototype._initializeChildController=function(t,e,n){void 0===n&&(n=null);try{var r=e.controller.initialize(this);if(null!==n){var i=new PIXI.Container;this.display.addChildAt(i,n),this.display.swapChildren(i,r),this.display.removeChild(i)}this._logger.log(this.locator,"initializeChild",e.name,t),null!=t.x&&null!=t.x&&(e.controller.x=t.x),null!=t.y&&null!=t.y&&(e.controller.y=t.y),e.controller.isLandscape=this.isLandscape,this.isLandscape?e.controller.setLandscape():e.controller.setPortrait(),void 0!==this._resizeWidth&&e.controller.resize(this._resizeWidth,this._resizeHeight,this._resizeScale)}catch(t){console.error(this.name+": error",t)}},e.prototype.updateLayout=function(){this.isLandscape?this.setLandscape():this.setPortrait(),void 0!==this._resizeWidth&&this.resize(this._resizeWidth,this._resizeHeight,this._resizeScale),this.$childControllers.items.forEach((function(t){t.controller.updateLayout()}))},e.prototype.update=function(t){if(!this.disposed&&this.resourcesLoaderUpdate&&this.__resourcesLoader.update(t),this.disposed||!this._initialized)return!1;this._viewQueueUpdate(t),this._onUpdate(t);for(var e=this.$childControllers.items.toArray(),n=e.length,r=0;r<n;r++)e[r].controller.update(t);return!0},e.prototype._onUpdate=function(t){this.onUpdate(t)},e.prototype._viewQueueUpdate=function(t){this.__queue.length&&this.__queue.update(t)},e.prototype.onUpdate=function(t){},e.prototype.onLandscape=function(){},e.prototype.setLandscape=function(){!this.disposed&&this._initialized&&(this._isLandscape=!0,this.onLandscape(),this.$childControllers.items.forEach((function(t){t.controller.setLandscape()})))},e.prototype.onPortrait=function(){},e.prototype.getResources=function(){var t=new h.List;return t.addRange(this.$resources.items.toArray()),this.$childControllers.items.forEach((function(e){t.addRange(e.controller.getResources())})),t.toArray()},e.prototype.contentLoaded=function(){this._initialized&&this._contentLoaded&&(this.disposed||this.onContentLoaded())},e.prototype.onContentLoaded=function(){},e.prototype.setPortrait=function(){!this.disposed&&this._initialized&&(this._isLandscape=!1,this.onPortrait(),this.$childControllers.items.forEach((function(t){t.controller.setPortrait()})))},e.prototype.onDestroy=function(){},e.prototype.dispose=function(){var t=this;if(!this.disposed){this.disposed=!0;for(var e=0;e<this.__resources.length;e++)this.__resources[e].close();this._initialized&&(this.onDestroy(),this.$childControllers.items.forEach((function(t){t.controller.dispose()})),this.$queue.dispose(),this.$keyboard.dispose(),this.$resources.items.forEach((function(e){e.temporary&&(e.type==S.ResourceItemType.pixiTexture?(t.__resourcesLoader.loader.resources[e.name].texture&&t.__resourcesLoader.loader.resources[e.name].texture.destroy(!0),t.__resourcesLoader.loader.resources[e.name]=null,delete t.__resourcesLoader.loader.resources[e.name],PIXI.utils.TextureCache[e.name]=null,delete PIXI.utils.TextureCache[e.name]):"string"==typeof e.resources&&(t.__resourcesLoader.loader.resources[e.name]=null,delete t.__resourcesLoader.loader.resources[e.name]))})),this.$modelWatches.dispose(),this.$modelEvents.dispose(),this.$model=null,this.$keyboard=null,this.$modelWatches=null,this.$queue=null,this.$resources=null,this.$childControllers=null,this.$sounds=null,this._parent=null,this._parentContainer=null,this.__resourcesLoader=null,this._soundManager=null,this._watchObject=null,this._keyboardManager=null,this._renderer=null,this._logger=null,this.gameBase=null)}},e.prototype.close=function(){this._parent.removeChildController(this)},e.prototype.clear=function(){this.$childControllers.items.forEach((function(t){t.controller.dispose()})),this.$childControllers=new _.ChildControllers,this._logger.log(this.locator,"clear",this.name)},e.prototype.clearAsync=function(t){return void 0===t&&(t=!0),l(this,void 0,void 0,(function(){var e=this;return u(this,(function(n){return this.showLoading(t),this.visible=!1,[2,new Promise((function(n){e.__queue.push({name:"clearAsync",condition:function(e){return!t||e>=1},action:function(t){e.clear(),e._logger.log(e.locator,"clearAsync",e.name),e.showLoading(!1),e.visible=!0,n()}})}))]}))}))},e.prototype.resize=function(t,e,n){!this.disposed&&this._initialized&&(this._resizeWidth=t,this._resizeHeight=e,this._resizeScale=n,this.onResize(t,e,n),this.$childControllers.items.forEach((function(r){r.controller.resize(t,e,n)})))},e.prototype.onResize=function(t,e,n){},e.prototype.focus=function(t){!this.disposed&&this._initialized&&(this.onFocus(t),this.$childControllers.items.forEach((function(e){e.controller.focus(t)})))},e.prototype.onFocus=function(t){},e.prototype.resourceError=function(t,e,n){this.disposed||(this.onResourceError(t,e,n),this.$childControllers.items.forEach((function(r){r.controller.resourceError(t,e,n)})))},e.prototype.onResourceError=function(t,e,n){},a([g.Inject,s("design:type",v.SoundManager)],e.prototype,"_soundManager",void 0),a([g.Inject,s("design:type",A.WatchObject)],e.prototype,"_watchObject",void 0),a([g.Inject,s("design:type",f.KeyboardManager)],e.prototype,"_keyboardManager",void 0),a([g.Inject,s("design:type",P.PIXIRenderer)],e.prototype,"_renderer",void 0),a([g.Inject,s("design:type",p.BaseControllerEmptyLogger)],e.prototype,"_logger",void 0),a([g.Inject,s("design:type",x.ModelEvents)],e.prototype,"_modelEvents",void 0),a([M.GamePerformanceMethod("_BaseController","Controller configuration"),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e.prototype,"configure",null),a([M.GamePerformanceMethod("_BaseController","Remove child"),s("design:type",Function),s("design:paramtypes",[_.ChildItem]),s("design:returntype",void 0)],e.prototype,"_removeChildController",null),a([M.GamePerformanceMethod("_BaseController","Add child"),s("design:type",Function),s("design:paramtypes",[Object,Object,Boolean]),s("design:returntype",Object)],e.prototype,"_addChildController",null),a([M.GamePerformanceMethod("_BaseController","Initialize child"),s("design:type",Function),s("design:paramtypes",[Object,_.ChildItem,Object]),s("design:returntype",void 0)],e.prototype,"_initializeChildController",null),a([M.GamePerformanceMethod("_BaseController","setLandscape"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],e.prototype,"setLandscape",null),a([M.GamePerformanceMethod("_BaseController","setPortrait"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],e.prototype,"setPortrait",null),a([M.GamePerformanceMethod("_BaseController","dispose"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],e.prototype,"dispose",null),a([M.GamePerformanceMethod("_BaseController","resize"),s("design:type",Function),s("design:paramtypes",[Number,Number,Number]),s("design:returntype",void 0)],e.prototype,"resize",null),a([M.GamePerformanceMethod("_BaseController","focus"),s("design:type",Function),s("design:paramtypes",[Boolean]),s("design:returntype",void 0)],e.prototype,"focus",null),e}(function(){function t(){this._display=new PIXI.Container}return Object.defineProperty(t.prototype,"display",{get:function(){return this._display},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.display.x},set:function(t){this.display.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.display.y},set:function(t){this.display.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.display.rotation},set:function(t){this.display.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleX",{get:function(){return this.display.scale.x},set:function(t){this.display.scale.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleY",{get:function(){return this.display.scale.y},set:function(t){this.display.scale.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.display.alpha},set:function(t){this.display.alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.display.visible},set:function(t){this.display.visible=t},enumerable:!1,configurable:!0}),t}());e._BaseController=I},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiplayerPlayer=void 0;var r=function(){function t(t){this.type=0,this.action=-1,this.left=!1,this.gamePadPlayer="",this.gamePadServer="",this.isGamePad=!1,this.index=-1,this.ioId=-1,this.id=t.id,this.name=t.name,this.isServer=t.isServer,this.data=decodeURI(t.data),this.type=t.type,this.gamePadPlayer=t.gamePadPlayer,this.gamePadServer=t.gamePadServer,this.isGamePad=t.isGamePad,this.index=t.index,this.ioId=t.ioId}return t.fromObject=function(e){return new t(e)},t.prototype.copy=function(t){this.name=t.name,this.isServer=t.isServer,t.data&&(this.data=t.data)},t}();e.MultiplayerPlayer=r},function(t,e,n){"use strict";function r(){return i(new Date(Date.now()))}function i(t){var e=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds());return new Date(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.EventBase=e.getUtcFromLocal=e.getUtcNow=void 0,e.getUtcNow=r,e.getUtcFromLocal=i;var o=function(){function t(t){this.isoDateTime=t||r().toISOString()}return t.getIsoDateTime=function(){return r().toISOString()},t}();e.EventBase=o},function(t,e,n){"use strict";(function(t){var r=n(217),i=n(218),o=n(219);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=p(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|f(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|f(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isController&&(ArrayBuffer.isController(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(r)return G(t).length;e=(""+e).toLowerCase(),r=!0}}function _(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return w(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var h=!0,p=0;p<l;p++)if(u(t,o+p)!==u(e,p)){h=!1;break}if(h)return o}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function A(t,e,n,r){return H(G(e,t.length-n),t,n,r)}function b(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function T(t,e,n,r){return b(t,e,n,r)}function S(t,e,n,r){return H(V(e),t,n,r)}function P(t,e,n,r){return H(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function w(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,l,u=t[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},l.byteLength=d,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):_.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=t.slice(e,n),h=0;h<s;++h)if(u[h]!==c[h]){o=u[h],a=c[h];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return A(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function x(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=j(t[o]);return i}function M(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function B(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function k(t,e,n,r,o){return o||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||I(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||I(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return k(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return k(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=l.isBuffer(t)?t:G(new l(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(6))},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.GameStorageManager=void 0;var o=n(0),a=n(9),s=n(125),l=n(70),u=function(){function t(){this._allowLocalStorage=!0}return t.prototype.setGameId=function(t){this._gameID=t},t.prototype.loadData=function(t){var e=this._gameID+t;if(this._allowLocalStorage)try{var n=localStorage.getItem(e);return this._logger.log("StorageManager","LoadData",e,n),n}catch(t){this._allowLocalStorage=!1}return null},t.prototype.saveData=function(t,e){var n=this._gameID+t;if(this._allowLocalStorage)try{return this._logger.log("StorageManager","SaveData",n),localStorage.setItem(n,e),!0}catch(t){return this._allowLocalStorage=!1,!1}},t.prototype._isObject=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)},t.prototype._mergeValues=function(t,e){return this._isObject(t)&&this._isObject(e)?this._mergeObjects(t,e):Array.isArray(t)&&Array.isArray(e)?this._mergeArrays(t,e):void 0===e?t:e},t.prototype._mergeObjects=function(t,e){var n=this;return Object.keys(e).forEach((function(r){var i=e[r],o=t[r];t[r]=n._mergeValues(o,i)})),t},t.prototype._mergeArrays=function(t,e){var n=this;return e.forEach((function(e,r){t[r]=n._mergeValues(t[r],e)})),t},t.prototype._merge=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.forEach((function(n){return e._mergeValues(t,n)})),t},t.prototype.loadModel=function(t,e,n,r,i){void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===i&&(i=null);var o=this._gameID+t;try{var a=localStorage.getItem(o);if(a){var u=i?i(a):a,c=r?s.Base64Helper.decode(u):u,h=n?l.unpack(c):JSON.parse(c);return this._logger.log("StorageManager","LoadModel",o,h),this._merge(e,h),h}}catch(t){}return null},t.prototype._deepArray=function(t,e){var n=this;return t.map((function(t){return n._deep(t,e)}))},t.prototype._deepObject=function(t,e){var n=this,r={};return Object.keys(e).forEach((function(i){var o=t[i],a=e[i];r[i]=n._deep(o,a)}),{}),r},t.prototype._deep=function(t,e){return"object"!=typeof t||null===t?t:Array.isArray(t)?this._deepArray(t,e):this._deepObject(t,e)},t.prototype.saveModel=function(t,e,n,r,i,o){void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=null);var a=this._gameID+t;try{var u=this._deep(e,n),c=JSON.stringify(u),h=r?l.pack(c):JSON.stringify(c),p=i?s.Base64Helper.encode(h):h;return localStorage.setItem(a,o?o(p):p),this._logger.log("StorageManager","SaveModel",a),!0}catch(t){return!1}},r([o.Inject,i("design:type",a.BaseControllerEmptyLogger)],t.prototype,"_logger",void 0),t=r([o.Singleton,i("design:paramtypes",[])],t)}();e.GameStorageManager=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpritesEventItem=e.SpriteEvents=void 0;var r=n(1),i=n(30),o=n(13),a=function(){function t(){this.items=new r.List,this._scrollYOnDown=0,this._pointerDown=!1,this._pointerOver=!1}return t.prototype.initialize=function(t,e,n,r,i){if(this._logger=i,this._$boundingBoxes=e,this._$sprites=n,this._controller=r,t)for(var o=0;o<t.length;o++){var a=t[o];if(Array.isArray(a))for(var s=0;s<a.length;s++){var l=a[s];this._apply(l)}else this._apply(a)}},t.prototype._apply=function(t){var e;if(t.targetType==i.EventsTargetTypeEnum.SPRITE)e=this._$sprites[t.targetName];else if(t.targetType==i.EventsTargetTypeEnum.BOUNDING_BOXE&&!e){var n=this._$boundingBoxes[t.targetName];n&&(this._$sprites["$boundingBoxes_"+t.targetName]||(this._$sprites["$boundingBoxes_"+t.targetName]=n.toGraphics(),this._$sprites["$boundingBoxes_"+t.targetName].hitArea=n.toPolygon(),n.sprite=this._$sprites["$boundingBoxes_"+t.targetName]),e=this._$sprites["$boundingBoxes_"+t.targetName],this._controller.display.addChild(e))}e?this.addEvent(e,t.event,this._controller,this._logger,t):console.error(this._controller.name+": error can't find target '"+t.targetName+"'")},t.prototype.addEvent=function(e,n,r,a,l){var u=this,c=o.expandFunc(n,r);if(l.eventType==i.EventsTypeEnum.CLICK_OR_TAP){this.items.add(new s((function(t){u._scrollYOnDown=window.scrollY||0}),i.EventsTypeEnum.POINTERDOWN,e,r,l.targetName)),this.items.add(new s((function(t){var e=window.scrollY||0;Math.abs(u._scrollYOnDown-e)<5&&(s.blockSpritesEvents||a.log(r.locator,"SpritesEvent",l.eventType,[t,l.targetName]),c(t))}),i.EventsTypeEnum.POINTERUP,e,r,l.targetName))}else l.eventType==i.EventsTypeEnum.TAP_AND_POINTERMOVE?(this.items.add(new s((function(t){u._pointerDown=!0}),i.EventsTypeEnum.POINTERDOWN,e,r,l.targetName)),this.items.add(new s((function(t){u._pointerDown=!1}),i.EventsTypeEnum.POINTERUP,e,r,l.targetName)),this.items.add(new s((function(t){u._pointerDown&&(s.blockSpritesEvents||a.log(r.locator,"SpritesEvent",i.EventsTypeEnum.POINTERMOVE,[t,l.targetName]),c(t))}),i.EventsTypeEnum.POINTERMOVE,e,r,l.targetName))):l.eventType==i.EventsTypeEnum.TAP_GLOBAL_AND_POINTERMOVE?(this.items.add(new s((function(e){t._pointerDownGlobal=!0}),i.EventsTypeEnum.POINTERDOWN,e,r,l.targetName)),this.items.add(new s((function(e){t._pointerDownGlobal=!1}),i.EventsTypeEnum.POINTERUP,e,r,l.targetName)),this.items.add(new s((function(e){t._pointerDownGlobal&&(s.blockSpritesEvents||a.log(r.locator,"SpritesEvent",i.EventsTypeEnum.POINTERMOVE,[e,l.targetName]),c(e))}),i.EventsTypeEnum.POINTERMOVE,e,r,l.targetName))):l.eventType==i.EventsTypeEnum.POINTERMOVE?this.items.add(new s((function(t){s.blockSpritesEvents||a.log(r.locator,"SpritesEvent",i.EventsTypeEnum.POINTERMOVE,[t,l.targetName]),c(t)}),i.EventsTypeEnum.POINTERMOVE,e,r,l.targetName)):l.eventType==i.EventsTypeEnum.POINTER_HITAREA_MOVE?this.items.add(new s((function(t){e.hitArea&&e.hitArea.contains(t.localPosition.x,t.localPosition.y)&&(s.blockSpritesEvents||a.log(r.locator,"SpritesEvent",i.EventsTypeEnum.POINTERMOVE,[t,l.targetName]),c(t))}),i.EventsTypeEnum.POINTERMOVE,e,r,l.targetName)):this.items.add(new s((function(e){l.eventType==i.EventsTypeEnum.POINTERDOWN&&(t._pointerDownGlobal=!0),l.eventType==i.EventsTypeEnum.POINTERUP&&(t._pointerDownGlobal=!1),s.blockSpritesEvents||a.log(r.locator,"SpritesEvent",l.eventType,[e,l.targetName]),c(e)}),l.eventType,e,r,l.targetName))},t.prototype.dispose=function(){this.items.forEach((function(t){t.sprite.removeListener(t.name,t.event)}))},t._pointerDownGlobal=!1,t}();e.SpriteEvents=a;var s=function(){function t(e,n,r,i,o){var a=this;this._event=e,this.name=n,this.sprite=r,this._view=i,this.spriteName=o,this.event=function(t){if(!i.disposed&&a._view.isReady&&(!t.data.pointerType||"touch"!=t.data.pointerType||t.data.isPrimary)&&(!i.resourcesLoader.loading||!i.loadingBlockUI)){var e={localPosition:t.currentTarget.parent?t.data.getLocalPosition(t.currentTarget.parent):null,preventDefault:function(){t.data.originalEvent.cancelable&&t.data.originalEvent.preventDefault()},stopPropagation:function(){t.stopPropagation()},globalPosition:t.data.global};"mouse"==t.data.pointerType&&(e.mouseEvent={button:t.data.button}),e.screenPosition=new PIXI.Point((e.globalPosition.x-r.transform.worldTransform.tx)/r.transform.worldTransform.a,(e.globalPosition.y-r.transform.worldTransform.ty)/r.transform.worldTransform.d),a._event(e)}},t.blockSpritesEvents||r.on(n,this.event,this._view),r.interactive=!0,r.buttonMode=!0}return t.prototype.run=function(t){return this._event(t),[t]},t.blockSpritesEvents=!1,t}();e.SpritesEventItem=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventsTypeEnum=e.EventsTargetTypeEnum=void 0,function(t){t[t.SLOT=1]="SLOT",t[t.SPRITE=2]="SPRITE",t[t.BOUNDING_BOXE=3]="BOUNDING_BOXE"}(e.EventsTargetTypeEnum||(e.EventsTargetTypeEnum={})),function(t){t.CLICK_OR_TAP="clickOrTap",t.CLICK="click",t.MOUSEDOWN="mousedown",t.MOUSEMOVE="mousemove",t.MOUSEOUT="mouseout",t.MOUSEOVER="mouseover",t.MOUSEUP="mouseup",t.MOUSEUPOUTSIDE="mouseupoutside",t.POINTERCANCEL="pointercancel",t.POINTERDOWN="pointerdown",t.POINTERMOVE="pointermove",t.POINTEROUT="pointerout",t.POINTEROVER="pointerover",t.POINTERTAP="pointertap",t.POINTERUP="pointerup",t.POINTERUPOUTSIDE="pointerupoutside",t.RIGHTCLICK="rightclick",t.RIGHTDOWN="rightdown",t.RIGHTUP="rightup",t.RIGHTUPOUTSIDE="rightupoutside",t.TAP="tap",t.TOUCHCANCEL="touchcancel",t.TOUCHEND="touchend",t.TOUCHENDOUTSIDE="touchendoutside",t.TOUCHMOVE="touchmove",t.TOUCHSTART="touchstart",t.TAP_AND_POINTERMOVE="TAP_AND_POINTERMOVE",t.TAP_GLOBAL_AND_POINTERMOVE="TAP_GLOBAL_AND_POINTERMOVE",t.POINTER_HITAREA_MOVE="POINTER_HITAREA_MOVE"}(e.EventsTypeEnum||(e.EventsTypeEnum={}))},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.ResourcesLoader=void 0;var o=n(32),a=n(0),s=n(33),l=n(1),u=n(50),c=n(146),h=n(147),p=n(40),f=n(9),d=n(8),_=n(41),y=n(16),m=function(){function t(){this._queue=new o.Queue,this.loading=!1,this.errors=[],this._clock=0,this._loadingCount=0,this._progress=0,this._loadingCall=0,this._currentProgress=0,this.path="",this.module="",this.loader=new PIXI.loaders.Loader}return t.prototype.setGameInstanceBase=function(t){this._gameBase=t},t.prototype._getUrl=function(t){if(t.startsWith("//")||t.startsWith("http://")||t.startsWith("https://"))return t;var e=this._arenaApi.absoluteURL("")+this._gameResources.root;return e.endsWith("/")&&t.startsWith("/")?e=e.substring(0,e.length-1):e.endsWith("/")||t.startsWith("/")||(e+="/"),(e+=this.path)+t+"?v="+this._analyticResources.gameVersion},t.prototype.update=function(t){if(this._queue.update(t),this._queue.length>0&&this._queue.clock-this._clock>.1){this._clock=this._queue.clock,this._progress=(this._loadingCount-(this._queue.length-this._loadingCall))/this._loadingCount;var e=(this.loader.progress<100?.9*(1-this._progress)*this.loader.progress:0)/100,n=1-(1-this._progress);n=(n=n>.9?.9:n)<.3?.3:n;var r=1-(this._progress+e),i=r*n-r*n/(2*this._clock),o=Math.round(100*(this._progress+e+i))/100;this._currentProgress!=o&&(this._currentProgress=o,this._gameBase&&this._gameBase.setLoading(this._currentProgress<0?0:this._currentProgress))}},t.prototype.load=function(t,e,n,r){for(var i=this,o=!1,a=new l.List(e),p=e.length>0,f=0;f<e.length;f++)p=p&&e[f].closed;if(!p){if(this.loading)return this._loadingCall++,void this._queue.push({condition:function(t){return!0},action:function(o){i._loadingCall--,i.load(t,e,n,r)}});var d=function(t,n,o){i._logger.log("ResourcesLoader","LoadError",t.name,t.message),i.errors.indexOf(o.name)<0&&(i.errors.push(o.name),r.resourceError(o.name,o,e,r),i._gameBase!==r&&i._gameBase.resourceError(o.name,o,e,r))};this.loader.on("error",d,this),a.forEach((function(e,n){if(i.errors=[],e.resourcesLoader=i,!e.loaded&&!e.requested){var r=!1;if(e.type==s.ResourceItemType.spine)new l.List(e.resources).forEach((function(t,n){i.loader.resources[e.name+t.name]||(r=!0,i.loader.add(e.name+t.name,i._getUrl(t.resources)))})),e.complete=function(t,e){};else if(e.type==s.ResourceItemType.dragonBonesProject){var p=new l.List(e.resources);p.forEach((function(t,n){i.loader.resources[e.name+t.name]||(r=!0,i.loader.add(e.name+t.name,i._getUrl(t.resources)))})),e.complete=function(n,r){if(i._logger.log(t,"LoadCompleted",e.name,p.select((function(t){return t.resources})).toArray()),r[e.name+"ske"].data){var o=r[e.name+"ske"].data;if(i._gameResources.options.armaturesPrivateScope&&!o.ready){var a=r[e.name+"tex"].data;a.name=e.name+"."+a.name,o.name=e.name+"."+o.name,o.ready=!0;for(var s=0;s<o.armature.length;s++){var l=o.armature[s];if(l.name=e.name+"."+l.name,l.skin)for(var c=0;c<l.skin.length;c++){var h=l.skin[c];if(h.slot)for(var f=0;f<h.slot.length;f++)for(var d=h.slot[f],_=0;_<d.display.length;_++){var y=d.display[_];"armature"==y.type&&(y.name=e.name+"."+y.name)}}}}e.dragonBonesData=u.PixiFactory.factory.parseDragonBonesData(r[e.name+"ske"].data)}r[e.name+"tex"].data&&r[e.name+"png"].texture&&(e.dragonBonesTexturesData=u.PixiFactory.factory.parseTextureAtlasData(r[e.name+"tex"].data,r[e.name+"png"].texture)),e.loaded=!0}}else if(e.type==s.ResourceItemType.threeJsTexture){r=!0;var f=new THREE.TextureLoader;f.crossOrigin="",f.load(i._getUrl(e.resources),(function(n){i._logger.log(t,"LoadCompleted",e.name,e.resources),e.threeTexture=n,e.loaded=!0}))}else if(e.type==s.ResourceItemType.font)r=!0,c.FontLoader(e.resources,(function(){i._logger.log(t,"LoadCompleted",e.name,e.resources),e.loaded=!0}),{timeoutAfter:5e3,onTimeout:function(){i._logger.log(t,"LoadCompleted",e.name,e.resources),e.loaded=!0}});else if(e.type==s.ResourceItemType.threeJsCubeTexture){r=!0;var d=new THREE.CubeTextureLoader;d.crossOrigin="";for(var _=[],y=0;y<e.resources.length;y++)_.push(i._getUrl(e.resources[y]));d.load(_,(function(n){i._logger.log(t,"LoadCompleted",e.name,_),e.threeCubeTexture=n,e.loaded=!0}))}else if(e.type==s.ResourceItemType.pixiTexture)if(PIXI.utils.TextureCache[e.name]||i.loader.resources[e.name]){var m=a.firstOrDefault((function(t){return t.name==e.name}));m&&m!=e?e.complete=function(){PIXI.utils.TextureCache[e.name]&&(e.pixiTexture=PIXI.utils.TextureCache[e.name]),e.loaded=!0,i._logger.log(t,"LoadCompleted",e.name,e.resources)}:(PIXI.utils.TextureCache[e.name]&&(e.pixiTexture=PIXI.utils.TextureCache[e.name].texture),e.loaded=!0,i._logger.log(t,"LoadCompleted",e.name,e.resources))}else o=!0,i.loader.add(e.name,i._getUrl(e.resources)),e.complete=function(){i.loader.resources[e.name]&&(e.pixiTexture=i.loader.resources[e.name].texture),e.loaded=!0,i._logger.log(t,"LoadCompleted",e.name,e.resources)};else if(e.type==s.ResourceItemType.pixiAnimation){if(!e.resources.factory){var g=new h.PixiAnimationLoader(e.resources);e.resources.factory=g,g.build(i.module);for(var v=!1,A=g.animation.__spritesheets,b=0;b<A.length;b++){var T=A[b];PIXI.utils.TextureCache[T.data.meta.image]||i.loader.resources[T.data.meta.image]||(o=!0,r=!0,v=!0,i.loader.add(T.data.meta.image,i._getUrl(T.data.meta.image)))}if(!v){var S=g.animation.__assets||{};if(S&&Object.keys(S).length)for(var P in S)if(!PIXI.utils.TextureCache[P]&&!i.loader.resources[P]){o=!0,r=!0,v=!0;i.loader.add(P,i._getUrl(S[P]),null)}}var w=g.animation.__shapesheets;for(b=0;b<w.length;b++){var E=w[b];PIXI.utils.TextureCache[E.data.meta.image]||i.loader.resources[E.data.meta.image]||(o=!0,r=!0,v=!0,i.loader.add(E.data.meta.image,i._getUrl(E.data.meta.image)))}v&&(e.complete=function(n,r){e.loaded=!0;for(var o=0;o<A.length;o++){var a=A[o];if(r[a.data.meta.image]){var s=r[a.data.meta.image].texture.baseTexture;a.spritesheet=new PIXI.Spritesheet(s,a.data),a.spritesheet.parse((function(){}))}}for(o=0;o<w.length;o++){var l=w[o];if(r[l.data.meta.image]){s=r[l.data.meta.image].texture.baseTexture;l.spritesheet=new PIXI.Spritesheet(s,l.data),l.spritesheet.parse((function(){}))}}i._logger.log(t,"LoadCompleted",e.name,e.name)})}}else"string"==typeof e.resources&&(r=!0,e.temporary=!0,i.loader.resources[e.name]?e.loaded=!0:(o=!0,i.loader.add(e.name,i._getUrl(e.resources)),e.complete=function(){e.loaded=!0,i._logger.log(t,"LoadCompleted",e.name,e.resources)}));o=r||o,r&&(e.requested=!0,i._queue.push({condition:function(t){return e.loaded||i.errors.indexOf(e.name)>0},action:function(t){}}))}})),o?(this.loading=!0,r.showLoading(!0),this._currentProgress=0,r.setLoading(0),this._queue.push({condition:function(t){return!0},action:function(t){r.setLoading(1)}}),this._queue.push({condition:function(t){return t>.05&&!i.loader.loading},action:function(t){i.loading=!1,r.showLoading(!1),i.loader.off("error",d),n()}}),this._clock=0,this._loadingCount=this._queue.length-this._loadingCall,this.loader.once("complete",(function(t,e){a.forEach((function(n,r){n.complete&&!n.loaded&&n.complete(t,e)}))}),this),this.loader.load()):(this.loader.off("error",d),n())}},r([a.Inject,i("design:type",p.GameResources)],t.prototype,"_gameResources",void 0),r([a.Inject,i("design:type",y.GameApiBase)],t.prototype,"_arenaApi",void 0),r([a.Inject,i("design:type",f.BaseControllerEmptyLogger)],t.prototype,"_logger",void 0),r([a.Inject,i("design:type",_.AnalyticResources)],t.prototype,"_analyticResources",void 0),r([d.GamePerformanceMethod("ResourcesLoader","Load resources"),i("design:type",Function),i("design:paramtypes",[String,Array,Function,Object]),i("design:returntype",void 0)],t.prototype,"load",null),t}();e.ResourcesLoader=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Queue=void 0;var r=function(){function t(){this._queueClock=0,this._queue=[],this._queueData=[],this.items={}}return Object.defineProperty(t.prototype,"clock",{get:function(){return this._queueClock},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._queue.length},enumerable:!1,configurable:!0}),t.prototype.update=function(t,e){for(this._queueClock+=t;this._queue.length&&(this._queue[0].condition(this._queueClock)||e);){for(var n=this._queue[0].action,r=this._queueData[0],i=0;i<this._queue.length-1;++i)this._queue[i]=this._queue[i+1],this._queueData[i]=this._queueData[i+1];this._queue.pop(),this._queueData.pop(),n(this._queueClock,r),this._queueClock=0}},t.prototype.push=function(t,e){this._queue.indexOf(t);0==this._queue.length&&(this._queueClock=0),this._queue.push(t),this._queueData.push(e||{})},t.prototype.clear=function(){this._queue.length=0},t.prototype.remove=function(t){for(var e=this._queue.indexOf(t);e>-1;)this._queue.splice(e,1),this._queueData.splice(e,1),e=this._queue.indexOf(t)},t}();e.Queue=r},function(t,e,n){"use strict";var r,i,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PixiTextureResourceItem=e.ImageResourceItem=e.JsonResourceItem=e.FontResourceItem=e.SpineResourceItem=e.DragonBonesResourceItem=e.ResourceItem=e.ResourceItemType=void 0,function(t){t[t.dragonBonesProject=1]="dragonBonesProject",t[t.threeJsTexture=2]="threeJsTexture",t[t.threeJsCubeTexture=3]="threeJsCubeTexture",t[t.image=4]="image",t[t.json=5]="json",t[t.font=6]="font",t[t.pixiTexture=7]="pixiTexture",t[t.pixiAnimation=8]="pixiAnimation",t[t.spine=9]="spine"}(i=e.ResourceItemType||(e.ResourceItemType={}));var a=function(){function t(t,e,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1),this.name=t,this.resources=e,this.type=n,this.temporary=r,this.isCritical=i,this.loaded=!1,this.requested=!1,this.closed=!1}return t.prototype.close=function(){this.closed=!0,this.onClose&&this.onClose()},t.prototype.getResource=function(){return this.resourcesLoader.loader.resources[this.name]},t.prototype.getTexture=function(){return PIXI.Texture.fromFrame(this.name)},t}();e.ResourceItem=a;var s=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this,e,[new a("ske",n+"_ske.json"),new a("tex",n+"_tex.json"),new a("png",n+"_tex.png")],i.dragonBonesProject,!1,r)||this;return o.name=e,o.resource=n,o}return o(e,t),e}(a);e.DragonBonesResourceItem=s;var l=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this,e,[new a("json",n+".json")],i.spine,!1,r)||this;return o.name=e,o.resource=n,o}return o(e,t),e}(a);e.SpineResourceItem=l;var u=function(t){function e(e){var n=t.call(this,e,e,i.font)||this;return n.fontName=e,n}return o(e,t),e}(a);e.FontResourceItem=u;var c=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this,e,n,i.json,!1,r)||this;return o.name=e,o.resource=n,o}return o(e,t),e}(a);e.JsonResourceItem=c;var h=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this,e,n,i.image,!1,r)||this;return o.name=e,o.resource=n,o}return o(e,t),e}(a);e.ImageResourceItem=h;var p=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this,e,n,i.pixiTexture,!1,r)||this;return o.name=e,o.resource=n,o}return o(e,t),e}(a);e.PixiTextureResourceItem=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DragonBones=void 0;var r=n(128),i=n(20),o=function(){function t(t){this._clock=new r.WorldClock,this._events=[],this._objects=[],this._eventManager=null,this._eventManager=t}return t.prototype.advanceTime=function(t){if(this._objects.length>0){for(var e=0,n=this._objects;e<n.length;e++){n[e].returnToPool()}this._objects.length=0}if(this._clock.advanceTime(t),this._events.length>0){for(var r=0;r<this._events.length;++r){var o=this._events[r],a=o.armature;null!==a._armatureData&&(a.eventDispatcher.dispatchDBEvent(o.type,o),o.type===i.EventObject.SOUND_EVENT&&this._eventManager.dispatchDBEvent(o.type,o)),this.bufferObject(o)}this._events.length=0}},t.prototype.bufferEvent=function(t){this._events.indexOf(t)<0&&this._events.push(t)},t.prototype.bufferObject=function(t){this._objects.indexOf(t)<0&&this._objects.push(t)},Object.defineProperty(t.prototype,"clock",{get:function(){return this._clock},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eventManager",{get:function(){return this._eventManager},enumerable:!1,configurable:!0}),t.VERSION="5.7.000",t.yDown=!0,t.debug=!1,t.debugDraw=!1,t}();e.DragonBones=o,console.warn||(console.warn=function(){}),console.assert||(console.assert=function(){}),Date.now||(Date.now=function(){return(new Date).getTime()})},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Armature=void 0;var o=n(2),a=n(130),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bones=[],e._slots=[],e._constraints=[],e._actions=[],e._animation=null,e._proxy=null,e._replaceTextureAtlasData=null,e._clock=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.Armature]"},e._onSortSlots=function(t,e){return 1e3*t._zIndex+t._zOrder>1e3*e._zIndex+e._zOrder?1:-1},e.prototype._onClear=function(){null!==this._clock&&this._clock.remove(this);for(var t=0,e=this._bones;t<e.length;t++){e[t].returnToPool()}for(var n=0,r=this._slots;n<r.length;n++){r[n].returnToPool()}for(var i=0,o=this._constraints;i<o.length;i++){o[i].returnToPool()}for(var a=0,s=this._actions;a<s.length;a++){s[a].returnToPool()}null!==this._animation&&this._animation.returnToPool(),null!==this._proxy&&this._proxy.dbClear(),null!==this._replaceTextureAtlasData&&this._replaceTextureAtlasData.returnToPool(),this.inheritAnimation=!0,this.userData=null,this._lockUpdate=!1,this._slotsDirty=!0,this._zOrderDirty=!1,this._zIndexDirty=!1,this._alphaDirty=!0,this._flipX=!1,this._flipY=!1,this._cacheFrameIndex=-1,this._alpha=1,this._globalAlpha=1,this._bones.length=0,this._slots.length=0,this._constraints.length=0,this._actions.length=0,this._armatureData=null,this._animation=null,this._proxy=null,this._display=null,this._replaceTextureAtlasData=null,this._replacedTexture=null,this._dragonBones=null,this._clock=null,this._parent=null},e.prototype._sortZOrder=function(t,e){var n=this._armatureData.sortedSlots,r=null===t;if(this._zOrderDirty||!r){for(var i=0,o=n.length;i<o;++i){var a=r?i:t[e+i];if(!(a<0||a>=o)){var s=n[a],l=this.getSlot(s.name);null!==l&&l._setZOrder(i)}}this._slotsDirty=!0,this._zOrderDirty=!r}},e.prototype._addBone=function(t){this._bones.indexOf(t)<0&&this._bones.push(t)},e.prototype._addSlot=function(t){this._slots.indexOf(t)<0&&this._slots.push(t)},e.prototype._addConstraint=function(t){this._constraints.indexOf(t)<0&&this._constraints.push(t)},e.prototype._bufferAction=function(t,e){this._actions.indexOf(t)<0&&(e?this._actions.push(t):this._actions.unshift(t))},e.prototype.dispose=function(){null!==this._armatureData&&(this._lockUpdate=!0,this._dragonBones.bufferObject(this))},e.prototype.init=function(t,e,n,r){null===this._armatureData&&(this._armatureData=t,this._animation=o.BaseObject.borrowObject(a.Animation),this._proxy=e,this._display=n,this._dragonBones=r,this._proxy.dbInit(this),this._animation.init(this),this._animation.animations=this._armatureData.animations)},e.prototype.advanceTime=function(t){if(!this._lockUpdate)if(this._lockUpdate=!0,null!==this._armatureData)if(null!==this._armatureData.parent){var n=this._cacheFrameIndex;if(this._animation.advanceTime(t),this._slotsDirty||this._zIndexDirty){if(this._slots.sort(e._onSortSlots),this._zIndexDirty)for(var r=0,i=this._slots.length;r<i;++r)this._slots[r]._setZOrder(r);this._slotsDirty=!1,this._zIndexDirty=!1}if(this._alphaDirty){this._alphaDirty=!1,this._globalAlpha=this._alpha*(null!==this._parent?this._parent._globalAlpha:1);for(var o=0,a=this._bones;o<a.length;o++){a[o]._updateAlpha()}for(var s=0,l=this._slots;s<l.length;s++){(_=l[s])._updateAlpha()}}if(this._cacheFrameIndex<0||this._cacheFrameIndex!==n){r=0,i=0;for(r=0,i=this._bones.length;r<i;++r)this._bones[r].update(this._cacheFrameIndex);for(r=0,i=this._slots.length;r<i;++r)this._slots[r].update(this._cacheFrameIndex)}if(this._actions.length>0){for(var u=0,c=this._actions;u<c.length;u++){var h=c[u],p=h.actionData;if(null!==p)if(0===p.type)if(null!==h.slot)null!==(y=h.slot.childArmature)&&y.animation.fadeIn(p.name);else if(null!==h.bone)for(var f=0,d=this.getSlots();f<d.length;f++){var _,y;if((_=d[f]).parent===h.bone)null!==(y=_.childArmature)&&y.animation.fadeIn(p.name)}else this._animation.fadeIn(p.name);h.returnToPool()}this._actions.length=0}this._lockUpdate=!1,this._proxy.dbUpdate()}else console.warn("The armature data has been disposed.\nPlease make sure dispose armature before call factory.clear().");else console.warn("The armature has been disposed.")},e.prototype.invalidUpdate=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),null!==t&&t.length>0){if(null!==(a=this.getBone(t))&&(a.invalidUpdate(),e))for(var n=0,r=this._slots;n<r.length;n++){(u=r[n]).parent===a&&u.invalidUpdate()}}else{for(var i=0,o=this._bones;i<o.length;i++){var a;(a=o[i]).invalidUpdate()}if(e)for(var s=0,l=this._slots;s<l.length;s++){var u;(u=l[s]).invalidUpdate()}}},e.prototype.containsPoint=function(t,e){for(var n=0,r=this._slots;n<r.length;n++){var i=r[n];if(i.containsPoint(t,e))return i}return null},e.prototype.intersectsSegment=function(t,e,n,r,i,o,a){void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null);for(var s=t===n,l=0,u=0,c=0,h=0,p=0,f=0,d=0,_=0,y=null,m=null,g=0,v=this._slots;g<v.length;g++){var A=v[g];if(A.intersectsSegment(t,e,n,r,i,o,a)>0){if(null===i&&null===o){y=A;break}var b;null!==i&&((b=s?i.y-e:i.x-t)<0&&(b=-b),(null===y||b<l)&&(l=b,c=i.x,h=i.y,y=A,a&&(d=a.x))),null!==o&&((b=o.x-t)<0&&(b=-b),(null===m||b>u)&&(u=b,p=o.x,f=o.y,m=A,null!==a&&(_=a.y)))}}return null!==y&&null!==i&&(i.x=c,i.y=h,null!==a&&(a.x=d)),null!==m&&null!==o&&(o.x=p,o.y=f,null!==a&&(a.y=_)),y},e.prototype.getBone=function(t){for(var e=0,n=this._bones;e<n.length;e++){var r=n[e];if(r.name===t)return r}return null},e.prototype.getBoneByDisplay=function(t){var e=this.getSlotByDisplay(t);return null!==e?e.parent:null},e.prototype.getSlot=function(t){for(var e=0,n=this._slots;e<n.length;e++){var r=n[e];if(r.name===t)return r}return null},e.prototype.getSlotByDisplay=function(t){if(null!==t)for(var e=0,n=this._slots;e<n.length;e++){var r=n[e];if(r.display===t)return r}return null},e.prototype.getBones=function(){return this._bones},e.prototype.getSlots=function(){return this._slots},Object.defineProperty(e.prototype,"flipX",{get:function(){return this._flipX},set:function(t){this._flipX!==t&&(this._flipX=t,this.invalidUpdate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return this._flipY},set:function(t){this._flipY!==t&&(this._flipY=t,this.invalidUpdate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cacheFrameRate",{get:function(){return this._armatureData.cacheFrameRate},set:function(t){if(this._armatureData.cacheFrameRate!==t){this._armatureData.cacheFrames(t);for(var e=0,n=this._slots;e<n.length;e++){var r=n[e].childArmature;null!==r&&(r.cacheFrameRate=t)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._armatureData.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animation",{get:function(){return this._animation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"proxy",{get:function(){return this._proxy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventDispatcher",{get:function(){return this._proxy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this._display},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"replacedTexture",{get:function(){return this._replacedTexture},set:function(t){if(this._replacedTexture!==t){null!==this._replaceTextureAtlasData&&(this._replaceTextureAtlasData.returnToPool(),this._replaceTextureAtlasData=null),this._replacedTexture=t;for(var e=0,n=this._slots;e<n.length;e++){var r=n[e];r.invalidUpdate(),r.update(-1)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clock",{get:function(){return this._clock},set:function(t){if(this._clock!==t){null!==this._clock&&this._clock.remove(this),this._clock=t,this._clock&&this._clock.add(this);for(var e=0,n=this._slots;e<n.length;e++){var r=n[e].childArmature;null!==r&&(r.clock=this._clock)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),e.prototype.getDisplay=function(){return this._display},e}(o.BaseObject);e.Armature=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var r=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.prototype.toString=function(){return"[object dragonBones.Matrix] a:"+this.a+" b:"+this.b+" c:"+this.c+" d:"+this.d+" tx:"+this.tx+" ty:"+this.ty},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.copyFromArray=function(t,e){return void 0===e&&(e=0),this.a=t[e],this.b=t[e+1],this.c=t[e+2],this.d=t[e+3],this.tx=t[e+4],this.ty=t[e+5],this},t.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this},t.prototype.concat=function(t){var e=this.a*t.a,n=0,r=0,i=this.d*t.d,o=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;return 0===this.b&&0===this.c||(e+=this.b*t.c,n+=this.b*t.d,r+=this.c*t.a,i+=this.c*t.b),0===t.b&&0===t.c||(n+=this.a*t.b,r+=this.d*t.c,o+=this.ty*t.c,a+=this.tx*t.b),this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=a,this},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=this.ty;if(0===e&&0===n)return this.b=this.c=0,0===t||0===r?this.a=this.b=this.tx=this.ty=0:(t=this.a=1/t,r=this.d=1/r,this.tx=-t*i,this.ty=-r*o),this;var a=t*r-e*n;if(0===a)return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this;a=1/a;var s=this.a=r*a;return e=this.b=-e*a,n=this.c=-n*a,r=this.d=t*a,this.tx=-(s*i+n*o),this.ty=-(e*i+r*o),this},t.prototype.transformPoint=function(t,e,n,r){void 0===r&&(r=!1),n.x=this.a*t+this.c*e,n.y=this.b*t+this.d*e,r||(n.x+=this.tx,n.y+=this.ty)},t.prototype.transformRectangle=function(t,e){void 0===e&&(e=!1);var n=this.a,r=this.b,i=this.c,o=this.d,a=e?0:this.tx,s=e?0:this.ty,l=t.x,u=t.y,c=l+t.width,h=u+t.height,p=n*l+i*u+a,f=r*l+o*u+s,d=n*c+i*u+a,_=r*c+o*u+s,y=n*c+i*h+a,m=r*c+o*h+s,g=n*l+i*h+a,v=r*l+o*h+s,A=0;p>d&&(A=p,p=d,d=A),y>g&&(A=y,y=g,g=A),t.x=Math.floor(p<y?p:y),t.width=Math.ceil((d>g?d:g)-t.x),f>_&&(A=f,f=_,_=A),m>v&&(A=m,m=v,v=A),t.y=Math.floor(f<m?f:m),t.height=Math.ceil((_>v?_:v)-t.y)},t}();e.Matrix=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t.prototype.clear=function(){this.x=this.y=0},t}();e.Point=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},a=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationClipContainerFactory=e.AnimationClipFactory=e.AnimationClipChildFactory=e.AnimationClipBaseFactory=e.AnimationFactoryTypeEnum=void 0;var l,u=n(53),c=n(21),h=n(8),p=n(165),f=n(39);!function(t){t[t.Container=0]="Container",t[t.AnimationClip=1]="AnimationClip",t[t.BaseFactory=2]="BaseFactory"}(l=e.AnimationFactoryTypeEnum||(e.AnimationFactoryTypeEnum={}));var d=function(){function t(){this.type=l.BaseFactory,this._children={},this._frames=[],this._scripts=[]}return t.prototype.getInstance=function(t){return null},t.prototype.reset=function(){for(var t in this._children){this._children[t].reset()}},t}();e.AnimationClipBaseFactory=d;var _=function(){function t(t,e){this._instance=t,this._factory=e}return t.prototype.getInstance=function(t){if(!this.instance){var e=!1;this._instance.maskTill&&(e=!0),this.instance=this._instance.buildContent(this._factory,e,t),this.instance._instanceId=this._instance.id,this.instance._maskTill=this._instance.maskTill,this.instance._placeAfter=this._instance.placeAfter,this._instance.maskTill&&(this.instance.renderable=!1),this._instance.instanceName&&(this.instance.name=this._instance.instanceName),this.setTransform&&this.setTransform(),this.setRenderable&&this.setRenderable(),this.setMask&&this.setMask(),this.setAlpha&&this.setAlpha(),this.setTint&&this.setTint(),this.setColorTransform&&this.setColorTransform()}return this.instance},t.prototype.reset=function(){this.instance=null},a([h.GamePerformanceMethod("AnimationClipChildFactory","getInstance"),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],t.prototype,"getInstance",null),t}();e.AnimationClipChildFactory=_;var y=function(t){function e(e,n,r){var i=t.call(this)||this;return i._options=e,i.animation=n,i.name=r,i._totalFrames=0,i._timelines=[],i._timedChildTimelines=[],i._timelineReady=!1,i.type=l.AnimationClip,i}return i(e,t),e.prototype._getChildTimeline=function(t){for(var e=this._timelines.length-1;e>=0;--e)if(this._timelines[e].targetIndex===t)return this._timelines[e];var n=new p.Timeline(t);return this._timelines.push(n),n},e.prototype._autoExtend=function(t){this._totalFrames<t&&(this._totalFrames=t)},e.prototype._parseProperties=function(t){"string"==typeof t.t?t.t=f.default.hexToUint(t.t):"number"==typeof t.v&&(t.v=!!t.v)},e.prototype.addTimedChild=function(t,e,n,r){var i,a;for(void 0===e&&(e=0),(void 0===n||n<1)&&(n=this._totalFrames||1),a=this._timedChildTimelines.length-1;a>=0;--a)if(this._timedChildTimelines[a].targetIndex===t){i=this._timedChildTimelines[a];break}if(i||(i=new p.ChildTimeline(t),this._timedChildTimelines.push(i)),f.default.fillFrames(i,e,n),this._totalFrames<e+n&&(this._totalFrames=e+n),r){var s={};for(var l in r){s=o(o({},s),r[l]);var u=parseInt(l,10),c=this._getChildTimeline(t);this._parseProperties(s);c.addKeyframe(s,u);this._autoExtend(u)}this._getChildTimeline(t).extendLastFrame(e+n)}return this},e.prototype.getInstance=function(t){var e=o(o({},this._options),t||{}),n=new u.AnimationClip(this.name,e);for(var r in n.name=this.name,n.___children=[],this._children){(p=this._children[r]).reset&&p.reset()}for(var i=function(t){for(var e=0;e<n.___children.length;e++)if(n.___children[e]==t)return e},a=0;a<this._frames.length;a++){var s=this._frames[a];switch(s.func){case"addTimedChild":for(var l=this._children[s.instance].getInstance(),c=!1,h=0;h<n.___children.length;h++){var p;if((p=n.___children[h])==l){c=!0;break}}if(c||n.___children.push(l),this._totalFrames=n.totalFrames,!this._timelineReady){var f=i(l),d={};for(var r in s.frames){for(var _=s.frames[r],y={},m=_.validKeys,g=0;g<m.length;g++){var v=m[g];y[v]=_[v]}d[r]=y}this.addTimedChild(f,s.startFrame,s.duration,d)}}}this._timelineReady=!0,n.timelines=this._timelines,n.timedChildTimelines=this._timedChildTimelines,n.___scripts=[];for(a=0;a<this._scripts.length;a++)n.___scripts.push({script:this._scripts[a].script,frame:this._scripts[a].frame});if(0==this._frames.length)for(var r in this._children){l=this._children[r].getInstance();n.addChild(l),n.___children.push(l)}return n.parseAnimationClipScripts(),n._setTimelinePosition(0,n.currentFrame,!0),n},a([h.GamePerformanceMethod("AnimationClipFactory","getInstance"),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e.prototype,"getInstance",null),e}(d);e.AnimationClipFactory=y;var m=function(t){function e(e,n,r){var i=t.call(this)||this;return i._options=e,i.animation=n,i.name=r,i.type=l.Container,i}return i(e,t),e.prototype.getInstance=function(t){var e=new c.AnimationClipContainer(this.name);e.name=this.name,e.___children=[];var n=[];for(var r in this._children){var i=this._children[r];i.reset();var o=i.getInstance(t);e.___children.push(o),n.push(o)}return e.renderOrderedItems(n),e},e}(d);e.AnimationClipContainerFactory=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.hexToUint=function(t){return t.substr?(3===(t=t.substr(1)).length&&(t=t.replace(/([a-f0-9])/g,"$1$1")),parseInt(t,16)):0},t.fillFrames=function(t,e,n){var r=t.length;if(r<e+n&&(t.length=e+n,r<e))if(t.fill)t.fill(!1,r,e);else for(var i=r;i<e;++i)t[i]=!1;if(t.fill)t.fill(!0,e,e+n);else{var o=t.length;for(i=e;i<o;++i)t[i]=!0}},t.deserializeKeyframes=function(t){for(var e,n,r={},i=0,o={X:"x",Y:"y",A:"sx",B:"sy",C:"kx",D:"ky",R:"r",L:"a",T:"t",F:"c",V:"v"},a="",s=!1,l={};i<=t.length;)o[e=t[i]]?(s||(s=!0,r[a]=l),n&&(l[n]=this.parseValue(n,a)),n=o[e],a="",i++):e&&" "!==e?(a+=e,i++):(i++,l[n]=this.parseValue(n,a),a="",n=null,l={},s=!1);return r},t.deserializeShapes=function(t){for(var e=[],n=t.split("\n"),r=/^[a-z]{1,2}$/,i=0;i<n.length;i++){for(var o=n[i].split(" "),a=0;a<o.length;a++){var s=o[a];"#"===s[0]||r.test(s)||(o[a]=parseFloat(s))}e.push(o)}return e},t.parseValue=function(t,e){switch(t){case"c":return(e=e.split(",")).forEach((function(t,e,n){n[e]=parseFloat(t)})),e;case"t":return e;case"v":return!!parseInt(e);default:return parseFloat(e)}},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.GameResources=void 0;var o=n(0),a=function(){function t(){}return t=r([o.Singleton,i("design:paramtypes",[])],t)}();e.GameResources=a},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.AnalyticResources=void 0;var i=n(0),o=function(){function t(){}return t=r([i.Singleton],t)}();e.AnalyticResources=o},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.DevicePixelRatio=void 0;var o=n(0),a=function(){function t(){this.value=window.devicePixelRatio}return t=r([o.Singleton,i("design:paramtypes",[])],t)}();e.DevicePixelRatio=a},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.PIXIRenderer=void 0;var o=n(0),a=n(44),s=n(180),l=n(181),u=n(22),c=n(182),h=function(){function t(){this.renderer3d=null,this.fps=30}return Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t){var e=this._htmlElement.htmlDivElement;l.PixiAnimationInit.setup(),t.fps&&(this.fps=t.fps),e.style.display="none",e.style.display="none";var n={backgroundColor:t.backgroundColor||0,clearBeforeRender:t.clearBeforeRender||!0,transparent:t.transparent||!1,showSplashScreen:t.showSplashScreen||!1};n.antialias=t.antialias||!1,n.roundPixels=t.roundPixels||!1;var r=new c(window.navigator.userAgent);if(r.tablet())u.Environment.type=u.EnvironmentTypeEnum.tablet;else if(r.phone()){if(u.Environment.type=u.EnvironmentTypeEnum.phone,"AndroidOS"==r.os()){var i=r.version("Android");i&&Math.floor(i)<=4&&(n.preserveDrawingBuffer=!0)}}else u.Environment.type=u.EnvironmentTypeEnum.pc;this.isCanvasRenderer=!1,this.renderer=PIXI.autoDetectRenderer(e.clientWidth,e.clientHeight,n,t.noWebGL);var o=this.renderer.view.getContext("webgl")||this.renderer.view.getContext("experimental-webgl");if(o&&o instanceof WebGLRenderingContext?this.isCanvasRenderer=!1:this.isCanvasRenderer=!0,t.disableContextMenu&&this.renderer.view.addEventListener("contextmenu",(function(t){t.cancelable&&t.preventDefault()})),e.appendChild(this.renderer.view),t.showStats){var a=new s.Stats,h=new s.PIXIHooks(this.renderer);this.statsAdapter=new s.StatsJSAdapter(h,a),e.appendChild(this.statsAdapter.stats.dom||this.statsAdapter.stats.domElement)}this.renderer.view.style["-webkit-user-select"]="none",this.renderer.view.style["-khtml-user-select"]="none",this.renderer.view.style["-moz-user-select"]="none",this.renderer.view.style["-ms-user-select"]="none",this.renderer.view.style["user-select"]="none",this.renderer.view.style.outline="none",this.renderer.view.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",this.renderer.view.id="gameCanvas",e.style.display="block",this.webGlError=!1,!!window.THREE&&(this.webGlError=this.isCanvasRenderer,this.webGlError||(this.renderer3d=new THREE.WebGLRenderer({canvas:this.renderer.view,context:this.renderer.gl,antialias:!0}),this.renderer3d.autoClear=!1)),this._stage=new PIXI.Container},t.prototype.destroy=function(){this._stage.destroy(!0),this._stage=null,this.renderer.destroy(!0),this.renderer3d&&this.renderer3d.dispose()},t.prototype.render=function(){this.renderer3d&&(this.renderer.gl.disable(this.renderer.gl.DEPTH_TEST),this.renderer.gl.disable(this.renderer.gl.CULL_FACE),this.renderer.gl.enable(this.renderer.gl.BLEND),this.renderer.gl.blendFunc(this.renderer.gl.ONE,this.renderer.gl.ONE_MINUS_SRC_ALPHA)),this._stage&&this.renderer.render(this._stage),this.statsAdapter&&this.statsAdapter.update()},r([o.Inject,i("design:type",a.RootHtml)],t.prototype,"_htmlElement",void 0),t=r([o.Singleton,i("design:paramtypes",[])],t)}();e.PIXIRenderer=h},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.RootHtml=void 0;var o=n(0),a=function(){function t(){this.htmlDivElement=null}return t=r([o.Singleton,i("design:paramtypes",[])],t)}();e.RootHtml=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSplashScreenBaseController=e.SimpleLoadingBaseController=e.SimpleBaseController=void 0;var s=n(23),l=n(29),u=n(60),c=n(30),h=n(1),p=function(t){function e(e){var n=t.call(this,e)||this;return n.name=e,n.$sprites=new u.SpriteList,n.$spritesEvents=new l.SpriteEvents,n}return i(e,t),e.prototype.initialize=function(e,n){return void 0===n&&(n=null),this.parentContainer=n||e.display,this.parentContainer.addChild(this.display),this.$sprites.initialize(null,this.display,this),this.$spritesEvents.initialize(this.config.events,null,this.$sprites,this,this.logger),this.config.onTap&&this.$spritesEvents.addEvent(this.display,this.config.onTap,this,this.logger,{eventType:c.EventsTypeEnum.CLICK_OR_TAP,event:this.config.onTap,targetType:c.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerDown&&this.$spritesEvents.addEvent(this.display,this.config.onPointerDown,this,this.logger,{eventType:c.EventsTypeEnum.POINTERDOWN,event:this.config.onPointerDown,targetType:c.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerUp&&this.$spritesEvents.addEvent(this.display,this.config.onPointerUp,this,this.logger,{eventType:c.EventsTypeEnum.POINTERUP,event:this.config.onPointerUp,targetType:c.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerUpOutside&&this.$spritesEvents.addEvent(this.display,this.config.onPointerUpOutside,this,this.logger,{eventType:c.EventsTypeEnum.POINTERUPOUTSIDE,event:this.config.onPointerUpOutside,targetType:c.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerOut&&this.$spritesEvents.addEvent(this.display,this.config.onPointerOut,this,this.logger,{eventType:c.EventsTypeEnum.POINTEROUT,event:this.config.onPointerOut,targetType:c.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerOver&&this.$spritesEvents.addEvent(this.display,this.config.onPointerOver,this,this.logger,{eventType:c.EventsTypeEnum.POINTEROVER,event:this.config.onPointerOver,targetType:c.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerMove&&this.$spritesEvents.addEvent(this.display,this.config.onPointerMove,this,this.logger,{eventType:c.EventsTypeEnum.POINTERMOVE,event:this.config.onPointerMove,targetType:c.EventsTargetTypeEnum.SPRITE,targetName:this.name}),t.prototype.initialize.call(this,e,n)},e.prototype._applyChildrenSorted=function(){var t=this;if(this.__childrenSorted){var e=new PIXI.Container,n=function(){for(var n=t.display.children.indexOf(e);n<t.display.children.length;n++){var r=t.display.children[n];t.display.swapChildren(e,r)}};this.display.addChild(e);for(var r=0;r<this.__childrenSorted.length;r++){var i=this.__childrenSorted[r];this.display.swapChildren(e,i),n()}this.display.removeChild(e),this.__childrenSorted=null}},e.prototype.sortCurrentChildren=function(t){for(var e=this.display.children,n=null,r=new h.List,i=0;i<e.length;i++)(n=e[i]).zOrder=0,t(n,n.__view)&&r.add(n);this.__childrenSorted=r.orderBy((function(t){return t.zOrder})).toArray()},e.prototype.update=function(e){return this._applyChildrenSorted(),t.prototype.update.call(this,e)},e.prototype.dispose=function(){this.isReady&&(this.parentContainer.removeChild(this.display),this.display.destroy({children:!0}),t.prototype.dispose.call(this),this.$spritesEvents.dispose())},e}(s._BaseController);e.SimpleBaseController=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toggleVisible=function(t){this.visible=t,t?this.onShow():this.onHide()},e}(p);e.SimpleLoadingBaseController=f;var d=function(t){function e(e){var n=t.call(this,e)||this;return n.name=e,n._delay=4e3,n}return i(e,t),e.prototype.setDelay=function(t){this._delay=t},e.prototype.onShow=function(){this.visible=!0},e.prototype.onHide=function(){return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){switch(e.label){case 0:return[4,function(e){return o(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,e)}))];case 1:return[2,t.sent()]}}))}))}(this._delay).then((function(){return t.visible=!1}))];case 1:return e.sent(),[2]}}))}))},e}(p);e.SimpleSplashScreenBaseController=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleUtils=e.GetTextureFromString=void 0;var r=n(97);e.GetTextureFromString=function(t){return(void 0)(t)},function(t){t.verbose=!1,t.DEG_TO_RADS=Math.PI/180,t.rotatePoint=function(e,n){if(e){e*=t.DEG_TO_RADS;var r=Math.sin(e),i=Math.cos(e),o=n.x*i-n.y*r,a=n.x*r+n.y*i;n.x=o,n.y=a}},t.combineRGBComponents=function(t,e,n){return t<<16|e<<8|n},t.normalize=function(e){var n=1/t.length(e);e.x*=n,e.y*=n},t.scaleBy=function(t,e){t.x*=e,t.y*=e},t.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.hexToRGB=function(t,e){var n;return e||(e={}),"#"==t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8==t.length&&(n=t.substr(0,2),t=t.substr(2)),e.r=parseInt(t.substr(0,2),16),e.g=parseInt(t.substr(2,2),16),e.b=parseInt(t.substr(4,2),16),n&&(e.a=parseInt(n,16)),e},t.generateEase=function(t){var e=t.length,n=1/e;return function(r){var i,o,a=e*r|0;return i=(r-a*n)*e,(o=t[a]||t[e-1]).s+i*(2*(1-i)*(o.cp-o.s)+i*(o.e-o.s))}},t.getBlendMode=function(t){if(!t)return PIXI.BLEND_MODES.NORMAL;for(t=t.toUpperCase();t.indexOf(" ")>=0;)t=t.replace(" ","_");return PIXI.BLEND_MODES[t]||PIXI.BLEND_MODES.NORMAL},t.createSteppedGradient=function(e,n){void 0===n&&(n=10),("number"!=typeof n||n<=0)&&(n=10);var i=new r.PropertyNode(t.hexToRGB(e[0].value),e[0].time);i.isStepped=!0;for(var o=i,a=e[0],s=1,l=e[s],u=1;u<n;++u){for(var c=u/n;c>l.time;)a=l,l=e[++s];c=(c-a.time)/(l.time-a.time);var h=t.hexToRGB(a.value),p=t.hexToRGB(l.value),f={r:(p.r-h.r)*c+h.r,g:(p.g-h.g)*c+h.g,b:(p.b-h.b)*c+h.b};o.next=new r.PropertyNode(f,u/n),o=o.next}return i}}(e.ParticleUtils||(e.ParticleUtils={}))},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.MultiplayerClient=void 0;var s=n(24),l=n(100),u=n(1),c=n(210),h=n(232),p=n(7),f=n(233),d=n(110),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sendGameActionAsync=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,void 0]}))}))},e.prototype._sendGameSignalAsync=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,void 0]}))}))},e.prototype._updateGameAsync=function(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,void 0]}))}))},e.prototype.create=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,void 0]}))}))},e.prototype.start=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,void 0]}))}))},e.prototype.startMatch=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,void 0]}))}))},e.prototype.disconnect=function(){},e}(function(){function t(){this.__serverUpdateDelay=.25,this.__serverPeersUpdateDelay=.1,this.__isStandalone=!1,this.traceEvents=0,this.__isCompressingTraffic=!0,this.__disableDirectConnections=!1,this.__queue=new p.Queue,this.__serverUpdateTimeOut=0,this._startedUtc=null,this._isConnected=!1,this._playerActions=[],this._playerActionIndex=0,this._serverActionsQueues=[],this._serverActionsQueueIndex=0,this._broadcastActionsQueue=[],this._currentBroadcastActionIndex=-1,this._serverBroadcastActionIndex=-1,this._serverSignalsQueues=[],this._peers=new c.Peers,this._timeOutPeers=0,this._timeOutPeersStats=5,this._directPeers=new c.Peers,this._isGamePad=!1,this._gamePadPlayerId="",this._peerToServerConnected=!1,this.enableReconnection=!1,this.isSyncing=!1,this.setData=!1,this.data="",this.players=new u.List,this.isServer=!1,this._queueDelay=[],this._broadcastLog={},this._playersPeersConnected={}}return Object.defineProperty(t.prototype,"serverUps",{get:function(){return 1/this.__serverUpdateDelay},set:function(t){this.__serverUpdateDelay=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStandalone",{get:function(){return this.__isStandalone},set:function(t){this.__isStandalone=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"peersUps",{get:function(){return 1/this.__serverPeersUpdateDelay},set:function(t){this.__serverPeersUpdateDelay=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompressingTraffic",{get:function(){return this.__isCompressingTraffic},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disableDirectConnections",{get:function(){return this.__disableDirectConnections},set:function(t){this.__disableDirectConnections!=t&&(this.__disableDirectConnections=t,this.__disableDirectConnections&&this.isServer?this._createPeers():this._peers.destroyAll())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playerId",{get:function(){return this._playerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnected",{get:function(){return this._isConnected},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameId",{get:function(){return this._gameId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPeerConnected",{get:function(){return this._peers.isConnected(this._playerId)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPeerConnectedToServer",{get:function(){return this._peerToServerConnected},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.players=new u.List,this.isServer=!1,this._peers.destroyAll(),this._directPeers.destroyAll(),this._playerActions=[],this._playerActionIndex=0,this._serverActionsQueues=[],this._serverActionsQueueIndex=0,this._broadcastActionsQueue=[],this._currentBroadcastActionIndex=-1,this._serverBroadcastActionIndex=-1,this._playerServerId="",this._playerId="",this._ready=!1,this._gameId="",this._startedUtc=null,this.__queue.clear(),this.__serverUpdateTimeOut=0,this.__isStandalone=!1,this.__$eventListeners_={}},t.prototype.action=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=this._playerId,i={id:this._playerActionIndex++,data:t},o=this._serverActionsQueues.filter((function(t){return t.playerId==r}))[0];n?this._directPeers.send({type:"sendGameActionAsync",data:{gameId:this._gameId,playerId:r,peerOnly:e,actionType:h.ActionType.sendActions,action:{actions:[i]}}}):this.isServer?o?o.actions.push(i):this._serverActionsQueues.push({type:0,po:e,id:++this._serverActionsQueueIndex,playerId:r,actions:[i]}):(e&&this._peerToServerConnected||this._playerActions.push(i),this._peers.send({type:"sendGameActionAsync",data:{gameId:this._gameId,playerId:r,peerOnly:e,actionType:h.ActionType.sendActions,action:{actions:[i]}}}))},t.prototype.signal=function(t,e){if(!this.isServer||this.playerId!=e){var n={data:t},r=this._serverSignalsQueues.filter((function(t){return t.playerId==e}))[0];r?r.signal.actions.push(n):this._serverSignalsQueues.push({playerId:e,signal:{type:"action",actions:[n]}})}},t.prototype.serverBroadcast=function(t,e,n){void 0===n&&(n=!1);var r={data:t};if(this.isServer)if(e){var i={type:1,id:++this._serverBroadcastActionIndex,playerId:e,po:n,actions:[r]};this._broadcastActionsQueue.push(i)}else{i={type:1,id:++this._serverBroadcastActionIndex,po:n,actions:[r]};this._broadcastActionsQueue.push(i)}},t.prototype.setPlayerData=function(t,e){var n=e||this._playerId;this.setData=!0;var r=this.players.firstOrDefault((function(t){return t.id==n}));r&&(r.data=t,this.data=t),this.isServer||this._peers.send({type:"sendGameActionAsync",data:{gameId:this._gameId,playerId:n,actionType:h.ActionType.updateData,action:{data:this.data}}})},t.prototype._playerError=function(t){this.trigger(d.MultiplayerEventsEnum.onError,t)},t.prototype._updateGame=function(t,e){if(this._isGamePad&&(this._directPeers.isConnected(this._gamePadPlayerId)||this._directPeers.check(this._gamePadPlayerId)||this._createDirectPeer(this._gamePadPlayerId)),!e&&this._peers.isConnected(this._playerId));else for(var n=0;n<t.game.players.length;n++){var r=t.game.players[n];this._addOrUpdatePlayer(r)}var i=t.queue||[];t.game.startedUtc&&this._startedUtc!=t.game.startedUtc&&(this._startedUtc=t.game.startedUtc,this.trigger(d.MultiplayerEventsEnum.startMatch)),this._updateQueue(i)},t.prototype._updateQueue=function(t){if(this.isSyncing)this._queueDelay.push(t);else{for(var e=[],n=function(n){if(t[n].id<0)return e.push(t[n]),"continue";r._broadcastLog[t[n].playerId]||(r._broadcastLog[t[n].playerId]=[]),r._broadcastLog[t[n].playerId].filter((function(e){return e==t[n].id}))[0]||(e.push(t[n]),r._broadcastLog[t[n].playerId].push(t[n].id),r._broadcastLog[t[n].playerId].length>100&&r._broadcastLog[t[n].playerId].shift())},r=this,i=0;i<t.length;i++)n(i);this.trigger(d.MultiplayerEventsEnum.updateGame,e);for(i=0;i<e.length;i++)for(var o=this._broadcastActionsQueue.length-1;o>=0;o--)try{e[i].id==this._broadcastActionsQueue[o].id&&this._broadcastActionsQueue.splice(o,1)}catch(t){console.error("_updateQueue",t)}}},t.prototype._addOrUpdatePlayer=function(t){var e=this.players.firstOrDefault((function(e){return e.index==t.index}));if(this.itIsMe(t.id)&&t.isServer!=this.isServer&&this._setServer(t.isServer),e)this.isServer&&e.type>0||e.copy(t),this.trigger(d.MultiplayerEventsEnum.updatePlayer,e);else{var n=s.MultiplayerPlayer.fromObject(t);this.players.add(n),this.itIsMe(n.id)?(this._playerIndex=n.index,n.isGamePad&&(this._isGamePad=!0,this._gamePadPlayerId=n.gamePadPlayer),this.trigger(d.MultiplayerEventsEnum.addPlayer,n)):this.trigger(d.MultiplayerEventsEnum.addPlayerOpponent,n)}},t.prototype.itIsMe=function(t){return t==this._playerId},t.prototype._playerStateChanged=function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return this.itIsMe(t.player.id)?(e=t.player.isServer,this.isServer==e?[3,2]:[4,this._setServer(e)]):[3,3];case 1:n.sent(),n.label=2;case 2:return[3,3];case 3:return[2]}}))}))},t.prototype._gameAction=function(t){switch(t.actionType){case h.ActionType.updateData:(e=this.players.firstOrDefault((function(e){return e.id==t.playerId}))).data=t.action.data,this.trigger(d.MultiplayerEventsEnum.updatePlayer,e);break;case h.ActionType.sendActions:if(this.isServer&&t.playerId){for(var e=this.players.firstOrDefault((function(e){return e.id==t.playerId})),n=[],r=0;r<t.action.actions.length;r++){var i=t.action.actions[r];e&&e.action<i.id&&(e.action=i.id,n.push(i))}this._serverActionsQueues.push({type:0,id:++this._serverActionsQueueIndex,po:t.peerOnly,playerId:t.playerId,actions:n})}}},t.prototype._updateServerPeers=function(t){var e=this;this._timeOutPeers-=t,this._timeOutPeers>=0||(this.isServer&&(this._peers.send({type:"updateGameAsync",data:{g:{p:this.players.where((function(t){return!t.left})).toArray()},q:this._broadcastActionsQueue}}),this.players.forEach((function(t,n){t.id!=e._playerId&&(e._peers.isConnected(t.id)||e._peers.check(t.id)||e._createPeer(t.id,!0))}))),this._timeOutPeers=this.__serverPeersUpdateDelay)},t.prototype._updatePeersStats=function(t){this._timeOutPeersStats-=t,this._timeOutPeersStats>=0||(this._peers.getStats(),this._timeOutPeersStats=10)},t.prototype.update=function(t){if(this._ready&&(this._peers.update(t),this._directPeers.update(t),this.__queue.update(t),this._updateServerPeers(t),this._updatePeersStats(t),this.isServer&&(this.modelConnectorOnGameServerUpdate&&this.modelConnectorOnGameServerUpdate(this._serverActionsQueues,t),this.trigger(d.MultiplayerEventsEnum.updateGameServer,this._serverActionsQueues,t),this._serverActionsQueues=[]),this.__serverUpdateTimeOut-=t,!(this.__serverUpdateTimeOut>0)))if(this.__serverUpdateTimeOut=this.__serverUpdateDelay,this.isServer){if(this._peers.send({type:"updateGameAsync",data:{g:{p:[]},q:this._broadcastActionsQueue}}),this.isStandalone)this._updateGameAsync({players:[],queue:[]},t>this.__serverUpdateDelay),this._updateQueue(this._broadcastActionsQueue.map((function(t){return{actions:t.actions,id:t.id,playerId:t.playerId,type:t.type}})));else if(this._updateGameAsync({players:[],queue:this._broadcastActionsQueue.filter((function(t){return!t.po}))},t>this.__serverUpdateDelay),this._updateQueue(this._broadcastActionsQueue.filter((function(t){return t.po})).map((function(t){return{actions:t.actions,id:t.id,playerId:t.playerId,type:t.type}}))),this._serverSignalsQueues.length>0){for(var e=0;e<this._serverSignalsQueues.length;e++)this._sendGameSignalAsync(this._serverSignalsQueues[e]);this._serverSignalsQueues=[]}}else this.setData&&(this.setData=!1,this._sendGameActionAsync({playerId:this._playerId,actionType:h.ActionType.updateData,action:{data:this.data}})),this._playerActions&&this._playerActions.length>0&&(this._sendGameActionAsync({playerId:this._playerId,actionType:h.ActionType.sendActions,action:{actions:this._playerActions}}),this._playerActions=[])},t.prototype._playerLeft=function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){return console.log("_playerLeft",t),this.trigger(d.MultiplayerEventsEnum.playerLeft,t.player),(e=this.players.firstOrDefault((function(e){return e.index==t.player.index})))&&(this._broadcastLog[e.id]=[],e.left=!0,e.action=-1,e.isServer=!1),t.player.isServer?this._peers.destroy(this._playerId):this.isServer&&(this._peers.destroy(e.id),this._playersPeersConnected[e.id]=!1),[2]}))}))},t.prototype._createPeers=function(){return o(this,void 0,void 0,(function(){var t,e,n,r;return a(this,(function(i){switch(i.label){case 0:return this.__disableDirectConnections?[2]:[4,f.delay(2e3)];case 1:i.sent(),t=this.players.where((function(t){return!t.left&&0==t.type})).select((function(t){return t.id})).toArray(),e=0,i.label=2;case 2:if(!(e<t.length))return[3,7];if(n=t[e],this.itIsMe(n))return[3,6];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,this._createPeer(n)];case 4:return i.sent(),[3,6];case 5:return r=i.sent(),console.error(r),[3,6];case 6:return e++,[3,2];case 7:return[2]}}))}))},t.prototype._setServer=function(t){return o(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:return this.trigger(d.MultiplayerEventsEnum.setServer,t),this.isServer?(this._peers.destroyAll(),this._onPeerClosed(this._playerId)):this._peers.destroy(this._playerId),this.isServer!=t&&(t?this.players.where((function(t){return!n.itIsMe(t.id)})).forEach((function(t){t.action=-1})):this._currentBroadcastActionIndex=-1),this.isServer=t,t?(this.players.where((function(t){return!n.itIsMe(t.id)})).forEach((function(t){t.isServer=!1})),(e=this.players.firstOrDefault((function(t){return t.id==n._playerId})))&&(e.isServer=t),[4,this._createPeers()]):[3,2];case 1:return r.sent(),this._onPeerConnecting(this._playerId),this._onPeerConnected(this._playerId),[3,2];case 2:return[2]}}))}))},t.prototype._playerJoined=function(t,e,n){return o(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:return t!=this._playerId&&(r=this.players.firstOrDefault((function(t){return t.index==n})))&&r.left&&(r.left=!1,r.index=n,this.trigger(d.MultiplayerEventsEnum.addPlayerOpponent,r),this._sendGameSignalAsync({playerId:r.id,signal:{type:"state",player:r}})),this.trigger(d.MultiplayerEventsEnum.playerJoin,t,e),this.isServer?(i=t,[4,this._createPeer(i)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))},t.prototype._gameSignal=function(t){return o(this,void 0,void 0,(function(){var e,n,r,i,s=this;return a(this,(function(u){if("peer"==t.signal.type)this._playerServerId=t.signal.serverId,this._peers.signal(t.signal.peer,t.signal.data);else if("create_peer"==t.signal.type||"recover_peer"==t.signal.type)e=t.signal.peer,this._peers.client(e),(r=this._peers.getPeer(e)).on("signal",(function(n){return o(s,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return"recover_peer"==t.signal.type?this._onPeerRecovering(e):this._onPeerConnecting(e),[4,this.delay(1e3)];case 1:return r.sent(),this._sendGameSignalAsync({playerId:this._playerServerId,signal:{type:"peer",playerId:this._playerId,data:n,peer:t.signal.peer}}),[2]}}))}))})),r.on("data",(function(t){if("updateGameAsync"==t.type){var e=t.data;s._updateGame(l.GameStateChangedEvent.fromObject(e),!0)}})),r.on("connect",(function(n){s._peerToServerConnected=!0,"recover_peer"==t.signal.type?s._onPeerRestored(e):s._onPeerConnected(e)})),r.on("close",(function(t){s._peerToServerConnected=!1,s._onPeerClosed(e)}));else if("direct_peer"==t.signal.type)this._gamePadPlayerServerId=t.signal.serverId,this._directPeers.signal(t.signal.peer,t.signal.data);else if("create_direct_peer"==t.signal.type)n=t.signal.peer,this._directPeers.client(n),(r=this._directPeers.getPeer(n)).on("signal",(function(e){return o(s,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,this.delay(1e3)];case 1:return n.sent(),this._sendGameSignalAsync({playerId:this._gamePadPlayerServerId,signal:{type:"direct_peer",playerId:this._playerId,data:e,peer:t.signal.peer,serverId:t.signal.serverId}}),[2]}}))}))})),r.on("data",(function(t){if("sendGameActionAsync"==t.type){var e=t.data;s._gameDirectAction(e)}})),r.on("connect",(function(t){console.log("WEBRTC direct connected!")}));else if("state"==t.signal.type)this.trigger(d.MultiplayerEventsEnum.setPlayerState,t.signal.player);else if("action"==t.signal.type){for(this._updateQueue([{type:0,id:-10,playerId:t.playerId,actions:t.signal.actions}]),this.isSyncing=!1,i=0;i<this._queueDelay.length;i++)this._updateQueue(this._queueDelay[i]);this._queueDelay=[]}return[2]}))}))},Object.defineProperty(t.prototype,"playersPeersConnected",{get:function(){var t=[];for(var e in this._playersPeersConnected){this._playersPeersConnected[e]&&t.push(e)}return t},enumerable:!1,configurable:!0}),t.prototype._createPeer=function(t,e){return void 0===e&&(e=!1),o(this,void 0,void 0,(function(){var n,r=this;return a(this,(function(i){switch(i.label){case 0:return this.__disableDirectConnections||t==this._playerId?[2]:(console.log("_createPeer",t),this._peers.server(t),n=this._peers.getPeer(t),[4,this._sendGameSignalAsync({playerId:t,signal:{type:e?"recover_peer":"create_peer",playerId:this._playerId,peer:t,serverId:this._playerId}})]);case 1:return i.sent(),n.on("connect",(function(e){r._playersPeersConnected[t]=!0,console.log("client connected!",t)})),n.on("close",(function(e){r._playersPeersConnected[t]=!1,console.log("client connection close!",t)})),n.on("signal",(function(e){r._sendGameSignalAsync({playerId:t,signal:{type:"peer",playerId:r._playerId,data:e,peer:t,serverId:r._playerId}})})),n.on("data",(function(t){if("sendGameActionAsync"==t.type){var e=t.data;r._gameAction(e)}r._playersPeersConnected[n.id]=!0})),[2]}}))}))},t.prototype._createDirectPeer=function(t){return o(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:return this.__disableDirectConnections||t==this._playerId?[2]:(this._directPeers.server(t),e=this._directPeers.getPeer(t),[4,this._sendGameSignalAsync({playerId:t,signal:{type:"create_direct_peer",playerId:this._playerId,peer:t,serverId:this._playerId}})]);case 1:return r.sent(),e.on("connect",(function(e){n._playersPeersConnected[t]=!0,console.log("client connected!",t)})),e.on("close",(function(e){n._playersPeersConnected[t]=!1,console.log("client connection close!",t)})),e.on("signal",(function(e){n._sendGameSignalAsync({playerId:t,signal:{type:"direct_peer",playerId:n._playerId,data:e,peer:t,serverId:n._playerId}})})),e.on("data",(function(t){if("sendGameActionAsync"==t.type){var e=t.data;n._gameDirectAction(e)}})),[2]}}))}))},t.prototype._gameDirectAction=function(t){switch(console.log("_gameDirectAction",t),t.actionType){case h.ActionType.sendActions:if(t.playerId){for(var e=this.players.firstOrDefault((function(e){return e.id==t.playerId})),n=[],r=0;r<t.action.actions.length;r++){var i=t.action.actions[r];e&&e.action<i.id&&(e.action=i.id,n.push(i))}this._updateQueue([{type:0,id:-10,po:t.peerOnly,playerId:t.playerId,actions:n}])}}},t.prototype._onPeerConnected=function(t){console.log("peerConnected",t),this.trigger(d.MultiplayerEventsEnum.peerConnected,t)},t.prototype._onPeerConnecting=function(t){console.log("peerConnecting",t),this.trigger(d.MultiplayerEventsEnum.peerConnecting,t)},t.prototype._onPeerRestored=function(t){console.log("peerRestored",t),this.trigger(d.MultiplayerEventsEnum.peerRestored,t)},t.prototype._onPeerRecovering=function(t){console.log("peerRecovering",t),this.trigger(d.MultiplayerEventsEnum.peerRecovering,t)},t.prototype._onPeerClosed=function(t){console.log("peerClosed",t),this.trigger(d.MultiplayerEventsEnum.peerClosed,t)},t.prototype._onConnectionRestored=function(t){this.trigger(d.MultiplayerEventsEnum.connectionRestored,t)},t.prototype._onConnectionRecovering=function(){this.trigger(d.MultiplayerEventsEnum.connectionRecovering)},t.prototype._onConnectionLost=function(){var t=this;this.trigger(d.MultiplayerEventsEnum.connectionLost);var e=this.players.firstOrDefault((function(e){return e.index==t._playerIndex}));this._playerLeft({id:this._playerId,player:e,gameId:"",isoDateTime:""})},t.prototype._onDisconnected=function(){this.trigger(d.MultiplayerEventsEnum.disconnected)},t.prototype.onDisconnected=function(t){this._on(d.MultiplayerEventsEnum.disconnected,t)},t.prototype.onConnectionLost=function(t){this._on(d.MultiplayerEventsEnum.connectionLost,t)},t.prototype.onConnectionRecovering=function(t){this._on(d.MultiplayerEventsEnum.connectionRecovering,t)},t.prototype.onConnectionRestored=function(t){this._on(d.MultiplayerEventsEnum.connectionRestored,t)},t.prototype.onStartMatch=function(t){this._on(d.MultiplayerEventsEnum.startMatch,t)},t.prototype.onGameUpdate=function(t){this._on(d.MultiplayerEventsEnum.updateGame,t)},t.prototype.onGameServerUpdate=function(t){this._on(d.MultiplayerEventsEnum.updateGameServer,t)},t.prototype.onSetServer=function(t){this._on(d.MultiplayerEventsEnum.setServer,t)},t.prototype.onPlayerJoin=function(t){this._on(d.MultiplayerEventsEnum.playerJoin,t)},t.prototype.onPlayerLeft=function(t){this._on(d.MultiplayerEventsEnum.playerLeft,t)},t.prototype.onUpdatePlayer=function(t){this._on(d.MultiplayerEventsEnum.updatePlayer,t)},t.prototype.onError=function(t){this._on(d.MultiplayerEventsEnum.onError,t)},t.prototype.onAddPlayer=function(t){this._on(d.MultiplayerEventsEnum.addPlayer,t)},t.prototype.onPeerConnected=function(t){this._on(d.MultiplayerEventsEnum.peerConnected,t)},t.prototype.onPeerClosed=function(t){this._on(d.MultiplayerEventsEnum.peerClosed,t)},t.prototype.onPeerConnecting=function(t){this._on(d.MultiplayerEventsEnum.peerConnecting,t)},t.prototype.onPeerRecovering=function(t){this._on(d.MultiplayerEventsEnum.peerRecovering,t)},t.prototype.onPeerRestored=function(t){this._on(d.MultiplayerEventsEnum.peerRestored,t)},t.prototype.onAddPlayerOpponent=function(t){this._on(d.MultiplayerEventsEnum.addPlayerOpponent,t)},t.prototype._on=function(t,e,n){this.__$eventListeners_=this.__$eventListeners_||{},this.__$eventListeners_[t]=this.__$eventListeners_[t]||[],this.__$eventListeners_[t].push({callback:e,context:n||this})},t.prototype.off=function(t,e){this.__$eventListeners_=this.__$eventListeners_||{};for(var n=this.__$eventListeners_[t]||[],r=0;r<n.length;r++)if(n[r].callback===e)return void n.splice(r,1)},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.__$eventListeners_=this.__$eventListeners_||{};for(var r=this.__$eventListeners_[t]||[],i=0;i<r.length;i++)r[i].callback.apply(r[i].context,Array.prototype.slice.call(arguments,1))},t.prototype.delay=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){return[2,new Promise((function(e,n){setTimeout((function(){e()}),t)}))]}))}))},t}());e.MultiplayerClient=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ISoundManager=e.SoundType=void 0,function(t){t[t.SFX=0]="SFX",t[t.Music=1]="Music",t[t.ALL=2]="ALL"}(e.SoundType||(e.SoundType={}));var r=function(){function t(){}return t.prototype.play=function(t,e){},t.prototype.stop=function(t){},t.prototype.changeVolume=function(t,e){},t.prototype.stopAll=function(){},t.prototype.muteSoundsByType=function(t,e){},t.prototype.loadSound=function(t,e,n){},t.prototype.isSoundPlaying=function(t){},t.prototype.isAdded=function(t){return!0},t.prototype.isLoaded=function(t){return!0},t.prototype.getSoundById=function(t){return null},t.prototype.playSound=function(t,e,n){},t}();e.ISoundManager=r},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.GameRandom=void 0;var o=n(0),a=n(9),s=function(){function t(){this._seed=0,this._currentSeed=0,this.initialize()}return t.prototype.getSeed=function(){return this._seed},t.prototype.setSeed=function(t){this._seed=this._currentSeed=Math.round(t),this._logger&&this._logger.log("Random","Seed","Set",this._seed)},t.prototype.createGUID=function(){var t=this;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*t.random()|0;return("x"==e?n:3&n|8).toString(16)}))},t.prototype.getCurrentSeed=function(){return this._currentSeed},t.prototype.initialize=function(t){var e;if(void 0===t&&(t=null),null==t){do{e=Math.round(16777215*Math.random())}while(e==this.getCurrentSeed());this.setSeed(e)}else this.setSeed(t)},t.prototype.random=function(){return this._currentSeed=16807*this._currentSeed%2147483647,this._currentSeed/2147483647+2.33e-10},t.prototype.float=function(t,e){return null==e&&(e=t,t=0),this.random()*(e-t)+t},t.prototype.boolean=function(t){return null==t&&(t=.5),this.random()<t},t.prototype.sign=function(t){return null==t&&(t=.5),this.random()<t?1:-1},t.prototype.bit=function(t){return null==t&&(t=.5),this.random()<t?1:0},t.prototype.integer=function(t,e){return null==e&&(e=t,t=0),Math.floor(this.float(t,e))},t.prototype.reset=function(){this._seed=this._currentSeed},r([o.Inject,i("design:type",a.BaseControllerEmptyLogger)],t.prototype,"_logger",void 0),t=r([o.Singleton,i("design:paramtypes",[])],t)}();e.GameRandom=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PixiFactory=void 0;var o=n(127),a=n(72),s=n(129),l=n(34),u=n(2),c=n(35),h=n(145),p=function(t){function e(n){void 0===n&&(n=null);var r=t.call(this,n)||this;if(null===e._dragonBonesInstance){var i=new o.PixiArmatureDisplay;e._dragonBonesInstance=new l.DragonBones(i)}return r._dragonBones=e._dragonBonesInstance,r}return i(e,t),e.clockHandler=function(t){null!==e._dragonBonesInstance&&e._dragonBonesInstance.advanceTime(t)},Object.defineProperty(e,"factory",{get:function(){return null===e._factory&&(e._factory=new e),e._factory},enumerable:!1,configurable:!0}),e.prototype._buildTextureAtlasData=function(t,e){return t?t.renderTexture=e:t=u.BaseObject.borrowObject(a.PixiTextureAtlasData),t},e.prototype._buildArmature=function(t){var e=u.BaseObject.borrowObject(c.Armature),n=new o.PixiArmatureDisplay;return e.init(t.armature,n,n,this._dragonBones),e},e.prototype._buildSlot=function(t,e,n){var r=u.BaseObject.borrowObject(h.PixiSlot);return r.init(e,n,new PIXI.Sprite,new PIXI.mesh.Mesh(null,null,null,null,PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES)),r},e.prototype.buildArmatureDisplay=function(t,e,n,r){void 0===e&&(e=""),void 0===n&&(n=""),void 0===r&&(r="");var i=this.buildArmature(t,e||"",n||"",r||"");return null!==i?(this._dragonBones.clock.add(i),i.display):null},e.prototype.getTextureDisplay=function(t,e){void 0===e&&(e=null);var n=this._getTextureData(null!==e?e:"",t);return null!==n&&null!==n.renderTexture?new PIXI.Sprite(n.renderTexture):null},Object.defineProperty(e.prototype,"soundEventManager",{get:function(){return this._dragonBones.eventManager},enumerable:!1,configurable:!0}),e._dragonBonesInstance=null,e._factory=null,e}(s.BaseFactory);e.PixiFactory=p},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WeightData=e.PathDisplayData=e.BoundingBoxDisplayData=e.MeshDisplayData=e.ArmatureDisplayData=e.ImageDisplayData=e.DisplayData=e.GeometryData=void 0;var o=n(2),a=n(37),s=n(10),l=function(){function t(){this.weight=null}return t.prototype.clear=function(){this.isShared||null===this.weight||this.weight.returnToPool(),this.isShared=!1,this.inheritDeform=!1,this.offset=0,this.data=null,this.weight=null},t.prototype.shareFrom=function(t){this.isShared=!0,this.offset=t.offset,this.weight=t.weight},Object.defineProperty(t.prototype,"vertexCount",{get:function(){return this.data.intArray[this.offset+0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"triangleCount",{get:function(){return this.data.intArray[this.offset+1]},enumerable:!1,configurable:!0}),t}();e.GeometryData=l;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.transform=new s.Transform,e}return i(e,t),e.prototype._onClear=function(){this.name="",this.path="",this.transform.identity(),this.parent=null},e}(o.BaseObject);e.DisplayData=u;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pivot=new a.Point,e}return i(e,t),e.toString=function(){return"[class dragonBones.ImageDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=0,this.pivot.clear(),this.texture=null},e}(u);e.ImageDisplayData=c;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actions=[],e}return i(e,t),e.toString=function(){return"[class dragonBones.ArmatureDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this);for(var e=0,n=this.actions;e<n.length;e++){n[e].returnToPool()}this.type=1,this.inheritAnimation=!1,this.actions.length=0,this.armature=null},e.prototype.addAction=function(t){this.actions.push(t)},e}(u);e.ArmatureDisplayData=h;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.geometry=new l,e}return i(e,t),e.toString=function(){return"[class dragonBones.MeshDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=2,this.geometry.clear(),this.texture=null},e}(u);e.MeshDisplayData=p;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boundingBox=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.BoundingBoxDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),null!==this.boundingBox&&this.boundingBox.returnToPool(),this.type=3,this.boundingBox=null},e}(u);e.BoundingBoxDisplayData=f;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.geometry=new l,e.curveLengths=[],e}return i(e,t),e.toString=function(){return"[class dragonBones.PathDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=4,this.closed=!1,this.constantSpeed=!1,this.geometry.clear(),this.curveLengths.length=0},e}(u);e.PathDisplayData=d;var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bones=[],e}return i(e,t),e.toString=function(){return"[class dragonBones.WeightData]"},e.prototype._onClear=function(){this.count=0,this.offset=0,this.bones.length=0},e.prototype.addBone=function(t){this.bones.push(t)},e}(o.BaseObject);e.WeightData=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorTransform=void 0;var r=function(){function t(t,e,n,r,i,o,a,s){void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),this.alphaMultiplier=t,this.redMultiplier=e,this.greenMultiplier=n,this.blueMultiplier=r,this.alphaOffset=i,this.redOffset=o,this.greenOffset=a,this.blueOffset=s}return t.prototype.copyFrom=function(t){this.alphaMultiplier=t.alphaMultiplier,this.redMultiplier=t.redMultiplier,this.greenMultiplier=t.greenMultiplier,this.blueMultiplier=t.blueMultiplier,this.alphaOffset=t.alphaOffset,this.redOffset=t.redOffset,this.greenOffset=t.greenOffset,this.blueOffset=t.blueOffset},t.prototype.identity=function(){this.alphaMultiplier=this.redMultiplier=this.greenMultiplier=this.blueMultiplier=1,this.alphaOffset=this.redOffset=this.greenOffset=this.blueOffset=0},t}();e.ColorTransform=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},a=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationClip=void 0;var u=n(21),c=n(1),h=n(8),p=function(t){function e(n,r,i,a,s,l){var u=t.call(this,n)||this;if(r="number"==typeof(r=void 0===r?{}:r)?{mode:r||e.INDEPENDENT,duration:i||0,loop:void 0===a||a,labels:l||{},framerate:s||0,startPosition:0}:o({mode:e.INDEPENDENT,startPosition:0,loop:!0,labels:{},duration:0,framerate:0},r),u.mode=r.mode,u.startPosition=r.startPosition,u.loop=!!r.loop,u.currentFrame=0,u._labels=[],u._labelDict=r.labels,r.labels){for(var c in r.labels){var h={label:c,position:r.labels[c]};u._labels.push(h)}u._labels.sort((function(t,e){return t.position-e.position}))}return u.selfAdvance=!0,u.paused=!1,u.actionsEnabled=!0,u.autoReset=!0,u._synchOffset=0,u._prevPos=-1,u._t=0,u._framerate=r.framerate,u._duration=0,u._totalFrames=r.duration,u._timelines=[],u._timedChildTimelines=[],u._depthSorted=[],u._actions=[],u._beforeUpdate=null,r.framerate&&(u.framerate=r.framerate),u.framerate=24,u.___updateTimeline=0,u.___setTimelinePosition=0,u.___goto=0,u.___advance=0,u}return i(e,t),e.prototype.update=function(e){if(this.visible){if(this.paused||!this.selfAdvance)return this._prevPos<0&&this._goto(this.currentFrame),void t.prototype.update.call(this,e);var n=e;t.prototype.update.call(this,e),this.advance(n)}},Object.defineProperty(e.prototype,"labels",{get:function(){return this._labels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelsMap",{get:function(){return this._labelDict},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timelines",{set:function(t){this._timelines=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timedChildTimelines",{set:function(t){this._timedChildTimelines=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentLabel",{get:function(){for(var t=this._labels,e=null,n=0,r=t.length;n<r&&t[n].position<=this.currentFrame;++n)e=t[n].label;return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"elapsedTime",{get:function(){return this._t},set:function(t){this._t=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"framerate",{get:function(){return this._framerate},set:function(t){t>0?(this._framerate=t,this._duration=t?this._totalFrames/t:0,this._t=this.currentFrame/t):this._t=this._framerate=this._duration=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._totalFrames},enumerable:!1,configurable:!0}),e.prototype.setDuration=function(e){this.framerate=this.totalFrames/e,t.prototype.setDuration.call(this,e)},e.prototype.setFramerate=function(e){this.framerate=e,t.prototype.setFramerate.call(this,e)},e.prototype.addAction=function(t,e){if("string"==typeof e){var n=this._labelDict[e];if(void 0===n)throw"The label '"+e+"' does not exist on this timeline";e=n}var r=this._actions;return r.length<=e&&(r.length=e+1),this._totalFrames<e&&(this._totalFrames=e),r[e]?r[e].push(t):r[e]=[t],this},e.prototype.removeAction=function(t,e){var n=this._actions;if(n[e])for(var r=0;r<n[e].length;r++)n[e][r]==t&&n[e].splice(r,1)},e.prototype.playSound=function(t,e){return void 0===e&&(e=!1),this},e.prototype.play=function(){this.paused=!1},e.prototype.stop=function(t){void 0===t&&(t=!0),this.paused=!0,t&&this._stopAll(this)},e.prototype._stopAll=function(t){if(t.___children&&t.___children.length)for(var e=t.___children,n=0;n<e.length;n++){var r=e[n];r.stop&&(r.stop(),this._stopAll(r))}},e.prototype.dispatchEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.triggerEvent.apply(this,l(["dispatchEvent",t],e))},e.prototype.onDispatchEvent=function(t){this.triggerEvent("dispatchEvent",t)},e.prototype.gotoAndPlayAll=function(t,e){var n=this._labelDict[t]||t;e||this.gotoAndPlay(t),this._gotoAndPlayAllChildren(n,this,e)},e.prototype.gotoAndStopAll=function(t){var e=this._labelDict[t]||t;this.gotoAndStop(t),this._gotoAndStopAllChildren(e,this)},e.prototype.parseAnimationClipScripts=function(){for(var t=this,e=this.___scripts||[],n=function(n){var i=null;try{var o=new Function("",e[n].script);i=function(){try{o.apply(t,[])}catch(t){console.error("error run script on frame "+e[n].frame,e[n].script),console.error(t)}}}catch(t){console.error("error eval script on frame "+e[n].frame,e[n].script),console.error(t)}i&&r.addAction(i,e[n].frame)},r=this,i=0;i<e.length;i++)n(i)},e.prototype.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},e.prototype.gotoAndStop=function(t){this.paused=!0,this._goto(t)},Object.defineProperty(e.prototype,"parentFramerate",{get:function(){for(var t=this,n=t._framerate;(t=t.parent)&&!n;)t.mode===e.INDEPENDENT&&(n=t._framerate);return n||e.DEFAULT_FRAMERATE},enumerable:!1,configurable:!0}),e.prototype.advance=function(t){var e;this._framerate||(this.framerate=this.parentFramerate),t&&(this._t+=t),this._t>this._duration&&(this._t=this.loop?this._t-this._duration:this._duration),this.currentFrame=Math.floor(this._t*this._framerate+1e-8),this.currentFrame>=this._totalFrames&&(this.currentFrame=this._totalFrames-1),this._beforeUpdate&&(e=this._beforeUpdate(this)),this._updateTimeline(),e&&e()},e.prototype._goto=function(t){var e="string"==typeof t?this._labelDict[t]:t;void 0!==e&&(this._prevPos=NaN,this.currentFrame=e,this._framerate||(this.framerate=this.parentFramerate),this._framerate>0?this._t=e/this._framerate:this._t=0,this._updateTimeline())},e.prototype._reset=function(){this._prevPos=-1,this._t=0,this.currentFrame=0},e.prototype._updateTimeline=function(){var t=this.mode!==e.INDEPENDENT;t&&(this.currentFrame=this.startPosition+(this.mode===e.SINGLE_FRAME?0:this._synchOffset),this.currentFrame>=this._totalFrames&&(this.currentFrame%=this._totalFrames)),this._prevPos!==this.currentFrame&&(this._setTimelinePosition(this._prevPos,this.currentFrame,!t&&this.actionsEnabled),this._prevPos=this.currentFrame)},e.prototype._setTimelinePosition=function(t,n,r){var i,o,a,s=this._timelines;for(i=s.length-1;i>=0;--i){var l=s[i];for(o=0,a=l.length;o<a;++o){var u=l[o];if(n>=u.startFrame&&n<=u.endFrame){var c=this.___children[l.targetIndex];u.setPosition(c,n);break}}}for(var h=0;h<this.___children.length;h++){this.___children[h].mask=null}var p=this._timedChildTimelines,f=this._depthSorted;for(i=0,a=p.length;i<a;++i){c=this.___children[p[i].targetIndex];var d=p[i][n];d?c.parent!==this&&f.push(c):d||c.parent!==this||(this.removeChild(c),c.mask=null,this._removeChildrenMask(c))}this.renderOrderedItems(f),f.length=0;var _,y=this.children;for(i=0,a=y.length;i<a;++i)(_=y[i]).mode===e.SYNCHED&&(_._synchOffset=n-_.parentStartPosition,_._updateTimeline());if(r){var m=this._actions,g=!1;for(n<t?(a=m.length,g=!0):a=Math.min(n+1,m.length),i=t>=0?t+1:n;i<a;++i){if(m[i]){var v=m[i];for(o=0;o<v.length;++o)v[o].call(this)}g&&i===a-1&&(i=0,a=n+1,g=!1)}}},e.prototype.destroy=function(e){if(!this.__destroyed){this.__destroyed=!0;for(var n=0;n<this.___children.length;n++)this.___children[n].destroy({children:!0});this._actions=null,this._timelines=null,this._depthSorted=null,this._timedChildTimelines=null,this._beforeUpdate=null,this._labels=null,this._labelDict=null,t.prototype.destroy.call(this,{children:!0})}},e.INDEPENDENT=0,e.SINGLE_FRAME=1,e.SYNCHED=2,e.DEFAULT_FRAMERATE=24,e.extend=function(t){return t.prototype=Object.create(e.prototype),t.prototype.__parent=e.prototype,t.prototype.constructor=t,t},a([h.GamePerformanceMethod("AnimationClip","_stopAll"),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e.prototype,"_stopAll",null),a([h.GamePerformanceMethod("AnimationClip","dispatchEvent"),s("design:type",Function),s("design:paramtypes",[String,Object]),s("design:returntype",void 0)],e.prototype,"dispatchEvent",null),a([h.GamePerformanceMethod("AnimationClip","onDispatchEvent"),s("design:type",Function),s("design:paramtypes",[String]),s("design:returntype",void 0)],e.prototype,"onDispatchEvent",null),a([h.GamePerformanceMethod("AnimationClip","gotoAndPlayAll"),s("design:type",Function),s("design:paramtypes",[Object,c.List]),s("design:returntype",void 0)],e.prototype,"gotoAndPlayAll",null),a([h.GamePerformanceMethod("AnimationClip","gotoAndStopAll"),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e.prototype,"gotoAndStopAll",null),a([h.GamePerformanceMethod("AnimationClip","parseAnimationClipScripts"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],e.prototype,"parseAnimationClipScripts",null),a([h.GamePerformanceMethod("AnimationClip","gotoAndPlay"),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e.prototype,"gotoAndPlay",null),a([h.GamePerformanceMethod("AnimationClip","gotoAndStop"),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e.prototype,"gotoAndStop",null),a([h.GamePerformanceMethod("AnimationClip","_setTimelinePosition"),s("design:type",Function),s("design:paramtypes",[Object,Object,Object]),s("design:returntype",void 0)],e.prototype,"_setTimelinePosition",null),e}(u.AnimationClipContainer);e.AnimationClip=p},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=void 0;var s=n(87),l=n(0),u=n(1);var c=function(t){function e(){var e=t.call(this)||this;return e.isEnabled=!1,e._pressedKeys=[],e._releasedKeys=[],e._downKeys=new u.List,e._hotKeys=[],e._preventDefaultKeys=[],e}return i(e,t),e.prototype.enable=function(){this.isEnabled||(this.isEnabled=!0,this._enableEvents())},e.prototype._enableEvents=function(){window.addEventListener("keydown",this._onKeyDown.bind(this),!0),window.addEventListener("keyup",this._onKeyUp.bind(this),!0)},e.prototype.disable=function(){this.isEnabled&&(this.isEnabled=!1,this._disableEvents())},e.prototype._disableEvents=function(){window.removeEventListener("keydown",this._onKeyDown,!0),window.removeEventListener("keyup",this._onKeyUp,!0)},e.prototype.setPreventDefault=function(t,e){if(void 0===e&&(e=!0),r=t,"[object Array]"===Object.prototype.toString.call(r))for(var n=0;n<t.length;n++)this._preventDefaultKeys[t[n]]=e;else this._preventDefaultKeys[t]=e;var r},e.prototype._onKeyDown=function(t){var e=t.which||t.keyCode;this._preventDefaultKeys[e]&&t.preventDefault(),this.isDown(e)||(this._downKeys.add({key:e,event:t}),this._pressedKeys[e]=!0,this.emit("pressed",e,t))},e.prototype._onKeyUp=function(t){var e=t.which||t.keyCode;if(this._preventDefaultKeys[e]&&t.preventDefault(),this.isDown(e)){this._pressedKeys[e]=!1,this._releasedKeys[e]=!0;var n=this._downKeys.firstOrDefault((function(t){return t.key==e}));n&&this._downKeys.remove(n),this.emit("released",e,t)}},e.prototype.isDown=function(t){return!!this._downKeys.firstOrDefault((function(e){return e.key==t}))},e.prototype.isPressed=function(t){return!!this._pressedKeys[t]},e.prototype.isReleased=function(t){return!!this._releasedKeys[t]},e.prototype.update=function(){var t=this;for(var e in this._hotKeys)this._hotKeys[e].update();this._downKeys.forEach((function(e,n){t.emit("down",e.key,e.event)})),this._pressedKeys.length=0,this._releasedKeys.length=0},e.prototype.getHotKey=function(t){var e=this._hotKeys[t]||new s.HotKey(t,this);return this._hotKeys[t]=e,e},e.prototype.removeHotKey=function(t){this._hotKeys[t]&&delete this._hotKeys[t]},e=o([l.Singleton,a("design:paramtypes",[])],e)}(PIXI.utils.EventEmitter);e.KeyboardManager=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.emptyEvents=e.isGamepadSupported=e.error=e.log=void 0,e.log=function(t,e){void 0===e&&(e="log"),"error"===e?console&&"function"==typeof console.error&&console.error(t):console&&"function"==typeof console.log&&console.log(t)},e.error=function(t){return e.log(t,"error")},e.isGamepadSupported=function(){return navigator.getGamepads&&"function"==typeof navigator.getGamepads||navigator.getGamepads&&"function"==typeof navigator.webkitGetGamepads||!1},e.emptyEvents=function(){return{action:function(){},after:function(){},before:function(){}}}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.GamepadsManager=e.GamepadButtonsEnum=void 0;var o=n(0);!function(t){t.button0="button0",t.button1="button1",t.button2="button2",t.button3="button3",t.button4="button4",t.button5="button5",t.button6="button6",t.button7="button7",t.button8="button8",t.button9="button9",t.button10="button10",t.button11="button11",t.button12="button12",t.button13="button13",t.button14="button14",t.button15="button15",t.button16="button16",t.up0="up0",t.down0="down0",t.right0="right0",t.left0="left0",t.up1="up1",t.down1="down1",t.right1="right1",t.left1="left1",t.start="start",t.select="select",t.power="power",t.l1="l1",t.l2="l2",t.r1="r1",t.r2="r2",t.up="up",t.down="down",t.right="right",t.left="left"}(e.GamepadButtonsEnum||(e.GamepadButtonsEnum={}));var a=function(){function t(){this.isGamepadSupported=!1,this.gameControl=null,this.gamepads=[]}return t.prototype.init=function(t){var e=this;this.isGamepadSupported=!0,this.gameControl=t,this.gameControl.on("disconnect",(function(t){for(var n=0;n<e.gamepads.length;n++)if(e.gamepads[n].id==t){e.gamepads.splice(n,1);break}console.log("A gamepad was disconnect!",t)})),this.gameControl.on("connect",(function(t){e.gamepads.push({gamepad:t,id:t.id}),console.log("A new gamepad was connected!",t)})),this.gameControl.on("beforeCycle",(function(){})),this.gameControl.on("afterCycle",(function(){}))},Object.defineProperty(t.prototype,"Count",{get:function(){return this.gamepads.length},enumerable:!1,configurable:!0}),t.prototype.getGamepad=function(t){return t>=this.gamepads.length||t<0?null:this.gamepads[t].gamepad},t=r([o.Singleton,i("design:paramtypes",[])],t)}();e.GamepadsManager=a},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.GameModulesFactory=void 0;var o=n(0),a=function(){function t(){}return t.prototype.init=function(t){this._modules=t||[]},t.prototype.getModule=function(t){for(var e=0;e<this._modules.length;e++)if(this._modules[e].module.name==t)return this._modules[e]},t=r([o.Singleton,i("design:paramtypes",[])],t)}();e.GameModulesFactory=a},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.MobileManager=e.MobileWrapperLogType=e.MobileWrapperPlatform=void 0;var s=n(0);!function(t){t[t.none=0]="none",t[t.Android=1]="Android",t[t.iOS=2]="iOS"}(e.MobileWrapperPlatform||(e.MobileWrapperPlatform={})),function(t){t.trace="trace",t.debug="debug",t.error="error",t.fatal="fatal",t.info="info",t.warning="warning"}(e.MobileWrapperLogType||(e.MobileWrapperLogType={}));var l=function(){function t(){window.__invokeMobileWrappingActionCallback_=function(t){console.error("MobileWrappingActionCallback",t)}}return t.prototype.log=function(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(n){return[2,new Promise((function(n,r){var i={action:"logger",data:{type:t,message:e}},o=JSON.stringify(i);window["__invokeMobileWrappingActionCallback_"+i.action]=function(t){n()};__invokeMobileWrappingAction(o)}))]}))}))},t.prototype.getPlatform=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,new Promise((function(t,e){var n={action:"getPlatform",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status?t(e.data.runtimePlatform):t(0)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.openExternalLink=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){return[2,new Promise((function(e,n){var r={action:"openExternalLink",data:{url:t}},i=JSON.stringify(r);window["__invokeMobileWrappingActionCallback_"+r.action]=function(t){e(t)};__invokeMobileWrappingAction(i)}))]}))}))},t.prototype.showRateMePopup=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,new Promise((function(t,e){var n={action:"showRateMePopup",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status?t(e.data.result):t(null)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.adRewardedIsLoaded=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,new Promise((function(t,e){var n={action:"AdRewarded_IsLoaded",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status?t(e.data.isLoaded):t(!1)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.aAdRewardedShow=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,new Promise((function(t,e){var n={action:"AdRewarded_Show",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status&&e.data.rewarded?t(!0):t(!1)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.adInterstitialIsLoaded=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,new Promise((function(t,e){var n={action:"AdInterstitial_IsLoaded",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status?t(e.data.isLoaded):t(!1)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.adInterstitialShow=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,new Promise((function(t,e){var n={action:"AdInterstitial_Show",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status?t(!0):t(!1)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.appCenterAnalyticTrackEvent=function(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(n){return[2,new Promise((function(n,r){var i={action:"AppCenterAnalytic_TrackEvent",data:{name:t,properties:e}},o=JSON.stringify(i);window["__invokeMobileWrappingActionCallback_"+i.action]=function(t){t&&"done"==t.status?n(!0):n(!1)};__invokeMobileWrappingAction(o)}))]}))}))},t.prototype.appCenterAnalyticTrackException=function(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(n){return[2,new Promise((function(n,r){var i={action:"AppCenterAnalytic_TrackException",data:{name:t,properties:e}},o=JSON.stringify(i);window["__invokeMobileWrappingActionCallback_"+i.action]=function(t){t&&"done"==t.status?n(!0):n(!1)};__invokeMobileWrappingAction(o)}))]}))}))},t=r([s.Singleton,i("design:paramtypes",[])],t)}();e.MobileManager=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easing=void 0,e.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},Out:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},InOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-e.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*e.Easing.Bounce.In(2*t):.5*e.Easing.Bounce.Out(2*t-1)+.5}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteList=e.SpriteItem=void 0;var r=n(1),i=n(61),o=n(35),a=n(53),s=n(21),l=function(){};e.SpriteItem=l;var u=function(){function t(){this.items=new r.List}return t.prototype.get=function(t){return this[t]},t.prototype.initialize=function(t,e,n){if(e instanceof o.Armature){var u=new r.List(e.getSlots());if(t){var c=function(r){var o=t[r];if(o.type&&o.type!=i.SpriteTypeEnum.ARMATURE){if(o.type==i.SpriteTypeEnum.PRIVATE){var a=n[o.slotName];if(a)(s=new l).sprite=a,s.name=r,s.textureName=o.slotName,h.items.add(s),h[r]=a}}else{var s,c=u.firstOrDefault((function(t){return t.name==o.slotName}));if(c)(s=new l).sprite=c.display,s.name=r,s.textureName=o.slotName,h.items.add(s),h[r]=c.display;else console.error(h.constructor.name+": error can't find sprite '"+o.slotName+"' in armature '"+e.name+"'")}},h=this;for(var p in t)c(p)}}else if(e instanceof a.AnimationClip||e instanceof s.AnimationClipContainer){var f=e,d=n;if(t)for(var p in t){var _=t[p];if(_.type&&_.type!=i.SpriteTypeEnum.MOVIECLIP){if(_.type==i.SpriteTypeEnum.PRIVATE){var y=n[_.slotName];if(y)(m=new l).sprite=y,m.name=p,m.textureName=_.slotName,this.items.add(m),this[p]=y}}else{var m,g=_.slotName.split("."),v=d._getChild(g,f);if(v&&v instanceof PIXI.Sprite)(m=new l).sprite=v,m.name=p,m.textureName=_.slotName,this.items.add(m),this[p]=v;else console.error(this.constructor.name+": error can't find sprite '"+_.slotName+"' in animationClip '"+f.name+"'")}}}else;},t}();e.SpriteList=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationsEventsTypeEnum=e.SpriteTypeEnum=void 0,function(t){t[t.ARMATURE=1]="ARMATURE",t[t.PRIVATE=2]="PRIVATE",t[t.MOVIECLIP=3]="MOVIECLIP"}(e.SpriteTypeEnum||(e.SpriteTypeEnum={})),function(t){t.START="start",t.LOOP_COMPLETE="loopComplete",t.COMPLETE="complete",t.FADE_IN="fadeIn",t.FADE_IN_COMPLETE="fadeInComplete",t.FADE_OUT="fadeOut",t.FADE_OUT_COMPLETE="fadeOutComplete",t.FRAME_EVENT="frameEvent",t.SOUND_EVENT="soundEvent"}(e.AnimationsEventsTypeEnum||(e.AnimationsEventsTypeEnum={}))},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.LobbyManager=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(function(){function t(){this._playerData=null,this._disconnected=!1,this._exit=!1,this.enableReconnection=function(){return!1},this.isStandalone=function(){return!1},this._reconnectingCount=15,this._reconnecting=!1,this._reconnectingTimeOut=1,this._reconnectingNumberOfTries=-1}return t.prototype.joinOrCreate=function(t,e,n,r){return Promise.resolve(!1)},t.prototype.join=function(t,e,n,r){return Promise.resolve(!1)},t.prototype.create=function(t,e,n,r){return Promise.resolve(!1)},t.prototype.joinGamePad=function(t,e,n,r,i,o){return Promise.resolve(!1)},t.prototype.joinGame=function(t,e,n,r){return Promise.resolve(!1)},t.prototype.setPlayerData=function(t){this._playerData=t},t.prototype.getPlayerDataString=function(){return encodeURI(this._playerData?JSON.stringify(this._playerData):"")},t.prototype._createGUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},t.prototype.update=function(t){},t.prototype.exit=function(t){this._exit=t,this._reconnectingCount=15,this._reconnecting=!1,this._reconnectingTimeOut=1,this._reconnectingNumberOfTries=-1},t}());e.LobbyManager=o},function(t,e,n){"use strict";var r=n(17).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,n,o){if("function"==typeof n)return t(e,null,n);n||(n={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&e.readable,s=n.writable||!1!==n.writable&&e.writable,l=function(){e.writable||c()},u=e._writableState&&e._writableState.finished,c=function(){s=!1,u=!0,a||o.call(e)},h=e._readableState&&e._readableState.endEmitted,p=function(){a=!1,h=!0,s||o.call(e)},f=function(t){o.call(e,t)},d=function(){var t;return a&&!h?(e._readableState&&e._readableState.ended||(t=new r),o.call(e,t)):s&&!u?(e._writableState&&e._writableState.ended||(t=new r),o.call(e,t)):void 0},_=function(){e.req.on("finish",c)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?s&&!e._writableState&&(e.on("end",l),e.on("close",l)):(e.on("complete",c),e.on("abort",d),e.req?_():e.on("request",_)),e.on("end",p),e.on("finish",c),!1!==n.error&&e.on("error",f),e.on("close",d),function(){e.removeListener("complete",c),e.removeListener("abort",d),e.removeListener("request",_),e.req&&e.req.removeListener("finish",c),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("end",p),e.removeListener("error",f),e.removeListener("close",d)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalyticProperty=void 0;var r=function(){function t(){}return t.DOMAIN="domain",t.TRAFFIC_SOURCE="trafficSource",t.GAME_VERSION="gameVersion",t.DEVICE_TYPE="deviceType",t.ACTION="action",t.SCORE="score",t.TIME_SPENT="timespent",t.ROUND="round",t.AB_TEST_VERSION="abtestVersion",t}();e.AnalyticProperty=r},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.AnalyticDecorator=void 0;var o=function(){function t(t){this._analytic=t}return t.prototype.trackException=function(t){null!=this._analytic&&this._analytic.trackException(t)},t.prototype.sendPageController=function(t,e,n){null!=this._analytic&&this._analytic.sendPageController(t,e,n)},t.prototype.sendEvent=function(t,e,n,o){return r(this,void 0,void 0,(function(){return i(this,(function(r){return null!=this._analytic?[2,this._analytic.sendEvent(t,e,n,o)]:[2,Promise.resolve(!1)]}))}))},t}();e.AnalyticDecorator=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionBody=void 0;var r=n(67),i=n(68),o=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=0,this.y=0,this._x=0,this._y=0,this.padding=0,this._circle=!1,this._polygon=!1,this._point=!1,this._bvh=null,this._bvh_parent=null,this._bvh_branch=!1,this._bvh_padding=0,this._bvh_min_x=0,this._bvh_min_y=0,this._bvh_max_x=0,this._bvh_max_y=0,this._dirty_coords=!1,this.radius=0,this.scale=1,this._min_x=0,this._min_y=0,this._max_x=0,this._max_y=0,this.angle=0,this._angle=0,this.scale_x=1,this._scale_x=1,this.scale_y=1,this._scale_y=1,this.x=t,this.y=e,this.padding=n,this._circle=!1,this._polygon=!1,this._point=!1,this._bvh=null,this._bvh_parent=null,this._bvh_branch=!1,this._bvh_padding=n,this._bvh_min_x=0,this._bvh_min_y=0,this._bvh_max_x=0,this._bvh_max_y=0}return t.prototype.collides=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=!0),i.CollisionSAT(this,t,e,n)},t.prototype.potentials=function(){var t=this._bvh;if(null===t)throw new Error("Body does not belong to a collision system");return t.potentials(this)},t.prototype.remove=function(){var t=this._bvh;t&&t.remove(this,!1)},t.prototype.createResult=function(){return new r.CollisionResult},t.createResult=function(){return new r.CollisionResult},t.prototype.draw=function(t){},t.prototype._calculateCoords=function(){},t}();e.CollisionBody=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionResult=void 0;var r=function(){this.collision=!1,this.a=null,this.b=null,this.a_in_b=!1,this.b_in_a=!1,this.overlap=0,this.overlap_x=0,this.overlap_y=0};e.CollisionResult=r},function(t,e,n){"use strict";function r(t,e,n,r){void 0===n&&(n=null),void 0===r&&(r=!1);var i=t._coords,o=t._edges,a=t._normals,s=e.x,l=e.y,u=e.radius*e.scale,c=2*u,h=u*u,p=i.length,f=!0,d=!0,_=null,y=0,m=0;if(2===p){if((j=(b=s-i[0])*b+(T=l-i[1])*T)>h)return!1;if(n){var g=Math.sqrt(j);_=u-g,y=b/g,m=T/g,d=!1}}else for(var v=0,A=1;v<p;v+=2,A+=2){var b=s-i[v],T=l-i[A],S=o[v],P=o[A],w=b*S+T*P,E=w<0?-1:w>S*S+P*P?1:0,O=!1,C=0,x=0,M=0;if(n&&f&&b*b+T*T>h&&(f=!1),E){var D=-1===E,I=D?0===v?p-2:v-2:v===p-2?0:v+2,R=I+1,B=s-i[I],N=l-i[R],L=o[I],k=o[R],F=B*L+N*k;if((F<0?-1:F>L*L+k*k?1:0)===-E){var j,G=D?b:B,V=D?T:N;if((j=G*G+V*V)>h)return!1;if(n){var H=Math.sqrt(j);O=!0,C=u-H,x=G/H,M=V/H,d=!1}}}else{var U=a[v],X=a[A],W=b*U+T*X;if(W>0&&(W<0?-W:W)>u)return!1;n&&(O=!0,C=u-W,x=U,M=X,(d&&W>=0||C<c)&&(d=!1))}O&&(null===_||_>C)&&(_=C,y=x,m=M)}return n&&(n.a_in_b=r?d:f,n.b_in_a=r?f:d,n.overlap=_,n.overlap_x=r?-y:y,n.overlap_y=r?-m:m),!0}function i(t,e,n,r,i){void 0===i&&(i=null);var o=t.length,a=e.length;if(!o||!a)return!0;for(var s=null,l=null,u=null,c=null,h=0,p=1;h<o;h+=2,p+=2){var f=t[h]*n+t[p]*r;(null===s||s>f)&&(s=f),(null===l||l<f)&&(l=f)}for(h=0,p=1;h<a;h+=2,p+=2){f=e[h]*n+e[p]*r;(null===u||u>f)&&(u=f),(null===c||c<f)&&(c=f)}if(s>c||l<u)return!0;if(i){var d,_,y=0;if(s<u)if(i.a_in_b=!1,l<c)y=l-u,i.b_in_a=!1;else y=(d=l-u)<(_=c-s)?d:-_;else if(i.b_in_a=!1,l>c)y=s-c,i.a_in_b=!1;else y=(d=l-u)<(_=c-s)?d:-_;var m=i.overlap,g=y<0?-y:y;if(null===m||m>g){var v=y<0?-1:1;i.overlap=g,i.overlap_x=n*v,i.overlap_y=r*v}}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionSAT=void 0,e.CollisionSAT=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=!0);var a=t._polygon,s=e._polygon,l=!1;return n&&(n.a=t,n.b=e,n.a_in_b=!0,n.b_in_a=!0,n.overlap=null,n.overlap_x=0,n.overlap_y=0),a&&(t._dirty_coords||t.x!==t._x||t.y!==t._y||t.angle!==t._angle||t.scale_x!==t._scale_x||t.scale_y!==t._scale_y)&&t._calculateCoords(),s&&(e._dirty_coords||e.x!==e._x||e.y!==e._y||e.angle!==e._angle||e.scale_x!==e._scale_x||e.scale_y!==e._scale_y)&&e._calculateCoords(),o&&!function(t,e){var n=t._polygon,r=n?0:t.x,i=n?0:t.y,o=n?0:t.radius*t.scale,a=n?t._min_x:r-o,s=n?t._min_y:i-o,l=n?t._max_x:r+o,u=n?t._max_y:i+o,c=e._polygon,h=c?0:e.x,p=c?0:e.y,f=c?0:e.radius*e.scale,d=c?e._min_x:h-f,_=c?e._min_y:p-f,y=c?e._max_x:h+f,m=c?e._max_y:p+f;return a<y&&s<m&&l>d&&u>_}(t,e)||(a&&t._dirty_normals&&t._calculateNormals(),s&&e._dirty_normals&&e._calculateNormals(),l=a&&s?function(t,e,n){void 0===n&&(n=null);var r=t._coords.length,o=e._coords.length;if(2===r&&2===o){var a=t._coords,s=e._coords;return n&&(n.overlap=0),a[0]===s[0]&&a[1]===s[1]}var l=t._coords,u=e._coords,c=t._normals,h=e._normals;if(r>2)for(var p=0,f=1;p<r;p+=2,f+=2)if(i(l,u,c[p],c[f],n))return!1;if(o>2)for(p=0,f=1;p<o;p+=2,f+=2)if(i(l,u,h[p],h[f],n))return!1;return!0}(t,e,n):a?r(t,e,n,!1):s?r(e,t,n,!0):function(t,e,n){void 0===n&&(n=null);var r=t.radius*t.scale,i=e.radius*e.scale,o=e.x-t.x,a=e.y-t.y,s=r+i,l=o*o+a*a;if(l>s*s)return!1;if(n){var u=Math.sqrt(l);n.a_in_b=r<=i&&u<=i-r,n.b_in_a=i<=r&&u<=r-i,n.overlap=s-u,n.overlap_x=o/u,n.overlap_y=a/u}return!0}(t,e,n)),n&&(n.collision=l),l}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionPolygon=void 0;var o=function(t){function e(n,r,i,o,a,s,l){void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=[]),void 0===o&&(o=0),void 0===a&&(a=1),void 0===s&&(s=1),void 0===l&&(l=0);var u=t.call(this,n,r,l)||this;return u.angle=o,u.scale_x=a,u.scale_y=s,u._polygon=!0,u._x=n,u._y=r,u._angle=o,u._scale_x=a,u._scale_y=s,u._min_x=0,u._min_y=0,u._max_x=0,u._max_y=0,u._points=null,u._coords=null,u._edges=null,u._normals=null,u._dirty_coords=!0,u._dirty_normals=!0,e.prototype.setPoints.call(u,i),u}return i(e,t),e.prototype.draw=function(t){(this._dirty_coords||this.x!==this._x||this.y!==this._y||this.angle!==this._angle||this.scale_x!==this._scale_x||this.scale_y!==this._scale_y)&&this._calculateCoords();var e=this._coords;if(2===e.length)t.moveTo(e[0],e[1]),t.arc(e[0],e[1],1,0,2*Math.PI);else{t.moveTo(e[0],e[1]);for(var n=2;n<e.length;n+=2)t.lineTo(e[n],e[n+1]);e.length>4&&t.lineTo(e[0],e[1])}},e.prototype.setPoints=function(t){var e=t.length;this._points=new Float64Array(2*e),this._coords=new Float64Array(2*e),this._edges=new Float64Array(2*e),this._normals=new Float64Array(2*e);for(var n=this._points,r=0,i=0,o=1;r<e;++r,i+=2,o+=2){var a=t[r];n[i]=a[0],n[o]=a[1]}this._dirty_coords=!0},e.prototype._calculateCoords=function(){for(var t,e,n,r,i=this.x,o=this.y,a=this.angle,s=this.scale_x,l=this.scale_y,u=this._points,c=this._coords,h=u.length,p=0,f=1;p<h;p+=2,f+=2){var d=u[p]*s,_=u[f]*l;if(a){var y=Math.cos(a),m=Math.sin(a),g=d;d=g*y-_*m,_=g*m+_*y}d+=i,_+=o,c[p]=d,c[f]=_,0===p?(t=e=d,n=r=_):(d<t?t=d:d>e&&(e=d),_<n?n=_:_>r&&(r=_))}this._x=i,this._y=o,this._angle=a,this._scale_x=s,this._scale_y=l,this._min_x=t,this._min_y=n,this._max_x=e,this._max_y=r,this._dirty_coords=!1,this._dirty_normals=!0},e.prototype._calculateNormals=function(){for(var t=this._coords,e=this._edges,n=this._normals,r=t.length,i=0,o=1;i<r;i+=2,o+=2){var a=i+2<r?i+2:0,s=t[a]-t[i],l=t[a+1]-t[o],u=s||l?Math.sqrt(s*s+l*l):0;e[i]=s,e[o]=l,n[i]=u?l/u:0,n[o]=u?-s/u:0}this._dirty_normals=!1},e}(n(66).CollisionBody);e.CollisionPolygon=o},function(t,e,n){var r;n(71),void 0===(r=function(){var t=function(t){return"string"!=typeof t?t:t.replace(/[\+ \|\^\%]/g,(function(t){return{" ":"+","+":"%2B","|":"%7C","^":"%5E","%":"%25"}[t]}))},e=function(t){return"string"!=typeof t?t:t.replace(/\+|%2B|%7C|%5E|%25/g,(function(t){return{"+":" ","%2B":"+","%7C":"|","%5E":"^","%25":"%"}[t]}))},n=function(t){return Number.prototype.toString.call(t,36).toUpperCase()},r=function(t){return parseInt(t,36)},i=Array.prototype.indexOf||function(t,e){for(var n=e||0,r=this.length;n<r;n++)if(this[n]===t)return n;return-1};return{JSON:JSON,pack:function(e,r){var o=(r=r||{}).verbose||!1;o&&console.log("Normalize the JSON Object"),e="string"==typeof e?this.JSON.parse(e):e,o&&console.log("Creating a empty dictionary");var a={strings:[],integers:[],floats:[]};o&&console.log("Creating the AST");var s=function e(r){o&&console.log("Calling recursiveAstBuilder with "+this.JSON.stringify(r));var s,l=typeof r;if(null===r)return{type:"null",index:-3};if(void 0===r)return{type:"undefined",index:-5};if(r instanceof Array){var u=["@"];for(var c in r)r.hasOwnProperty(c)&&u.push(e(r[c]));return u}if("object"===l){for(var h in u=["$"],r)r.hasOwnProperty(h)&&(u.push(e(h)),u.push(e(r[h])));return u}if(""===r)return{type:"empty",index:-4};if("string"===l)return-1==(s=i.call(a.strings,r))&&(a.strings.push(t(r)),s=a.strings.length-1),{type:"strings",index:s};if("number"===l&&r%1==0)return-1==(s=i.call(a.integers,r))&&(a.integers.push(n(r)),s=a.integers.length-1),{type:"integers",index:s};if("number"===l)return-1==(s=i.call(a.floats,r))&&(a.floats.push(r),s=a.floats.length-1),{type:"floats",index:s};if("boolean"===l)return{type:"boolean",index:r?-1:-2};throw new Error("Unexpected argument of type "+typeof r)}(e),l=a.strings.length,u=a.integers.length;a.floats.length,o&&console.log("Parsing the dictionary");var c=a.strings.join("|");return c+="^"+a.integers.join("|"),c+="^"+a.floats.join("|"),o&&console.log("Parsing the structure"),c+="^"+function t(e){if(o&&console.log("Calling a recursiveParser with "+this.JSON.stringify(e)),e instanceof Array){var r=e.shift();for(var i in e)e.hasOwnProperty(i)&&(r+=t(e[i])+"|");return("|"===r[r.length-1]?r.slice(0,-1):r)+"]"}var a=e.type,s=e.index;if("strings"===a)return n(s);if("integers"===a)return n(l+s);if("floats"===a)return n(l+u+s);if("boolean"===a)return e.index;if("null"===a)return-3;if("undefined"===a)return-5;if("empty"===a)return-4;throw new TypeError("The item is alien!")}(s),o&&console.log("Ending parser"),r.debug?{dictionary:a,ast:s,packed:c}:c},unpack:function(t,n){n=n||{};var i=t.split("^");n.verbose&&console.log("Building dictionary");var o=[],a=i[0];if(""!==a){a=a.split("|"),n.verbose&&console.log("Parse the strings dictionary");for(var s=0,l=a.length;s<l;s++)o.push(e(a[s]))}if(""!==(a=i[1]))for(a=a.split("|"),n.verbose&&console.log("Parse the integers dictionary"),s=0,l=a.length;s<l;s++)o.push(r(a[s]));if(""!==(a=i[2]))for(a=a.split("|"),n.verbose&&console.log("Parse the floats dictionary"),s=0,l=a.length;s<l;s++)o.push(parseFloat(a[s]));a=null,n.verbose&&console.log("Tokenizing the structure");var u="",c=[],h=i[3].length;for(s=0;s<h;s++){var p=i[3].charAt(s);"|"===p||"$"===p||"@"===p||"]"===p?(u&&(c.push(r(u)),u=""),"|"!==p&&c.push(p)):u+=p}var f=c.length,d=0;return n.verbose&&console.log("Starting recursive parser"),function t(){var e=c[d++];if(n.verbose&&console.log("Reading collection type "+("$"===e?"object":"Array")),"@"===e){for(var r=[];d<f;d++){var i=c[d];if(n.verbose&&console.log("Read "+i+" symbol"),"]"===i)return r;if("@"===i||"$"===i)r.push(t());else switch(i){case-1:r.push(!0);break;case-2:r.push(!1);break;case-3:r.push(null);break;case-5:r.push(void 0);break;case-4:r.push("");break;default:r.push(o[i])}}return n.verbose&&console.log("Parsed "+this.JSON.stringify(r)),r}if("$"===e){for(r={};d<f;d++){var a=c[d];if("]"===a)return r;if(a=-4===a?"":o[a],"@"===(i=c[++d])||"$"===i)r[a]=t();else switch(i){case-1:r[a]=!0;break;case-2:r[a]=!1;break;case-3:r[a]=null;break;case-5:r[a]=void 0;break;case-4:r[a]="";break;default:r[a]=o[i]}}return n.verbose&&console.log("Parsed "+this.JSON.stringify(r)),r}throw new TypeError("Bad token "+e+" isn't a type")}()}}}.apply(e,[]))||(t.exports=r)},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PixiTextureData=e.PixiTextureAtlasData=void 0;var o=n(73),a=n(2),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._renderTexture=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.PixiTextureAtlasData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._renderTexture,this._renderTexture=null},e.prototype.createTexture=function(){return a.BaseObject.borrowObject(l)},Object.defineProperty(e.prototype,"renderTexture",{get:function(){return this._renderTexture},set:function(t){if(this._renderTexture!==t)if(this._renderTexture=t,null!==this._renderTexture)for(var e in this.textures){(n=this.textures[e]).renderTexture=new PIXI.Texture(this._renderTexture,new PIXI.Rectangle(n.region.x,n.region.y,n.region.width,n.region.height),new PIXI.Rectangle(n.region.x,n.region.y,n.region.width,n.region.height),new PIXI.Rectangle(0,0,n.region.width,n.region.height),n.rotated)}else for(var e in this.textures){var n;(n=this.textures[e]).renderTexture=null}},enumerable:!1,configurable:!0}),e}(o.TextureAtlasData);e.PixiTextureAtlasData=s;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderTexture=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.PixiTextureData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),null!==this.renderTexture&&this.renderTexture.destroy(!1),this.renderTexture=null},e}(o.TextureData);e.PixiTextureData=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TextureData=e.TextureAtlasData=void 0;var o=n(74),a=n(2),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textures={},e}return i(e,t),e.prototype._onClear=function(){for(var t in this.textures)this.textures[t].returnToPool(),delete this.textures[t];this.autoSearch=!1,this.width=0,this.height=0,this.scale=1,this.name="",this.imagePath=""},e.prototype.copyFrom=function(t){for(var e in this.autoSearch=t.autoSearch,this.scale=t.scale,this.width=t.width,this.height=t.height,this.name=t.name,this.imagePath=t.imagePath,this.textures)this.textures[e].returnToPool(),delete this.textures[e];for(var e in t.textures){var n=this.createTexture();n.copyFrom(t.textures[e]),this.textures[e]=n}},e.prototype.addTexture=function(t){t.name in this.textures?console.warn("Same texture: "+t.name):(t.parent=this,this.textures[t.name]=t)},e.prototype.getTexture=function(t){return t in this.textures?this.textures[t]:null},e}(a.BaseObject);e.TextureAtlasData=s;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=new o.Rectangle,e.frame=null,e}return i(e,t),e.createRectangle=function(){return new o.Rectangle},e.prototype._onClear=function(){this.rotated=!1,this.name="",this.region.clear(),this.parent=null,this.frame=null},e.prototype.copyFrom=function(t){this.rotated=t.rotated,this.name=t.name,this.region.copyFrom(t.region),this.parent=t.parent,null===this.frame&&null!==t.frame?this.frame=e.createRectangle():null!==this.frame&&null===t.frame&&(this.frame=null),null!==this.frame&&null!==t.frame&&this.frame.copyFrom(t.frame)},e}(a.BaseObject);e.TextureData=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var r=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=n,this.height=r}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},t.prototype.clear=function(){this.x=this.y=0,this.width=this.height=0},t}();e.Rectangle=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Bone=void 0;var o=n(76),a=n(34),s=n(10),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animationPose=new s.Transform,e}return i(e,t),e.toString=function(){return"[class dragonBones.Bone]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.offsetMode=1,this.animationPose.identity(),this._transformDirty=!1,this._childrenTransformDirty=!1,this._localDirty=!0,this._hasConstraint=!1,this._visible=!0,this._cachedFrameIndex=-1,this._boneData=null,this._parent=null,this._cachedFrameIndices=null},e.prototype._updateGlobalTransformMatrix=function(t){var e=this._boneData,n=this.global,r=this.globalTransformMatrix,i=this.origin,o=this.offset,s=this.animationPose,l=this._parent,u=this._armature.flipX,c=this._armature.flipY===a.DragonBones.yDown,h=null!==l,p=0;if(1===this.offsetMode?null!==i?(n.x=i.x+o.x+s.x,n.scaleX=i.scaleX*o.scaleX*s.scaleX,n.scaleY=i.scaleY*o.scaleY*s.scaleY,a.DragonBones.yDown?(n.y=i.y+o.y+s.y,n.skew=i.skew+o.skew+s.skew,n.rotation=i.rotation+o.rotation+s.rotation):(n.y=i.y-o.y+s.y,n.skew=i.skew-o.skew+s.skew,n.rotation=i.rotation-o.rotation+s.rotation)):(n.copyFrom(o),a.DragonBones.yDown||(n.y=-n.y,n.skew=-n.skew,n.rotation=-n.rotation),n.add(s)):0===this.offsetMode?null!==i?n.copyFrom(i).add(s):n.copyFrom(s):(h=!1,n.copyFrom(o),a.DragonBones.yDown||(n.y=-n.y,n.skew=-n.skew,n.rotation=-n.rotation)),h){var f=1===l._boneData.type,d=f?l._bone:null,_=f?l._getGlobalTransformMatrix(n.x,n.y):l.globalTransformMatrix;if(!e.inheritScale||f&&null===d){if(e.inheritTranslation){var y=n.x,m=n.y;n.x=_.a*y+_.c*m+_.tx,n.y=_.b*y+_.d*m+_.ty}else u&&(n.x=-n.x),c&&(n.y=-n.y);e.inheritRotation?(l.updateGlobalTransform(),p=l.global.scaleX<0?n.rotation+l.global.rotation+Math.PI:n.rotation+l.global.rotation,_.a*_.d-_.b*_.c<0&&(p-=2*n.rotation,(u!==c||e.inheritReflection)&&(n.skew+=Math.PI),a.DragonBones.yDown||(n.skew=-n.skew)),n.rotation=p):(u||c)&&(u&&c?p=n.rotation+Math.PI:(p=u?Math.PI-n.rotation:-n.rotation,n.skew+=Math.PI),n.rotation=p),n.toMatrix(r)}else f?(e.inheritRotation&&(n.rotation+=l.global.rotation),d.updateGlobalTransform(),n.scaleX*=d.global.scaleX,n.scaleY*=d.global.scaleY,_.transformPoint(n.x,n.y,n),n.toMatrix(r),e.inheritTranslation?(n.x=r.tx,n.y=r.ty):(r.tx=n.x,r.ty=n.y)):(e.inheritRotation||(l.updateGlobalTransform(),p=u&&c?n.rotation-(l.global.rotation+Math.PI):u?n.rotation+l.global.rotation+Math.PI:c?n.rotation+l.global.rotation:n.rotation-l.global.rotation,n.rotation=p),n.toMatrix(r),r.concat(_),e.inheritTranslation?(n.x=r.tx,n.y=r.ty):(r.tx=n.x,r.ty=n.y),t?n.fromMatrix(r):this._globalDirty=!0)}else(u||c)&&(u&&(n.x=-n.x),c&&(n.y=-n.y),u&&c?p=n.rotation+Math.PI:(p=u?Math.PI-n.rotation:-n.rotation,n.skew+=Math.PI),n.rotation=p),n.toMatrix(r)},e.prototype._updateAlpha=function(){null!==this._parent?this._globalAlpha=this._alpha*this._parent._globalAlpha:this._globalAlpha=this._alpha*this._armature._globalAlpha},e.prototype.init=function(t,e){null===this._boneData&&(this._boneData=t,this._armature=e,this._alpha=this._boneData.alpha,null!==this._boneData.parent&&(this._parent=this._armature.getBone(this._boneData.parent.name)),this._armature._addBone(this),this.origin=this._boneData.transform)},e.prototype.update=function(t){if(t>=0&&null!==this._cachedFrameIndices){var e=this._cachedFrameIndices[t];if(e>=0&&this._cachedFrameIndex===e)this._transformDirty=!1;else if(e>=0)this._transformDirty=!0,this._cachedFrameIndex=e;else{if(this._hasConstraint)for(var n=0,r=this._armature._constraints;n<r.length;n++){(a=r[n])._root===this&&a.update()}this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var i=0,o=this._armature._constraints;i<o.length;i++){var a;(a=o[i])._root===this&&a.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty)if(this._transformDirty=!1,this._childrenTransformDirty=!0,this._cachedFrameIndex<0){var s=t>=0;this._localDirty&&this._updateGlobalTransformMatrix(s),s&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},e.prototype.updateByConstraint=function(){this._localDirty&&(this._localDirty=!1,(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&this._updateGlobalTransformMatrix(!0),this._transformDirty=!0)},e.prototype.invalidUpdate=function(){this._transformDirty=!0},e.prototype.contains=function(t){if(t===this)return!1;for(var e=t;e!==this&&null!==e;)e=e.parent;return e===this},Object.defineProperty(e.prototype,"boneData",{get:function(){return this._boneData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){if(this._visible!==t){this._visible=t;for(var e=0,n=this._armature.getSlots();e<n.length;e++){var r=n[e];r.parent===this&&r._updateVisible()}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._boneData.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),e}(o.TransformObject);e.Bone=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TransformObject=void 0;var o=n(2),a=n(36),s=n(10),l=n(37),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.globalTransformMatrix=new a.Matrix,e.global=new s.Transform,e.offset=new s.Transform,e}return i(e,t),e.prototype._onClear=function(){this.globalTransformMatrix.identity(),this.global.identity(),this.offset.identity(),this.origin=null,this.userData=null,this._globalDirty=!1,this._alpha=1,this._globalAlpha=1,this._armature=null},e.prototype.updateGlobalTransform=function(){this._globalDirty&&(this._globalDirty=!1,this.global.fromMatrix(this.globalTransformMatrix))},Object.defineProperty(e.prototype,"armature",{get:function(){return this._armature},enumerable:!1,configurable:!0}),e._helpMatrix=new a.Matrix,e._helpTransform=new s.Transform,e._helpPoint=new l.Point,e}(o.BaseObject);e.TransformObject=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataParser=void 0;var r=function(){function t(){}return t._getArmatureType=function(t){switch(t.toLowerCase()){case"stage":return 2;case"armature":return 0;case"movieclip":return 1;default:return 0}},t._getBoneType=function(t){switch(t.toLowerCase()){case"bone":return 0;case"surface":return 1;default:return 0}},t._getPositionMode=function(t){switch(t.toLocaleLowerCase()){case"percent":return 1;case"fixed":return 0;default:return 1}},t._getSpacingMode=function(t){switch(t.toLocaleLowerCase()){case"length":return 0;case"percent":return 2;case"fixed":return 1;default:return 0}},t._getRotateMode=function(t){switch(t.toLocaleLowerCase()){case"tangent":return 0;case"chain":return 1;case"chainscale":return 2;default:return 0}},t._getDisplayType=function(t){switch(t.toLowerCase()){case"image":return 0;case"mesh":return 2;case"armature":return 1;case"boundingbox":return 3;case"path":return 4;default:return 0}},t._getBoundingBoxType=function(t){switch(t.toLowerCase()){case"rectangle":return 0;case"ellipse":return 1;case"polygon":return 2;default:return 0}},t._getBlendMode=function(t){switch(t.toLowerCase()){case"normal":return 0;case"add":return 1;case"alpha":return 2;case"darken":return 3;case"difference":return 4;case"erase":return 5;case"hardlight":return 6;case"invert":return 7;case"layer":return 8;case"lighten":return 9;case"multiply":return 10;case"overlay":return 11;case"screen":return 12;case"subtract":return 13;default:return 0}},t._getAnimationBlendType=function(t){switch(t.toLowerCase()){case"none":return 0;case"1d":return 1;default:return 0}},t._getActionType=function(t){switch(t.toLowerCase()){case"play":return 0;case"frame":return 10;case"sound":return 11;default:return 0}},t.DATA_VERSION_2_3="2.3",t.DATA_VERSION_3_0="3.0",t.DATA_VERSION_4_0="4.0",t.DATA_VERSION_4_5="4.5",t.DATA_VERSION_5_0="5.0",t.DATA_VERSION_5_5="5.5",t.DATA_VERSION_5_6="5.6",t.DATA_VERSION=t.DATA_VERSION_5_6,t.DATA_VERSIONS=[t.DATA_VERSION_4_0,t.DATA_VERSION_4_5,t.DATA_VERSION_5_0,t.DATA_VERSION_5_5,t.DATA_VERSION_5_6],t.TEXTURE_ATLAS="textureAtlas",t.SUB_TEXTURE="SubTexture",t.FORMAT="format",t.IMAGE_PATH="imagePath",t.WIDTH="width",t.HEIGHT="height",t.ROTATED="rotated",t.FRAME_X="frameX",t.FRAME_Y="frameY",t.FRAME_WIDTH="frameWidth",t.FRAME_HEIGHT="frameHeight",t.DRADON_BONES="dragonBones",t.USER_DATA="userData",t.ARMATURE="armature",t.CANVAS="canvas",t.BONE="bone",t.SURFACE="surface",t.SLOT="slot",t.CONSTRAINT="constraint",t.SKIN="skin",t.DISPLAY="display",t.FRAME="frame",t.IK="ik",t.PATH_CONSTRAINT="path",t.ANIMATION="animation",t.TIMELINE="timeline",t.FFD="ffd",t.TRANSLATE_FRAME="translateFrame",t.ROTATE_FRAME="rotateFrame",t.SCALE_FRAME="scaleFrame",t.DISPLAY_FRAME="displayFrame",t.COLOR_FRAME="colorFrame",t.DEFAULT_ACTIONS="defaultActions",t.ACTIONS="actions",t.EVENTS="events",t.INTS="ints",t.FLOATS="floats",t.STRINGS="strings",t.TRANSFORM="transform",t.PIVOT="pivot",t.AABB="aabb",t.COLOR="color",t.VERSION="version",t.COMPATIBLE_VERSION="compatibleVersion",t.FRAME_RATE="frameRate",t.TYPE="type",t.SUB_TYPE="subType",t.NAME="name",t.PARENT="parent",t.TARGET="target",t.STAGE="stage",t.SHARE="share",t.PATH="path",t.LENGTH="length",t.DISPLAY_INDEX="displayIndex",t.Z_ORDER="zOrder",t.Z_INDEX="zIndex",t.BLEND_MODE="blendMode",t.INHERIT_TRANSLATION="inheritTranslation",t.INHERIT_ROTATION="inheritRotation",t.INHERIT_SCALE="inheritScale",t.INHERIT_REFLECTION="inheritReflection",t.INHERIT_ANIMATION="inheritAnimation",t.INHERIT_DEFORM="inheritDeform",t.SEGMENT_X="segmentX",t.SEGMENT_Y="segmentY",t.BEND_POSITIVE="bendPositive",t.CHAIN="chain",t.WEIGHT="weight",t.BLEND_TYPE="blendType",t.FADE_IN_TIME="fadeInTime",t.PLAY_TIMES="playTimes",t.SCALE="scale",t.OFFSET="offset",t.POSITION="position",t.DURATION="duration",t.TWEEN_EASING="tweenEasing",t.TWEEN_ROTATE="tweenRotate",t.TWEEN_SCALE="tweenScale",t.CLOCK_WISE="clockwise",t.CURVE="curve",t.SOUND="sound",t.EVENT="event",t.ACTION="action",t.X="x",t.Y="y",t.SKEW_X="skX",t.SKEW_Y="skY",t.SCALE_X="scX",t.SCALE_Y="scY",t.VALUE="value",t.ROTATE="rotate",t.SKEW="skew",t.ALPHA="alpha",t.ALPHA_OFFSET="aO",t.RED_OFFSET="rO",t.GREEN_OFFSET="gO",t.BLUE_OFFSET="bO",t.ALPHA_MULTIPLIER="aM",t.RED_MULTIPLIER="rM",t.GREEN_MULTIPLIER="gM",t.BLUE_MULTIPLIER="bM",t.UVS="uvs",t.VERTICES="vertices",t.TRIANGLES="triangles",t.WEIGHTS="weights",t.SLOT_POSE="slotPose",t.BONE_POSE="bonePose",t.BONES="bones",t.POSITION_MODE="positionMode",t.SPACING_MODE="spacingMode",t.ROTATE_MODE="rotateMode",t.SPACING="spacing",t.ROTATE_OFFSET="rotateOffset",t.ROTATE_MIX="rotateMix",t.TRANSLATE_MIX="translateMix",t.TARGET_DISPLAY="targetDisplay",t.CLOSED="closed",t.CONSTANT_SPEED="constantSpeed",t.VERTEX_COUNT="vertexCount",t.LENGTHS="lengths",t.GOTO_AND_PLAY="gotoAndPlay",t.DEFAULT_NAME="default",t}();e.DataParser=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ActionFrame=e.ObjectDataParser=void 0;var o=n(77),a=n(73),s=n(138),l=n(2),u=n(51),c=n(52),h=n(10),p=n(139),f=n(140),d=n(79),_=n(141),y=n(142),m=n(143),g=n(144),v=n(36),A=n(37),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rawTextureAtlasIndex=0,e._rawBones=[],e._data=null,e._armature=null,e._bone=null,e._geometry=null,e._slot=null,e._skin=null,e._mesh=null,e._animation=null,e._timeline=null,e._rawTextureAtlases=null,e._frameValueType=0,e._defaultColorOffset=-1,e._prevClockwise=0,e._prevRotation=0,e._frameDefaultValue=0,e._frameValueScale=1,e._helpMatrixA=new v.Matrix,e._helpMatrixB=new v.Matrix,e._helpTransform=new h.Transform,e._helpColorTransform=new c.ColorTransform,e._helpPoint=new A.Point,e._helpArray=[],e._intArray=[],e._floatArray=[],e._frameIntArray=[],e._frameFloatArray=[],e._frameArray=[],e._timelineArray=[],e._colorArray=[],e._cacheRawMeshes=[],e._cacheMeshes=[],e._actionFrames=[],e._weightSlotPose={},e._weightBonePoses={},e._cacheBones={},e._slotChildActions={},e}return i(e,t),e._getBoolean=function(t,e,n){if(e in t){var r=t[e],i=typeof r;if("boolean"===i)return r;if("string"!==i)return!!r;switch(r){case"0":case"NaN":case"":case"false":case"null":case"undefined":return!1;default:return!0}}return n},e._getNumber=function(t,e,n){if(e in t){var r=t[e];return null===r||"NaN"===r?n:+r||0}return n},e._getString=function(t,e,n){if(e in t){var r=t[e];return"string"===typeof r?r:String(r)}return n},e.prototype._getCurvePoint=function(t,e,n,r,i,o,a,s,l,u){var c=1-l,h=c*c,p=l*l,f=c*h,d=3*l*h,_=3*c*p,y=l*p;u.x=f*t+d*n+_*i+y*a,u.y=f*e+d*r+_*o+y*s},e.prototype._samplingEasingCurve=function(t,e){var n=t.length;if(n%3==1){for(var r=-2,i=0,o=e.length;i<o;++i){for(var a=(i+1)/(o+1);(r+6<n?t[r+6]:1)<a;)r+=6;for(var s=r>=0&&r+6<n,l=s?t[r]:0,u=s?t[r+1]:0,c=t[r+2],h=t[r+3],p=t[r+4],f=t[r+5],d=s?t[r+6]:1,_=s?t[r+7]:1,y=0,m=1;m-y>1e-4;){var g=.5*(m+y);this._getCurvePoint(l,u,c,h,p,f,d,_,g,this._helpPoint),a-this._helpPoint.x>0?y=g:m=g}e[i]=this._helpPoint.y}return!0}for(r=0,i=0,o=e.length;i<o;++i){for(a=(i+1)/(o+1);t[r+6]<a;)r+=6;for(l=t[r],u=t[r+1],c=t[r+2],h=t[r+3],p=t[r+4],f=t[r+5],d=t[r+6],_=t[r+7],y=0,m=1;m-y>1e-4;){g=.5*(m+y);this._getCurvePoint(l,u,c,h,p,f,d,_,g,this._helpPoint),a-this._helpPoint.x>0?y=g:m=g}e[i]=this._helpPoint.y}return!1},e.prototype._parseActionDataInFrame=function(t,e,n,r){o.DataParser.EVENT in t&&this._mergeActionFrame(t[o.DataParser.EVENT],e,10,n,r),o.DataParser.SOUND in t&&this._mergeActionFrame(t[o.DataParser.SOUND],e,11,n,r),o.DataParser.ACTION in t&&this._mergeActionFrame(t[o.DataParser.ACTION],e,0,n,r),o.DataParser.EVENTS in t&&this._mergeActionFrame(t[o.DataParser.EVENTS],e,10,n,r),o.DataParser.ACTIONS in t&&this._mergeActionFrame(t[o.DataParser.ACTIONS],e,0,n,r)},e.prototype._mergeActionFrame=function(t,e,n,r,i){for(var o=this._armature.actions.length,a=this._parseActionData(t,n,r,i),s=0,l=null,u=0,c=a;u<c.length;u++){var h=c[u];this._armature.addAction(h,!1)}0===this._actionFrames.length&&((l=new T).frameStart=0,this._actionFrames.push(l),l=null);for(var p=0,f=this._actionFrames;p<f.length;p++){var d=f[p];if(d.frameStart===e){l=d;break}if(d.frameStart>e)break;s++}null===l&&((l=new T).frameStart=e,this._actionFrames.splice(s,0,l));for(var _=0;_<a.length;++_)l.actions.push(o+_)},e.prototype._parseArmature=function(t,n){var r=l.BaseObject.borrowObject(f.ArmatureData);if(r.name=e._getString(t,o.DataParser.NAME,""),r.frameRate=e._getNumber(t,o.DataParser.FRAME_RATE,this._data.frameRate),r.scale=n,o.DataParser.TYPE in t&&"string"==typeof t[o.DataParser.TYPE]?r.type=o.DataParser._getArmatureType(t[o.DataParser.TYPE]):r.type=e._getNumber(t,o.DataParser.TYPE,0),0===r.frameRate&&(r.frameRate=24),this._armature=r,o.DataParser.CANVAS in t){var i=t[o.DataParser.CANVAS],a=l.BaseObject.borrowObject(g.CanvasData);o.DataParser.COLOR in i?a.hasBackground=!0:a.hasBackground=!1,a.color=e._getNumber(i,o.DataParser.COLOR,0),a.x=e._getNumber(i,o.DataParser.X,0)*r.scale,a.y=e._getNumber(i,o.DataParser.Y,0)*r.scale,a.width=e._getNumber(i,o.DataParser.WIDTH,0)*r.scale,a.height=e._getNumber(i,o.DataParser.HEIGHT,0)*r.scale,r.canvas=a}if(o.DataParser.AABB in t){var s=t[o.DataParser.AABB];r.aabb.x=e._getNumber(s,o.DataParser.X,0)*r.scale,r.aabb.y=e._getNumber(s,o.DataParser.Y,0)*r.scale,r.aabb.width=e._getNumber(s,o.DataParser.WIDTH,0)*r.scale,r.aabb.height=e._getNumber(s,o.DataParser.HEIGHT,0)*r.scale}if(o.DataParser.BONE in t)for(var u=0,c=t[o.DataParser.BONE];u<c.length;u++){var h=c[u],p=e._getString(h,o.DataParser.PARENT,""),d=this._parseBone(h);if(p.length>0){var _=r.getBone(p);null!==_?d.parent=_:(p in this._cacheBones||(this._cacheBones[p]=[]),this._cacheBones[p].push(d))}if(d.name in this._cacheBones){for(var y=0,m=this._cacheBones[d.name];y<m.length;y++){m[y].parent=d}delete this._cacheBones[d.name]}r.addBone(d),this._rawBones.push(d)}if(o.DataParser.IK in t)for(var v=0,A=t[o.DataParser.IK];v<A.length;v++){var b=A[v];(D=this._parseIKConstraint(b))&&r.addConstraint(D)}if(r.sortBones(),o.DataParser.SLOT in t)for(var T=0,S=0,P=t[o.DataParser.SLOT];S<P.length;S++){var w=P[S];r.addSlot(this._parseSlot(w,T++))}if(o.DataParser.SKIN in t)for(var E=0,O=t[o.DataParser.SKIN];E<O.length;E++){var C=O[E];r.addSkin(this._parseSkin(C))}if(o.DataParser.PATH_CONSTRAINT in t)for(var x=0,M=t[o.DataParser.PATH_CONSTRAINT];x<M.length;x++){var D,I=M[x];(D=this._parsePathConstraint(I))&&r.addConstraint(D)}for(var R=0,B=this._cacheRawMeshes.length;R<B;++R){var N=this._cacheRawMeshes[R],L=e._getString(N,o.DataParser.SHARE,"");if(0!==L.length){var k=e._getString(N,o.DataParser.SKIN,o.DataParser.DEFAULT_NAME);0===k.length&&(k=o.DataParser.DEFAULT_NAME);var F=r.getMesh(k,"",L);if(null!==F)this._cacheMeshes[R].geometry.shareFrom(F.geometry)}}if(o.DataParser.ANIMATION in t)for(var j=0,G=t[o.DataParser.ANIMATION];j<G.length;j++){var V=G[j],H=this._parseAnimation(V);r.addAnimation(H)}if(o.DataParser.DEFAULT_ACTIONS in t)for(var U=0,X=this._parseActionData(t[o.DataParser.DEFAULT_ACTIONS],0,null,null);U<X.length;U++){var W=X[U];if(r.addAction(W,!0),0===W.type)null!==(H=r.getAnimation(W.name))&&(r.defaultAnimation=H)}if(o.DataParser.ACTIONS in t)for(var z=0,Y=this._parseActionData(t[o.DataParser.ACTIONS],0,null,null);z<Y.length;z++){W=Y[z];r.addAction(W,!1)}for(var q in this._rawBones.length=0,this._cacheRawMeshes.length=0,this._cacheMeshes.length=0,this._armature=null,this._weightSlotPose)delete this._weightSlotPose[q];for(var q in this._weightBonePoses)delete this._weightBonePoses[q];for(var q in this._cacheBones)delete this._cacheBones[q];for(var q in this._slotChildActions)delete this._slotChildActions[q];return r},e.prototype._parseBone=function(t){if(0===(o.DataParser.TYPE in t&&"string"==typeof t[o.DataParser.TYPE]?o.DataParser._getBoneType(t[o.DataParser.TYPE]):e._getNumber(t,o.DataParser.TYPE,0))){var n=this._armature.scale,r=l.BaseObject.borrowObject(f.BoneData);return r.inheritTranslation=e._getBoolean(t,o.DataParser.INHERIT_TRANSLATION,!0),r.inheritRotation=e._getBoolean(t,o.DataParser.INHERIT_ROTATION,!0),r.inheritScale=e._getBoolean(t,o.DataParser.INHERIT_SCALE,!0),r.inheritReflection=e._getBoolean(t,o.DataParser.INHERIT_REFLECTION,!0),r.length=e._getNumber(t,o.DataParser.LENGTH,0)*n,r.alpha=e._getNumber(t,o.DataParser.ALPHA,1),r.name=e._getString(t,o.DataParser.NAME,""),o.DataParser.TRANSFORM in t&&this._parseTransform(t[o.DataParser.TRANSFORM],r.transform,n),r}var i=l.BaseObject.borrowObject(f.SurfaceData);return i.alpha=e._getNumber(t,o.DataParser.ALPHA,1),i.name=e._getString(t,o.DataParser.NAME,""),i.segmentX=e._getNumber(t,o.DataParser.SEGMENT_X,0),i.segmentY=e._getNumber(t,o.DataParser.SEGMENT_Y,0),this._parseGeometry(t,i.geometry),i},e.prototype._parseIKConstraint=function(t){var n=this._armature.getBone(e._getString(t,o.DataParser.BONE,""));if(null===n)return null;var r=this._armature.getBone(e._getString(t,o.DataParser.TARGET,""));if(null===r)return null;var i=e._getNumber(t,o.DataParser.CHAIN,0),a=l.BaseObject.borrowObject(m.IKConstraintData);return a.scaleEnabled=e._getBoolean(t,o.DataParser.SCALE,!1),a.bendPositive=e._getBoolean(t,o.DataParser.BEND_POSITIVE,!0),a.weight=e._getNumber(t,o.DataParser.WEIGHT,1),a.name=e._getString(t,o.DataParser.NAME,""),a.type=0,a.target=r,i>0&&null!==n.parent?(a.root=n.parent,a.bone=n):(a.root=n,a.bone=null),a},e.prototype._parsePathConstraint=function(t){var n=this._armature.getSlot(e._getString(t,o.DataParser.TARGET,""));if(null===n)return null;var r=this._armature.defaultSkin;if(null===r)return null;var i=r.getDisplay(n.name,e._getString(t,o.DataParser.TARGET_DISPLAY,n.name));if(null===i||!(i instanceof u.PathDisplayData))return null;var a=t[o.DataParser.BONES];if(null===a||0===a.length)return null;var s=l.BaseObject.borrowObject(m.PathConstraintData);s.name=e._getString(t,o.DataParser.NAME,""),s.type=1,s.pathSlot=n,s.pathDisplayData=i,s.target=n.parent,s.positionMode=o.DataParser._getPositionMode(e._getString(t,o.DataParser.POSITION_MODE,"")),s.spacingMode=o.DataParser._getSpacingMode(e._getString(t,o.DataParser.SPACING_MODE,"")),s.rotateMode=o.DataParser._getRotateMode(e._getString(t,o.DataParser.ROTATE_MODE,"")),s.position=e._getNumber(t,o.DataParser.POSITION,0),s.spacing=e._getNumber(t,o.DataParser.SPACING,0),s.rotateOffset=e._getNumber(t,o.DataParser.ROTATE_OFFSET,0),s.rotateMix=e._getNumber(t,o.DataParser.ROTATE_MIX,1),s.translateMix=e._getNumber(t,o.DataParser.TRANSLATE_MIX,1);for(var c=0,h=a;c<h.length;c++){var p=h[c],f=this._armature.getBone(p);null!==f&&(s.AddBone(f),null===s.root&&(s.root=f))}return s},e.prototype._parseSlot=function(t,n){var r=l.BaseObject.borrowObject(f.SlotData);return r.displayIndex=e._getNumber(t,o.DataParser.DISPLAY_INDEX,0),r.zOrder=n,r.zIndex=e._getNumber(t,o.DataParser.Z_INDEX,0),r.alpha=e._getNumber(t,o.DataParser.ALPHA,1),r.name=e._getString(t,o.DataParser.NAME,""),r.parent=this._armature.getBone(e._getString(t,o.DataParser.PARENT,"")),o.DataParser.BLEND_MODE in t&&"string"==typeof t[o.DataParser.BLEND_MODE]?r.blendMode=o.DataParser._getBlendMode(t[o.DataParser.BLEND_MODE]):r.blendMode=e._getNumber(t,o.DataParser.BLEND_MODE,0),o.DataParser.COLOR in t?(r.color=f.SlotData.createColor(),this._parseColorTransform(t[o.DataParser.COLOR],r.color)):r.color=f.SlotData.DEFAULT_COLOR,o.DataParser.ACTIONS in t&&(this._slotChildActions[r.name]=this._parseActionData(t[o.DataParser.ACTIONS],0,null,null)),r},e.prototype._parseSkin=function(t){var n=l.BaseObject.borrowObject(y.SkinData);if(n.name=e._getString(t,o.DataParser.NAME,o.DataParser.DEFAULT_NAME),0===n.name.length&&(n.name=o.DataParser.DEFAULT_NAME),o.DataParser.SLOT in t){var r=t[o.DataParser.SLOT];this._skin=n;for(var i=0,a=r;i<a.length;i++){var s=a[i],u=e._getString(s,o.DataParser.NAME,""),c=this._armature.getSlot(u);if(null!==c){if(this._slot=c,o.DataParser.DISPLAY in s)for(var h=0,p=s[o.DataParser.DISPLAY];h<p.length;h++){var f=p[h];f?n.addDisplay(u,this._parseDisplay(f)):n.addDisplay(u,null)}this._slot=null}}this._skin=null}return n},e.prototype._parseDisplay=function(t){var n=e._getString(t,o.DataParser.NAME,""),r=e._getString(t,o.DataParser.PATH,""),i=0,a=null;switch(i=o.DataParser.TYPE in t&&"string"==typeof t[o.DataParser.TYPE]?o.DataParser._getDisplayType(t[o.DataParser.TYPE]):e._getNumber(t,o.DataParser.TYPE,i)){case 0:var s=a=l.BaseObject.borrowObject(u.ImageDisplayData);s.name=n,s.path=r.length>0?r:n,this._parsePivot(t,s);break;case 1:var c=a=l.BaseObject.borrowObject(u.ArmatureDisplayData);if(c.name=n,c.path=r.length>0?r:n,c.inheritAnimation=!0,o.DataParser.ACTIONS in t)for(var h=0,p=this._parseActionData(t[o.DataParser.ACTIONS],0,null,null);h<p.length;h++){var f=p[h];c.addAction(f)}else if(this._slot.name in this._slotChildActions){var d=this._skin.getDisplays(this._slot.name);if(null===d?0===this._slot.displayIndex:this._slot.displayIndex===d.length){for(var _=0,y=this._slotChildActions[this._slot.name];_<y.length;_++){f=y[_];c.addAction(f)}delete this._slotChildActions[this._slot.name]}}break;case 2:var m=a=l.BaseObject.borrowObject(u.MeshDisplayData);m.geometry.inheritDeform=e._getBoolean(t,o.DataParser.INHERIT_DEFORM,!0),m.name=n,m.path=r.length>0?r:n,o.DataParser.SHARE in t?(m.geometry.data=this._data,this._cacheRawMeshes.push(t),this._cacheMeshes.push(m)):this._parseMesh(t,m);break;case 3:var g=this._parseBoundingBox(t);if(null!==g){var v=a=l.BaseObject.borrowObject(u.BoundingBoxDisplayData);v.name=n,v.path=r.length>0?r:n,v.boundingBox=g}break;case 4:var A=t[o.DataParser.LENGTHS],b=a=l.BaseObject.borrowObject(u.PathDisplayData);b.closed=e._getBoolean(t,o.DataParser.CLOSED,!1),b.constantSpeed=e._getBoolean(t,o.DataParser.CONSTANT_SPEED,!1),b.name=n,b.path=r.length>0?r:n,b.curveLengths.length=A.length;for(var T=0,S=A.length;T<S;++T)b.curveLengths[T]=A[T];this._parsePath(t,b)}return null!==a&&o.DataParser.TRANSFORM in t&&this._parseTransform(t[o.DataParser.TRANSFORM],a.transform,this._armature.scale),a},e.prototype._parsePath=function(t,e){this._parseGeometry(t,e.geometry)},e.prototype._parsePivot=function(t,n){if(o.DataParser.PIVOT in t){var r=t[o.DataParser.PIVOT];n.pivot.x=e._getNumber(r,o.DataParser.X,0),n.pivot.y=e._getNumber(r,o.DataParser.Y,0)}else n.pivot.x=.5,n.pivot.y=.5},e.prototype._parseMesh=function(t,e){if(this._parseGeometry(t,e.geometry),o.DataParser.WEIGHTS in t){var n=t[o.DataParser.SLOT_POSE],r=t[o.DataParser.BONE_POSE],i=this._skin.name+"_"+this._slot.name+"_"+e.name;this._weightSlotPose[i]=n,this._weightBonePoses[i]=r}},e.prototype._parseBoundingBox=function(t){var n=null,r=0;switch(r=o.DataParser.SUB_TYPE in t&&"string"==typeof t[o.DataParser.SUB_TYPE]?o.DataParser._getBoundingBoxType(t[o.DataParser.SUB_TYPE]):e._getNumber(t,o.DataParser.SUB_TYPE,r)){case 0:n=l.BaseObject.borrowObject(_.RectangleBoundingBoxData);break;case 1:n=l.BaseObject.borrowObject(_.EllipseBoundingBoxData);break;case 2:n=this._parsePolygonBoundingBox(t)}return null!==n&&(n.color=e._getNumber(t,o.DataParser.COLOR,0),0!==n.type&&1!==n.type||(n.width=e._getNumber(t,o.DataParser.WIDTH,0),n.height=e._getNumber(t,o.DataParser.HEIGHT,0))),n},e.prototype._parsePolygonBoundingBox=function(t){var e=l.BaseObject.borrowObject(_.PolygonBoundingBoxData);if(o.DataParser.VERTICES in t){var n=this._armature.scale,r=t[o.DataParser.VERTICES],i=e.vertices;i.length=r.length;for(var a=0,s=r.length;a<s;a+=2){var u=r[a]*n,c=r[a+1]*n;i[a]=u,i[a+1]=c,0===a?(e.x=u,e.y=c,e.width=u,e.height=c):(u<e.x?e.x=u:u>e.width&&(e.width=u),c<e.y?e.y=c:c>e.height&&(e.height=c))}e.width-=e.x,e.height-=e.y}else console.warn("Data error.\n Please reexport DragonBones Data to fixed the bug.");return e},e.prototype._parseAnimation=function(t){var n=l.BaseObject.borrowObject(d.AnimationData);if(n.blendType=o.DataParser._getAnimationBlendType(e._getString(t,o.DataParser.BLEND_TYPE,"")),n.frameCount=e._getNumber(t,o.DataParser.DURATION,0),n.playTimes=e._getNumber(t,o.DataParser.PLAY_TIMES,1),n.duration=n.frameCount/this._armature.frameRate,n.fadeInTime=e._getNumber(t,o.DataParser.FADE_IN_TIME,0),n.scale=e._getNumber(t,o.DataParser.SCALE,1),n.name=e._getString(t,o.DataParser.NAME,o.DataParser.DEFAULT_NAME),0===n.name.length&&(n.name=o.DataParser.DEFAULT_NAME),n.frameIntOffset=this._frameIntArray.length,n.frameFloatOffset=this._frameFloatArray.length,n.frameOffset=this._frameArray.length,this._animation=n,o.DataParser.FRAME in t){var r=t[o.DataParser.FRAME],i=r.length;if(i>0)for(var a=0,s=0;a<i;++a){var u=r[a];this._parseActionDataInFrame(u,s,null,null),s+=e._getNumber(u,o.DataParser.DURATION,1)}}if(o.DataParser.Z_ORDER in t&&(this._animation.zOrderTimeline=this._parseTimeline(t[o.DataParser.Z_ORDER],null,o.DataParser.FRAME,1,0,0,this._parseZOrderFrame)),o.DataParser.BONE in t)for(var c=0,p=t[o.DataParser.BONE];c<p.length;c++){var f=p[c];this._parseBoneTimeline(f)}if(o.DataParser.SLOT in t)for(var _=0,y=t[o.DataParser.SLOT];_<y.length;_++){f=y[_];this._parseSlotTimeline(f)}if(o.DataParser.FFD in t)for(var m=0,g=t[o.DataParser.FFD];m<g.length;m++){f=g[m];var v=e._getString(f,o.DataParser.SKIN,o.DataParser.DEFAULT_NAME),A=e._getString(f,o.DataParser.SLOT,""),b=e._getString(f,o.DataParser.NAME,"");if(0===v.length&&(v=o.DataParser.DEFAULT_NAME),this._slot=this._armature.getSlot(A),this._mesh=this._armature.getMesh(v,A,b),null!==this._slot&&null!==this._mesh)null!==(x=this._parseTimeline(f,null,o.DataParser.FRAME,22,2,0,this._parseSlotDeformFrame))&&this._animation.addSlotTimeline(A,x),this._slot=null,this._mesh=null}if(o.DataParser.IK in t)for(var T=0,S=t[o.DataParser.IK];T<S.length;T++){f=S[T];var P=e._getString(f,o.DataParser.NAME,"");if(null!==this._armature.getConstraint(P))null!==(x=this._parseTimeline(f,null,o.DataParser.FRAME,30,1,2,this._parseIKConstraintFrame))&&this._animation.addConstraintTimeline(P,x)}if(this._actionFrames.length>0&&(this._animation.actionTimeline=this._parseTimeline(null,this._actionFrames,"",0,0,0,this._parseActionFrame),this._actionFrames.length=0),o.DataParser.TIMELINE in t)for(var w=0,E=t[o.DataParser.TIMELINE];w<E.length;w++){f=E[w];var O=e._getNumber(f,o.DataParser.TYPE,0),C=e._getString(f,o.DataParser.NAME,""),x=null;switch(O){case 0:break;case 20:case 23:case 60:case 24:case 40:case 41:if(20===O?(this._frameValueType=0,this._frameValueScale=1):(this._frameValueType=1,this._frameValueScale=23===O?1:40===O||41===O?1e4:100),this._frameDefaultValue=60===O||24===O||41===O?1:0,40===O&&0!==n.blendType){var M=x=l.BaseObject.borrowObject(d.AnimationTimelineData);M.x=e._getNumber(f,o.DataParser.X,0),M.y=e._getNumber(f,o.DataParser.Y,0)}x=this._parseTimeline(f,null,o.DataParser.FRAME,O,this._frameValueType,1,this._parseSingleValueFrame,x);break;case 11:case 12:case 13:case 30:case 42:30===O||42===O?(this._frameValueType=1,this._frameValueScale=42===O?1e4:100):(this._frameValueScale=12===O?h.Transform.DEG_RAD:1,this._frameValueType=2),this._frameDefaultValue=13===O||30===O?1:0,x=this._parseTimeline(f,null,o.DataParser.FRAME,O,this._frameValueType,2,this._parseDoubleValueFrame);break;case 1:break;case 50:var D=this._armature.getBone(C);if(null===D)continue;this._geometry=D.geometry,x=this._parseTimeline(f,null,o.DataParser.FRAME,O,2,0,this._parseDeformFrame),this._geometry=null;break;case 22:for(var v in this._geometry=null,this._armature.skins){var I=this._armature.skins[v];for(var R in I.displays)for(var B=0,N=I.displays[R];B<N.length;B++){var L=N[B];if(null!==L&&L.name===C){this._geometry=L.geometry;break}}}if(null===this._geometry)continue;x=this._parseTimeline(f,null,o.DataParser.FRAME,O,2,0,this._parseDeformFrame),this._geometry=null;break;case 21:x=this._parseTimeline(f,null,o.DataParser.FRAME,O,1,1,this._parseSlotColorFrame)}if(null!==x)switch(O){case 0:case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(C,x);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(C,x);break;case 30:this._animation.addConstraintTimeline(C,x);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(C,x)}}return this._animation=null,n},e.prototype._parseTimeline=function(t,n,r,i,a,s,u,c){if(void 0===c&&(c=null),null!==t&&r.length>0&&r in t&&(n=t[r]),null===n)return null;var h=n.length;if(0===h)return null;var p=this._frameIntArray.length,f=this._frameFloatArray.length,_=this._timelineArray.length;switch(null===c&&(c=l.BaseObject.borrowObject(d.TimelineData)),c.type=i,c.offset=_,this._frameValueType=a,this._timeline=c,this._timelineArray.length+=5+h,null!==t?(this._timelineArray[_+0]=Math.round(100*e._getNumber(t,o.DataParser.SCALE,1)),this._timelineArray[_+1]=Math.round(100*e._getNumber(t,o.DataParser.OFFSET,0))):(this._timelineArray[_+0]=100,this._timelineArray[_+1]=0),this._timelineArray[_+2]=h,this._timelineArray[_+3]=s,this._frameValueType){case 0:this._timelineArray[_+4]=0;break;case 1:this._timelineArray[_+4]=p-this._animation.frameIntOffset;break;case 2:this._timelineArray[_+4]=f-this._animation.frameFloatOffset}if(1===h)c.frameIndicesOffset=-1,this._timelineArray[_+5+0]=u.call(this,n[0],0,0)-this._animation.frameOffset;else{var y=this._animation.frameCount+1,m=this._data.frameIndices,g=m.length;m.length+=y,c.frameIndicesOffset=g;for(var v=0,A=0,b=0,S=0;v<y;++v){if(b+S<=v&&A<h){var P=n[A];b=v,S=A===h-1?this._animation.frameCount-b:P instanceof T?this._actionFrames[A+1].frameStart-b:e._getNumber(P,o.DataParser.DURATION,1),this._timelineArray[_+5+A]=u.call(this,P,b,S)-this._animation.frameOffset,A++}m[g+v]=A-1}}return this._timeline=null,c},e.prototype._parseBoneTimeline=function(t){var n=this._armature.getBone(e._getString(t,o.DataParser.NAME,""));if(null!==n){var r;if(this._bone=n,this._slot=this._armature.getSlot(this._bone.name),o.DataParser.TRANSLATE_FRAME in t)this._frameDefaultValue=0,this._frameValueScale=1,null!==(r=this._parseTimeline(t,null,o.DataParser.TRANSLATE_FRAME,11,2,2,this._parseDoubleValueFrame))&&this._animation.addBoneTimeline(n.name,r);if(o.DataParser.ROTATE_FRAME in t)this._frameDefaultValue=0,this._frameValueScale=1,null!==(r=this._parseTimeline(t,null,o.DataParser.ROTATE_FRAME,12,2,2,this._parseBoneRotateFrame))&&this._animation.addBoneTimeline(n.name,r);if(o.DataParser.SCALE_FRAME in t)this._frameDefaultValue=1,this._frameValueScale=1,null!==(r=this._parseTimeline(t,null,o.DataParser.SCALE_FRAME,13,2,2,this._parseBoneScaleFrame))&&this._animation.addBoneTimeline(n.name,r);if(o.DataParser.FRAME in t)null!==(r=this._parseTimeline(t,null,o.DataParser.FRAME,10,2,6,this._parseBoneAllFrame))&&this._animation.addBoneTimeline(n.name,r);this._bone=null,this._slot=null}},e.prototype._parseSlotTimeline=function(t){var n=this._armature.getSlot(e._getString(t,o.DataParser.NAME,""));if(null!==n){var r=null,i=null;this._slot=n,r=o.DataParser.DISPLAY_FRAME in t?this._parseTimeline(t,null,o.DataParser.DISPLAY_FRAME,20,0,0,this._parseSlotDisplayFrame):this._parseTimeline(t,null,o.DataParser.FRAME,20,0,0,this._parseSlotDisplayFrame),i=o.DataParser.COLOR_FRAME in t?this._parseTimeline(t,null,o.DataParser.COLOR_FRAME,21,1,1,this._parseSlotColorFrame):this._parseTimeline(t,null,o.DataParser.FRAME,21,1,1,this._parseSlotColorFrame),null!==r&&this._animation.addSlotTimeline(n.name,r),null!==i&&this._animation.addSlotTimeline(n.name,i),this._slot=null}},e.prototype._parseFrame=function(t,e,n){var r=this._frameArray.length;return this._frameArray.length+=1,this._frameArray[r+0]=e,r},e.prototype._parseTweenFrame=function(t,n,r){var i=this._parseFrame(t,n,r);if(r>0)if(o.DataParser.CURVE in t){var a=r+1;this._helpArray.length=a;var s=this._samplingEasingCurve(t[o.DataParser.CURVE],this._helpArray);this._frameArray.length+=2+this._helpArray.length,this._frameArray[i+1]=2,this._frameArray[i+2]=s?a:-a;for(var l=0;l<a;++l)this._frameArray[i+3+l]=Math.round(1e4*this._helpArray[l])}else{var u=-2;o.DataParser.TWEEN_EASING in t&&(u=e._getNumber(t,o.DataParser.TWEEN_EASING,-2)),-2===u?(this._frameArray.length+=1,this._frameArray[i+1]=0):0===u?(this._frameArray.length+=1,this._frameArray[i+1]=1):u<0?(this._frameArray.length+=2,this._frameArray[i+1]=3,this._frameArray[i+2]=Math.round(100*-u)):u<=1?(this._frameArray.length+=2,this._frameArray[i+1]=4,this._frameArray[i+2]=Math.round(100*u)):(this._frameArray.length+=2,this._frameArray[i+1]=5,this._frameArray[i+2]=Math.round(100*u-100))}else this._frameArray.length+=1,this._frameArray[i+1]=0;return i},e.prototype._parseSingleValueFrame=function(t,n,r){var i=0;switch(this._frameValueType){case 0:i=this._parseFrame(t,n,r),this._frameArray.length+=1,this._frameArray[i+1]=e._getNumber(t,o.DataParser.VALUE,this._frameDefaultValue);break;case 1:i=this._parseTweenFrame(t,n,r);var a=this._frameIntArray.length;this._frameIntArray.length+=1,this._frameIntArray[a]=Math.round(e._getNumber(t,o.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale);break;case 2:i=this._parseTweenFrame(t,n,r);a=this._frameFloatArray.length;this._frameFloatArray.length+=1,this._frameFloatArray[a]=e._getNumber(t,o.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale}return i},e.prototype._parseDoubleValueFrame=function(t,n,r){var i=0;switch(this._frameValueType){case 0:i=this._parseFrame(t,n,r),this._frameArray.length+=2,this._frameArray[i+1]=e._getNumber(t,o.DataParser.X,this._frameDefaultValue),this._frameArray[i+2]=e._getNumber(t,o.DataParser.Y,this._frameDefaultValue);break;case 1:i=this._parseTweenFrame(t,n,r);var a=this._frameIntArray.length;this._frameIntArray.length+=2,this._frameIntArray[a]=Math.round(e._getNumber(t,o.DataParser.X,this._frameDefaultValue)*this._frameValueScale),this._frameIntArray[a+1]=Math.round(e._getNumber(t,o.DataParser.Y,this._frameDefaultValue)*this._frameValueScale);break;case 2:i=this._parseTweenFrame(t,n,r);a=this._frameFloatArray.length;this._frameFloatArray.length+=2,this._frameFloatArray[a]=e._getNumber(t,o.DataParser.X,this._frameDefaultValue)*this._frameValueScale,this._frameFloatArray[a+1]=e._getNumber(t,o.DataParser.Y,this._frameDefaultValue)*this._frameValueScale}return i},e.prototype._parseActionFrame=function(t,e,n){var r=this._frameArray.length,i=t.actions.length;this._frameArray.length+=2+i,this._frameArray[r+0]=e,this._frameArray[r+0+1]=i;for(var o=0;o<i;++o)this._frameArray[r+0+2+o]=t.actions[o];return r},e.prototype._parseZOrderFrame=function(t,e,n){var r=this._parseFrame(t,e,n);if(o.DataParser.Z_ORDER in t){var i=t[o.DataParser.Z_ORDER];if(i.length>0){for(var a=this._armature.sortedSlots.length,s=new Array(a-i.length/2),l=new Array(a),u=0;u<s.length;++u)s[u]=0;for(var c=0;c<a;++c)l[c]=-1;for(var h=0,p=0,f=0,d=i.length;f<d;f+=2){for(var _=i[f],y=i[f+1];h!==_;)s[p++]=h++;l[h+y]=h++}for(;h<a;)s[p++]=h++;this._frameArray.length+=1+a,this._frameArray[r+1]=a;for(var m=a;m--;)-1===l[m]?this._frameArray[r+2+m]=s[--p]||0:this._frameArray[r+2+m]=l[m]||0;return r}}return this._frameArray.length+=1,this._frameArray[r+1]=0,r},e.prototype._parseBoneAllFrame=function(t,n,r){this._helpTransform.identity(),o.DataParser.TRANSFORM in t&&this._parseTransform(t[o.DataParser.TRANSFORM],this._helpTransform,1);var i=this._helpTransform.rotation;0!==n&&(0===this._prevClockwise?i=this._prevRotation+h.Transform.normalizeRadian(i-this._prevRotation):((this._prevClockwise>0?i>=this._prevRotation:i<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),i=this._prevRotation+i-this._prevRotation+h.Transform.PI_D*this._prevClockwise)),this._prevClockwise=e._getNumber(t,o.DataParser.TWEEN_ROTATE,0),this._prevRotation=i;var a=this._parseTweenFrame(t,n,r),s=this._frameFloatArray.length;return this._frameFloatArray.length+=6,this._frameFloatArray[s++]=this._helpTransform.x,this._frameFloatArray[s++]=this._helpTransform.y,this._frameFloatArray[s++]=i,this._frameFloatArray[s++]=this._helpTransform.skew,this._frameFloatArray[s++]=this._helpTransform.scaleX,this._frameFloatArray[s++]=this._helpTransform.scaleY,this._parseActionDataInFrame(t,n,this._bone,this._slot),a},e.prototype._parseBoneTranslateFrame=function(t,n,r){var i=this._parseTweenFrame(t,n,r),a=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[a++]=e._getNumber(t,o.DataParser.X,0),this._frameFloatArray[a++]=e._getNumber(t,o.DataParser.Y,0),i},e.prototype._parseBoneRotateFrame=function(t,n,r){var i=e._getNumber(t,o.DataParser.ROTATE,0)*h.Transform.DEG_RAD;0!==n&&(0===this._prevClockwise?i=this._prevRotation+h.Transform.normalizeRadian(i-this._prevRotation):((this._prevClockwise>0?i>=this._prevRotation:i<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),i=this._prevRotation+i-this._prevRotation+h.Transform.PI_D*this._prevClockwise)),this._prevClockwise=e._getNumber(t,o.DataParser.CLOCK_WISE,0),this._prevRotation=i;var a=this._parseTweenFrame(t,n,r),s=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[s++]=i,this._frameFloatArray[s++]=e._getNumber(t,o.DataParser.SKEW,0)*h.Transform.DEG_RAD,a},e.prototype._parseBoneScaleFrame=function(t,n,r){var i=this._parseTweenFrame(t,n,r),a=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[a++]=e._getNumber(t,o.DataParser.X,1),this._frameFloatArray[a++]=e._getNumber(t,o.DataParser.Y,1),i},e.prototype._parseSlotDisplayFrame=function(t,n,r){var i=this._parseFrame(t,n,r);return this._frameArray.length+=1,o.DataParser.VALUE in t?this._frameArray[i+1]=e._getNumber(t,o.DataParser.VALUE,0):this._frameArray[i+1]=e._getNumber(t,o.DataParser.DISPLAY_INDEX,0),this._parseActionDataInFrame(t,n,this._slot.parent,this._slot),i},e.prototype._parseSlotColorFrame=function(t,e,n){var r=this._parseTweenFrame(t,e,n),i=-1;if(o.DataParser.VALUE in t||o.DataParser.COLOR in t){var a=o.DataParser.VALUE in t?t[o.DataParser.VALUE]:t[o.DataParser.COLOR];for(var s in a){this._parseColorTransform(a,this._helpColorTransform),i=this._colorArray.length,this._colorArray.length+=8,this._colorArray[i++]=Math.round(100*this._helpColorTransform.alphaMultiplier),this._colorArray[i++]=Math.round(100*this._helpColorTransform.redMultiplier),this._colorArray[i++]=Math.round(100*this._helpColorTransform.greenMultiplier),this._colorArray[i++]=Math.round(100*this._helpColorTransform.blueMultiplier),this._colorArray[i++]=Math.round(this._helpColorTransform.alphaOffset),this._colorArray[i++]=Math.round(this._helpColorTransform.redOffset),this._colorArray[i++]=Math.round(this._helpColorTransform.greenOffset),this._colorArray[i++]=Math.round(this._helpColorTransform.blueOffset),i-=8;break}}i<0&&(this._defaultColorOffset<0&&(this._defaultColorOffset=i=this._colorArray.length,this._colorArray.length+=8,this._colorArray[i++]=100,this._colorArray[i++]=100,this._colorArray[i++]=100,this._colorArray[i++]=100,this._colorArray[i++]=0,this._colorArray[i++]=0,this._colorArray[i++]=0,this._colorArray[i++]=0),i=this._defaultColorOffset);var l=this._frameIntArray.length;return this._frameIntArray.length+=1,this._frameIntArray[l]=i,r},e.prototype._parseSlotDeformFrame=function(t,n,r){var i=this._frameFloatArray.length,a=this._parseTweenFrame(t,n,r),s=o.DataParser.VERTICES in t?t[o.DataParser.VERTICES]:null,l=e._getNumber(t,o.DataParser.OFFSET,0),u=this._intArray[this._mesh.geometry.offset+0],c=this._mesh.parent.name+"_"+this._slot.name+"_"+this._mesh.name,h=this._mesh.geometry.weight,p=0,f=0,d=0,_=0;if(null!==h){var y=this._weightSlotPose[c];this._helpMatrixA.copyFromArray(y,0),this._frameFloatArray.length+=2*h.count,d=h.offset+2+h.bones.length}else this._frameFloatArray.length+=2*u;for(var m=0;m<2*u;m+=2)if(null===s?(p=0,f=0):(p=m<l||m-l>=s.length?0:s[m-l],f=m+1<l||m+1-l>=s.length?0:s[m+1-l]),null!==h){var g=this._weightBonePoses[c],v=this._intArray[d++];this._helpMatrixA.transformPoint(p,f,this._helpPoint,!0),p=this._helpPoint.x,f=this._helpPoint.y;for(var A=0;A<v;++A){var b=this._intArray[d++];this._helpMatrixB.copyFromArray(g,7*b+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(p,f,this._helpPoint,!0),this._frameFloatArray[i+_++]=this._helpPoint.x,this._frameFloatArray[i+_++]=this._helpPoint.y}}else this._frameFloatArray[i+m]=p,this._frameFloatArray[i+m+1]=f;if(0===n){var T=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[T+0]=this._mesh.geometry.offset,this._frameIntArray[T+1]=this._frameFloatArray.length-i,this._frameIntArray[T+2]=this._frameFloatArray.length-i,this._frameIntArray[T+3]=0,this._frameIntArray[T+4]=i-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=T-this._animation.frameIntOffset}return a},e.prototype._parseIKConstraintFrame=function(t,n,r){var i=this._parseTweenFrame(t,n,r),a=this._frameIntArray.length;return this._frameIntArray.length+=2,this._frameIntArray[a++]=e._getBoolean(t,o.DataParser.BEND_POSITIVE,!0)?1:0,this._frameIntArray[a++]=Math.round(100*e._getNumber(t,o.DataParser.WEIGHT,1)),i},e.prototype._parseActionData=function(t,n,r,i){var a=new Array;if("string"==typeof t)(h=l.BaseObject.borrowObject(p.ActionData)).type=n,h.name=t,h.bone=r,h.slot=i,a.push(h);else if(t instanceof Array)for(var s=0,u=t;s<u.length;s++){var c=u[s],h=l.BaseObject.borrowObject(p.ActionData);if(o.DataParser.GOTO_AND_PLAY in c?(h.type=0,h.name=e._getString(c,o.DataParser.GOTO_AND_PLAY,"")):(o.DataParser.TYPE in c&&"string"==typeof c[o.DataParser.TYPE]?h.type=o.DataParser._getActionType(c[o.DataParser.TYPE]):h.type=e._getNumber(c,o.DataParser.TYPE,n),h.name=e._getString(c,o.DataParser.NAME,"")),o.DataParser.BONE in c){var f=e._getString(c,o.DataParser.BONE,"");h.bone=this._armature.getBone(f)}else h.bone=r;if(o.DataParser.SLOT in c){var d=e._getString(c,o.DataParser.SLOT,"");h.slot=this._armature.getSlot(d)}else h.slot=i;var _=null;if(o.DataParser.INTS in c){null===_&&(_=l.BaseObject.borrowObject(p.UserData));for(var y=0,m=c[o.DataParser.INTS];y<m.length;y++){var g=m[y];_.addInt(g)}}if(o.DataParser.FLOATS in c){null===_&&(_=l.BaseObject.borrowObject(p.UserData));for(var v=0,A=c[o.DataParser.FLOATS];v<A.length;v++){g=A[v];_.addFloat(g)}}if(o.DataParser.STRINGS in c){null===_&&(_=l.BaseObject.borrowObject(p.UserData));for(var b=0,T=c[o.DataParser.STRINGS];b<T.length;b++){g=T[b];_.addString(g)}}h.data=_,a.push(h)}return a},e.prototype._parseDeformFrame=function(t,n,r){var i=this._frameFloatArray.length,a=this._parseTweenFrame(t,n,r),s=o.DataParser.VERTICES in t?t[o.DataParser.VERTICES]:o.DataParser.VALUE in t?t[o.DataParser.VALUE]:null,l=e._getNumber(t,o.DataParser.OFFSET,0),u=this._intArray[this._geometry.offset+0],c=0,h=0;if(null!==this._geometry.weight);else{this._frameFloatArray.length+=2*u;for(var p=0;p<2*u;p+=2)null!==s?(c=p<l||p-l>=s.length?0:s[p-l],h=p+1<l||p+1-l>=s.length?0:s[p+1-l]):(c=0,h=0),this._frameFloatArray[i+p]=c,this._frameFloatArray[i+p+1]=h}if(0===n){var f=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[f+0]=this._geometry.offset,this._frameIntArray[f+1]=this._frameFloatArray.length-i,this._frameIntArray[f+2]=this._frameFloatArray.length-i,this._frameIntArray[f+3]=0,this._frameIntArray[f+4]=i-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=f-this._animation.frameIntOffset}return a},e.prototype._parseTransform=function(t,n,r){n.x=e._getNumber(t,o.DataParser.X,0)*r,n.y=e._getNumber(t,o.DataParser.Y,0)*r,o.DataParser.ROTATE in t||o.DataParser.SKEW in t?(n.rotation=h.Transform.normalizeRadian(e._getNumber(t,o.DataParser.ROTATE,0)*h.Transform.DEG_RAD),n.skew=h.Transform.normalizeRadian(e._getNumber(t,o.DataParser.SKEW,0)*h.Transform.DEG_RAD)):(o.DataParser.SKEW_X in t||o.DataParser.SKEW_Y in t)&&(n.rotation=h.Transform.normalizeRadian(e._getNumber(t,o.DataParser.SKEW_Y,0)*h.Transform.DEG_RAD),n.skew=h.Transform.normalizeRadian(e._getNumber(t,o.DataParser.SKEW_X,0)*h.Transform.DEG_RAD)-n.rotation),n.scaleX=e._getNumber(t,o.DataParser.SCALE_X,1),n.scaleY=e._getNumber(t,o.DataParser.SCALE_Y,1)},e.prototype._parseColorTransform=function(t,n){n.alphaMultiplier=.01*e._getNumber(t,o.DataParser.ALPHA_MULTIPLIER,100),n.redMultiplier=.01*e._getNumber(t,o.DataParser.RED_MULTIPLIER,100),n.greenMultiplier=.01*e._getNumber(t,o.DataParser.GREEN_MULTIPLIER,100),n.blueMultiplier=.01*e._getNumber(t,o.DataParser.BLUE_MULTIPLIER,100),n.alphaOffset=e._getNumber(t,o.DataParser.ALPHA_OFFSET,0),n.redOffset=e._getNumber(t,o.DataParser.RED_OFFSET,0),n.greenOffset=e._getNumber(t,o.DataParser.GREEN_OFFSET,0),n.blueOffset=e._getNumber(t,o.DataParser.BLUE_OFFSET,0)},e.prototype._parseGeometry=function(t,e){var n=t[o.DataParser.VERTICES],r=Math.floor(n.length/2),i=0,a=this._intArray.length,s=this._floatArray.length;e.offset=a,e.data=this._data,this._intArray.length+=4,this._intArray[a+0]=r,this._intArray[a+2]=s,this._intArray[a+3]=-1,this._floatArray.length+=2*r;for(var c=0,h=2*r;c<h;++c)this._floatArray[s+c]=n[c];if(o.DataParser.TRIANGLES in t){var p=t[o.DataParser.TRIANGLES];i=Math.floor(p.length/3),this._intArray.length+=3*i;for(c=0,h=3*i;c<h;++c)this._intArray[a+4+c]=p[c]}if(this._intArray[a+1]=i,o.DataParser.UVS in t){var f=t[o.DataParser.UVS],d=s+2*r;this._floatArray.length+=2*r;for(c=0,h=2*r;c<h;++c)this._floatArray[d+c]=f[c]}if(o.DataParser.WEIGHTS in t){var _=t[o.DataParser.WEIGHTS],y=Math.floor(_.length-r)/2,m=this._intArray.length,g=this._floatArray.length,v=0,A=this._armature.sortedBones,b=l.BaseObject.borrowObject(u.WeightData);if(b.count=y,b.offset=m,this._intArray.length+=2+v+r+y,this._intArray[m+1]=g,o.DataParser.BONE_POSE in t){var T=t[o.DataParser.SLOT_POSE],S=t[o.DataParser.BONE_POSE],P=new Array;v=Math.floor(S.length/7),P.length=v;for(c=0;c<v;++c){var w=S[7*c],E=this._rawBones[w];b.addBone(E),P[c]=w,this._intArray[m+2+c]=A.indexOf(E)}this._floatArray.length+=3*y,this._helpMatrixA.copyFromArray(T,0);c=0;for(var O=0,C=m+2+v,x=g;c<r;++c){var M=2*c,D=this._intArray[C++]=_[O++],I=this._floatArray[s+M],R=this._floatArray[s+M+1];this._helpMatrixA.transformPoint(I,R,this._helpPoint),I=this._helpPoint.x,R=this._helpPoint.y;for(var B=0;B<D;++B){w=_[O++];var N=P.indexOf(w);this._helpMatrixB.copyFromArray(S,7*N+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(I,R,this._helpPoint),this._intArray[C++]=N,this._floatArray[x++]=_[O++],this._floatArray[x++]=this._helpPoint.x,this._floatArray[x++]=this._helpPoint.y}}}else{var L=t[o.DataParser.BONES];v=L.length;for(c=0;c<v;c++){w=L[c],E=this._rawBones[w];b.addBone(E),this._intArray[m+2+c]=A.indexOf(E)}this._floatArray.length+=3*y;c=0,O=0,x=0,C=m+2+v;for(var k=g;c<y;c++){D=_[O++];this._intArray[C++]=D;for(B=0;B<D;B++){N=_[O++];var F=_[O++];I=n[x++],R=n[x++];this._intArray[C++]=L.indexOf(N),this._floatArray[k++]=F,this._floatArray[k++]=I,this._floatArray[k++]=R}}}e.weight=b}},e.prototype._parseArray=function(t){this._intArray.length=0,this._floatArray.length=0,this._frameIntArray.length=0,this._frameFloatArray.length=0,this._frameArray.length=0,this._timelineArray.length=0,this._colorArray.length=0},e.prototype._modifyArray=function(){this._intArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._intArray.push(0),this._frameIntArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._frameIntArray.push(0),this._frameArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._frameArray.push(0),this._timelineArray.length%Uint16Array.BYTES_PER_ELEMENT!=0&&this._timelineArray.push(0),this._timelineArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._colorArray.push(0);for(var t=this._intArray.length*Int16Array.BYTES_PER_ELEMENT,e=this._floatArray.length*Float32Array.BYTES_PER_ELEMENT,n=this._frameIntArray.length*Int16Array.BYTES_PER_ELEMENT,r=this._frameFloatArray.length*Float32Array.BYTES_PER_ELEMENT,i=this._frameArray.length*Int16Array.BYTES_PER_ELEMENT,o=this._timelineArray.length*Uint16Array.BYTES_PER_ELEMENT,a=this._colorArray.length*Int16Array.BYTES_PER_ELEMENT,s=new ArrayBuffer(t+e+n+r+i+o+a),l=new Int16Array(s,0,this._intArray.length),u=new Float32Array(s,t,this._floatArray.length),c=new Int16Array(s,t+e,this._frameIntArray.length),h=new Float32Array(s,t+e+n,this._frameFloatArray.length),p=new Int16Array(s,t+e+n+r,this._frameArray.length),f=new Uint16Array(s,t+e+n+r+i,this._timelineArray.length),d=new Int16Array(s,t+e+n+r+i+o,this._colorArray.length),_=0,y=this._intArray.length;_<y;++_)l[_]=this._intArray[_];for(_=0,y=this._floatArray.length;_<y;++_)u[_]=this._floatArray[_];for(_=0,y=this._frameIntArray.length;_<y;++_)c[_]=this._frameIntArray[_];for(_=0,y=this._frameFloatArray.length;_<y;++_)h[_]=this._frameFloatArray[_];for(_=0,y=this._frameArray.length;_<y;++_)p[_]=this._frameArray[_];for(_=0,y=this._timelineArray.length;_<y;++_)f[_]=this._timelineArray[_];for(_=0,y=this._colorArray.length;_<y;++_)d[_]=this._colorArray[_];this._data.binary=s,this._data.intArray=l,this._data.floatArray=u,this._data.frameIntArray=c,this._data.frameFloatArray=h,this._data.frameArray=p,this._data.timelineArray=f,this._data.colorArray=d,this._defaultColorOffset=-1},e.prototype.parseDragonBonesData=function(t,n){void 0===n&&(n=1),console.assert(null!=t,"Data error.");var r=e._getString(t,o.DataParser.VERSION,""),i=e._getString(t,o.DataParser.COMPATIBLE_VERSION,"");if(o.DataParser.DATA_VERSIONS.indexOf(r)>=0||o.DataParser.DATA_VERSIONS.indexOf(i)>=0){var a=l.BaseObject.borrowObject(s.DragonBonesData);if(a.version=r,a.name=e._getString(t,o.DataParser.NAME,""),a.frameRate=e._getNumber(t,o.DataParser.FRAME_RATE,24),0===a.frameRate&&(a.frameRate=24),o.DataParser.ARMATURE in t){this._data=a,this._parseArray(t);for(var u=0,c=t[o.DataParser.ARMATURE];u<c.length;u++){var h=c[u];a.addArmature(this._parseArmature(h,n))}this._data.binary||this._modifyArray(),o.DataParser.STAGE in t?a.stage=a.getArmature(e._getString(t,o.DataParser.STAGE,"")):a.armatureNames.length>0&&(a.stage=a.getArmature(a.armatureNames[0])),this._data=null}return o.DataParser.TEXTURE_ATLAS in t&&(this._rawTextureAtlases=t[o.DataParser.TEXTURE_ATLAS]),a}return console.assert(!1,"Nonsupport data version: "+r+"\nPlease convert DragonBones data to support version.\nRead more: https://github.com/DragonBones/Tools/"),null},e.prototype.parseTextureAtlasData=function(t,n,r){if(void 0===r&&(r=1),console.assert(void 0!==t),null===t){if(null===this._rawTextureAtlases||0===this._rawTextureAtlases.length)return!1;var i=this._rawTextureAtlases[this._rawTextureAtlasIndex++];return this.parseTextureAtlasData(i,n,r),this._rawTextureAtlasIndex>=this._rawTextureAtlases.length&&(this._rawTextureAtlasIndex=0,this._rawTextureAtlases=null),!0}if(n.width=e._getNumber(t,o.DataParser.WIDTH,0),n.height=e._getNumber(t,o.DataParser.HEIGHT,0),n.scale=1===r?1/e._getNumber(t,o.DataParser.SCALE,1):r,n.name=e._getString(t,o.DataParser.NAME,""),n.imagePath=e._getString(t,o.DataParser.IMAGE_PATH,""),o.DataParser.SUB_TEXTURE in t)for(var s=t[o.DataParser.SUB_TEXTURE],l=0,u=s.length;l<u;++l){var c=s[l],h=e._getNumber(c,o.DataParser.FRAME_WIDTH,-1),p=e._getNumber(c,o.DataParser.FRAME_HEIGHT,-1),f=n.createTexture();f.rotated=e._getBoolean(c,o.DataParser.ROTATED,!1),f.name=e._getString(c,o.DataParser.NAME,""),f.region.x=e._getNumber(c,o.DataParser.X,0),f.region.y=e._getNumber(c,o.DataParser.Y,0),f.region.width=e._getNumber(c,o.DataParser.WIDTH,0),f.region.height=e._getNumber(c,o.DataParser.HEIGHT,0),h>0&&p>0&&(f.frame=a.TextureData.createRectangle(),f.frame.x=e._getNumber(c,o.DataParser.FRAME_X,0),f.frame.y=e._getNumber(c,o.DataParser.FRAME_Y,0),f.frame.width=h,f.frame.height=p),n.addTexture(f)}return!0},e.getInstance=function(){return null===e._objectDataParserInstance&&(e._objectDataParserInstance=new e),e._objectDataParserInstance},e._objectDataParserInstance=null,e}(o.DataParser);e.ObjectDataParser=b;var T=function(){this.frameStart=0,this.actions=[]};e.ActionFrame=T},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationTimelineData=e.TimelineData=e.AnimationData=void 0;var o=n(2),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cachedFrames=[],e.boneTimelines={},e.slotTimelines={},e.constraintTimelines={},e.animationTimelines={},e.boneCachedFrameIndices={},e.slotCachedFrameIndices={},e.actionTimeline=null,e.zOrderTimeline=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.AnimationData]"},e.prototype._onClear=function(){for(var t in this.boneTimelines){for(var e=0,n=this.boneTimelines[t];e<n.length;e++){n[e].returnToPool()}delete this.boneTimelines[t]}for(var t in this.slotTimelines){for(var r=0,i=this.slotTimelines[t];r<i.length;r++){i[r].returnToPool()}delete this.slotTimelines[t]}for(var t in this.constraintTimelines){for(var o=0,a=this.constraintTimelines[t];o<a.length;o++){a[o].returnToPool()}delete this.constraintTimelines[t]}for(var t in this.animationTimelines){for(var s=0,l=this.animationTimelines[t];s<l.length;s++){l[s].returnToPool()}delete this.animationTimelines[t]}for(var t in this.boneCachedFrameIndices)delete this.boneCachedFrameIndices[t];for(var t in this.slotCachedFrameIndices)delete this.slotCachedFrameIndices[t];null!==this.actionTimeline&&this.actionTimeline.returnToPool(),null!==this.zOrderTimeline&&this.zOrderTimeline.returnToPool(),this.frameIntOffset=0,this.frameFloatOffset=0,this.frameOffset=0,this.blendType=0,this.frameCount=0,this.playTimes=0,this.duration=0,this.scale=1,this.fadeInTime=0,this.cacheFrameRate=0,this.name="",this.cachedFrames.length=0,this.actionTimeline=null,this.zOrderTimeline=null,this.parent=null},e.prototype.cacheFrames=function(t){if(!(this.cacheFrameRate>0)){this.cacheFrameRate=Math.max(Math.ceil(t*this.scale),1);var e=Math.ceil(this.cacheFrameRate*this.duration)+1;this.cachedFrames.length=e;for(var n=0,r=this.cacheFrames.length;n<r;++n)this.cachedFrames[n]=!1;for(var i=0,o=this.parent.sortedBones;i<o.length;i++){var a=o[i];for(n=0,r=(u=new Array(e)).length;n<r;++n)u[n]=-1;this.boneCachedFrameIndices[a.name]=u}for(var s=0,l=this.parent.sortedSlots;s<l.length;s++){var u,c=l[s];for(n=0,r=(u=new Array(e)).length;n<r;++n)u[n]=-1;this.slotCachedFrameIndices[c.name]=u}}},e.prototype.addBoneTimeline=function(t,e){var n=t in this.boneTimelines?this.boneTimelines[t]:this.boneTimelines[t]=[];n.indexOf(e)<0&&n.push(e)},e.prototype.addSlotTimeline=function(t,e){var n=t in this.slotTimelines?this.slotTimelines[t]:this.slotTimelines[t]=[];n.indexOf(e)<0&&n.push(e)},e.prototype.addConstraintTimeline=function(t,e){var n=t in this.constraintTimelines?this.constraintTimelines[t]:this.constraintTimelines[t]=[];n.indexOf(e)<0&&n.push(e)},e.prototype.addAnimationTimeline=function(t,e){var n=t in this.animationTimelines?this.animationTimelines[t]:this.animationTimelines[t]=[];n.indexOf(e)<0&&n.push(e)},e.prototype.getBoneTimelines=function(t){return t in this.boneTimelines?this.boneTimelines[t]:null},e.prototype.getSlotTimelines=function(t){return t in this.slotTimelines?this.slotTimelines[t]:null},e.prototype.getConstraintTimelines=function(t){return t in this.constraintTimelines?this.constraintTimelines[t]:null},e.prototype.getAnimationTimelines=function(t){return t in this.animationTimelines?this.animationTimelines[t]:null},e.prototype.getBoneCachedFrameIndices=function(t){return t in this.boneCachedFrameIndices?this.boneCachedFrameIndices[t]:null},e.prototype.getSlotCachedFrameIndices=function(t){return t in this.slotCachedFrameIndices?this.slotCachedFrameIndices[t]:null},e}(o.BaseObject);e.AnimationData=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.TimelineData]"},e.prototype._onClear=function(){this.type=10,this.offset=0,this.frameIndicesOffset=-1},e}(o.BaseObject);e.TimelineData=s;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.AnimationTimelineData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.x=0,this.y=0},e}(s);e.AnimationTimelineData=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Slot=e.DisplayFrame=void 0;var o=n(76),a=n(35),s=n(2),l=n(34),u=n(52),c=n(20),h=n(36),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.deformVertices=[],e}return i(e,t),e.toString=function(){return"[class dragonBones.DisplayFrame]"},e.prototype._onClear=function(){this.rawDisplayData=null,this.displayData=null,this.textureData=null,this.display=null,this.deformVertices.length=0},e.prototype.updateDeformVertices=function(){if(null!==this.rawDisplayData&&0===this.deformVertices.length){var t;if(2===this.rawDisplayData.type)t=this.rawDisplayData.geometry;else{if(4!==this.rawDisplayData.type)return;t=this.rawDisplayData.geometry}var e=0;e=null!==t.weight?2*t.weight.count:2*t.data.intArray[t.offset+0],this.deformVertices.length=e;for(var n=0,r=this.deformVertices.length;n<r;++n)this.deformVertices[n]=0}},e.prototype.getGeometryData=function(){if(null!==this.displayData){if(2===this.displayData.type)return this.displayData.geometry;if(4===this.displayData.type)return this.displayData.geometry}if(null!==this.rawDisplayData){if(2===this.rawDisplayData.type)return this.rawDisplayData.geometry;if(4===this.rawDisplayData.type)return this.rawDisplayData.geometry}return null},e.prototype.getBoundingBox=function(){return null!==this.displayData&&3===this.displayData.type?this.displayData.boundingBox:null!==this.rawDisplayData&&3===this.rawDisplayData.type?this.rawDisplayData.boundingBox:null},e.prototype.getTextureData=function(){if(null!==this.displayData){if(0===this.displayData.type)return this.displayData.texture;if(2===this.displayData.type)return this.displayData.texture}if(null!==this.textureData)return this.textureData;if(null!==this.rawDisplayData){if(0===this.rawDisplayData.type)return this.rawDisplayData.texture;if(2===this.rawDisplayData.type)return this.rawDisplayData.texture}return null},e}(s.BaseObject);e.DisplayFrame=p;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._localMatrix=new h.Matrix,e._colorTransform=new u.ColorTransform,e._displayFrames=[],e._geometryBones=[],e._rawDisplay=null,e._meshDisplay=null,e._display=null,e}return i(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this);for(var e=[],n=0,r=this._displayFrames;n<r.length;n++){var i=r[n],o=i.display;o!==this._rawDisplay&&o!==this._meshDisplay&&e.indexOf(o)<0&&e.push(o),i.returnToPool()}for(var s=0,l=e;s<l.length;s++){var u=l[s];u instanceof a.Armature?u.dispose():this._disposeDisplay(u,!0)}null!==this._meshDisplay&&this._meshDisplay!==this._rawDisplay&&this._disposeDisplay(this._meshDisplay,!1),null!==this._rawDisplay&&this._disposeDisplay(this._rawDisplay,!1),this.displayController=null,this._displayDataDirty=!1,this._displayDirty=!1,this._geometryDirty=!1,this._textureDirty=!1,this._visibleDirty=!1,this._blendModeDirty=!1,this._zOrderDirty=!1,this._colorDirty=!1,this._verticesDirty=!1,this._transformDirty=!1,this._visible=!0,this._blendMode=0,this._displayIndex=-1,this._animationDisplayIndex=-1,this._zOrder=0,this._zIndex=0,this._cachedFrameIndex=-1,this._pivotX=0,this._pivotY=0,this._localMatrix.identity(),this._colorTransform.identity(),this._displayFrames.length=0,this._geometryBones.length=0,this._slotData=null,this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._rawDisplay=null,this._meshDisplay=null,this._display=null,this._childArmature=null,this._parent=null,this._cachedFrameIndices=null},e.prototype._hasDisplay=function(t){for(var e=0,n=this._displayFrames;e<n.length;e++){if(n[e].display===t)return!0}return!1},e.prototype._isBonesUpdate=function(){for(var t=0,e=this._geometryBones;t<e.length;t++){var n=e[t];if(null!==n&&n._childrenTransformDirty)return!0}return!1},e.prototype._updateAlpha=function(){var t=this._alpha*this._parent._globalAlpha;this._globalAlpha!==t&&(this._globalAlpha=t,this._colorDirty=!0)},e.prototype._updateDisplayData=function(){var t=this._displayFrame,n=this._geometryData,r=this._textureData,i=null,o=null;if(this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._displayIndex>=0&&this._displayIndex<this._displayFrames.length&&(this._displayFrame=this._displayFrames[this._displayIndex],i=this._displayFrame.rawDisplayData,o=this._displayFrame.displayData,this._geometryData=this._displayFrame.getGeometryData(),this._boundingBoxData=this._displayFrame.getBoundingBox(),this._textureData=this._displayFrame.getTextureData()),this._displayFrame!==t||this._geometryData!==n||this._textureData!==r){if(null===this._geometryData&&null!==this._textureData){var a=null!==o&&0===o.type?o:i,s=this._textureData.parent.scale*this._armature._armatureData.scale,u=this._textureData.frame;this._pivotX=a.pivot.x,this._pivotY=a.pivot.y;var c=null!==u?u:this._textureData.region,h=c.width,p=c.height;this._textureData.rotated&&null===u&&(h=c.height,p=c.width),this._pivotX*=h*s,this._pivotY*=p*s,null!==u&&(this._pivotX+=u.x*s,this._pivotY+=u.y*s),null!==i&&a!==i&&(i.transform.toMatrix(e._helpMatrix),e._helpMatrix.invert(),e._helpMatrix.transformPoint(0,0,e._helpPoint),this._pivotX-=e._helpPoint.x,this._pivotY-=e._helpPoint.y,a.transform.toMatrix(e._helpMatrix),e._helpMatrix.invert(),e._helpMatrix.transformPoint(0,0,e._helpPoint),this._pivotX+=e._helpPoint.x,this._pivotY+=e._helpPoint.y),l.DragonBones.yDown||(this._pivotY=(this._textureData.rotated?this._textureData.region.width:this._textureData.region.height)*s-this._pivotY)}else this._pivotX=0,this._pivotY=0;if(this.origin=null!==i?i.transform:null!==o?o.transform:null,null!==this.origin?this.global.copyFrom(this.origin).add(this.offset).toMatrix(this._localMatrix):this.global.copyFrom(this.offset).toMatrix(this._localMatrix),this._geometryData!==n)if(this._geometryDirty=!0,this._verticesDirty=!0,null!==this._geometryData){if(this._geometryBones.length=0,null!==this._geometryData.weight)for(var f=0,d=this._geometryData.weight.bones.length;f<d;++f){var _=this._armature.getBone(this._geometryData.weight.bones[f].name);this._geometryBones.push(_)}}else this._geometryBones.length=0,this._geometryData=null;this._textureDirty=this._textureData!==r,this._transformDirty=!0}},e.prototype._updateDisplay=function(){var t=null!==this._display?this._display:this._rawDisplay,e=this._childArmature;if(null!==this._displayFrame?(this._display=this._displayFrame.display,null!==this._display&&this._display instanceof a.Armature?(this._childArmature=this._display,this._display=this._childArmature.display):this._childArmature=null):(this._display=null,this._childArmature=null),(null!==this._display?this._display:this._rawDisplay)!==t&&(this._textureDirty=!0,this._visibleDirty=!0,this._blendModeDirty=!0,this._colorDirty=!0,this._transformDirty=!0,this._onUpdateDisplay(),this._replaceDisplay(t)),this._childArmature!==e&&(null!==e&&(e._parent=null,e.clock=null,e.inheritAnimation&&e.animation.reset()),null!==this._childArmature&&(this._childArmature._parent=this,this._childArmature.clock=this._armature.clock,this._childArmature.inheritAnimation))){if(0===this._childArmature.cacheFrameRate){var n=this._armature.cacheFrameRate;0!==n&&(this._childArmature.cacheFrameRate=n)}if(null!==this._displayFrame){var r=null,i=null!==this._displayFrame.displayData?this._displayFrame.displayData:this._displayFrame.rawDisplayData;if(null!==i&&1===i.type&&(r=i.actions),null!==r&&r.length>0)for(var o=0,l=r;o<l.length;o++){var u=l[o],h=s.BaseObject.borrowObject(c.EventObject);c.EventObject.actionDataToInstance(u,h,this._armature),h.slot=this,this._armature._bufferAction(h,!1)}else this._childArmature.animation.play()}}},e.prototype._updateGlobalTransformMatrix=function(t){var e=0===this._parent._boneData.type?this._parent.globalTransformMatrix:this._parent._getGlobalTransformMatrix(this.global.x,this.global.y);this.globalTransformMatrix.copyFrom(this._localMatrix),this.globalTransformMatrix.concat(e),t?this.global.fromMatrix(this.globalTransformMatrix):this._globalDirty=!0},e.prototype._setDisplayIndex=function(t,e){if(void 0===e&&(e=!1),e){if(this._animationDisplayIndex===t)return;this._animationDisplayIndex=t}this._displayIndex!==t&&(this._displayIndex=t<this._displayFrames.length?t:this._displayFrames.length-1,this._displayDataDirty=!0,this._displayDirty=this._displayIndex<0||this._display!==this._displayFrames[this._displayIndex].display)},e.prototype._setZOrder=function(t){return this._zOrder,this._zOrder=t,this._zOrderDirty=!0,this._zOrderDirty},e.prototype._setColor=function(t){return this._colorTransform.copyFrom(t),this._colorDirty=!0},e.prototype.init=function(t,e,n,r){if(null===this._slotData){this._slotData=t,this._colorDirty=!0,this._blendModeDirty=!0,this._blendMode=this._slotData.blendMode,this._zOrder=this._slotData.zOrder,this._zIndex=this._slotData.zIndex,this._alpha=this._slotData.alpha,this._colorTransform.copyFrom(this._slotData.color),this._rawDisplay=n,this._meshDisplay=r,this._armature=e;var i=this._armature.getBone(this._slotData.parent.name);null!==i&&(this._parent=i),this._armature._addSlot(this),this._initDisplay(this._rawDisplay,!1),this._rawDisplay!==this._meshDisplay&&this._initDisplay(this._meshDisplay,!1),this._onUpdateDisplay(),this._addDisplay()}},e.prototype.update=function(t){if(this._displayDataDirty&&(this._updateDisplayData(),this._displayDataDirty=!1),this._displayDirty&&(this._updateDisplay(),this._displayDirty=!1),(this._geometryDirty||this._textureDirty)&&(null!==this._display&&this._display!==this._rawDisplay&&this._display!==this._meshDisplay||this._updateFrame(),this._geometryDirty=!1,this._textureDirty=!1),null!==this._display){if(this._visibleDirty&&(this._updateVisible(),this._visibleDirty=!1),this._blendModeDirty&&(this._updateBlendMode(),this._blendModeDirty=!1),this._colorDirty&&(this._updateColor(),this._colorDirty=!1),this._zOrderDirty&&(this._updateZOrder(),this._zOrderDirty=!1),null!==this._geometryData&&this._display===this._meshDisplay){var e=null!==this._geometryData.weight,n=0!==this._parent._boneData.type;if((this._verticesDirty||e&&this._isBonesUpdate()||n&&this._parent._childrenTransformDirty)&&(this._verticesDirty=!1,this._updateMesh()),e||n)return}if(t>=0&&null!==this._cachedFrameIndices){var r=this._cachedFrameIndices[t];r>=0&&this._cachedFrameIndex===r?this._transformDirty=!1:r>=0?(this._transformDirty=!0,this._cachedFrameIndex=r):this._transformDirty||this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}else(this._transformDirty||this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1);if(this._transformDirty){if(this._cachedFrameIndex<0){var i=t>=0;this._updateGlobalTransformMatrix(i),i&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);this._updateTransform(),this._transformDirty=!1}}},e.prototype.invalidUpdate=function(){this._displayDataDirty=!0,this._displayDirty=!0,this._transformDirty=!0},e.prototype.updateTransformAndMatrix=function(){this._transformDirty&&(this._updateGlobalTransformMatrix(!1),this._transformDirty=!1)},e.prototype.replaceRawDisplayData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var n=this._displayFrames[e];if(n.rawDisplayData!==t){if(n.deformVertices.length=0,n.rawDisplayData=t,null===n.rawDisplayData){var r=this._armature._armatureData.defaultSkin;if(null!==r){var i=r.getDisplays(this._slotData.name);null!==i&&e<i.length&&(n.rawDisplayData=i[e])}}e===this._displayIndex&&(this._displayDataDirty=!0)}},e.prototype.replaceDisplayData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var n=this._displayFrames[e];n.displayData!==t&&n.rawDisplayData!==t&&(n.displayData=t,e===this._displayIndex&&(this._displayDataDirty=!0))},e.prototype.replaceTextureData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var n=this._displayFrames[e];n.textureData!==t&&(n.textureData=t,e===this._displayIndex&&(this._displayDataDirty=!0))},e.prototype.replaceDisplay=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var n=this._displayFrames[e];if(n.display!==t){var r=n.display;n.display=t,null===r||r===this._rawDisplay||r===this._meshDisplay||this._hasDisplay(r)||r instanceof a.Armature||this._disposeDisplay(r,!0),null===t||t===this._rawDisplay||t===this._meshDisplay||this._hasDisplay(r)||t instanceof a.Armature||this._initDisplay(t,!0),e===this._displayIndex&&(this._displayDirty=!0)}},e.prototype.containsPoint=function(t,n){return null!==this._boundingBoxData&&(this.updateTransformAndMatrix(),e._helpMatrix.copyFrom(this.globalTransformMatrix),e._helpMatrix.invert(),e._helpMatrix.transformPoint(t,n,e._helpPoint),this._boundingBoxData.containsPoint(e._helpPoint.x,e._helpPoint.y))},e.prototype.intersectsSegment=function(t,n,r,i,o,a,s){if(void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),null===this._boundingBoxData)return 0;this.updateTransformAndMatrix(),e._helpMatrix.copyFrom(this.globalTransformMatrix),e._helpMatrix.invert(),e._helpMatrix.transformPoint(t,n,e._helpPoint),t=e._helpPoint.x,n=e._helpPoint.y,e._helpMatrix.transformPoint(r,i,e._helpPoint),r=e._helpPoint.x,i=e._helpPoint.y;var l=this._boundingBoxData.intersectsSegment(t,n,r,i,o,a,s);return l>0&&(1===l||2===l?null!==o?(this.globalTransformMatrix.transformPoint(o.x,o.y,o),null!==a&&(a.x=o.x,a.y=o.y)):null!==a&&this.globalTransformMatrix.transformPoint(a.x,a.y,a):(null!==o&&this.globalTransformMatrix.transformPoint(o.x,o.y,o),null!==a&&this.globalTransformMatrix.transformPoint(a.x,a.y,a)),null!==s&&(this.globalTransformMatrix.transformPoint(Math.cos(s.x),Math.sin(s.x),e._helpPoint,!0),s.x=Math.atan2(e._helpPoint.y,e._helpPoint.x),this.globalTransformMatrix.transformPoint(Math.cos(s.y),Math.sin(s.y),e._helpPoint,!0),s.y=Math.atan2(e._helpPoint.y,e._helpPoint.x))),l},e.prototype.getDisplayFrameAt=function(t){return this._displayFrames[t]},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this._updateVisible())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayFrameCount",{get:function(){return this._displayFrames.length},set:function(t){var e=this._displayFrames.length;if(e<t){this._displayFrames.length=t;for(var n=e;n<t;++n)this._displayFrames[n]=s.BaseObject.borrowObject(p)}else if(e>t){for(n=e-1;n<t;--n)this.replaceDisplay(null,n),this._displayFrames[n].returnToPool();this._displayFrames.length=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayIndex",{get:function(){return this._displayIndex},set:function(t){this._setDisplayIndex(t),this.update(-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._slotData.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayList",{get:function(){for(var t=new Array,e=0,n=this._displayFrames;e<n.length;e++){var r=n[e];t.push(r.display)}return t},set:function(t){this.displayFrameCount=t.length;for(var e=0,n=0,r=t;n<r.length;n++){var i=r[n];this.replaceDisplay(i,e++)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"slotData",{get:function(){return this._slotData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundingBoxData",{get:function(){return this._boundingBoxData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawDisplay",{get:function(){return this._rawDisplay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"meshDisplay",{get:function(){return this._meshDisplay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this._display},set:function(t){this._display!==t&&(0===this._displayFrames.length&&(this.displayFrameCount=1,this._displayIndex=0),this.replaceDisplay(t,this._displayIndex))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childArmature",{get:function(){return this._childArmature},set:function(t){this._childArmature!==t&&(this.display=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),e.prototype.getDisplay=function(){return this._display},e.prototype.setDisplay=function(t){this.display=t},e}(o.TransformObject);e.Slot=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var r=n(15),i=function(){function t(t){this.x=this.round(t.tx),this.y=this.round(t.ty),this.scaleX=this.round(Math.sqrt(t.a*t.a+t.b*t.b)),this.scaleY=this.round(Math.sqrt(t.c*t.c+t.d*t.d)),this.skewX=-1*this.round(Math.atan2(t.d,t.c)-Math.PI/2),this.skewY=this.round(Math.atan2(t.b,t.a)),this.rotation=0,this.skewX+this.skewY===0&&(this.rotation=this.skewY,this.skewX=0,this.skewY=0)}return t.prototype.round=function(t){return r.DataUtils.toPrecision(t,3)},t.prototype.toTween=function(){return{x:this.x,y:this.y,sx:this.scaleX,sy:this.scaleY,kx:this.skewX,ky:this.skewY,r:this.rotation}},t}();e.Matrix=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeInstance=e.ShapeContainer=void 0;var s=n(11),l=n(168),u=n(0),c=n(170),h=n(171),p=n(39),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.assetId=0,e}return i(e,t),e}(PIXI.Container);e.ShapeContainer=f;var d=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.child=[],r}return i(e,t),e.prototype.isIE=function(){if(e._isIe||e._isNotIe)return e._isIe;var t=window.navigator.userAgent,n=t.indexOf("MSIE "),r=t.indexOf("Trident/");return e._isIe=n>0||r>0||navigator.userAgent.toLowerCase().indexOf("firefox")>-1,e._isNotIe=!e._isIe,e._isIe},e.prototype.buildContent=function(t,e,n,r){void 0===e&&(e=!1),void 0===r&&(r=1);var i=new f;if(i.x=0,i.y=0,i.assetId=this.libraryItem.assetId,i.paths=this._getPointPaths(),i.libraryItem=this.libraryItem,null!==this.libraryItem.spritesheetId&&void 0!==this.libraryItem.spritesheetId&&t.animation.__shapesheets[this.libraryItem.spritesheetId]){var o=0,a=this.libraryItem.assetId+"_"+o,s=t.animation.__shapesheets[this.libraryItem.spritesheetId].spritesheet.textures[a],l=t.animation.__shapesheets[this.libraryItem.spritesheetId].data.frames[a];if(s&&l){for(;s;){(T=new PIXI.Sprite(s)).x=l.offset.x,T.y=l.offset.y,i.addChild(T),o++,a=this.libraryItem.assetId+"_"+o,s=t.animation.__shapesheets[this.libraryItem.spritesheetId].spritesheet.textures[a],l=t.animation.__shapesheets[this.libraryItem.spritesheetId].data.frames[a]}return i.name=this.libraryItem.assetId+"",i}}if(e||this.isIE()){var u=this.buildDrawCommands(this.libraryItem.paths,e),c=(new PIXI.Graphics).drawCommands(u);return c.name=this.libraryItem.name,c}var h="shape_instance_"+t.animation.__name+this.libraryItem.assetId,p=this._memoryCache.get(h);if(p){for(var d=0,_=p;d<_.length;d++){var y=_[d];(T=new PIXI.Sprite(y.texture)).x=y.offsetX,T.y=y.offsetY,i.addChild(T)}return i}for(var m=[],g=0,v=this.libraryItem.paths;g<v.length;g++){var A=v[g],b=this.buildTextureSource(A,r);if(b){var T;s=PIXI.Texture.fromImage(b.svgBase64,!1,PIXI.SCALE_MODES.LINEAR,1/r);(T=new PIXI.Sprite(s)).x=b.offsetX,T.y=b.offsetY,m.push({texture:s,offsetX:b.offsetX,offsetY:b.offsetY}),i.addChild(T)}}return this._memoryCache.add(h,m),i},e.prototype.buildTextureSource=function(t,e){var n=t.d.join(" ").toUpperCase(),r=c.SVGPath.parse(n);t.thickness&&(r.bounds.xMin-=t.thickness/2,r.bounds.yMin-=t.thickness/2,r.bounds.xMax+=t.thickness/2,r.bounds.yMax+=t.thickness/2);var i=-r.bounds.xMin,o=-r.bounds.yMin,a=new c.SVGParser(new c.Outline);a.parse(""+n,i,o);var s=a.receiver.toSVG(),l=Math.abs(r.bounds.xMin-r.bounds.xMax),u=Math.abs(r.bounds.yMin-r.bounds.yMax);if(!(l<1||u<1))return{svgBase64:this.buildSvgBase64(t,s,l,u,i,o,e),offsetX:-i,offsetY:-o}},e.prototype.buildSvgBase64=function(t,e,n,r,i,o,a){var s,l='<svg height="'+(r*=a)+'" width="'+(n*=a)+'" xmlns="http://www.w3.org/2000/svg"><g transform="scale('+a+')">',u="";if(t.linearGradient||t.radialGradient){var c=void 0;if(t.linearGradient)l+='<linearGradient id="gradient" gradientUnits="userSpaceOnUse" spreadMethod="'+(c=t.linearGradient).spreadMethod+'" x1="'+(c.x1+i)+'" \n                            y1="'+(c.y1+o)+'" x2="'+(c.x2+i)+'" y2="'+(c.y2+o)+'">';else{var h=(c=t.radialGradient).gradientTransform;l+='<radialGradient id="gradient" gradientUnits="userSpaceOnUse" spreadMethod="'+c.spreadMethod+'" cx="'+c.cx+'" \n                            cy="'+c.cy+'" r="'+c.r+'" fx="'+c.fx+'" fy="'+c.fy+'" \n                            gradientTransform="matrix('+h.a+", "+h.b+", "+h.c+", "+h.d+", "+(h.tx+i)+", "+(h.ty+o)+')">'}for(var p=0,f=c.stop;p<f.length;p++){var d=f[p];l+='<stop offset="'+d.offset+'%" stop-color="'+d.stopColor+'" stop-opacity="'+d.stopOpacity+'"></stop>'}t.linearGradient?l+="</linearGradient>":l+="</radialGradient>",s="url(#gradient)"}return t.stroke?(s||(s=t.color),u+=' stroke="'+s+'"',u+=' fill="none"',t.alpha&&(u+=' stroke-opacity="'+t.alpha+'"'),t.thickness&&(u+=' stroke-width="'+t.thickness+'"'),t.linejoin&&(u+=' stroke-linejoin="'+t.linejoin+'"'),t.linecap&&(u+=' stroke-linecap="'+t.linecap+'"'),t.miterLimit&&(u+=' stroke-miterlimit="'+t.miterLimit+'"')):(s||(s=t.color),u+=' fill="'+s+'"',t.alpha&&(u+=' fill-opacity="'+t.alpha+'"')),l+="<path "+u+' d="'+e+'" />',l+="</g></svg>","data:image/svg+xml;base64,"+btoa(l)},e.prototype.buildDrawCommands=function(t,e){if(e){for(var n=[],r=0,i=t.length;r<i;r++){if((l=t[r]).stroke){n.push("f",0,0);var o=void 0,a=void 0;o=p.default.hexToUint(l.color),a=l.alpha,n.push("s",l.thickness,o,a)}else l.image?n.push("f",0,1):n.push("f",p.default.hexToUint(l.color),l.alpha);l.d.forEach((function(t,e,n){"number"==typeof t&&(n[e]=Math.round(100*t)/100)})),n.push.apply(n,l.d)}return n}var s=[];if(this.isIE())for(r=0,i=t.length;r<i;r++){var l,u=(l=t[r]).radialGradient||l.linearGradient;if(l.stroke){s.push("f",0,0);o=0,a=0;u?(o=p.default.hexToUint(u.stop[0].stopColor),a=u.stop[0].stopOpacity):(o=p.default.hexToUint(l.color),a=l.alpha),s.push("s",l.thickness,o,a)}else u?s.push("f",p.default.hexToUint(u.stop[0].stopColor),u.stop[0].stopOpacity):l.image?s.push("f",0,1):s.push("f",p.default.hexToUint(l.color),l.alpha);l.d.forEach((function(t,e,n){"number"==typeof t&&(n[e]=Math.round(100*t)/100)})),s.push.apply(s,l.d)}return s},e.prototype._getPointPaths=function(){for(var t=[],e=function(e,r){var i=n.libraryItem.paths[e],o=[],a=0,s=0,l=[],u=null;i.d.forEach((function(t,e,n){"number"==typeof t?u.values.push(Math.round(100*t)/100):(u&&l.push(u),u={code:t,values:[]})})),u&&l.push(u);for(var c=0;c<l.length;c++){var h=l[c];switch(h.code){case"m":case"M":a=h.values[0],s=h.values[1],o.push([a,s]);break;case"H":case"h":h.values.length&&(a=h.values[0],o.push([a,s]));break;case"V":case"v":s=h.values[0],o.push([a,s]);break;case"Z":break;case"L":case"l":a=h.values[0],s=h.values[1],o.push([a,s]);break;case"C":h.values.length&&(a=h.values[0],s=h.values[1],o.push([a,s]));break;case"c":if(h.values.length){a=h.values[0],s=h.values[1],o.push([a,s])}break;case"s":case"q":a=h.values[0],s=h.values[1],o.push([a,s]);break;case"S":case"Q":a=h.values[0],s=h.values[1],o.push([a,s]);break;default:console.info("not supported:",h.code,h)}}t.push(o)},n=this,r=0,i=this.libraryItem.paths.length;r<i;r++)e(r);return t},e._isIe=!1,e._isNotIe=!1,o([u.Inject,a("design:type",l.MemoryAtlas)],e.prototype,"_memoryAtlas",void 0),o([u.Inject,a("design:type",h.MemoryCache)],e.prototype,"_memoryCache",void 0),e}(s.Instance);e.ShapeInstance=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SoundInstance=void 0;var o=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e}(n(11).Instance);e.SoundInstance=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Timeline=void 0;var o=n(176),a=n(38),s=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._isTimeline=!0,r}return i(e,t),e.prototype.render=function(t){var e={duration:this.totalFrames,labels:{}},n=this.getLabels();!!Object.keys(n).length&&(e.labels=n);var r=new a.AnimationClipFactory(e,t,this.name);t[this.name]=r,this.getContents(r)},e.prototype.getContents=function(e){t.prototype.getContents.call(this,e),this.getFrameScripts(e)},e.prototype.renderInstance=function(t,e){var n=this.totalFrames,r=t.getDuration(n),i=t.getFrames(),o="addTimedChild";return i||0!==t.startFrame||r!=n?e._frames.push({func:o,instance:t.localName,instanceId:t.id,startFrame:t.startFrame,duration:r,frames:i}):n>1&&e._frames.push({func:o,instance:t.localName,instanceId:t.id}),t.render(e)},e.prototype.getFrameScripts=function(t){var e=this.library,n=[];if(this.frames.forEach((function(t){t.scripts&&n.push(t),t.commands&&t.commands.length&&t.commands.filter((function(t){return"SoundPlace"===t.type})).forEach((function(r){e.createInstance(r.assetId,r.instanceId);n.push({frame:t.frame,scripts:[]})}))})),n.length)for(var r=0;r<n.length;r++)for(var i=n[r],o=i.scripts,a=0;a<o.length;a++){var s=o[a].replace(/\\n/g,"\n");t._scripts.push({script:s,frame:i.frame})}},e.prototype.getLabels=function(){var t={};return this.frames.forEach((function(e){e.labels&&e.labels.forEach((function(n){t[n]=e.frame}))})),t},e.prototype.getSounds=function(){var t=this.library,e={};return this.frames.forEach((function(n){n.commands&&n.commands.filter((function(t){return"SoundPlace"===t.type})).forEach((function(n){var r=t.createInstance(n.assetId,n.instanceId).libraryItem,i=r.name,o=r.src;e[i]=o}))})),e},e.prototype.create=function(t){return new o.TimelineInstance(this,t)},e.STAGE="stage",e.GRAPHIC="graphic",e.MOVIE_CLIP="movieclip",e}(n(85).Container);e.Timeline=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var o=n(14),a=n(83),s=n(177),l=n(38),u=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.instancesMap={},r.children=[],r.getChildren(),r}return i(e,t),e.prototype.render=function(t){var e=new l.AnimationClipContainerFactory({},t,this.name);t[this.name]=e,this.getContents(e)},e.prototype.getChildren=function(){var t=this.library,e=this.instancesMap,n=this.children;this.frames.forEach((function(r){r.commands&&r.commands.forEach((function(i){var o=e[i.instanceId];o||(o=t.createInstance(i.assetId,i.instanceId),e[i.instanceId]=o),o.addToFrame(r.frame,i),o instanceof a.SoundInstance||-1!=n.indexOf(o)||n.push(o)}))}))},e.prototype.getContents=function(t){this.renderChildren(t)},e.prototype.flattenDepthItems=function(t){var e=[];t.sort((function(t,e){return e.startFrame-t.startFrame}));for(var n=0;n<t.length;n++){var r=t[n];if(e.push(r.instance),r.children.length){var i=this.flattenDepthItems(r.children);e.push.apply(e,i)}}return e},e.prototype.renderChildren=function(t){var e=this.children.length,n="";if(e){for(var r=[],i=this.children.slice(0),o={},a=0;a<e;a++){if(!(c=this.children[a]).placeAfter){i.splice(i.indexOf(c),1);var s={instance:c.id,startFrame:c.startFrame,placeAfter:0,children:[]};o[c.id]=s,r.push(s)}}for(;i.length;)for(a=0;a<i.length;a++){var l=o[(c=i[a]).placeAfter];if(l){i.splice(a,1);s={instance:c.id,startFrame:c.startFrame,placeAfter:c.placeAfter,children:[]};l.children.push(s),l.children.sort(this.sortByStartFrame),o[c.id]=s;break}}var u=this.flattenDepthItems(r);u.reverse();for(a=0;a<u.length;a++){var c;(c=this.instancesMap[u[a]]).renderable&&(n+=this.renderInstance(c,t))}}return n},e.prototype.renderInstance=function(t,e){t.render(e)},e.prototype.create=function(t){return new s.ContainerInstance(this,t)},e}(o.LibraryItem);e.Container=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MultiStyleText=void 0;var o=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.textHeight=r,i.textWidth=0,i._vAlign="top",i.textHeight=r,i.styles=n,i.updateStyles(),i}return i(e,t),Object.defineProperty(e.prototype,"vAlign",{set:function(t){this._vAlign=t,this.dirty=!0},enumerable:!1,configurable:!0}),e.prototype.updateStyles=function(){var t=this,e=function(e){var r=n.textStyles[e];r.imgSrc&&!r.imageLoaded&&(r.image=new Image,r.image.onload=function(){t.dirty=!0,r.imageLoaded=!0,r.width=r.width||r.image.width,r.height=r.height||r.image.height,t.updateText()},r.image.src=r.imgSrc,r.imageLoaded=!1,r.width=r.width||0,r.height=r.height||0)},n=this;for(var r in this.textStyles)e(r)},Object.defineProperty(e.prototype,"styles",{set:function(t){for(var n in this.textStyles={},this.textStyles.default=this.assign({},e.DEFAULT_TAG_STYLE),t)"default"===n?this.assign(this.textStyles.default,t[n]):this.textStyles[n]=this.assign({},t[n]);this._style=new PIXI.TextStyle(this.textStyles.default),this.updateStyles(),this.dirty=!0},enumerable:!1,configurable:!0}),e.prototype.setTagStyle=function(t,e){t in this.textStyles?this.assign(this.textStyles[t],e):this.textStyles[t]=this.assign({},e),this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},e.prototype.deleteTagStyle=function(t){"default"===t?this.textStyles.default=this.assign({},e.DEFAULT_TAG_STYLE):delete this.textStyles[t],this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},e.prototype._getTextDataPerLine=function(t){for(var e=[],n=Object.keys(this.textStyles).join("|"),r=new RegExp("</?("+n+")>","g"),i=[this.assign({},this.textStyles.default)],o=["default"],a=0;a<t.length;a++){for(var s=[],l=[],u=void 0;u=r.exec(t[a]);)l.push(u);if(0===l.length)s.push(this.createTextData(t[a],i[i.length-1],o[o.length-1]));else{for(var c=0,h=0;h<l.length;h++)l[h].index>=c&&s.push(this.createTextData(t[a].substring(c,l[h].index),i[i.length-1],o[o.length-1])),"/"===l[h][0][1]?i.length>1&&(i.pop(),o.pop()):(i.push(this.assign({},i[i.length-1],this.textStyles[l[h][1]])),o.push(l[h][1])),c=l[h].index+l[h][0].length;c<t[a].length&&s.push(this.createTextData(t[a].substring(c),i[i.length-1],o[o.length-1]))}e.push(s)}return e},e.prototype.getFontString=function(t){return new PIXI.TextStyle(t).toFontString()},e.prototype.createTextData=function(t,e,n){return{text:t,style:e,width:0,height:0,fontProperties:void 0,tagName:n}},e.prototype.getDropShadowPadding=function(){var t=this,e=0,n=0;return Object.keys(this.textStyles).forEach((function(r){var i=t.textStyles[r],o=i.dropShadowDistance,a=i.dropShadowBlur;e=Math.max(e,o||0),n=Math.max(n,a||0)})),e+n},e.prototype.updateText=function(){var t=this;if(this.dirty){this.texture.baseTexture.resolution=this.resolution;var n=this.textStyles,r=this.text;this._style.wordWrap&&(r=this.wordWrap(this.text));for(var i=r.split(/(?:\r\n|\r|\n)/),o=this._getTextDataPerLine(i),a=[],s=[],l=[],u=0,c=0,h=0;h<i.length;h++){for(var p=0,f=0,d=0,_=0,y=0;y<o[h].length;y++){var m=o[h][y].style;this.context.font=this.getFontString(m),o[h][y].width=o[h][y].style.imgSrc?o[h][y].style.width:this.context.measureText(o[h][y].text).width,o[h][y].style.imgSrc||0===o[h][y].text.length&&(o[h][y].width+=(o[h][y].text.length-1)*m.letterSpacing,y>0&&(p+=m.letterSpacing/2),y<o[h].length-1&&(p+=m.letterSpacing/2)),p+=o[h][y].width,_=Math.max(_,o[h][y].style.width),o[h][y].fontProperties=PIXI.TextMetrics.measureFont(this.context.font),o[h][y].height=o[h][y].fontProperties.fontSize+o[h][y].style.strokeThickness+o[h][y].style.marginTop,c+=o[h][y].style.marginTop,"number"==typeof m.valign?(f=Math.min(f,m.valign-o[h][y].fontProperties.descent),d=Math.max(d,m.valign+o[h][y].fontProperties.ascent)):(f=Math.min(f,-o[h][y].fontProperties.descent),d=Math.max(d,o[h][y].fontProperties.ascent))}a[h]=p,s[h]=f,l[h]=d,u=Math.max(u,p,_)}var g=Object.keys(n).map((function(t){return n[t]})).reduce((function(t,e){return Math.max(t,e.strokeThickness||0)}),0),v=l.reduce((function(t,e){return t+e}),0)-s.reduce((function(t,e){return t+e}),0),A=u+g+0,b=Math.max(v,this.textHeight)+0,T=0;switch(this._vAlign){case"top":break;case"middle":T=Math.floor((this.textHeight-v)/2);break;case"bottom":T=Math.round(this.textHeight-v)}this.canvas.width=(A+this.context.lineWidth)*this.resolution,this.canvas.height=(b+c)*this.resolution,this.context.scale(this.resolution,this.resolution),this.context.textBaseline="alphabetic",this.context.lineJoin="round";var S=0,P=[];for(h=0;h<o.length;h++){var w=o[h],E=void 0;switch(this._style.align){case"left":E=0;break;case"center":E=0+(u-a[h])/2;break;case"right":E=0+u-a[h]}for(y=0;y<w.length;y++){var O=w[y],C=O.style,x=O.text,M=O.fontProperties,D=O.width,I=(O.height,O.tagName);E+=g/2;var R=g/2+S+M.ascent+T;switch(C.valign){case"top":break;case"baseline":R+=l[h]-M.ascent;break;case"middle":R+=(l[h]-s[h]-M.ascent-M.descent)/2;break;case"bottom":R+=l[h]-s[h]-M.ascent-M.descent;break;default:R+=l[h]-M.ascent-C.valign}if(R+=C.marginTop,0===C.letterSpacing)P.push({text:x,style:C,x:E,y:R,width:D,ascent:M.ascent,descent:M.descent,tagName:I}),E+=w[y].width;else{this.context.font=this.getFontString(w[y].style);for(var B=0;B<x.length;B++)(B>0||y>0)&&(E+=C.letterSpacing/2),P.push({text:x.charAt(B),style:C,x:E,y:R,width:D,ascent:M.ascent,descent:M.descent,tagName:I}),E+=this.context.measureText(x.charAt(B)).width,(B<x.length-1||y<w.length-1)&&(E+=C.letterSpacing/2)}E-=g/2}S+=l[h]-s[h]}this.context.save(),P.forEach((function(e){var n=e.style,r=e.text,i=e.x,o=e.y;if(n.dropShadow){t.context.font=t.getFontString(n);var a=n.dropShadowColor;"number"==typeof a&&(a=PIXI.utils.hex2string(a)),t.context.shadowColor=a,t.context.shadowBlur=n.dropShadowBlur,t.context.shadowOffsetX=Math.cos(n.dropShadowAngle)*n.dropShadowDistance*t.resolution,t.context.shadowOffsetY=Math.sin(n.dropShadowAngle)*n.dropShadowDistance*t.resolution,t.context.fillText(r,i,o)}})),this.context.restore(),P.forEach((function(n){var r=n.style,i=n.text,o=n.x,a=n.y,s=n.width,l=n.ascent,u=n.descent,c=n.tagName;t.context.font=t.getFontString(r);var h=r.stroke;"number"==typeof h&&(h=PIXI.utils.hex2string(h)),t.context.strokeStyle=h,t.context.lineWidth=r.strokeThickness;var p=r.fill;if("number"==typeof p)p=PIXI.utils.hex2string(p);else if(Array.isArray(p))for(var f=0;f<p.length;f++){var d=p[f];"number"==typeof d&&(p[f]=PIXI.utils.hex2string(d))}t.context.fillStyle=t._generateFillStyle(new PIXI.TextStyle(r),[i]),r.stroke&&r.strokeThickness&&t.context.strokeText(i,o,a),r.fill&&t.context.fillText(i,o,a),r.imgSrc&&r.imageLoaded&&t.context.drawImage(r.image,o,a-r.height),(void 0===r.debug?e.debugOptions.spans.enabled:r.debug)&&(t.context.lineWidth=1,e.debugOptions.spans.bounding&&(t.context.fillStyle=e.debugOptions.spans.bounding,t.context.strokeStyle=e.debugOptions.spans.bounding,t.context.beginPath(),t.context.rect(o,a-l,s,l+u),t.context.fill(),t.context.stroke(),t.context.stroke()),e.debugOptions.spans.baseline&&(t.context.strokeStyle=e.debugOptions.spans.baseline,t.context.beginPath(),t.context.moveTo(o,a),t.context.lineTo(o+s,a),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.top&&(t.context.strokeStyle=e.debugOptions.spans.top,t.context.beginPath(),t.context.moveTo(o,a-l),t.context.lineTo(o+s,a-l),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.bottom&&(t.context.strokeStyle=e.debugOptions.spans.bottom,t.context.beginPath(),t.context.moveTo(o,a+u),t.context.lineTo(o+s,a+u),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.text&&(t.context.fillStyle="#ffffff",t.context.strokeStyle="#000000",t.context.lineWidth=2,t.context.font="8px monospace",t.context.strokeText(c,o,a-l+8),t.context.fillText(c,o,a-l+8),t.context.strokeText(s.toFixed(2)+"x"+(l+u).toFixed(2),o,a-l+16),t.context.fillText(s.toFixed(2)+"x"+(l+u).toFixed(2),o,a-l+16))),t.textWidth=o+s})),e.debugOptions.objects.enabled&&(e.debugOptions.objects.bounding&&(this.context.fillStyle=e.debugOptions.objects.bounding,this.context.beginPath(),this.context.rect(0,0,A,b),this.context.fill()),e.debugOptions.objects.text&&(this.context.fillStyle="#ffffff",this.context.strokeStyle="#000000",this.context.lineWidth=2,this.context.font="8px monospace",this.context.strokeText(A.toFixed(2)+"x"+b.toFixed(2),0,8,A),this.context.fillText(A.toFixed(2)+"x"+b.toFixed(2),0,8,A))),this.updateTexture()}},e.prototype.wordWrap=function(t){var e="",n=Object.keys(this.textStyles).join("|"),r=new RegExp("(</?("+n+")>)","g"),i=t.split("\n"),o=this._style.wordWrapWidth,a=[this.assign({},this.textStyles.default)];this.context.font=this.getFontString(this.textStyles.default);for(var s=0;s<i.length;s++){for(var l=o,u=i[s].split(" "),c=0;c<u.length;c++)for(var h=u[c].split(r),p=0;p<h.length;p++)if(r.test(h[p]))e+=h[p],"/"===h[p][1]?(p++,a.pop()):(p++,a.push(this.assign({},a[a.length-1],this.textStyles[h[p]]))),this.context.font=this.getFontString(a[a.length-1]);else{var f=this.context.measureText(h[p]).width;if(this._style.breakWords&&f>l){var d=h[p].split("");c>0&&0===p&&(e+=" ",l-=this.context.measureText(" ").width);for(var _=0;_<d.length;_++){var y=this.context.measureText(d[_]).width;y>l?(e+="\n"+d[_],l=o-y):(c>0&&0===p&&0===_&&(e+=" "),e+=d[_],l-=y)}}else if(this._style.breakWords)e+=h[p],l-=f;else{var m=f+(0===p?this.context.measureText(" ").width:0);0===c||m>l?(c>0&&(e+="\n"),e+=h[p],l=o-f):(l-=m,0===p&&(e+=" "),e+=h[p])}}s<i.length-1&&(e+="\n")}return e},e.prototype.updateTexture=function(){var t=this._texture,e=this.getDropShadowPadding();t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.realWidth=this.canvas.width,t.baseTexture.realHeight=this.canvas.height,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.trim.width=t.frame.width=this.canvas.width/this.resolution,t.trim.height=t.frame.height=this.canvas.height/this.resolution,t.trim.x=-this._style.padding-e,t.trim.y=-this._style.padding-e,t.orig.width=t.frame.width-2*(this._style.padding+e),t.orig.height=t.frame.height-2*(this._style.padding+e),this._onTextureUpdate(),t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},e.prototype.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var a in o)t[a]=o[a]}return t},e.DEFAULT_TAG_STYLE={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",valign:"baseline",wordWrap:!1,wordWrapWidth:100,imgSrc:null,width:0,height:0,imageLoaded:!1,image:null,marginTop:0},e.debugOptions={spans:{enabled:!1,baseline:"#44BB44",top:"#BB4444",bottom:"#4444BB",bounding:"rgba(255, 255, 255, 0.1)",text:!0},objects:{enabled:!1,bounding:"rgba(255, 255, 255, 0.05)",text:!0}},e}(PIXI.Text);e.MultiStyleText=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HotKey=e.Key=void 0,e.Key={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,PAUSE:19,CTRL:17,ALT:18,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CMD:91,CMD_RIGHT:93,NUM_0:96,NUM_1:97,NUM_2:98,NUM_3:99,NUM_4:100,NUM_5:101,NUM_6:102,NUM_7:103,NUM_8:104,NUM_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222};var r=function(){function t(t,e){this.key=t,this.manager=e,this.isPressed=!1,this.isDown=!1,this.isReleased=!1,this.crtl=!1,this.shift=!1,this.alt=!1}return t.prototype.update=function(){this.isDown=this.manager.isDown(this.key),this.isPressed=this.manager.isPressed(this.key),this.isReleased=this.manager.isReleased(this.key),this.crtl=this.manager.isDown(e.Key.CTRL),this.shift=this.manager.isDown(e.Key.SHIFT),this.alt=this.manager.isDown(e.Key.ALT)},t.prototype.remove=function(){this.manager.removeHotKey(this.key)},t}();e.HotKey=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GAMEPAD_MESSAGES=void 0,e.GAMEPAD_MESSAGES={ON:"Gamepad detected.",OFF:"Gamepad disconnected.",INVALID_PROPERTY:"Invalid property.",INVALID_VALUE_NUMBER:"Invalid value. It must be a number between 0.00 and 1.00.",INVALID_BUTTON:"Button does not exist.",UNKNOWN_EVENT:"Unknown event name.",NO_SUPPORT:"Your web browser does not support the Gamepad API."}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.FullScreenManager=void 0;var s=n(0),l=function(){function t(){}return t.prototype.init=function(t,e){this._screenFull=t,this._viewport=e},Object.defineProperty(t.prototype,"isFullScreen",{get:function(){return this._screenFull.isFullscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._screenFull.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._screenFull.isEnabled},enumerable:!1,configurable:!0}),t.prototype.requestDocument=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this._screenFull.request()]}))}))},t.prototype.requestGame=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this._screenFull.request(this._viewport)]}))}))},t.prototype.exit=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this._screenFull.exit()]}))}))},t.prototype.toggleDocument=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this._screenFull.toggle()]}))}))},t.prototype.toggleGame=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this._screenFull.toggle(this._viewport)]}))}))},t.prototype.onChange=function(t){return this._screenFull.onchange(t)},t.prototype.onError=function(t){return this._screenFull.onerror(t)},t=r([s.Singleton,i("design:paramtypes",[])],t)}();e.FullScreenManager=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tween=void 0;var r=n(59),i=n(91),o=function(){function t(t){for(var e in this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=r.Easing.Linear.None,this._interpolationFunction=i.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._object=t,t)this._valuesStart[e]=parseFloat(t[e],10)}return t.getAll=function(){return this._tweens},t.removeAll=function(){this._tweens=[]},t.add=function(t){this._tweens.push(t)},t.remove=function(t){var e=this._tweens.indexOf(t);-1!==e&&this._tweens.splice(e,1)},t.update=function(t){if(0===this._tweens.length)return!1;var e=0;for(t=void 0!==t?t:window.performance.now();e<this._tweens.length;)this._tweens[e].update(t)?e++:this._tweens.splice(e,1);return!0},t.prototype.to=function(t,e){return void 0!==e&&(this._duration=e),this._valuesEnd=t,this},t.prototype.start=function(e){for(var n in t.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?e:window.performance.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[n]instanceof Array){if(0===this._valuesEnd[n].length)continue;this._valuesEnd[n]=[this._object[n]].concat(this._valuesEnd[n])}this._valuesStart[n]=this._object[n],this._valuesStart[n]instanceof Array==!1&&(this._valuesStart[n]*=1),this._valuesStartRepeat[n]=this._valuesStart[n]||0}return this},t.prototype.stop=function(){return this._isPlaying?(t.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback.call(this._object),this.stopChainedTweens(),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._repeat=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){return this._chainedTweens=arguments,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t){var e;if(t<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object),this._onStartCallbackFired=!0);var n=(t-this._startTime)/this._duration;n=n>1?1:n;var r=this._easingFunction(n);for(e in this._valuesEnd){var i=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,r):("string"==typeof o&&(o=i+parseFloat(o,10)),"number"==typeof o&&(this._object[e]=i+(o-i)*r))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,r),1==n){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e],10)),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(t);return!1}return!0},t._tweens=[],t}();e.Tween=o},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.Interpolation=void 0,e.Interpolation={Linear:function(t,n){var r=t.length-1,i=r*n,o=Math.floor(i),a=e.Interpolation.Utils.Linear;return n<0?a(t[0],t[1],i):n>1?a(t[r],t[r-1],r-i):a(t[o],t[o+1>r?r:o+1],i-o)},Bezier:function(t,n){var r,i=0,o=t.length-1,a=Math.pow,s=e.Interpolation.Utils.Bernstein;for(r=0;r<=o;r++)i+=a(1-n,o-r)*a(n,r)*t[r]*s(o,r);return i},CatmullRom:function(t,n){var r=t.length-1,i=r*n,o=Math.floor(i),a=e.Interpolation.Utils.CatmullRom;return t[0]===t[r]?(n<0&&(o=Math.floor(i=r*(1+n))),a(t[(o-1+r)%r],t[o],t[(o+1)%r],t[(o+2)%r],i-o)):n<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):n>1?t[r]-(a(t[r],t[r],t[r-1],t[r-1],i-r)-t[r]):a(t[o?o-1:0],t[o],t[r<o+1?r:o+1],t[r<o+2?r:o+2],i-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,n){var r=e.Interpolation.Utils.Factorial;return r(t)/r(n)/r(t-n)},Factorial:(r=[1],function(t){var e,n=1;if(r[t])return r[t];for(e=t;e>1;e--)n*=e;return r[t]=n}),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),a=.5*(r-e),s=i*i;return(2*e-2*n+o+a)*(i*s)+(-3*e+3*n-2*o-a)*s+o*i+e}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChildControllers=e.ChildItem=void 0;var r=n(1),i=function(t){this.controller=t};e.ChildItem=i;var o=function(){function t(){this.items=new r.List}return t.prototype.get=function(t){if(!this[t])return null;var e=this[t].controller;return e.disposed?null:e},t}();e.ChildControllers=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueueList=e.QueueItem=void 0;var r=n(1),i=n(32),o=n(3),a=function(){function t(t,e,n){this._name=t,this.condition=e,this.action=n,this.queue={action:this.action,condition:this.condition}}return t.prototype.addToQueue=function(e,n){void 0===e&&(e=0),t.queue[e]||(t.queue[e]=new i.Queue),t.queue[e].push(this.queue,n)},t.prototype.removeFromQueue=function(){for(var e in t.queue){var n=t.queue[e];n.remove(this.queue),delete n.items[this._name]}},t.queueCount=10,t.queue={},t}();e.QueueItem=a;var s=function(){function t(){this.items=new r.List}return t.prototype.get=function(t){if(!this[t])for(var e in a.queue){var n=a.queue[e];if(n.items[t])return n.items[t]}return this[t]},t.prototype.initialize=function(t,e){var n=this;o._u.each(t,(function(t,e){var r=new a(e,t.condition,t.action);for(var i in n.items.add(r),a.queue){a.queue[i].items[i]=r}n[e]=r}),this)},t.prototype.reset=function(){this.items.forEach((function(t){t.removeFromQueue()}))},t.prototype.dispose=function(){this.items.forEach((function(t){t.removeFromQueue()}))},t}();e.QueueList=s},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.WatchObject=void 0;var o=n(0),a=function(){function t(){this.methodNames=[]}var e;return e=t,t.prototype.watch=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[1];e.isFunction(r)?this.watchAll.apply(this,t):this.watchOne.apply(this,t)},t.prototype.unwatch=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[1];e.isFunction(r)||void 0===r?this.unwatchAll.apply(this,t):e.isArray(r)?e.unwatchMany.apply(this,t):e.unwatchOne.apply(this,t)},t.isArray=function(t){return"[object Array]"==={}.toString.call(t)},t.isObject=function(t){return"[object Object]"==={}.toString.call(t)},t.isFunction=function(t){return"[object Function]"==={}.toString.call(t)},t.defineProp=function(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!1,value:n})},t.prototype.defineGetAndSet=function(t,e,n,r){Object.defineProperty(t,e,{get:n,set:function(t){r.call(this,t)},enumerable:!0,configurable:!0})},t.callWatchers=function(t,e,n,r,i){var o,a=t.__watchers__[e];(o=t.__watchers__.__watchall__)&&(a=a?a.concat(o):o);for(var s=a?a.length:0,l=0;l<s;l++)a[l].call(t,n,r,e,i)},t.prototype.defineArrayMethodWatcher=function(t,n,r,i){e.defineProp(t,r,(function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a,s,l=0;if("splice"===r){var u=e[0],c=u+e[1];a=t.slice(u,c),s=[];for(var h=2;h<e.length;h++)s[h-2]=e[h];l=u}else s="push"===r||"unshift"===r?e.length>0?e:void 0:e.length>0?e[0]:void 0;var p=n.apply(t,e);return"pop"===r?(a=p,l=t.length):"push"===r?l=t.length-1:"shift"===r?a=p:"unshift"!==r&&void 0===s&&(s=p),i.call(t,l,r,s,a),p}))},t.prototype.watchFunctions=function(t,n){if(e.isFunction(n)&&t&&!(t instanceof String)&&e.isArray(t))for(var r=this.methodNames.length;r>0;r--){var i=this.methodNames[r-1];this.defineArrayMethodWatcher(t,t[i],i,n)}},t.prototype.defineWatcher=function(t,n,r,i){var o=!1,a=e.isArray(t);if(!a){void 0===t.__watchers__&&e.defineProp(t,"__watchers__",{}),void 0===t.__proxy__&&e.defineProp(t,"__proxy__",{}),void 0===t.__watchers__[n]&&(t.__watchers__[n]=[],a||(o=!0));for(var s=0;s<t.__watchers__[n].length;s++)if(t.__watchers__[n][s]===r)return;if(t.__watchers__[n].push(r),o){var l=Object.getOwnPropertyDescriptor(t,n);if(void 0!==l){var u={enumerable:l.enumerable,configurable:l.configurable};["get","set"].forEach((function(e){void 0!==l[e]&&(u[e]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return l[e].apply(t,n)})}));["writable","value"].forEach((function(t){void 0!==l[t]&&(u[t]=l[t])})),Object.defineProperty(t.__proxy__,n,u)}else t.__proxy__[n]=t[n];var c=this;this.defineGetAndSet(t,n,(function(){return t.__proxy__[n]}),(function(r){var o=t.__proxy__[n];if(0!==i&&t[n]&&(e.isObject(t[n])||e.isArray(t[n]))&&!t[n].__watchers__)for(var a=0;a<t.__watchers__[n].length;a++)c.watchAll(t[n],t.__watchers__[n][a],void 0===i?i:i-1);o!==r&&(t.__proxy__[n]=r,e.callWatchers(t,n,r,o,"set"))}))}}},t.prototype.watchAll=function(t,n,r){if(!e.disabled&&"string"!=typeof t&&(t instanceof Object||e.isArray(t)))if(e.isArray(t)){if(this.defineWatcher(t,"__watchall__",n,r),void 0===r||r>0)for(var i=0;i<t.length;i++)this.watchAll(t[i],n,r)}else{var o=[];for(var i in t)({}).hasOwnProperty.call(t,i)&&o.push(i);this.watchMany(t,o,n,r)}},t.prototype.watchOne=function(t,n,r,i){n.startsWith("_$")||n.startsWith("__$")||e.disabled||"string"!=typeof t&&(t instanceof Object||e.isArray(t))&&(e.isFunction(t[n])||(null!==t[n]&&(void 0===i||i>0)&&this.watchAll(t[n],r,void 0!==i?i-1:i),this.defineWatcher(t,n,r,i)))},t.prototype.watchMany=function(t,n,r,i){if("string"!=typeof t&&(t instanceof Object||e.isArray(t)))for(var o=0;o<n.length;o++){var a=n[o];this.watchOne(t,a,r,i)}},t.unwatchOne=function(t,e,n){if(!e.startsWith("_$")&&!e.startsWith("__$")&&void 0!==t.__watchers__&&void 0!==t.__watchers__[e])if(void 0===n)delete t.__watchers__[e];else for(var r=0;r<t.__watchers__[e].length;r++)t.__watchers__[e][r]===n&&t.__watchers__[e].splice(r,1)},t.unwatchMany=function(t,n,r){for(var i in n)n.hasOwnProperty(i)&&e.unwatchOne(t,n[i],r)},t.prototype.unwatchPropsInObject=function(t,n){var r=[];for(var i in t)i.startsWith("_$")||i.startsWith("__$")||t.hasOwnProperty(i)&&(t[i]instanceof Object&&this.unwatchPropsInObject(t[i],n),r.push(i));e.unwatchMany(t,r,n)},t.prototype.unwatchAll=function(t,n){if(!(t instanceof String||!e.isObject(t)&&!e.isArray(t)))if(e.isArray(t)){for(var r=["__watchall__"],i=0;i<t.length;i++)r.push(i.toString());e.unwatchMany(t,r,n)}else this.unwatchPropsInObject(t,n)},t.disabled=!1,t=e=r([o.Singleton,i("design:paramtypes",[])],t)}();e.WatchObject=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SoundItem=e.SoundsList=void 0;var r=n(1),i=n(48),o=n(3),a=function(){function t(t){this.items=new r.List,this._soundManager=t}return t.prototype.muteMusic=function(t){this._soundManager.muteSoundsByType(t,i.SoundType.Music)},t.prototype.muteSoundEffects=function(t){this._soundManager.muteSoundsByType(t,i.SoundType.SFX)},t.prototype.get=function(t){return this[t]},t.prototype.initialize=function(t,e){var n=this;o._u.each(t,(function(t){var r=new s(n._soundManager,t.id);n._soundManager.loadSound(t.id,t.type,e.name),n.items.add(r),n[t.id]=r}),this)},t}();e.SoundsList=a;var s=function(){function t(t,e){this._soundManager=t,this._soundId=e}return t.prototype.play=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=1),this._soundManager.play(this._soundId,t),this._soundManager.changeVolume(this._soundId,e)},t.prototype.stop=function(){this._soundManager.stop(this._soundId)},t.prototype.changeVolume=function(t){this._soundManager.changeVolume(this._soundId,t)},t.prototype.isLoaded=function(){return this._soundManager.isLoaded(this._soundId)},t.prototype.playSound=function(t,e){void 0===t&&(t=0),this._soundManager.playSound(this._soundId,t,e)},t}();e.SoundItem=s},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.ModelEvents=e.makeModelEventEmitter=void 0;var o=n(0);e.makeModelEventEmitter=function(t,e){t.__$__allowedEvents_=e,t.__$__modelEventsReady_=!0,t.__$on=function(t,e,n){this.__$eventListeners_=this.__$eventListeners_||{},this.__$eventListeners_[t]=this.__$eventListeners_[t]||[],this.__$eventListeners_[t].push({callback:e,context:n})},t.__$off=function(t,e){this.__$eventListeners_=this.__$eventListeners_||{};for(var n=this.__$eventListeners_[t]||[],r=0;r<n.length;r++)if(n[r].callback===e)return void n.splice(r,1)},t.__$trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.__$eventListeners_=this.__$eventListeners_||{};for(var r=this.__$eventListeners_[t]||[],i=0;i<r.length;i++)r[i].callback.apply(r[i].context,Array.prototype.slice.call(arguments,1))}};var a=function(){function t(){}return t.prototype.dispatch=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this.trigger.apply(this,i([t,e],n))},t.prototype.on=function(t,e,n,r){t.__$eventListeners_=t.__$eventListeners_||{},t.__$eventListeners_[e]=t.__$eventListeners_[e]||[],t.__$eventListeners_[e].push({callback:n,context:r})},t.prototype.off=function(t,e,n){t.__$eventListeners_=t.__$eventListeners_||{};for(var r=t.__$eventListeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===n)return void r.splice(i,1)},t.prototype.trigger=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t.__$eventListeners_=t.__$eventListeners_||{};for(var i=t.__$eventListeners_[e]||[],o=0;o<i.length;o++)i[o].callback.apply(i[o].context,Array.prototype.slice.call(arguments,2))},t=r([o.Singleton],t)}();e.ModelEvents=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyNode=void 0;var r=n(46),i=function(){function t(t,e,n){this.value=t,this.time=e,this.next=null,this.isStepped=!1,this.ease=n?"function"==typeof n?n:r.ParticleUtils.generateEase(n):null}return t.createList=function(e){if("list"in e){var n=e.list,i=void 0,o=void 0,a=n[0],s=a.value,l=a.time;if(o=i=new t("string"==typeof s?r.ParticleUtils.hexToRGB(s):s,l,e.ease),n.length>2||2===n.length&&n[1].value!==s)for(var u=1;u<n.length;++u){var c=n[u],h=c.value,p=c.time;i.next=new t("string"==typeof h?r.ParticleUtils.hexToRGB(h):h,p),i=i.next}return o.isStepped=!!e.isStepped,o}var f=new t("string"==typeof e.start?r.ParticleUtils.hexToRGB(e.start):e.start,0);return e.end!==e.start&&(f.next=new t("string"==typeof e.end?r.ParticleUtils.hexToRGB(e.end):e.end,1)),f},t}();e.PropertyNode=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},l=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},u=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationSplashScreenBaseController=e.AnimationLoadingBaseController=e.AnimationBaseController=void 0;var c=n(1),h=n(30),p=n(33),f=n(60),d=n(29),_=n(23),y=n(8),m=n(21),g=n(82),v=function(t){function e(e){var n=t.call(this,e)||this;return n.name=e,n.$sprites=new f.SpriteList,n.$spritesEvents=new d.SpriteEvents,n._width=void 0,n._height=void 0,n.__needUpdate=!1,n}return i(e,t),Object.defineProperty(e.prototype,"_animationClip",{get:function(){return this.__animationClip},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.__animationClip},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this.__animationClip},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"graphics",{get:function(){return this.__animationClip instanceof PIXI.Graphics?this.__animationClip:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sprite",{get:function(){return this.__animationClip instanceof PIXI.Sprite?this.__animationClip:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return void 0!==this._width?this._width:this.__animationClip.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return void 0!==this._height?this._height:this.__animationClip.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._animationClip.loop},set:function(t){this._animationClip.loop=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this._animationClip.currentFrame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._animationClip.totalFrames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startPosition",{get:function(){return this._animationClip.startPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationClipLabels",{get:function(){return this._animationClip.labels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._animationClip.paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationControlByParent",{get:function(){return this._animationClip.autoReset},set:function(t){this._animationClip.autoReset=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selfAdvance",{get:function(){return this._animationClip.selfAdvance},set:function(t){this._animationClip.selfAdvance=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"framerate",{get:function(){return this._animationClip.framerate},set:function(t){this._animationClip.framerate=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.__animationClip.x},set:function(t){this.__animationClip.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.__animationClip.y},set:function(t){this.__animationClip.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this.__animationClip.visible},set:function(t){this.__animationClip.visible=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this.__animationClip},enumerable:!1,configurable:!0}),e.prototype.configure=function(e){t.prototype.configure.call(this,e),this.config.instanceName=e.instanceName||this.config.instanceName,this.config.libraryName=e.libraryName||this.config.libraryName,this.config.animationContent=e.animationContent||this.config.animationContent,this.config.animationContent&&this.$resources.items.add(new p.ResourceItem("Animation_Resources_"+this.name,this.config.animationContent,p.ResourceItemType.pixiAnimation))},e.prototype._stopAllAnimationClip=function(t){if(t.___children&&t.___children.length)for(var e=t.___children,n=0;n<e.length;n++){var r=e[n];r.stop&&r.stop(),r.loop&&(r.loop=!1),this._stopAllAnimationClip(r)}},e.prototype.play=function(){this._animationClip.play()},e.prototype.gotoAndStop=function(t){this._animationClip.gotoAndStop(t)},e.prototype.gotoAndPlay=function(t){this._animationClip.gotoAndPlay(t)},e.prototype.gotoAndStopByQuery=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),t?this._animationClip.gotoAndStopChild(t,e,n):this.gotoAndPlay(e)},e.prototype.getAllAnimationClipChildren=function(t,e){var n=this._animationClip;if(e){var r=e.split(".");n=this._getChild(r,this._animationClip)}for(var i=n.___children,o=0;o<i.length;o++)t(i[o])},e.prototype.setLoopByQuery=function(t,e){t?this._animationClip.loopChild(t,e):this.loop=e},e.prototype.setAnimationControlByParentByQuery=function(t,e){t?this._animationClip.autoResetChild(t,e):this.animationControlByParent=e},e.prototype.getDisplayObjectByQuery=function(t){return this._animationClip.getChildByQuery(t)},e.prototype.seVisibleByQuery=function(t,e){this._animationClip.visibleChild(t,e)},e.prototype.setTextByQuery=function(t,e){this._animationClip.setTextChild(t,e)},e.prototype.setTextVerticalAlignByQuery=function(t,e){this._animationClip.setTextVerticalAlignChild(t,e)},e.prototype.setTextStyleByQuery=function(t,e,n){this._animationClip.setTextStyleChild(t,e,n)},e.prototype.setScaleByQuery=function(t,e,n){this._animationClip.setChildScale(t,e,n)},e.prototype.setPosXByQuery=function(t,e){this._animationClip.setChildPosX(t,e)},e.prototype.setPosYByQuery=function(t,e){this._animationClip.setChildPosY(t,e)},e.prototype.setPosByQuery=function(t,e,n){this._animationClip.setChildPos(t,e,n)},e.prototype.setRotationByQuery=function(t,e){this._animationClip.rotateAnimationClipChild(t,e)},e.prototype.gotoAndStopAllByQuery=function(t){void 0===t&&(t=0),this._animationClip.gotoAndStopAllChild(t)},e.prototype.gotoAndPlayByQuery=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!0),this._animationClip.gotoAndPlayChild(t,e,n,r)},e.prototype.gotoAndPlayAll=function(t,e){this._animationClip.gotoAndPlayAll(t,e)},e.prototype.gotoAndStopAll=function(t){this._animationClip.gotoAndStopAll(t)},e.prototype.stop=function(t){void 0===t&&(t=!0),this._animationClip.stop(t)},e.prototype._dispatchEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.onAnimationEvent.apply(this,u([t],e))},e.prototype.onAnimationEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},e.prototype._getChild=function(t,e,n){void 0===n&&(n=0);for(var r=e.___children,i=null,o=0;o<r.length;o++)if(r[o].name==t[n])return i=r[o],n++,t.length==n?i:this._getChild(t,i,n);return i},e.prototype.sortCurrentAnimationClipChildren=function(t){for(var e=this._animationClip.children,n=null,r=new c.List,i=0;i<e.length;i++)(n=e[i]).zOrder=0,t(n,n.__view)&&r.add(n);this._animationClip.__childrenSorted=r.orderBy((function(t){return t.zOrder})).toArray()},e.prototype.getCurrentPointsPaths=function(t,e){var n=this._animationClip;if(e){var r=e.split(".");n=this._getChild(r,this._animationClip)}for(var i=n.children,o=0;o<i.length;o++)if(i[o]instanceof g.ShapeContainer){var a=i[o];t(a.x,a.y,a.paths,a,a.libraryItem)}},e.prototype.getCurrentSprites=function(t,e){var n=this._animationClip;if(e){var r=e.split(".");n=this._getChild(r,this._animationClip)}for(var i=n.children,o=0;o<i.length;o++){if(i[o]instanceof PIXI.Sprite)t(i[o])}},e.prototype.getCurrentAnimationClipChildren=function(t,e){var n=this._animationClip;if(e){var r=e.split(".");n=this._getChild(r,this._animationClip)}for(var i=n.children,o=0;o<i.length;o++)t(i[o])},e.prototype.initialize=function(e,n){if(void 0===n&&(n=null),this.parentContainer=n||e.display,this.config.libraryName&&!this.config.animationContent)throw'To build a movie clip by "libraryName" "animationContent" must be assigned';if(this.config.animationContent)this.config.libraryName?this.__animationClip=this.config.animationContent.factory.getInstance(this.config.libraryName):this.__animationClip=this.config.animationContent.factory.getInstance(),this._animationClip.loop=!1,this._stopAllAnimationClip(this._animationClip),this._width=this.config.animationContent._meta.width,this._height=this.config.animationContent._meta.height,this.parentContainer.addChild(this.__animationClip),this.__needUpdate=!(this.parentContainer instanceof m.AnimationClipContainer);else if(this.config.instanceName){var r=this.config.instanceName.split("."),i=this._getChild(r,this.parentContainer);i&&(this.__animationClip=i,this._animationClip.stop&&this._animationClip.stop(),this._animationClip.loop&&(this._animationClip.loop=!1),this._stopAllAnimationClip(this._animationClip))}return this.__animationClip&&(this._animationClip.__controller=this,this._animationClip.onEvent&&this._animationClip.onEvent("dispatchEvent",this._dispatchEvent,this)),this.$sprites.initialize(this.config.sprites,this._animationClip,this),this.$spritesEvents.initialize(this.config.events,null,this.$sprites,this,this.logger),this.config.onTap&&this.$spritesEvents.addEvent(this._animationClip,this.config.onTap,this,this.logger,{eventType:h.EventsTypeEnum.CLICK_OR_TAP,event:this.config.onTap,targetType:h.EventsTargetTypeEnum.SPRITE,targetName:this._animationClip.name}),this.config.onPointerDown&&this.$spritesEvents.addEvent(this._animationClip,this.config.onPointerDown,this,this.logger,{eventType:h.EventsTypeEnum.POINTERDOWN,event:this.config.onPointerDown,targetType:h.EventsTargetTypeEnum.SPRITE,targetName:this._animationClip.name}),this.config.onPointerUp&&this.$spritesEvents.addEvent(this._animationClip,this.config.onPointerUp,this,this.logger,{eventType:h.EventsTypeEnum.POINTERUP,event:this.config.onPointerUp,targetType:h.EventsTargetTypeEnum.SPRITE,targetName:this._animationClip.name}),this.config.onPointerUpOutside&&this.$spritesEvents.addEvent(this._animationClip,this.config.onPointerUpOutside,this,this.logger,{eventType:h.EventsTypeEnum.POINTERUPOUTSIDE,event:this.config.onPointerUpOutside,targetType:h.EventsTargetTypeEnum.SPRITE,targetName:this._animationClip.name}),this.config.onPointerOut&&this.$spritesEvents.addEvent(this._animationClip,this.config.onPointerOut,this,this.logger,{eventType:h.EventsTypeEnum.POINTEROUT,event:this.config.onPointerOut,targetType:h.EventsTargetTypeEnum.SPRITE,targetName:this._animationClip.name}),this.config.onPointerOver&&this.$spritesEvents.addEvent(this._animationClip,this.config.onPointerOver,this,this.logger,{eventType:h.EventsTypeEnum.POINTEROVER,event:this.config.onPointerOver,targetType:h.EventsTargetTypeEnum.SPRITE,targetName:this._animationClip.name}),this.config.onPointerMove&&this.$spritesEvents.addEvent(this._animationClip,this.config.onPointerMove,this,this.logger,{eventType:h.EventsTypeEnum.POINTERMOVE,event:this.config.onPointerMove,targetType:h.EventsTargetTypeEnum.SPRITE,targetName:this._animationClip.name}),t.prototype.initialize.call(this,e,n)},e.prototype.update=function(e){return this.__needUpdate&&this.visible&&this._animationClip.update(e),t.prototype.update.call(this,e)},e.prototype.dispose=function(){this.isReady&&(this.config.animationContent&&(this.parentContainer.removeChild(this._animationClip),this._animationClip.destroy({children:!0})),t.prototype.dispose.call(this),this.$spritesEvents.dispose(),this.__animationClip&&this._animationClip.offEvent&&this._animationClip.offEvent("dispatchEvent",this._dispatchEvent),this.config=null,this.$sprites=null,this.$spritesEvents=null,delete this.__animationClip,this.__animationClip=null)},e.prototype.clear=function(){t.prototype.clear.call(this),this.$sprites=new f.SpriteList,this.$spritesEvents=new d.SpriteEvents},o([y.GamePerformanceMethod("AnimationBaseController","gotoAndStop"),a("design:type",Function),a("design:paramtypes",[Object]),a("design:returntype",void 0)],e.prototype,"gotoAndStop",null),o([y.GamePerformanceMethod("AnimationBaseController","gotoAndPlay"),a("design:type",Function),a("design:paramtypes",[Object]),a("design:returntype",void 0)],e.prototype,"gotoAndPlay",null),o([y.GamePerformanceMethod("AnimationBaseController","gotoAndStopChild"),a("design:type",Function),a("design:paramtypes",[String,Object,Boolean]),a("design:returntype",void 0)],e.prototype,"gotoAndStopByQuery",null),o([y.GamePerformanceMethod("AnimationBaseController","gotoAndStopChild"),a("design:type",Function),a("design:paramtypes",[Object]),a("design:returntype",void 0)],e.prototype,"gotoAndStopAllByQuery",null),o([y.GamePerformanceMethod("AnimationBaseController","gotoAndPlayChild"),a("design:type",Function),a("design:paramtypes",[String,Object,Boolean,Boolean]),a("design:returntype",void 0)],e.prototype,"gotoAndPlayByQuery",null),o([y.GamePerformanceMethod("AnimationBaseController","gotoAndPlayAll"),a("design:type",Function),a("design:paramtypes",[Object,c.List]),a("design:returntype",void 0)],e.prototype,"gotoAndPlayAll",null),o([y.GamePerformanceMethod("AnimationBaseController","gotoAndStopAll"),a("design:type",Function),a("design:paramtypes",[Object]),a("design:returntype",void 0)],e.prototype,"gotoAndStopAll",null),o([y.GamePerformanceMethod("AnimationBaseController","stop"),a("design:type",Function),a("design:paramtypes",[Boolean]),a("design:returntype",void 0)],e.prototype,"stop",null),o([y.GamePerformanceMethod("AnimationBaseController","Initialize view"),a("design:type",Function),a("design:paramtypes",[Object,PIXI.Container]),a("design:returntype",PIXI.Container)],e.prototype,"initialize",null),e}(_._BaseController);e.AnimationBaseController=v;var A=function(t){function e(e){var n=t.call(this,e)||this;return n.name=e,n}return i(e,t),e.prototype.toggleVisible=function(t){this.visible!=t&&(this.visible=t,t?this.onShow():this.onHide())},e}(v);e.AnimationLoadingBaseController=A;var b=function(t){function e(e){var n=t.call(this,e)||this;return n.name=e,n._delay=4e3,n}return i(e,t),e.prototype.setDelay=function(t){this._delay=t},e.prototype.onShow=function(){this.visible=!0},e.prototype.onHide=function(){return s(this,void 0,void 0,(function(){var t=this;return l(this,(function(e){switch(e.label){case 0:return[4,function(e){return s(t,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,e)}))];case 1:return[2,t.sent()]}}))}))}(this._delay).then((function(){return t.visible=!1}))];case 1:return e.sent(),[2]}}))}))},e}(v);e.AnimationSplashScreenBaseController=b},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.LobbyPlayerIOManager=void 0;var s=n(22),l=function(t){function e(){return t.call(this)||this}return i(e,t),Object.defineProperty(e.prototype,"connection",{get:function(){return this._connection},enumerable:!1,configurable:!0}),e.prototype._listRooms=function(t,e,n,r){return o(this,void 0,void 0,(function(){return a(this,(function(i){return[2,new Promise((function(i,o){t.multiplayer.listRooms(r,{maxPlayers:n,gameName:e,open:!0},20,0,(function(t){i(t)}),(function(t){i(null)}))}))]}))}))},e.prototype._joinRoom=function(t,e){return o(this,void 0,void 0,(function(){var n=this;return a(this,(function(r){return[2,new Promise((function(r,i){t.multiplayer.joinRoom(e,{playerData:n.getPlayerDataString(),playerName:n.playerName,playerGuid:n.playerGuid,playerEnvironment:s.Environment.type},(function(t){n._connection=t,n._connection.addDisconnectCallback((function(){n._onDisconnected()})),r(!0)}),(function(t){r(!1)}))}))]}))}))},e.prototype._joinGamePad=function(t,e,n,r){return o(this,void 0,void 0,(function(){var i=this;return a(this,(function(o){return[2,new Promise((function(o,a){t.multiplayer.joinRoom(e,{playerData:i.getPlayerDataString(),gamePad:!0,playerServerGuid:r,gamePadPlayer:n,playerName:i.playerName,playerGuid:i.playerGuid,playerEnvironment:s.Environment.type},(function(t){i._connection=t,i._connection.addDisconnectCallback((function(){i._onDisconnected()})),o(!0)}),(function(t){o(!1)}))}))]}))}))},e.prototype.joinGamePad=function(t,e,n,r,i,s){return o(this,void 0,void 0,(function(){var l=this;return a(this,(function(u){return this._lobbySettings=s||{},this.playerName=r,this.playerGuid=n,[2,new Promise((function(n,r){PlayerIO.useSecureApiRequests=!0,PlayerIO.authenticate(l._lobbySettings.playerIoKey||"testgame-oe9t5895teodx98ywc9blw","public",{userId:l.playerGuid},{},(function(r){return o(l,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return this._lobbySettings.developmentServer&&(r.multiplayer.developmentServer=this._lobbySettings.developmentServer),this._lobbySettings.serverNodeName=this._lobbySettings.serverNodeName||"MultiplayerGameNode_v_0_6",[4,this._joinGamePad(r,t,e,i)];case 1:return o.sent()?(this.matchId=t,n(!0),[2]):(n(!1),[2])}}))}))}),(function(t){n(!1)}))}))]}))}))},e.prototype._joinGame=function(t,e){return o(this,void 0,void 0,(function(){var n=this;return a(this,(function(r){return[2,new Promise((function(r,i){t.multiplayer.joinRoom(e,{playerData:n.getPlayerDataString(),playerName:n.playerName,playerGuid:n.playerGuid,playerEnvironment:s.Environment.type},(function(t){n._connection=t,n._connection.addDisconnectCallback((function(){n._onDisconnected()})),r(!0)}),(function(t){r(!1)}))}))]}))}))},e.prototype.joinGame=function(t,e,n,r){var i=this;return this._lobbySettings=r||{},this.playerName=n,this.playerGuid=e,new Promise((function(e,n){PlayerIO.useSecureApiRequests=!0,PlayerIO.authenticate(i._lobbySettings.playerIoKey||"testgame-oe9t5895teodx98ywc9blw","public",{userId:i.playerGuid},{},(function(n){return o(i,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return this._lobbySettings.developmentServer&&(n.multiplayer.developmentServer=this._lobbySettings.developmentServer),this._lobbySettings.serverNodeName=this._lobbySettings.serverNodeName||"MultiplayerGameNode_v_0_6",[4,this._joinGame(n,t)];case 1:return r.sent()?(this.matchId=t,e(!0),[2]):(e(!1),[2])}}))}))}),(function(t){e(!1)}))}))},e.prototype.join=function(t,e,n,r){return o(this,void 0,void 0,(function(){var i=this;return a(this,(function(s){return this._lobbySettings=r||{},this._gameName=n,this.playerName=e,this.playerGuid=t,[2,new Promise((function(e,r){PlayerIO.useSecureApiRequests=!0,PlayerIO.authenticate(i._lobbySettings.playerIoKey||"testgame-oe9t5895teodx98ywc9blw","public",{userId:t},{},(function(t){return o(i,void 0,void 0,(function(){var r,i,o;return a(this,(function(a){switch(a.label){case 0:return this._lobbySettings.developmentServer&&(t.multiplayer.developmentServer=this._lobbySettings.developmentServer),this._lobbySettings.serverNodeName=this._lobbySettings.serverNodeName||"MultiplayerGameNode_v_0_6",[4,this._listRooms(t,n,this._lobbySettings.playersCount,this._lobbySettings.serverNodeName)];case 1:if(!((r=a.sent())&&r.length>0))return[3,5];i=0,a.label=2;case 2:return i<r.length?(o=r[i]).onlineUsers<this._lobbySettings.playersCount?[4,this._joinRoom(t,o.id)]:[3,4]:[3,5];case 3:if(a.sent())return this.matchId=o.id,e(!0),[2];a.label=4;case 4:return i++,[3,2];case 5:return e(!1),[2]}}))}))}),(function(t){e(!1)}))}))]}))}))},e.prototype.create=function(t,e,n,r){return o(this,void 0,void 0,(function(){var i=this;return a(this,(function(s){return this._lobbySettings=r||{},this._gameName=n,this.playerName=e,this.playerGuid=t,[2,new Promise((function(r,s){PlayerIO.useSecureApiRequests=!0,PlayerIO.authenticate(i._lobbySettings.playerIoKey||"testgame-oe9t5895teodx98ywc9blw","public",{userId:t},{},(function(t){return o(i,void 0,void 0,(function(){return a(this,(function(i){switch(i.label){case 0:return this._lobbySettings.developmentServer&&(t.multiplayer.developmentServer=this._lobbySettings.developmentServer),this._lobbySettings.serverNodeName=this._lobbySettings.serverNodeName||"MultiplayerGameNode_v_0_6",this.matchId=this._createGUID(),[4,this._createJoinRoom(t,n,e)];case 1:return i.sent(),r(!0),[2]}}))}))}),(function(t){r(!1)}))}))]}))}))},e.prototype._createJoinRoom=function(t,e,n){return o(this,void 0,void 0,(function(){var r=this;return a(this,(function(i){return[2,new Promise((function(i,o){t.multiplayer.createJoinRoom(r.matchId,r._lobbySettings.serverNodeName,!0,{maxPlayers:r._lobbySettings.playersCount,gameName:e,open:!r._lobbySettings.privateLobby,autoAddBot:r._lobbySettings.autoAddBot?1:0,autoAddBotDelay:r._lobbySettings.autoAddBotDelay||10},{playerData:r.getPlayerDataString(),playerName:n,playerGuid:r.playerGuid,playerEnvironment:s.Environment.type},(function(t){r._connection=t,r._connection.addDisconnectCallback((function(){r._onDisconnected()})),console.log("create or join room... done"),i(!0)}),(function(t){i(!1)}))}))]}))}))},e.prototype.joinOrCreate=function(t,e,n,r){return o(this,void 0,void 0,(function(){var i=this;return a(this,(function(l){return this._lobbySettings=r||{},this._gameName=n,this.playerName=e,this.playerGuid=t,[2,new Promise((function(r,l){var u=function(t){r(!1)};PlayerIO.useSecureApiRequests=!0,PlayerIO.authenticate(i._lobbySettings.playerIoKey||"testgame-oe9t5895teodx98ywc9blw","public",{userId:t},{},(function(t){return o(i,void 0,void 0,(function(){var i,o,l,c=this;return a(this,(function(a){switch(a.label){case 0:return this._lobbySettings.developmentServer&&(t.multiplayer.developmentServer=this._lobbySettings.developmentServer),this._lobbySettings.serverNodeName=this._lobbySettings.serverNodeName||"MultiplayerGameNode_v_0_6",[4,this._listRooms(t,n,this._lobbySettings.playersCount,this._lobbySettings.serverNodeName)];case 1:if(!((i=a.sent())&&i.length>0))return[3,5];o=0,a.label=2;case 2:return o<i.length?(l=i[o]).onlineUsers<this._lobbySettings.playersCount?[4,this._joinRoom(t,l.id)]:[3,4]:[3,5];case 3:if(a.sent())return this.matchId=l.id,r(!0),[2];a.label=4;case 4:return o++,[3,2];case 5:return this.matchId=this._createGUID(),t.multiplayer.createJoinRoom(this.matchId,this._lobbySettings.serverNodeName,!0,{maxPlayers:this._lobbySettings.playersCount,gameName:n,open:!this._lobbySettings.privateLobby,autoAddBot:this._lobbySettings.autoAddBot?1:0,autoAddBotDelay:this._lobbySettings.autoAddBotDelay||10},{playerData:this.getPlayerDataString(),playerName:e,playerGuid:this.playerGuid,playerEnvironment:s.Environment.type},(function(t){c._connection=t,c._connection.addDisconnectCallback((function(){c._onDisconnected()})),r(!0)}),u),[2]}}))}))}),u)}))]}))}))},e.prototype._reconnect=function(){return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){return this._reconnecting?[2,Promise.resolve(!1)]:(this._reconnecting=!0,this.onConnectionRecovering(),console.log("reconnecting..."+this._reconnectingNumberOfTries+"/"+this._reconnectingCount),[2,new Promise((function(e,n){PlayerIO.useSecureApiRequests=!0,PlayerIO.authenticate(t._lobbySettings.playerIoKey||"testgame-oe9t5895teodx98ywc9blw","public",{userId:t.playerGuid},{},(function(n){return o(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this._lobbySettings.developmentServer&&(n.multiplayer.developmentServer=this._lobbySettings.developmentServer),this._lobbySettings.serverNodeName=this._lobbySettings.serverNodeName||"MultiplayerGameNode_v_0_6",[4,this._joinRoom(n,this.matchId)];case 1:return t.sent()?(console.log("reconnecting... done"),this._disconnected=!1,this._reconnecting=!1,this.onConnectionRestored(0),e(!0),[2]):this.isStandalone()?(console.log("reconnecting... standalone"),[4,this._createJoinRoom(n,this._gameName,this.playerName)]):[3,3];case 2:return t.sent(),console.log("reconnecting... done"),this._reconnecting=!1,this._disconnected=!1,this.onConnectionRestored(0),e(!0),[2];case 3:return console.log("reconnecting... game not found"),this._reconnecting=!1,this._reconnectingNumberOfTries-=4,e(!1),[2]}}))}))}),(function(n){console.log("reconnecting... error"),t._reconnecting=!1,e(!1),console.error("PlayerIO Error: "+n.code+" - "+n.message)}))}))])}))}))},e.prototype._onDisconnected=function(){if(!this.enableReconnection())return this._reconnecting=!1,void this.onDisconnected();this._disconnected=!0,this._reconnectingTimeOut=1,this._reconnectingNumberOfTries=this._reconnectingCount,this.onConnectionLost()},e.prototype.update=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this._exit||(this._reconnectingNumberOfTries<0||this._reconnecting)?[2]:this._disconnected?(this._reconnectingTimeOut-=t,this._reconnectingTimeOut>0?[2]:[3,1]):[3,3];case 1:return[4,this._reconnect()];case 2:e.sent(),this._reconnectingTimeOut=3,this._reconnectingNumberOfTries--,this._reconnectingNumberOfTries<0&&(this._reconnecting=!1,this.onDisconnected()),e.label=3;case 3:return[2]}}))}))},e}(n(62).LobbyManager);e.LobbyPlayerIOManager=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GameStateChangedEvent=void 0;var o=n(209),a=n(25),s=function(t){function e(e){var n=t.call(this,e.isoDateTime)||this;return n.g=e.g&&o.Game.fromObject(e.g)||void 0,n.q=e.q||[],n}return i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return e.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"game",{get:function(){return this.g},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"queue",{get:function(){return this.q},enumerable:!1,configurable:!0}),e.fromObject=function(t){return new e(t)},e.fromGame=function(t){return new e({id:e.id,isoDateTime:a.EventBase.getIsoDateTime(),g:t})},e.id="GameStateChangedEvent",e}(a.EventBase);e.GameStateChangedEvent=s},function(t,e,n){var r=n(26),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";(function(e,r){var i;t.exports=w,w.ReadableState=P;n(103).EventEmitter;var o=function(t,e){return t.listeners(e).length},a=n(104),s=n(26).Buffer,l=e.Uint8Array||function(){};var u,c=n(221);u=c&&c.debuglog?c.debuglog("stream"):function(){};var h,p,f,d=n(222),_=n(105),y=n(106).getHighWaterMark,m=n(17).codes,g=m.ERR_INVALID_ARG_TYPE,v=m.ERR_STREAM_PUSH_AFTER_EOF,A=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(27)(w,a);var T=_.errorOrDestroy,S=["error","close","destroy","pause","resume"];function P(t,e,r){i=i||n(18),t=t||{},"boolean"!=typeof r&&(r=e instanceof i),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",r),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=n(108).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function w(t){if(i=i||n(18),!(this instanceof w))return new w(t);var e=this instanceof i;this._readableState=new P(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function E(t,e,n,r,i){u("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(u("onEofChunk"),e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?x(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,M(t)))}(t,a);else if(i||(o=function(t,e){var n;r=e,s.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new g("chunk",["string","Buffer","Uint8Array"],e));var r;return n}(a,e)),o)T(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),r)a.endEmitted?T(t,new b):O(t,a,e,!0);else if(a.ended)T(t,new v);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?O(t,a,e,!1):D(t,a)):O(t,a,e,!1)}else r||(a.reading=!1,D(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function O(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&x(t)),D(t,e)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),w.prototype.destroy=_.destroy,w.prototype._undestroy=_.undestroy,w.prototype._destroy=function(t,e){e(t)},w.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=s.from(t,e),e=""),n=!0),E(this,t,e,!1,n)},w.prototype.unshift=function(t){return E(this,t,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(t){h||(h=n(108).StringDecoder);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function C(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function x(t){var e=t._readableState;u("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(u("emitReadable",e.flowing),e.emittedReadable=!0,r.nextTick(M,t))}function M(t){var e=t._readableState;u("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,L(t)}function D(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(I,t,e))}function I(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(u("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function R(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function B(t){u("readable nexttick read 0"),t.read(0)}function N(t,e){u("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(u("flow",e.flowing);e.flowing&&null!==t.read(););}function k(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function F(t){var e=t._readableState;u("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,r.nextTick(j,e,t))}function j(t,e){if(u("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function G(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}w.prototype.read=function(t){u("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return u("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?F(this):x(this),null;if(0===(t=C(t,e))&&e.ended)return 0===e.length&&F(this),null;var r,i=e.needReadable;return u("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&u("length less than watermark",i=!0),e.ended||e.reading?u("reading or ended",i=!1):i&&(u("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=C(n,e))),null===(r=t>0?k(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&F(this)),null!==r&&this.emit("data",r),r},w.prototype._read=function(t){T(this,new A("_read()"))},w.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,u("pipe count=%d opts=%j",i.pipesCount,e);var a=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?l:y;function s(e,r){u("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,u("cleanup"),t.removeListener("close",d),t.removeListener("finish",_),t.removeListener("drain",c),t.removeListener("error",f),t.removeListener("unpipe",s),n.removeListener("end",l),n.removeListener("end",y),n.removeListener("data",p),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function l(){u("onend"),t.end()}i.endEmitted?r.nextTick(a):n.once("end",a),t.on("unpipe",s);var c=function(t){return function(){var e=t._readableState;u("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,L(t))}}(n);t.on("drain",c);var h=!1;function p(e){u("ondata");var r=t.write(e);u("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==G(i.pipes,t))&&!h&&(u("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function f(e){u("onerror",e),y(),t.removeListener("error",f),0===o(t,"error")&&T(t,e)}function d(){t.removeListener("finish",_),y()}function _(){u("onfinish"),t.removeListener("close",d),y()}function y(){u("unpipe"),n.unpipe(t)}return n.on("data",p),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",f),t.once("close",d),t.once("finish",_),t.emit("pipe",n),i.flowing||(u("pipe resume"),n.resume()),t},w.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=G(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},w.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?x(this):i.reading||r.nextTick(B,this))),n},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function(t,e){var n=a.prototype.removeListener.call(this,t,e);return"readable"===t&&r.nextTick(R,this),n},w.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||r.nextTick(R,this),e},w.prototype.resume=function(){var t=this._readableState;return t.flowing||(u("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(N,t,e))}(this,t)),t.paused=!1,this},w.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<S.length;o++)t.on(S[o],this.emit.bind(this,S[o]));return this._read=function(e){u("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=n(225)),p(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),w._fromList=k,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(t,e){return void 0===f&&(f=n(226)),f(w,t,e)})}).call(this,n(6),n(5))},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}m(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&m(t,"error",e,n)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,a,s;if(u(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(t))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return t}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):y(i,i.length)}function _(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function m(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[t];if(void 0===l)return!1;if("function"==typeof l)o(l,this,e);else{var u=l.length,c=y(l,u);for(n=0;n<u;++n)o(c[n],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return u(e),this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):_.call(t,e)},s.prototype.listenerCount=_,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){t.exports=n(103).EventEmitter},function(t,e,n){"use strict";(function(e){function n(t,e){i(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):o?(e.nextTick(r,a),o(t)):e.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,n(5))},function(t,e,n){"use strict";var r=n(17).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,n,i){var o=function(t,e,n){return null!=t.highWaterMark?t.highWaterMark:e?t[n]:null}(e,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,e,n){"use strict";(function(e,r){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=w,w.WritableState=P;var a={deprecate:n(224)},s=n(104),l=n(26).Buffer,u=e.Uint8Array||function(){};var c,h=n(105),p=n(106).getHighWaterMark,f=n(17).codes,d=f.ERR_INVALID_ARG_TYPE,_=f.ERR_METHOD_NOT_IMPLEMENTED,y=f.ERR_MULTIPLE_CALLBACK,m=f.ERR_STREAM_CANNOT_PIPE,g=f.ERR_STREAM_DESTROYED,v=f.ERR_STREAM_NULL_VALUES,A=f.ERR_STREAM_WRITE_AFTER_END,b=f.ERR_UNKNOWN_ENCODING,T=h.errorOrDestroy;function S(){}function P(t,e,a){o=o||n(18),t=t||{},"boolean"!=typeof a&&(a=e instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=p(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new y;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,o){--e.pendingcb,n?(r.nextTick(o,i),r.nextTick(D,t,e),t._writableState.errorEmitted=!0,T(t,i)):(o(i),t._writableState.errorEmitted=!0,T(t,i),D(t,e))}(t,n,i,e,o);else{var a=x(n)||t.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||C(t,n),i?r.nextTick(O,t,n,a,o):O(t,n,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function w(t){var e=this instanceof(o=o||n(18));if(!e&&!c.call(w,this))return new w(t);this._writableState=new P(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function E(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new g("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function O(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),D(t,e)}function C(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=new Array(r),a=e.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)o[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;o.allBuffers=l,E(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,h=n.callback;if(E(t,e,!1,e.objectMode?1:u.length,u,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function M(t,e){t._final((function(n){e.pendingcb--,n&&T(t,n),e.prefinished=!0,t.emit("prefinish"),D(t,e)}))}function D(t,e){var n=x(e);if(n&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,r.nextTick(M,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return n}n(27)(w,s),P.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(P.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===w&&(t&&t._writableState instanceof P)}})):c=function(t){return t instanceof this},w.prototype.pipe=function(){T(this,new m)},w.prototype.write=function(t,e,n){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=t,l.isBuffer(i)||i instanceof u);return s&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof n&&(n=S),o.ending?function(t,e){var n=new A;T(t,n),r.nextTick(e,n)}(this,n):(s||function(t,e,n,i){var o;return null===n?o=new v:"string"==typeof n||e.objectMode||(o=new d("chunk",["string","Buffer"],n)),!o||(T(t,o),r.nextTick(i,o),!1)}(this,o,t,n))&&(o.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,n));return e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else E(t,e,!1,s,r,i,o);return u}(this,o,s,t,e,n)),a},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||C(this,t))},w.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new b(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(t,e,n){n(new _("_write()"))},w.prototype._writev=null,w.prototype.end=function(t,e,n){var i=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,n){e.ending=!0,D(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,i,n),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),w.prototype.destroy=h.destroy,w.prototype._undestroy=h.undestroy,w.prototype._destroy=function(t,e){e(t)}}).call(this,n(6),n(5))},function(t,e,n){"use strict";var r=n(101).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=c;var r=n(17).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,l=n(18);function u(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);l.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush((function(e,n){p(t,e,n)}))}function p(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}n(27)(c,l),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,n){n(new i("_transform()"))},c.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){l.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiplayerEventsEnum=void 0,function(t){t.playerLeft="playerLeft",t.playerJoin="playerJoin",t.addPlayer="addPlayer",t.addPlayerOpponent="addPlayerOpponent",t.updatePlayer="updatePlayer",t.updateGameServer="updateGameServer",t.setServer="setServer",t.updateGame="updateGame",t.setPlayerState="setPlayerState",t.initGame="initGame",t.signIn="signIn",t.onError="onError",t.startMatch="startMatch",t.disconnected="disconnected",t.connectionRestored="connectionRestored",t.connectionRecovering="connectionRecovering",t.connectionLost="connectionLost",t.peerRestored="peerRestored",t.peerRecovering="peerRecovering",t.peerConnecting="peerConnecting",t.peerClosed="peerClosed",t.peerConnected="peerConnected"}(e.MultiplayerEventsEnum||(e.MultiplayerEventsEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiplayerClientTraceEventsEnum=void 0,function(t){t[t.none=0]="none",t[t.updateGameReceive=2]="updateGameReceive",t[t.updateGameSend=4]="updateGameSend",t[t.gameActionReceive=8]="gameActionReceive",t[t.gameActionSend=16]="gameActionSend",t[t.playerSignalSend=32]="playerSignalSend",t[t.playerSignalReceive=64]="playerSignalReceive",t[t.playerStateChangedReceive=128]="playerStateChangedReceive",t[t.playerLeftReceive=256]="playerLeftReceive",t[t.playerJoinReceive=512]="playerJoinReceive"}(e.MultiplayerClientTraceEventsEnum||(e.MultiplayerClientTraceEventsEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalyticProviderEnum=void 0,function(t){t[t.GOOGLE=1]="GOOGLE",t[t.APP_INSIGHTS=2]="APP_INSIGHTS",t[t.CONSOLE=3]="CONSOLE",t[t.MOBILE_ANALYTICS=4]="MOBILE_ANALYTICS"}(e.AnalyticProviderEnum||(e.AnalyticProviderEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionBVH=void 0;var r=n(251),i=function(){function t(){this._hierarchy=null,this._bodies=[],this._dirty_branches=[]}return t.prototype.insert=function(t,e){if(void 0===e&&(e=!1),!e){var n=t._bvh;if(n&&n!==this)throw new Error("Body belongs to another collision system");t._bvh=this,this._bodies.push(t)}var i=t._polygon,o=t.x,a=t.y;i&&(t._dirty_coords||t.x!==t._x||t.y!==t._y||t.angle!==t._angle||t.scale_x!==t._scale_x||t.scale_y!==t._scale_y)&&t._calculateCoords();var s=t._bvh_padding,l=i?0:t.radius*t.scale,u=(i?t._min_x:o-l)-s,c=(i?t._min_y:a-l)-s,h=(i?t._max_x:o+l)+s,p=(i?t._max_y:a+l)+s;t._bvh_min_x=u,t._bvh_min_y=c,t._bvh_max_x=h,t._bvh_max_y=p;var f=this._hierarchy,d=0;if(f)for(;;){if(!f._bvh_branch){var _=f._bvh_parent,y=f._bvh_min_x,m=f._bvh_min_y,g=f._bvh_max_x,v=f._bvh_max_y,A=f._bvh_parent=t._bvh_parent=r.CollisionBVHBranch.getBranch();A._bvh_parent=_,A._bvh_left=f,A._bvh_right=t,A._bvh_sort=d++,A._bvh_min_x=u<y?u:y,A._bvh_min_y=c<m?c:m,A._bvh_max_x=h>g?h:g,A._bvh_max_y=p>v?p:v,_?_._bvh_left===f?_._bvh_left=A:_._bvh_right=A:this._hierarchy=A;break}var b=f._bvh_left,T=b._bvh_min_y,S=b._bvh_max_x,P=b._bvh_max_y,w=u<b._bvh_min_x?u:b._bvh_min_x,E=c<T?c:T,O=h>S?h:S,C=p>P?p:P,x=(O-w)*(C-E)-(S-b._bvh_min_x)*(P-T),M=f._bvh_right,D=M._bvh_min_x,I=M._bvh_min_y,R=M._bvh_max_x,B=M._bvh_max_y,N=u<D?u:D,L=c<I?c:I,k=h>R?h:R,F=p>B?p:B,j=(k-N)*(F-L)-(R-D)*(B-I);f._bvh_sort=d++,f._bvh_min_x=w<N?w:N,f._bvh_min_y=E<L?E:L,f._bvh_max_x=O>k?O:k,f._bvh_max_y=C>F?C:F,f=x<=j?b:M}else this._hierarchy=t},t.prototype.remove=function(t,e){if(void 0===e&&(e=!1),!e){var n=t._bvh;if(n&&n!==this)throw new Error("Body belongs to another collision system");t._bvh=null,this._bodies.splice(this._bodies.indexOf(t),1)}if(this._hierarchy!==t){var i=t._bvh_parent,o=i._bvh_parent,a=i._bvh_left,s=a===t?i._bvh_right:a;if(s._bvh_parent=o,s._bvh_branch&&(s._bvh_sort=i._bvh_sort),o){o._bvh_left===i?o._bvh_left=s:o._bvh_right=s;for(var l=o;l;){var u=l._bvh_left,c=u._bvh_min_x,h=u._bvh_min_y,p=u._bvh_max_x,f=u._bvh_max_y,d=l._bvh_right,_=d._bvh_min_x,y=d._bvh_min_y,m=d._bvh_max_x,g=d._bvh_max_y;l._bvh_min_x=c<_?c:_,l._bvh_min_y=h<y?h:y,l._bvh_max_x=p>m?p:m,l._bvh_max_y=f>g?f:g,l=l._bvh_parent}}else this._hierarchy=s;r.CollisionBVHBranch.releaseBranch(i)}else this._hierarchy=null},t.prototype.update=function(){for(var t=this._bodies,e=t.length,n=0;n<e;++n){var r=t[n],i=!1;if(i||r.padding===r._bvh_padding||(r._bvh_padding=r.padding,i=!0),!i){var o=r._polygon;o&&(r._dirty_coords||r.x!==r._x||r.y!==r._y||r.angle!==r._angle||r.scale_x!==r._scale_x||r.scale_y!==r._scale_y)&&r._calculateCoords();var a=r.x,s=r.y,l=o?0:r.radius*r.scale,u=o?r._min_x:a-l,c=o?r._min_y:s-l,h=o?r._max_x:a+l,p=o?r._max_y:s+l;i=u<r._bvh_min_x||c<r._bvh_min_y||h>r._bvh_max_x||p>r._bvh_max_y}i&&(this.remove(r,!0),this.insert(r,!0))}},t.prototype.potentials=function(t){var e=[],n=t._bvh_min_x,r=t._bvh_min_y,i=t._bvh_max_x,o=t._bvh_max_y,a=this._hierarchy,s=!0;if(!a||!a._bvh_branch)return e;for(;a;){if(s){s=!1;for(var l=a._bvh_branch?a._bvh_left:null;l&&l._bvh_max_x>=n&&l._bvh_max_y>=r&&l._bvh_min_x<=i&&l._bvh_min_y<=o;)l=(a=l)._bvh_branch?a._bvh_left:null}var u=a._bvh_branch,c=u?a._bvh_right:null;if(c&&c._bvh_max_x>n&&c._bvh_max_y>r&&c._bvh_min_x<i&&c._bvh_min_y<o)a=c,s=!0;else{u||a===t||e.push(a);var h=a._bvh_parent;if(!h)break;for(;h&&h._bvh_right===a;)h=(a=h)._bvh_parent;a=h}}return e},t.prototype.draw=function(t){for(var e=this._bodies,n=e.length,r=0;r<n;++r)e[r].draw(t)},t.prototype.drawBVH=function(t){for(var e=this._hierarchy,n=!0;e;){if(n){n=!1;for(var r=e._bvh_branch?e._bvh_left:null;r;)r=(e=r)._bvh_branch?e._bvh_left:null}var i=e._bvh_branch,o=e._bvh_min_x,a=e._bvh_min_y,s=e._bvh_max_x,l=e._bvh_max_y,u=i?e._bvh_right:null;if(t.moveTo(o,a),t.lineTo(s,a),t.lineTo(s,l),t.lineTo(o,l),t.lineTo(o,a),u)e=u,n=!0;else{var c=e._bvh_parent;if(!c)break;for(;c&&c._bvh_right===e;)c=(e=c)._bvh_parent;e=c}}},t}();e.CollisionBVH=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionCircle=void 0;var o=function(t){function e(e,n,r,i,o){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===o&&(o=0);var a=t.call(this,e,n,o)||this;return a.radius=r,a.scale=i,a}return i(e,t),e.prototype.draw=function(t){var e=this.x,n=this.y,r=this.radius*this.scale;t.moveTo(e+r,n),t.arc(e,n,r,0,2*Math.PI)},e}(n(66).CollisionBody);e.CollisionCircle=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionPoint=void 0;var o=function(t){function e(e,n,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0);var i=t.call(this,e,n,[[0,0]],0,1,1,r)||this;return i._point=!0,i}return i(e,t),e}(n(69).CollisionPolygon);e.CollisionPoint=o},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0,n(117).polyfill(),n(118),n(119),n(120);var o=n(0),a=n(19),s=n(28),l=n(126),u=n(12),c=n(22),h=n(44),p=n(43),f=n(42),d=n(40),_=n(55),y=n(183),m=n(56),g=n(57),v=n(41),A=n(89),b=n(16),T=n(185),S=n(186),P=function(){function t(t){var e=this,n=document.createElement("div");n.style.height="100%",n.style.overflow="hidden";if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=["\n %c %c %c HTML5 Game Engine v 2.0.5 %c ʕ•ᴥ•ʔ %c https://DenisHussar.com %c %c \n","background: #676767; padding:5px 0;","background: #676767; padding:5px 0;","color: #676767; background: #83cadc; padding:5px 0;","background: #676767; padding:5px 0;","color: #676767; background: #83cadc; padding:5px 0;","background: #676767; padding:5px 0;","background: #676767; padding:5px 0;"];window.console.log.apply(console,r)}else window.console&&window.console.log("HTML5 Game Engine v 2.0.5. https://DenisHussar.com");o.Container.get(h.RootHtml).htmlDivElement=n,o.Container.get(f.DevicePixelRatio).value=t.devicePixelRatio||window.devicePixelRatio;var i=o.Container.get(d.GameResources);i.root=t.assetsRoot,i.options=t.dragonBones||{},(t.elementId?t.elementId instanceof HTMLElement?t.elementId:document.getElementById(t.elementId):document.getElementById("gamePlace")).appendChild(n);var T=o.Container.get(p.PIXIRenderer);T.initialize({noWebGL:t.noWebGL,backgroundColor:t.backgroundColor,clearBeforeRender:t.clearBeforeRender,transparent:t.transparent,fps:t.fps,showStats:t.showStats,disableContextMenu:t.disableContextMenu,antialias:t.antialias,roundPixels:t.roundPixels,showSplashScreen:t.showSplashScreen}),this._arenaApi();var S=o.Container.get(b.GameApiBase),P=S.absoluteURL(""),w=o.Container.get(m.GamepadsManager);_.isGamepadSupported()&&w.init(y.gameControl),o.Container.get(g.GameModulesFactory).init(t.modules);var E=o.Container.get(l.Debug);E.version=t.version,E.gameId=t.gameId,this._addFulscreenListeners(T.renderer.view),o.Container.get(A.FullScreenManager).init(this._screenfull,T.renderer.view),E.init(window,{htmlElement:n,gameRun:function(){o.Container.get(s.GameStorageManager).setGameId(t.gameId);var n=o.Container.get(v.AnalyticResources);n.arenaName=S.getArenaName(),n.gameVersion=t.version,n.testGroup="",n.providers=t.analytic?t.analytic.providers:[];var r=o.Container.get(a.SoundManager);r.loadData(t.sounds,P+t.assetsRoot,t.soundStorageKey||"sound-settings"),S.setSoundManager(r);for(var i=o.Container.get(t.main,t.options),l=t.orientations||[],h=u.ScreenOrientationEnum.PortraitAndLandscape,p=0;p<l.length;p++)l[p].orientationEnvironment&c.Environment.type&&(h=l[p].orientation);return i.orientation=h,i.create().then((function(){e._addWindowListeners(i,T.renderer.view)}),(function(t){})),i.version=t.version,i.gameId=t.gameId,i}}),E.ready=!0}return t.prototype._getAbsoluteDomainUrl=function(){return window&&"location"in window&&"protocol"in window.location&&"host"in window.location?window.location.protocol+"//"+window.location.host:null},t.prototype._arenaApi=function(){window.__invokeMobileWrappingAction||"file://"==this._getAbsoluteDomainUrl()?o.Container.bind(b.GameApiBase).to(T.MobileApi).scope(o.Scope.Singleton):(o.Container.bind(b.GameApiBase).to(S.GameApi).scope(o.Scope.Singleton),window.__invokeMobileWrappingAction=function(t){})},t.prototype._addFulscreenListeners=function(t){var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,o={};r<i;r++)if((t=n[r])&&t[1]in e){for(r=0;r<t.length;r++)o[n[0][r]]=t[r];return o}return!1}(),o={change:n.fullscreenchange,error:n.fullscreenerror},a={request:function(t){return r(this,void 0,void 0,(function(){return i(this,(function(r){return[2,new Promise(function(r,i){var o=function(){this.off("change",o),r()}.bind(this);this.on("change",o);var a=(t=t||e.documentElement)[n.requestFullscreen]();a instanceof Promise&&a.then(o).catch(i)}.bind(this))]}))}))},exit:function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2,new Promise(function(t,r){if(this.isFullscreen){var i=function(){this.off("change",i),t()}.bind(this);this.on("change",i);var o=e[n.exitFullscreen]();o instanceof Promise&&o.then(i).catch(r)}else t()}.bind(this))]}))}))},toggle:function(t){return this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,n){var r=o[t];r&&e.addEventListener(r,n,!1)},off:function(t,n){var r=o[t];r&&e.removeEventListener(r,n,!1)},raw:n};Object.defineProperties(a,{isFullscreen:{get:function(){return Boolean(e[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(e[n.fullscreenEnabled])}}}),this._screenfull=a},t.prototype._addWindowListeners=function(t,e){var n="hidden";void 0!==document.mozHidden?(n="mozHidden",document.addEventListener("mozvisibilitychange",i)):void 0!==document.webkitHidden?(n="webkitHidden",document.addEventListener("webkitvisibilitychange",i)):void 0!==document.msHidden?(n="msHidden",document.addEventListener("msvisibilitychange",i)):void 0!==document.hidden?document.addEventListener("visibilitychange",i):"onfocusin"in document&&(document.onfocusin=document.onfocusout=i),window.onpageshow=window.onpagehide=window.onfocus=window.onblur=i;var r=!0;function i(e){var i="visible",o="hidden",a={focus:i,focusin:i,pageshow:i,blur:o,focusout:o,pagehide:o};(e=e||window.event).type in a?"hidden"==a[e.type]?(r=!1,t.focus(!1)):(r=!0,t.focus(!0),t.rendererResize(!0),window.focus()):document[n]?(r=!1,t.focus(!1)):(r=!0,t.focus(!0),t.rendererResize(!0),window.focus())}void 0!==document[n]&&i({type:document[n]?"blur":"focus"}),e.addEventListener("touchstart",(function(){r||window.focus()})),e.addEventListener("click",(function(){r||window.focus()})),window.addEventListener("deviceOrientation",(function(){r=!0,t.focus(!0),t.rendererResize()}))},t}();e.Game=P},function(t,e,n){(function(e,n){var r;r=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,o=void 0,a=void 0,s=function(t,e){d[i]=t,d[i+1]=e,2===(i+=2)&&(a?a(_):A())},l="undefined"!=typeof window?window:void 0,u=l||{},c=u.MutationObserver||u.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(_,1)}}var d=new Array(1e3);function _(){for(var t=0;t<i;t+=2)(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0;i=0}var y,m,g,v,A=void 0;function b(t,e){var n=this,r=new this.constructor(P);void 0===r[S]&&B(r);var i=n._state;if(i){var o=arguments[i-1];s((function(){return I(i,r,o,n._result)}))}else M(n,r,t,e);return r}function T(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(P);return E(e,t),e}h?A=function(){return e.nextTick(_)}:c?(m=0,g=new c(_),v=document.createTextNode(""),g.observe(v,{characterData:!0}),A=function(){v.data=m=++m%2}):p?((y=new MessageChannel).port1.onmessage=_,A=function(){return y.port2.postMessage(0)}):A=void 0===l?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(_)}:f()}catch(t){return f()}}():f();var S=Math.random().toString(36).substring(2);function P(){}function w(e,n,r){n.constructor===e.constructor&&r===b&&n.constructor.resolve===T?function(t,e){1===e._state?C(t,e._result):2===e._state?x(t,e._result):M(e,void 0,(function(e){return E(t,e)}),(function(e){return x(t,e)}))}(e,n):void 0===r?C(e,n):t(r)?function(t,e,n){s((function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,(function(n){r||(r=!0,e!==n?E(t,n):C(t,n))}),(function(e){r||(r=!0,x(t,e))}),t._label);!r&&i&&(r=!0,x(t,i))}),t)}(e,n,r):C(e,n)}function E(t,e){if(t===e)x(t,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(r=e),null===r||"object"!==i&&"function"!==i)C(t,e);else{var n=void 0;try{n=e.then}catch(e){return void x(t,e)}w(t,e,n)}var r,i}function O(t){t._onerror&&t._onerror(t._result),D(t)}function C(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&s(D,t))}function x(t,e){void 0===t._state&&(t._state=2,t._result=e,s(O,t))}function M(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+1]=n,i[o+2]=r,0===o&&t._state&&s(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,a=0;a<e.length;a+=3)r=e[a],i=e[a+n],r?I(n,r,i,o):i(o);t._subscribers.length=0}}function I(e,n,r,i){var o=t(r),a=void 0,s=void 0,l=!0;if(o){try{a=r(i)}catch(t){l=!1,s=t}if(n===a)return void x(n,new TypeError("A promises callback cannot return that same promise."))}else a=i;void 0!==n._state||(o&&l?E(n,a):!1===l?x(n,s):1===e?C(n,a):2===e&&x(n,a))}var R=0;function B(t){t[S]=R++,t._state=void 0,t._result=void 0,t._subscribers=[]}var N=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(P),this.promise[S]||B(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&C(this.promise,this._result))):x(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===T){var i=void 0,o=void 0,a=!1;try{i=t.then}catch(t){a=!0,o=t}if(i===b&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===L){var s=new n(P);a?x(s,o):w(s,t,i),this._willSettleAt(s,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===t?x(r,n):this._result[e]=n),0===this._remaining&&C(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;M(t,void 0,(function(t){return n._settledAt(1,e,t)}),(function(t){return n._settledAt(2,e,t)}))},t}(),L=function(){function e(t){this[S]=R++,this._result=this._state=void 0,this._subscribers=[],P!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){E(t,e)}),(function(e){x(t,e)}))}catch(e){x(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return L.prototype.then=b,L.all=function(t){return new N(this,t).promise},L.race=function(t){var e=this;return r(t)?new e((function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},L.resolve=T,L.reject=function(t){var e=new this(P);return x(e,t),e},L._setScheduler=function(t){a=t},L._setAsap=function(t){s=t},L._asap=s,L.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=L},L.Promise=L,L},t.exports=r()}).call(this,n(5),n(6))},function(t,e){String.prototype.startsWith||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),e={}.toString,n=function(t){if(null==this)throw TypeError();var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var r=n.length,i=String(t),o=i.length,a=arguments.length>1?arguments[1]:void 0,s=a?Number(a):0;s!=s&&(s=0);var l=Math.min(Math.max(s,0),r);if(o+l>r)return!1;for(var u=-1;++u<o;)if(n.charCodeAt(l+u)!=i.charCodeAt(u))return!1;return!0};t?t(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}()},function(t,e){String.prototype.endsWith||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),e={}.toString,n=function(t){if(null==this)throw TypeError();var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var r=n.length,i=String(t),o=i.length,a=r;if(arguments.length>1){var s=arguments[1];void 0!==s&&(a=s?Number(s):0)!=a&&(a=0)}var l=Math.min(Math.max(a,0),r),u=l-o;if(u<0)return!1;for(var c=-1;++c<o;)if(n.charCodeAt(u+c)!=i.charCodeAt(c))return!1;return!0};t?t(String.prototype,"endsWith",{value:n,configurable:!0,writable:!0}):String.prototype.endsWith=n}()},function(t,e,n){!function(e){"use strict";if(e.__disableNativeFetch||!e.fetch){u.prototype.append=function(t,e){t=s(t),e=l(e);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(e)},u.prototype.delete=function(t){delete this.map[s(t)]},u.prototype.get=function(t){var e=this.map[s(t)];return e?e[0]:null},u.prototype.getAll=function(t){return this.map[s(t)]||[]},u.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},u.prototype.set=function(t,e){this.map[s(t)]=[l(e)]},u.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach((function(n){this.map[n].forEach((function(r){t.call(e,r,n,this)}),this)}),this)};var n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in e,i="ArrayBuffer"in e,o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},f.call(d.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];m.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},e.Headers=u,e.Request=d,e.Response=m,e.fetch=function(t,e){return new Promise((function(r,i){var o;o=d.prototype.isPrototypeOf(t)&&!e?t:new d(t,e);var a=new XMLHttpRequest;var s=!1;function l(){if(4===a.readyState){var t=1223===a.status?204:a.status;if(t<100||t>599){if(s)return;return s=!0,void i(new TypeError("Network request failed"))}var e={status:t,statusText:a.statusText,headers:y(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},n="response"in a?a.response:a.responseText;s||(s=!0,r(new m(n,e)))}}a.onreadystatechange=l,a.onload=l,a.onerror=function(){s||(s=!0,i(new TypeError("Network request failed")))},a.open(o.method,o.url,!0);try{"include"===o.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in a&&n&&(a.responseType="blob"),o.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},e.fetch.polyfill=!0,t.exports&&(t.exports=e.fetch)}function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){this.map={},t instanceof u?t.forEach((function(t,e){this.append(e,t)}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function c(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function p(t){var e=new FileReader;return e.readAsArrayBuffer(t),h(e)}function f(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(n&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!i||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},n?(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(p)},this.text=function(){var t,e,n,r,i,o,a,s=c(this);if(s)return s;if(this._bodyBlob)return t=this._bodyBlob,e=this._options,n=new FileReader,r=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",i=/charset\=[0-9a-zA-Z\-\_]*;?/,o=t.type.match(i)||r.match(i),a=[t],o&&a.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,a),h(n);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=c(this);return t||Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(t,e){var n,r,i=(e=e||{}).body;if(d.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),o.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,e)}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function y(t){var e=new u;return t.getAllResponseHeaders().trim().split("\n").forEach((function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)})),e}function m(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof u?e.headers:new u(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:this)},function(t,e,n){(function(t,e){var n;!function(n){!function(r){var i="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=a(n);function a(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===i.Reflect?i.Reflect=n:o=a(i.Reflect,o),function(e){var n=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,i=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,l=!a&&!s,u={create:a?function(){return R(Object.create(null))}:s?function(){return R({__proto__:null})}:function(){return R({})},has:l?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:l?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),h="object"==typeof t&&t.env&&"true"===t.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,i)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function i(t,e){return e}function a(t,e){return[t,e]}}():Map,f=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new p}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}():Set,d=new(h||"function"!=typeof WeakMap?function(){var t=u.create(),e=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var e;do{e="@@WeakMap@@"+a()}while(u.has(t,e));return t[e]=!0,e}function i(t,r){if(!n.call(t,e)){if(!r)return;Object.defineProperty(t,e,{value:u.create()})}return t[e]}function o(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function _(t,e,n){var r=d.get(t);if(b(r)){if(!n)return;r=new p,d.set(t,r)}var i=r.get(e);if(b(i)){if(!n)return;i=new p,r.set(e,i)}return i}function y(t,e,n){var r=_(e,n,!1);return!b(r)&&!!r.has(t)}function m(t,e,n){var r=_(e,n,!1);if(!b(r))return r.get(t)}function g(t,e,n,r){_(n,r,!0).set(t,e)}function v(t,e){var n=[],r=_(t,e,!1);if(b(r))return n;for(var i=function(t){var e=x(t,o);if(!O(e))throw new TypeError;var n=e.call(t);if(!S(n))throw new TypeError;return n}(r.keys()),a=0;;){var s=M(i);if(!s)return n.length=a,n;var l=s.value;try{n[a]=l}catch(t){try{D(i)}finally{throw t}}a++}}function A(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function b(t){return void 0===t}function T(t){return null===t}function S(t){return"object"==typeof t?null!==t:"function"==typeof t}function P(t,e){switch(A(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=x(t,i);if(void 0!==r){var o=r.call(t,n);if(S(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(O(n))if(!S(i=n.call(t)))return i;if(O(r=t.valueOf))if(!S(i=r.call(t)))return i}else{var r;if(O(r=t.valueOf))if(!S(i=r.call(t)))return i;var i,o=t.toString;if(O(o))if(!S(i=o.call(t)))return i}throw new TypeError}(t,"default"===n?"number":n)}function w(t){var e=P(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function E(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function O(t){return"function"==typeof t}function C(t){return"function"==typeof t}function x(t,e){var n=t[e];if(null!=n){if(!O(n))throw new TypeError;return n}}function M(t){var e=t.next();return!e.done&&e}function D(t){var e=t.return;e&&e.call(t)}function I(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i||i===t?e:i}function R(t){return t.__=void 0,delete t.__,t}e("decorate",(function(t,e,n,r){if(b(n)){if(!E(t))throw new TypeError;if(!C(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!b(r)&&!T(r)){if(!C(r))throw new TypeError;e=r}}return e}(t,e)}if(!E(t))throw new TypeError;if(!S(e))throw new TypeError;if(!S(r)&&!b(r)&&!T(r))throw new TypeError;return T(r)&&(r=void 0),function(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,n,r);if(!b(o)&&!T(o)){if(!S(o))throw new TypeError;r=o}}return r}(t,e,n=w(n),r)})),e("metadata",(function(t,e){return function(n,r){if(!S(n))throw new TypeError;if(!b(r)&&!function(t){switch(A(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;g(t,e,n,r)}})),e("defineMetadata",(function(t,e,n,r){if(!S(n))throw new TypeError;return b(r)||(r=w(r)),g(t,e,n,r)})),e("hasMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return b(n)||(n=w(n)),function t(e,n,r){if(y(e,n,r))return!0;var i=I(n);return!T(i)&&t(e,i,r)}(t,e,n)})),e("hasOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return b(n)||(n=w(n)),y(t,e,n)})),e("getMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return b(n)||(n=w(n)),function t(e,n,r){if(y(e,n,r))return m(e,n,r);var i=I(n);return T(i)?void 0:t(e,i,r)}(t,e,n)})),e("getOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return b(n)||(n=w(n)),m(t,e,n)})),e("getMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return b(e)||(e=w(e)),function t(e,n){var r=v(e,n),i=I(e);if(null===i)return r;var o=t(i,n);if(o.length<=0)return r;if(r.length<=0)return o;for(var a=new f,s=[],l=0,u=r;l<u.length;l++){var c=u[l];a.has(c)||(a.add(c),s.push(c))}for(var h=0,p=o;h<p.length;h++){c=p[h];a.has(c)||(a.add(c),s.push(c))}return s}(t,e)})),e("getOwnMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return b(e)||(e=w(e)),v(t,e)})),e("deleteMetadata",(function(t,e,n){if(!S(e))throw new TypeError;b(n)||(n=w(n));var r=_(e,n,!1);if(b(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=d.get(e);return i.delete(n),i.size>0||d.delete(e),!0}))}(o)}()}(n||(n={}))}).call(this,n(5),n(6))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SoundController=void 0;var r=n(123),i=function(){function t(){this._masterVolume=1}return t.prototype.load=function(t){return new r.Howl({src:[t]})},t.prototype.updateMasterVolume=function(){this.setMasterVolume(this._masterVolume)},t.prototype.setMasterVolume=function(t){this._masterVolume=t,r.Howler.volume(t)},t.prototype.getMasterVolume=function(){return r.Howler.volume()},t}();e.SoundController=i},function(t,e,n){(function(n){var r;!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var t=this||o;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||o;if(t=parseFloat(t),e.ctx||f(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,o.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=e._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*t)}return e}return e._volume},mute:function(t){var e=this||o;e.ctx||f(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,o.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=e._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!t||a._muted)}return e},stop:function(){for(var t=this||o,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||o,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,f()),t},codecs:function(t){return(this||o)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||o;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(i||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||o;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(n){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,t._releaseHtml5Audio(r)}catch(n){t.noAudio=!0;break}for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var o=t._howls[i]._getSoundIds(),a=0;a<o.length;a++){var s=t._howls[i]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}t._autoResume();var l=t.ctx.createBufferSource();l.buffer=t._scratchBuffer,l.connect(t.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),l.onended=function(){l.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0);for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),t}},_obtainHtml5Audio:function(){var t=this||o;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||o;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&o.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&o.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var o=new i,a=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return o.ctx||f(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=o.usingWebAudio&&!e._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var n,r;if(this._format&&this._format[e])n=this._format[e];else{if("string"!=typeof(r=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&u(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var i=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,r=n._sounds[a]._id);1===i?t=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!t&&(t=s._sprite||"__default"),"loaded"!==n._state){s._sprite=t,s._ended=!1;var l=s._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(r&&!s._paused)return e||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var u=Math.max(0,s._seek>0?s._seek:n._sprite[t][0]/1e3),c=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-u),h=1e3*c/Math.abs(s._rate),p=n._sprite[t][0]/1e3,f=(n._sprite[t][0]+n._sprite[t][1])/1e3;s._sprite=t,s._ended=!1;var d=function(){s._paused=!1,s._seek=u,s._start=p,s._stop=f,s._loop=!(!s._loop&&!n._sprite[t][2])};if(!(u>=f)){var _=s._node;if(n._webAudio){var y=function(){n._playLock=!1,d(),n._refreshBuffer(s);var t=s._muted||n._muted?0:s._volume;_.gain.setValueAtTime(t,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===_.bufferSource.start?s._loop?_.bufferSource.noteGrainOn(0,u,86400):_.bufferSource.noteGrainOn(0,u,c):s._loop?_.bufferSource.start(0,u,86400):_.bufferSource.start(0,u,c),h!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h)),e||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===o.state&&"interrupted"!==o.ctx.state?y():(n._playLock=!0,n.once("resume",y),n._clearTimer(s._id))}else{var m=function(){_.currentTime=u,_.muted=s._muted||n._muted||o._muted||_.muted,_.volume=s._volume*o.volume(),_.playbackRate=s._rate;try{var r=_.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,d(),r.then((function(){n._playLock=!1,_._unlocked=!0,e||(n._emit("play",s._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):e||(n._playLock=!1,d(),n._emit("play",s._id),n._loadQueue()),_.playbackRate=s._rate,_.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h):(n._endTimers[s._id]=function(){n._ended(s),_.removeEventListener("ended",n._endTimers[s._id],!1)},_.addEventListener("ended",n._endTimers[s._id],!1))}catch(t){n._emit("playerror",s._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===_.src&&(_.src=n._src,_.load());var g=window&&window.ejecta||!_.readyState&&o._navigator.isCocoonJS;if(_.readyState>=3||g)m();else{n._playLock=!0;var v=function(){m(),_.removeEventListener(o._canPlayEvent,v,!1)};_.addEventListener(o._canPlayEvent,v,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),r=0;r<n.length;r++){e._clearTimer(n[r]);var i=e._soundById(n[r]);if(i&&!i._paused&&(i._seek=e.seek(n[r]),i._rateSeek=0,i._paused=!0,e._stopFade(n[r]),i._node))if(e._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),e._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||e._emit("pause",i?i._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),e||n._emit("stop",o._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=t,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(t?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||t),n._emit("mute",a._id))}return n},volume:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else i.length>=2&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(n=e?r._soundById(e):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var l=0;l<e.length;l++)(n=r._soundById(e[l]))&&(n._volume=t,i[2]||r._stopFade(e[l]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*o.volume()),r._emit("volume",n._id));return r},fade:function(t,e,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(t,e,n,r)}}),i;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),i.volume(t,r);for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var l=i._soundById(a[s]);if(l){if(r||i._stopFade(a[s]),i._webAudio&&!l._muted){var u=o.ctx.currentTime,c=u+n/1e3;l._volume=t,l._node.gain.setValueAtTime(t,u),l._node.gain.linearRampToValueAtTime(e,c)}i._startFadeInterval(l,t,e,n,a[s],void 0===r)}}return i},_startFadeInterval:function(t,e,n,r,i,o){var a=this,s=e,l=n-e,u=Math.abs(l/.01),c=Math.max(4,u>0?r/u:r),h=Date.now();t._fadeTo=n,t._interval=setInterval((function(){var i=(Date.now()-h)/r;h=Date.now(),s+=l*i,s=Math.round(100*s)/100,s=l<0?Math.max(n,s):Math.min(n,s),a._webAudio?t._volume=s:a.volume(s,t._id,!0),o&&(a._volume=s),(n<e&&s<=n||n>e&&s>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(n,t._id),a._emit("fade",t._id))}),c)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;t=i[0],r._loop=t}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var o=r._getSoundIds(e),a=0;a<o.length;a++)(n=r._soundById(o[a]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var t,e,n,r=this,i=arguments;if(0===i.length)e=r._sounds[0]._id;else if(1===i.length){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if("number"!=typeof t)return(n=r._soundById(e))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var l=0;l<e.length;l++)if(n=r._soundById(e[l])){r.playing(e[l])&&(n._rateSeek=r.seek(e[l]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart),n._rate=t,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,o.ctx.currentTime):n._node&&(n._node.playbackRate=t);var u=r.seek(e[l]),c=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-u,h=1e3*c/Math.abs(n._rate);!r._endTimers[e[l]]&&n._paused||(r._clearTimer(e[l]),r._endTimers[e[l]]=setTimeout(r._ended.bind(r,n),h)),r._emit("rate",n._id)}return r},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var i=n._getSoundIds(),a=i.indexOf(r[0]);a>=0?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return n;if("number"==typeof t&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var s=n._soundById(e);if(s){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var l=n.playing(e)?o.ctx.currentTime-s._playStart:0,u=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(u+l*Math.abs(s._rate))}return s._node.currentTime}var c=n.playing(e);c&&n.pause(e,!0),s._seek=t,s._ended=!1,n._clearTimer(e),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=t);var h=function(){n._emit("seek",e),c&&n.play(e,!0)};if(c&&!n._webAudio){var p=function(){n._playLock?setTimeout(p,0):h()};setTimeout(p,0)}else h()}return n},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this._duration,n=this._soundById(t);return n&&(e=this._sprite[n._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++)e[n]._paused||t.stop(e[n]._id),t._webAudio||(t._clearSound(e[n]._node),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(o._canPlayEvent,e[n]._loadFn,!1),e[n]._node.removeEventListener("ended",e[n]._endFn,!1),o._releaseHtml5Audio(e[n]._node)),delete e[n]._node,t._clearTimer(e[n]._id);var r=o._howls.indexOf(t);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===t._src||t._src.indexOf(o._howls[n]._src)>=0){i=!1;break}return l&&i&&delete l[t._src],o.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,r){var i=this["_on"+t];return"function"==typeof e&&i.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),this},off:function(t,e,n){var r=this["_on"+t],i=0;if("number"==typeof e&&(n=e,e=null),e||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(e===r[i].fn&&o||!e&&o){r.splice(i,1);break}}else if(t)this["_on"+t]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[])}return this},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var r=this["_on"+t],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(t,r[i].fn,r[i].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var n=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&n&&this.stop(t._id,!0).play(t._id),this._webAudio&&n){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),r)}return this._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),o._autoSuspend()),this._webAudio||n||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new s(this)},_drain:function(){var t=this._pool,e=0,n=0;if(!(this._sounds.length<t)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&e++;for(n=this._sounds.length-1;n>=0;n--){if(e<=t)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=l[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,o.ctx.currentTime),this},_cleanBuffer:function(t){var e=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=o._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(t){this._parent=t,this.init()};s.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=o._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(e,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=t._src,this._node.preload=!0===t._preload?"auto":t._preload,this._node.volume=e*o.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this._parent;t._duration===1/0&&(t._duration=Math.ceil(10*this._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var l={},u=function(t){var e=t._src;if(l[e])return t._duration=l[e].duration,void p(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);h(r.buffer,t)}else{var o=new XMLHttpRequest;o.open(t._xhr.method,e,!0),o.withCredentials=t._xhr.withCredentials,o.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){o.setRequestHeader(e,t._xhr.headers[e])})),o.onload=function(){var e=(o.status+"")[0];"0"===e||"2"===e||"3"===e?h(o.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete l[e],t.load())},c(o)}},c=function(t){try{t.send()}catch(e){t.onerror()}},h=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(l[e._src]=t,p(e,t)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(t).then(r).catch(n):o.ctx.decodeAudioData(t,r,n)},p=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},f=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(t){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),e=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!r&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(r=function(){return{Howler:o,Howl:a}}.apply(e,[]))||(t.exports=r),e.Howler=o,e.Howl=a,void 0!==n?(n.HowlerGlobal=i,n.Howler=o,n.Howl=a,n.Sound=s):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=o,window.Howl=a,window.Sound=s)}(),function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,n){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof t?this._pos:(this._pos=[t,e,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof t?a:(this._orientation=[t,e,n,r,i,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,n,r,i,o),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,i),"spatial"===i?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof t)return o._pos;o._pos=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,n,r],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setPosition(t,n,r)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,n,r],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),e(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,r)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(r=i._soundById(parseInt(o[0],10)))?r._pannerAttr:i._pannerAttr;t=o[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:i._panningModel})}else 2===o.length&&(t=o[0],n=parseInt(o[1],10));for(var a=i._getSoundIds(n),s=0;s<a.length;s++)if(r=i._soundById(a[s])){var l=r._pannerAttr;l={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:l.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:l.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:l.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:l.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:l.panningModel};var u=r._panner;u?(u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),e(r,"spatial"))}return i},Sound.prototype.init=function(t){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,n(6))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SoundData=void 0;var r=function(){this.soundOn=!0,this.musicOn=!0};e.SoundData=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Base64Helper=void 0;var r=function(){function t(){}return t.encode=function(e){var n,r,i,o,a,s,l,u="",c=0;for(e=t._utf8_encode(e);c<e.length;)o=(n=e.charCodeAt(c++))>>2,a=(3&n)<<4|(r=e.charCodeAt(c++))>>4,s=(15&r)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(r)?s=l=64:isNaN(i)&&(l=64),u=u+t._keyStr.charAt(o)+t._keyStr.charAt(a)+t._keyStr.charAt(s)+t._keyStr.charAt(l);return u},t.decode=function(t){var e,n,r,i,o,a,s="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)e=this._keyStr.indexOf(t.charAt(l++))<<2|(i=this._keyStr.indexOf(t.charAt(l++)))>>4,n=(15&i)<<4|(o=this._keyStr.indexOf(t.charAt(l++)))>>2,r=(3&o)<<6|(a=this._keyStr.indexOf(t.charAt(l++))),s+=String.fromCharCode(e),64!=o&&(s+=String.fromCharCode(n)),64!=a&&(s+=String.fromCharCode(r));return s=this._utf8_decode(s)},t._utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},t._utf8_decode=function(t){for(var e="",n=0,r=0,i=0,o=0;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(i=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&i),n+=2):(i=t.charCodeAt(n+1),o=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),n+=3);return e},t._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t}();e.Base64Helper=r},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.Debug=e.DebugEmptyLogger=e.AutotestLogger=void 0;var a=n(1),s=n(29),l=n(0),u=n(31),c=n(54),h=n(49),p=n(28),f=n(19),d=n(42),_=n(40),y=n(43),m=n(9),g=function(){function t(){this._current={viewName:null,messageType:null,message:null,index:0}}return t.addMessageToIgnoreList=function(e,n,r){t._ignoreMessageList.add({viewName:e,messageType:n,message:r})},t.prototype.log=function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];if(t._logIndex++,!t._ignoreMessageList.any((function(t){return!(t.viewName&&t.viewName!=e||t.messageType&&t.messageType!=n||t.message&&t.message!=r)}))){var a="background: #222; color: #fff";"AnimationsEvent"==n?a="background: #222; color: #5f5":"ModelWatchEvent"==n?a="background: #222; color: #99f":"SpritesEvent"==n?a="background: #222; color: #FFD800":"LoadCompleted"==n?a="background: #222; color: #4CB6FF":"LoadSound"==n&&(a="background: #222; color: #ffaa21"),this._current.viewName==e&&this._current.messageType==n&&this._current.message==r?this._current.optionalParams=i:(this._current.viewName&&t._logIndex>this._current.index+1&&console.log(t._logIndex+" "+this._current.viewName+"->"+this._current.messageType+": ",this._current.message,this._current.optionalParams),this._current.viewName=e,this._current.messageType=n,this._current.message=r,this._current.index=t._logIndex,this._current.optionalParams=i,console.log("%c "+t._logIndex+" "+e+"->"+n+": ",a,r,i)),t._logList.add({index:t._logIndex,viewName:e,messageType:n,message:r})}},t.prototype.warn=function(t,e,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];console.warn(t,e+"->"+n+": ",r,i)},t.prototype.error=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i]},t._logIndex=0,t._logList=new a.List,t._ignoreMessageList=new a.List,t}();e.AutotestLogger=g;var v=function(){function t(){}return t.prototype.log=function(t,e,n){for(var r,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];(r=this._innerLogger).log.apply(r,o([t,e,n],i))},t.prototype.error=function(t,e,n){for(var r,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];(r=this._innerLogger).error.apply(r,o([t,e,n],i))},t.prototype.warn=function(t,e,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];console.warn(t,e+"->"+n+": ",r,i)},t.prototype.setInnerLogger=function(t){this._innerLogger=t},t=r([l.Singleton],t)}();e.DebugEmptyLogger=v;var A=function(){function t(){this.enabled=!1,this.ready=!1,this.container=l.Container}return Object.defineProperty(t.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resourcesLoader",{get:function(){return l.Container.get(u.ResourcesLoader)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"devicePixelRatio",{get:function(){return l.Container.get(d.DevicePixelRatio)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resourcesRoot",{get:function(){return l.Container.get(_.GameResources)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return l.Container.get(y.PIXIRenderer)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyboardManager",{get:function(){return l.Container.get(c.KeyboardManager)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"random",{get:function(){return l.Container.get(h.GameRandom)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageManager",{get:function(){return l.Container.get(p.GameStorageManager)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"soundManager",{get:function(){return l.Container.get(f.SoundManager)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return l.Container.get(m.BaseControllerEmptyLogger)},enumerable:!1,configurable:!0}),t.addMessageToIgnoreList=function(t,e,n){g.addMessageToIgnoreList(t,e,n)},t.prototype.init=function(t,e){this._gameRun=e.gameRun;var n=function(t,e){e||(e=location.href),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==n?null:n[1]}("dh-game-debug");n&&l.Container.bind(m.BaseControllerEmptyLogger).to(g).scope(l.Scope.Singleton),this.play(),n&&this.play()},t.prototype.bindStorageManager=function(t){l.Container.bind(p.GameStorageManager).to(t).scope(l.Scope.Singleton)},t.prototype.setLogger=function(t){try{l.Container.bind(m.BaseControllerEmptyLogger).to(v).scope(l.Scope.Singleton),l.Container.get(m.BaseControllerEmptyLogger).setInnerLogger(t)}catch(t){}},t.prototype.blockSpritesEvents=function(t){s.SpritesEventItem.blockSpritesEvents=t},t.prototype.play=function(){this._gameRun?(this.$root=this._gameRun(),this._gameRun=null):this.$root.play()},t.prototype.pause=function(){this.$root.pause()},t.instancesList=[],t.pages=[],t=r([l.Singleton,i("design:paramtypes",[])],t)}();e.Debug=A},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PixiArmatureDisplay=void 0;var o=n(34),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.debugDraw=!1,e._debugDraw=!1,e._armature=null,e._debugDrawer=null,e}return i(e,t),e.prototype.dbInit=function(t){this._armature=t},e.prototype.dbClear=function(){null!==this._debugDrawer&&this._debugDrawer.destroy(!0),this._armature=null,this._debugDrawer=null,t.prototype.destroy.call(this)},e.prototype.dbUpdate=function(){var t=o.DragonBones.debugDraw||this.debugDraw;if(t||this._debugDraw)if(this._debugDraw=t,this._debugDraw){if(null===this._debugDrawer){this._debugDrawer=new PIXI.Sprite;var e=new PIXI.Graphics;this._debugDrawer.addChild(e)}this.addChild(this._debugDrawer);var n=this._debugDrawer.getChildAt(0);n.clear();for(var r=this._armature.getBones(),i=0,a=r.length;i<a;++i){var s=r[i],l=s.boneData.length,u=s.globalTransformMatrix.tx,c=s.globalTransformMatrix.ty,h=u+s.globalTransformMatrix.a*l,p=c+s.globalTransformMatrix.b*l;n.lineStyle(2,65535,.7),n.moveTo(u,c),n.lineTo(h,p),n.lineStyle(0,0,0),n.beginFill(65535,.7),n.drawCircle(u,c,3),n.endFill()}var f=this._armature.getSlots();for(i=0,a=f.length;i<a;++i){var d=f[i],_=d.boundingBoxData;if(_){switch((T=this._debugDrawer.getChildByName(d.name))||((T=new PIXI.Graphics).name=d.name,this._debugDrawer.addChild(T)),T.clear(),T.lineStyle(2,16711935,.7),_.type){case 0:T.drawRect(.5*-_.width,.5*-_.height,_.width,_.height);break;case 1:T.drawEllipse(.5*-_.width,.5*-_.height,_.width,_.height);break;case 2:for(var y=_.vertices,m=0,g=y.length;m<g;m+=2){var v=y[m],A=y[m+1];0===m?T.moveTo(v,A):T.lineTo(v,A)}T.lineTo(y[0],y[1])}T.endFill(),d.updateTransformAndMatrix(),d.updateGlobalTransform();var b=d.global;T.setTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skew,0,d._pivotX,d._pivotY)}else{var T;(T=this._debugDrawer.getChildByName(d.name))&&this._debugDrawer.removeChild(T)}}}else null!==this._debugDrawer&&this._debugDrawer.parent===this&&this.removeChild(this._debugDrawer)},e.prototype.dispose=function(t){void 0===t&&(t=!0),null!==this._armature&&(this._armature.dispose(),this._armature=null)},e.prototype.destroy=function(){this.dispose()},e.prototype.dispatchDBEvent=function(t,e){this.emit(t,e)},e.prototype.hasDBEventListener=function(t){return this.listeners(t,!0)},e.prototype.addDBEventListener=function(t,e,n){this.addListener(t,e,n)},e.prototype.removeDBEventListener=function(t,e,n){this.removeListener(t,e,n)},Object.defineProperty(e.prototype,"armature",{get:function(){return this._armature},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animation",{get:function(){return this._armature.animation},enumerable:!1,configurable:!0}),e}(PIXI.Sprite);e.PixiArmatureDisplay=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorldClock=void 0;var r=function(){function t(t){void 0===t&&(t=0),this.time=0,this.timeScale=1,this._systemTime=0,this._animationbles=[],this._clock=null,this.time=t,this._systemTime=.001*(new Date).getTime()}return t.prototype.advanceTime=function(t){t!=t&&(t=0);var e=.001*Date.now();if(t<0&&(t=e-this._systemTime),this._systemTime=e,1!==this.timeScale&&(t*=this.timeScale),0!==t){t<0?this.time-=t:this.time+=t;for(var n=0,r=0,i=this._animationbles.length;n<i;++n){var o=this._animationbles[n];null!==o?(r>0&&(this._animationbles[n-r]=o,this._animationbles[n]=null),o.advanceTime(t)):r++}if(r>0){for(i=this._animationbles.length;n<i;++n){var a=this._animationbles[n];null!==a?this._animationbles[n-r]=a:r++}this._animationbles.length-=r}}},t.prototype.contains=function(t){if(t===this)return!1;for(var e=t;e!==this&&null!==e;)e=e.clock;return e===this},t.prototype.add=function(t){this._animationbles.indexOf(t)<0&&(this._animationbles.push(t),t.clock=this)},t.prototype.remove=function(t){var e=this._animationbles.indexOf(t);e>=0&&(this._animationbles[e]=null,t.clock=null)},t.prototype.clear=function(){for(var t=0,e=this._animationbles;t<e.length;t++){var n=e[t];null!==n&&(n.clock=null)}},Object.defineProperty(t.prototype,"clock",{get:function(){return this._clock},set:function(t){this._clock!==t&&(null!==this._clock&&this._clock.remove(this),this._clock=t,null!==this._clock&&this._clock.add(this))},enumerable:!1,configurable:!0}),t}();e.WorldClock=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BuildArmaturePackage=e.BaseFactory=void 0;var r=n(35),i=n(2),o=n(20),a=n(135),s=n(75),l=n(136),u=n(137),c=n(78),h=function(){function t(e){void 0===e&&(e=null),this.autoSearch=!1,this._dragonBonesDataMap={},this._textureAtlasDataMap={},this._dragonBones=null,this._dataParser=null,null===t._objectParser&&(t._objectParser=new c.ObjectDataParser),null===t._binaryParser&&(t._binaryParser=new u.BinaryDataParser),this._dataParser=null!==e?e:t._objectParser}return t.prototype._isSupportMesh=function(){return!0},t.prototype._getTextureData=function(t,e){if(t in this._textureAtlasDataMap)for(var n=0,r=this._textureAtlasDataMap[t];n<r.length;n++){if(null!==(l=(s=r[n]).getTexture(e)))return l}if(this.autoSearch)for(var i in this._textureAtlasDataMap)for(var o=0,a=this._textureAtlasDataMap[i];o<a.length;o++){var s,l;if((s=a[o]).autoSearch)if(null!==(l=s.getTexture(e)))return l}return null},t.prototype._fillBuildArmaturePackage=function(t,e,n,r,i){var o=null,a=null;if(e.length>0&&e in this._dragonBonesDataMap&&(a=(o=this._dragonBonesDataMap[e]).getArmature(n)),null===a&&(0===e.length||this.autoSearch))for(var s in this._dragonBonesDataMap)if(o=this._dragonBonesDataMap[s],(0===e.length||o.autoSearch)&&null!==(a=o.getArmature(n))){e=s;break}if(null!==a){if(t.dataName=e,t.textureAtlasName=i,t.data=o,t.armature=a,t.skin=null,r.length>0&&(t.skin=a.getSkin(r),null===t.skin&&this.autoSearch))for(var s in this._dragonBonesDataMap){var l=this._dragonBonesDataMap[s].getArmature(r);if(null!==l){t.skin=l.defaultSkin;break}}return null===t.skin&&(t.skin=a.defaultSkin),!0}return!1},t.prototype._buildBones=function(t,e){for(var n=0,r=t.armature.sortedBones;n<r.length;n++){var o=r[n];i.BaseObject.borrowObject(0===o.type?s.Bone:l.Surface).init(o,e)}},t.prototype._buildSlots=function(t,e){var n=t.skin,r=t.armature.defaultSkin;if(null!==n&&null!==r){var i={};for(var o in r.displays){var a=r.getDisplays(o);i[o]=a}if(n!==r)for(var o in n.displays){a=n.getDisplays(o);i[o]=a}for(var s=0,l=t.armature.sortedSlots;s<l.length;s++){var u=l[s],c=u.name in i?i[u.name]:null,h=this._buildSlot(t,u,e);if(null!==c){h.displayFrameCount=c.length;for(var p=0,f=h.displayFrameCount;p<f;++p){var d=c[p];if(h.replaceRawDisplayData(d,p),null!==d){if(t.textureAtlasName.length>0){var _=this._getTextureData(t.textureAtlasName,d.path);h.replaceTextureData(_,p)}var y=this._getSlotDisplay(t,d,h);h.replaceDisplay(y,p)}else h.replaceDisplay(null)}}h._setDisplayIndex(u.displayIndex,!0)}}},t.prototype._buildConstraints=function(t,e){var n=t.armature.constraints;for(var r in n){var o=n[r];switch(o.type){case 0:var s=i.BaseObject.borrowObject(a.IKConstraint);s.init(o,e),e._addConstraint(s);break;case 1:var l=i.BaseObject.borrowObject(a.PathConstraint);l.init(o,e),e._addConstraint(l);break;default:var u=i.BaseObject.borrowObject(a.IKConstraint);u.init(o,e),e._addConstraint(u)}}},t.prototype._buildChildArmature=function(t,e,n){return this.buildArmature(n.path,null!==t?t.dataName:"","",null!==t?t.textureAtlasName:"")},t.prototype._getSlotDisplay=function(t,e,n){var r=null!==t?t.dataName:e.parent.parent.parent.name,a=null;switch(e.type){case 0:var s=e;null===s.texture&&(s.texture=this._getTextureData(r,e.path)),a=n.rawDisplay;break;case 2:var l=e;null===l.texture&&(l.texture=this._getTextureData(r,l.path)),a=this._isSupportMesh()?n.meshDisplay:n.rawDisplay;break;case 1:var u=e,c=this._buildChildArmature(t,n,u);if(null!==c){if(c.inheritAnimation=u.inheritAnimation,!c.inheritAnimation){var h=u.actions.length>0?u.actions:c.armatureData.defaultActions;if(h.length>0)for(var p=0,f=h;p<f.length;p++){var d=f[p],_=i.BaseObject.borrowObject(o.EventObject);o.EventObject.actionDataToInstance(d,_,n.armature),_.slot=n,n.armature._bufferAction(_,!1)}else c.animation.play()}u.armature=c.armatureData}a=c}return a},t.prototype.parseDragonBonesData=function(e,n,r){void 0===n&&(n=null),void 0===r&&(r=1);for(var i=e instanceof ArrayBuffer?t._binaryParser:this._dataParser,o=i.parseDragonBonesData(e,r);;){var a=this._buildTextureAtlasData(null,null);if(!i.parseTextureAtlasData(null,a,r)){a.returnToPool();break}this.addTextureAtlasData(a,n)}return null!==o&&this.addDragonBonesData(o,n),o},t.prototype.parseTextureAtlasData=function(t,e,n,r){void 0===n&&(n=null),void 0===r&&(r=1);var i=this._buildTextureAtlasData(null,null);return this._dataParser.parseTextureAtlasData(t,i,r),this._buildTextureAtlasData(i,e||null),this.addTextureAtlasData(i,n),i},t.prototype.updateTextureAtlases=function(t,e){var n=this.getTextureAtlasData(e);if(null!==n)for(var r=0,i=n.length;r<i;++r)r<t.length&&this._buildTextureAtlasData(n[r],t[r])},t.prototype.getDragonBonesData=function(t){return t in this._dragonBonesDataMap?this._dragonBonesDataMap[t]:null},t.prototype.addDragonBonesData=function(t,e){if(void 0===e&&(e=null),(e=null!==e?e:t.name)in this._dragonBonesDataMap){if(this._dragonBonesDataMap[e]===t)return;console.warn("Can not add same name data: "+e)}else this._dragonBonesDataMap[e]=t},t.prototype.removeDragonBonesData=function(t,e){void 0===e&&(e=!0),t in this._dragonBonesDataMap&&(e&&this._dragonBones.bufferObject(this._dragonBonesDataMap[t]),delete this._dragonBonesDataMap[t])},t.prototype.getTextureAtlasData=function(t){return t in this._textureAtlasDataMap?this._textureAtlasDataMap[t]:null},t.prototype.addTextureAtlasData=function(t,e){void 0===e&&(e=null);var n=(e=null!==e?e:t.name)in this._textureAtlasDataMap?this._textureAtlasDataMap[e]:this._textureAtlasDataMap[e]=[];n.indexOf(t)<0&&n.push(t)},t.prototype.removeTextureAtlasData=function(t,e){if(void 0===e&&(e=!0),t in this._textureAtlasDataMap){var n=this._textureAtlasDataMap[t];if(e)for(var r=0,i=n;r<i.length;r++){var o=i[r];this._dragonBones.bufferObject(o)}delete this._textureAtlasDataMap[t]}},t.prototype.getArmatureData=function(t,e){void 0===e&&(e="");var n=new p;return this._fillBuildArmaturePackage(n,e,t,"","")?n.armature:null},t.prototype.clear=function(t){for(var e in void 0===t&&(t=!0),this._dragonBonesDataMap)t&&this._dragonBones.bufferObject(this._dragonBonesDataMap[e]),delete this._dragonBonesDataMap[e];for(var e in this._textureAtlasDataMap){if(t)for(var n=0,r=this._textureAtlasDataMap[e];n<r.length;n++){var i=r[n];this._dragonBones.bufferObject(i)}delete this._textureAtlasDataMap[e]}},t.prototype.buildArmature=function(t,e,n,r){void 0===e&&(e=""),void 0===n&&(n=""),void 0===r&&(r="");var i=new p;if(!this._fillBuildArmaturePackage(i,e||"",t,n||"",r||""))return console.warn("No armature data: "+t+", "+(null!==e?e:"")),null;var o=this._buildArmature(i);return this._buildBones(i,o),this._buildSlots(i,o),this._buildConstraints(i,o),o.invalidUpdate(null,!0),o.advanceTime(0),o},t.prototype.replaceDisplay=function(t,e,n){if(void 0===n&&(n=-1),n<0&&(n=t.displayIndex),n<0&&(n=0),t.replaceDisplayData(e,n),null!==e){var r=this._getSlotDisplay(null,e,t);if(0===e.type){var i=t.getDisplayFrameAt(n).rawDisplayData;null!==i&&2===i.type&&(r=t.meshDisplay)}t.replaceDisplay(r,n)}else t.replaceDisplay(null,n)},t.prototype.replaceSlotDisplay=function(t,e,n,r,i,o){void 0===o&&(o=-1);var a=this.getArmatureData(e,t||"");if(null===a||null===a.defaultSkin)return!1;var s=a.defaultSkin.getDisplay(n,r);return this.replaceDisplay(i,s,o),!0},t.prototype.replaceSlotDisplayList=function(t,e,n,r){var i=this.getArmatureData(e,t||"");if(!i||!i.defaultSkin)return!1;var o=i.defaultSkin.getDisplays(n);if(!o)return!1;r.displayFrameCount=o.length;for(var a=0,s=r.displayFrameCount;a<s;++a){var l=o[a];this.replaceDisplay(r,l,a)}return!0},t.prototype.replaceSkin=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=null);for(var i=!1,o=e.parent.defaultSkin,a=0,s=t.getSlots();a<s.length;a++){var l=s[a];if(!(null!==r&&r.indexOf(l.name)>=0)){var u=e.getDisplays(l.name);if(null!==u||(null!==o&&e!==o&&(u=o.getDisplays(l.name)),null!==u)){l.displayFrameCount=u.length;for(var c=0,h=l.displayFrameCount;c<h;++c){var p=u[c];l.replaceRawDisplayData(p,c),null!==p?l.replaceDisplay(this._getSlotDisplay(null,p,l),c):l.replaceDisplay(null,c)}i=!0}else n&&(l.displayFrameCount=0)}}return i},t.prototype.replaceAnimation=function(t,e,n){void 0===n&&(n=!0);var i=e.defaultSkin;if(null===i)return!1;if(n)t.animation.animations=e.animations;else{var o=t.animation.animations,a={};for(var s in o)a[s]=o[s];for(var s in e.animations)a[s]=e.animations[s];t.animation.animations=a}for(var l=0,u=t.getSlots();l<u.length;l++)for(var c=u[l],h=0,p=0,f=c.displayList;p<f.length;p++){var d=f[p];if(d instanceof r.Armature){var _=i.getDisplays(c.name);if(null!==_&&h<_.length){var y=_[h];if(null!==y&&1===y.type){var m=this.getArmatureData(y.path,y.parent.parent.parent.name);m&&this.replaceAnimation(d,m,n)}}}h++}return!0},t.prototype.getAllDragonBonesData=function(){return this._dragonBonesDataMap},t.prototype.getAllTextureAtlasData=function(){return this._textureAtlasDataMap},Object.defineProperty(t.prototype,"clock",{get:function(){return this._dragonBones.clock},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragonBones",{get:function(){return this._dragonBones},enumerable:!1,configurable:!0}),t._objectParser=null,t._binaryParser=null,t}();e.BaseFactory=h;var p=function(){this.dataName="",this.textureAtlasName="",this.skin=null};e.BuildArmaturePackage=p},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var o=n(2),a=n(131),s=n(134),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._animationNames=[],e._animationStates=[],e._animations={},e._blendStates={},e._animationConfig=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.Animation]"},e.prototype._onClear=function(){for(var t=0,e=this._animationStates;t<e.length;t++){e[t].returnToPool()}for(var n in this._animations)delete this._animations[n];for(var n in this._blendStates){var r=this._blendStates[n];for(var i in r)r[i].returnToPool();delete this._blendStates[n]}null!==this._animationConfig&&this._animationConfig.returnToPool(),this.timeScale=1,this._animationDirty=!1,this._inheritTimeScale=1,this._animationNames.length=0,this._animationStates.length=0,this._armature=null,this._animationConfig=null,this._lastAnimationState=null},e.prototype._fadeOut=function(t){switch(t.fadeOutMode){case 1:for(var e=0,n=this._animationStates;e<n.length;e++){null===(u=n[e])._parent&&(u.layer===t.layer&&u.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 2:for(var r=0,i=this._animationStates;r<i.length;r++){null===(u=i[r])._parent&&(u.group===t.group&&u.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 3:for(var o=0,a=this._animationStates;o<a.length;o++){null===(u=a[o])._parent&&(u.layer===t.layer&&u.group===t.group&&u.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 4:for(var s=0,l=this._animationStates;s<l.length;s++){var u;null===(u=l[s])._parent&&u.fadeOut(t.fadeOutTime,t.pauseFadeOut)}}},e.prototype.init=function(t){null===this._armature&&(this._armature=t,this._animationConfig=o.BaseObject.borrowObject(s.AnimationConfig))},e.prototype.advanceTime=function(t){for(var e in t<0&&(t=-t),this._armature.inheritAnimation&&null!==this._armature._parent?this._inheritTimeScale=this._armature._parent._armature.animation._inheritTimeScale*this.timeScale:this._inheritTimeScale=this.timeScale,1!==this._inheritTimeScale&&(t*=this._inheritTimeScale),this._blendStates){var n=this._blendStates[e];for(var r in n)n[r].reset()}var i=this._animationStates.length;if(1===i)if((y=this._animationStates[0])._fadeState>0&&y._subFadeState>0)this._armature._dragonBones.bufferObject(y),this._animationStates.length=0,this._lastAnimationState=null;else{var o=y.animationData,a=o.cacheFrameRate;if(this._animationDirty&&a>0){this._animationDirty=!1;for(var s=0,l=this._armature.getBones();s<l.length;s++){var u=l[s];u._cachedFrameIndices=o.getBoneCachedFrameIndices(u.name)}for(var c=0,h=this._armature.getSlots();c<h.length;c++){var p=h[c];if(p.displayFrameCount>0){var f=p.getDisplayFrameAt(0).rawDisplayData;if(null!==f&&f.parent===this._armature.armatureData.defaultSkin){p._cachedFrameIndices=o.getSlotCachedFrameIndices(p.name);continue}}p._cachedFrameIndices=null}}y.advanceTime(t,a)}else if(i>1){for(var d=0,_=0;d<i;++d){var y;(y=this._animationStates[d])._fadeState>0&&y._subFadeState>0?(_++,this._armature._dragonBones.bufferObject(y),this._animationDirty=!0,this._lastAnimationState===y&&(this._lastAnimationState=null)):(_>0&&(this._animationStates[d-_]=y),y.advanceTime(t,0)),d===i-1&&_>0&&(this._animationStates.length-=_,null===this._lastAnimationState&&this._animationStates.length>0&&(this._lastAnimationState=this._animationStates[this._animationStates.length-1]))}this._armature._cacheFrameIndex=-1}else this._armature._cacheFrameIndex=-1},e.prototype.reset=function(){for(var t=0,e=this._animationStates;t<e.length;t++){e[t].returnToPool()}this._animationDirty=!1,this._animationConfig.clear(),this._animationStates.length=0,this._lastAnimationState=null},e.prototype.stop=function(t){if(void 0===t&&(t=null),null!==t)null!==(r=this.getState(t))&&r.stop();else for(var e=0,n=this._animationStates;e<n.length;e++){var r;(r=n[e]).stop()}},e.prototype.playConfig=function(t){var e=t.animation;if(!(e in this._animations))return console.warn("Non-existent animation.\n","DragonBones name: "+this._armature.armatureData.parent.name,"Armature name: "+this._armature.name,"Animation name: "+e),null;var n=this._animations[e];if(5===t.fadeOutMode)for(var r=0,i=this._animationStates;r<i.length;r++){var s=i[r];if(s._fadeState<1&&s.layer===t.layer&&s.animationData===n)return s}0===this._animationStates.length?t.fadeInTime=0:t.fadeInTime<0&&(t.fadeInTime=n.fadeInTime),t.fadeOutTime<0&&(t.fadeOutTime=t.fadeInTime),t.timeScale<=-100&&(t.timeScale=1/n.scale),n.frameCount>0?(t.position<0?(t.position%=n.duration,t.position=n.duration-t.position):t.position===n.duration?t.position-=1e-6:t.position>n.duration&&(t.position%=n.duration),t.duration>0&&t.position+t.duration>n.duration&&(t.duration=n.duration-t.position),t.playTimes<0&&(t.playTimes=n.playTimes)):(t.playTimes=1,t.position=0,t.duration>0&&(t.duration=0)),0===t.duration&&(t.duration=-1),this._fadeOut(t);var l=o.BaseObject.borrowObject(a.AnimationState);if(l.init(this._armature,n,t),this._animationDirty=!0,this._armature._cacheFrameIndex=-1,this._animationStates.length>0){for(var u=!1,c=0,h=this._animationStates.length;c<h;++c){if(l.layer>this._animationStates[c].layer){u=!0,this._animationStates.splice(c,0,l);break}if(c!==h-1&&l.layer>this._animationStates[c+1].layer){u=!0,this._animationStates.splice(c+1,0,l);break}}u||this._animationStates.push(l)}else this._animationStates.push(l);for(var p=0,f=this._armature.getSlots();p<f.length;p++){var d=f[p].childArmature;null!==d&&d.inheritAnimation&&d.animation.hasAnimation(e)&&null===d.animation.getState(e)&&d.animation.fadeIn(e)}for(var _ in n.animationTimelines){var y=this.fadeIn(_,0,1,l.layer,"",5);if(null!==y){var m=n.animationTimelines[_];y.actionEnabled=!1,y.resetToPose=!1,y.stop(),l.addState(y,m);var g=this._animationStates.indexOf(l),v=this._animationStates.indexOf(y);v<g&&(this._animationStates.splice(g,1),this._animationStates.splice(v,0,l))}}return this._lastAnimationState=l,l},e.prototype.play=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=e,this._animationConfig.fadeInTime=0,this._animationConfig.animation=null!==t?t:"",null!==t&&t.length>0)this.playConfig(this._animationConfig);else if(null===this._lastAnimationState){var n=this._armature.armatureData.defaultAnimation;null!==n&&(this._animationConfig.animation=n.name,this.playConfig(this._animationConfig))}else this._lastAnimationState.isPlaying||this._lastAnimationState.isCompleted?(this._animationConfig.animation=this._lastAnimationState.name,this.playConfig(this._animationConfig)):this._lastAnimationState.play();return this._lastAnimationState},e.prototype.fadeIn=function(t,e,n,r,i,o){return void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r=0),void 0===i&&(i=null),void 0===o&&(o=3),this._animationConfig.clear(),this._animationConfig.fadeOutMode=o,this._animationConfig.playTimes=n,this._animationConfig.layer=r,this._animationConfig.fadeInTime=e,this._animationConfig.animation=t,this._animationConfig.group=null!==i?i:"",this.playConfig(this._animationConfig)},e.prototype.gotoAndPlayByTime=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=n,this._animationConfig.position=e,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t,this.playConfig(this._animationConfig)},e.prototype.gotoAndPlayByFrame=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=n,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t;var r=t in this._animations?this._animations[t]:null;return null!==r&&(this._animationConfig.position=r.frameCount>0?r.duration*e/r.frameCount:0),this.playConfig(this._animationConfig)},e.prototype.gotoAndPlayByProgress=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=n,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t;var r=t in this._animations?this._animations[t]:null;return null!==r&&(this._animationConfig.position=r.duration*(e>0?e:0)),this.playConfig(this._animationConfig)},e.prototype.gotoAndStopByTime=function(t,e){void 0===e&&(e=0);var n=this.gotoAndPlayByTime(t,e,1);return null!==n&&n.stop(),n},e.prototype.gotoAndStopByFrame=function(t,e){void 0===e&&(e=0);var n=this.gotoAndPlayByFrame(t,e,1);return null!==n&&n.stop(),n},e.prototype.gotoAndStopByProgress=function(t,e){void 0===e&&(e=0);var n=this.gotoAndPlayByProgress(t,e,1);return null!==n&&n.stop(),n},e.prototype.getBlendState=function(t,e,n){t in this._blendStates||(this._blendStates[t]={});var r=this._blendStates[t];e in r||((r[e]=o.BaseObject.borrowObject(a.BlendState)).target=n);return r[e]},e.prototype.getState=function(t,e){void 0===e&&(e=-1);for(var n=this._animationStates.length;n--;){var r=this._animationStates[n];if(r.name===t&&(e<0||r.layer===e))return r}return null},e.prototype.hasAnimation=function(t){return t in this._animations},e.prototype.getStates=function(){return this._animationStates},Object.defineProperty(e.prototype,"isPlaying",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++){if(e[t].isPlaying)return!0}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCompleted",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++){if(!e[t].isCompleted)return!1}return this._animationStates.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastAnimationName",{get:function(){return null!==this._lastAnimationState?this._lastAnimationState.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations},set:function(t){if(this._animations!==t){for(var e in this._animationNames.length=0,this._animations)delete this._animations[e];for(var e in t)this._animationNames.push(e),this._animations[e]=t[e]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationConfig",{get:function(){return this._animationConfig.clear(),this._animationConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!1,configurable:!0}),e}(o.BaseObject);e.Animation=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BlendState=e.AnimationState=void 0;var o=n(2),a=n(132),s=n(20),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._boneMask=[],e._boneTimelines=[],e._boneBlendTimelines=[],e._slotTimelines=[],e._slotBlendTimelines=[],e._constraintTimelines=[],e._animationTimelines=[],e._poseTimelines=[],e._actionTimeline=null,e._zOrderTimeline=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.AnimationState]"},e.prototype._onClear=function(){for(var t=0,e=this._boneTimelines;t<e.length;t++){(p=e[t]).returnToPool()}for(var n=0,r=this._boneBlendTimelines;n<r.length;n++){(p=r[n]).returnToPool()}for(var i=0,o=this._slotTimelines;i<o.length;i++){(p=o[i]).returnToPool()}for(var a=0,s=this._slotBlendTimelines;a<s.length;a++){(p=s[a]).returnToPool()}for(var l=0,u=this._constraintTimelines;l<u.length;l++){(p=u[l]).returnToPool()}for(var c=0,h=this._animationTimelines;c<h.length;c++){var p,f=(p=h[c]).target;f._parent===this&&(f._fadeState=1,f._subFadeState=1,f._parent=null),p.returnToPool()}null!==this._actionTimeline&&this._actionTimeline.returnToPool(),null!==this._zOrderTimeline&&this._zOrderTimeline.returnToPool(),this.actionEnabled=!1,this.additive=!1,this.displayControl=!1,this.resetToPose=!1,this.blendType=0,this.playTimes=1,this.layer=0,this.timeScale=1,this._weight=1,this.parameterX=0,this.parameterY=0,this.positionX=0,this.positionY=0,this.autoFadeOutTime=0,this.fadeTotalTime=0,this.name="",this.group="",this._timelineDirty=2,this._playheadState=0,this._fadeState=-1,this._subFadeState=-1,this._position=0,this._duration=0,this._fadeTime=0,this._time=0,this._fadeProgress=0,this._weightResult=0,this._boneMask.length=0,this._boneTimelines.length=0,this._boneBlendTimelines.length=0,this._slotTimelines.length=0,this._slotBlendTimelines.length=0,this._constraintTimelines.length=0,this._animationTimelines.length=0,this._poseTimelines.length=0,this._animationData=null,this._armature=null,this._actionTimeline=null,this._zOrderTimeline=null,this._activeChildA=null,this._activeChildB=null,this._parent=null},e.prototype._updateTimelines=function(){for(var t=0,e=this._armature._constraints;t<e.length;t++){var n=e[t],r=this._animationData.getConstraintTimelines(n.name);if(null!==r)for(var i=0,s=r;i<s.length;i++){var l=s[i];switch(l.type){case 30:(u=o.BaseObject.borrowObject(a.IKConstraintTimelineState)).target=n,u.init(this._armature,this,l),this._constraintTimelines.push(u)}}else if(this.resetToPose){var u;(u=o.BaseObject.borrowObject(a.IKConstraintTimelineState)).target=n,u.init(this._armature,this,null),this._constraintTimelines.push(u),this._poseTimelines.push(u)}}},e.prototype._updateBoneAndSlotTimelines=function(){for(var t={},e=0,n=this._boneTimelines;e<n.length;e++){(h=(v=n[e]).target.target.name)in t||(t[h]=[]),t[h].push(v)}for(var r=0,i=this._boneBlendTimelines;r<i.length;r++){(h=(v=i[r]).target.target.name)in t||(t[h]=[]),t[h].push(v)}for(var s=0,l=this._armature.getBones();s<l.length;s++){var c=l[s],h=c.name;if(this.containsBoneMask(h))if(h in t)delete t[h];else{var p=this._animationData.getBoneTimelines(h),f=this._armature.animation.getBlendState(u.BONE_TRANSFORM,c.name,c);if(null!==p)for(var d=0,_=p;d<_.length;d++){switch((B=_[d]).type){case 10:(v=o.BaseObject.borrowObject(a.BoneAllTimelineState)).target=f,v.init(this._armature,this,B),this._boneTimelines.push(v);break;case 11:(v=o.BaseObject.borrowObject(a.BoneTranslateTimelineState)).target=f,v.init(this._armature,this,B),this._boneTimelines.push(v);break;case 12:(v=o.BaseObject.borrowObject(a.BoneRotateTimelineState)).target=f,v.init(this._armature,this,B),this._boneTimelines.push(v);break;case 13:(v=o.BaseObject.borrowObject(a.BoneScaleTimelineState)).target=f,v.init(this._armature,this,B),this._boneTimelines.push(v);break;case 60:(v=o.BaseObject.borrowObject(a.AlphaTimelineState)).target=this._armature.animation.getBlendState(u.BONE_ALPHA,c.name,c),v.init(this._armature,this,B),this._boneBlendTimelines.push(v);break;case 50:(v=o.BaseObject.borrowObject(a.SurfaceTimelineState)).target=this._armature.animation.getBlendState(u.SURFACE,c.name,c),v.init(this._armature,this,B),this._boneBlendTimelines.push(v)}}else if(this.resetToPose){if(0===c._boneData.type)(v=o.BaseObject.borrowObject(a.BoneAllTimelineState)).target=f,v.init(this._armature,this,null),this._boneTimelines.push(v),this._poseTimelines.push(v);else(v=o.BaseObject.borrowObject(a.SurfaceTimelineState)).target=this._armature.animation.getBlendState(u.SURFACE,c.name,c),v.init(this._armature,this,null),this._boneBlendTimelines.push(v),this._poseTimelines.push(v)}}}for(var y in t)for(var m=0,g=t[y];m<g.length;m++){var v=g[m];(V=this._boneTimelines.indexOf(v))>=0&&(this._boneTimelines.splice(V,1),v.returnToPool()),(V=this._boneBlendTimelines.indexOf(v))>=0&&(this._boneBlendTimelines.splice(V,1),v.returnToPool())}for(var A={},b=[],T=0,S=this._slotTimelines;T<S.length;T++){(h=(v=S[T]).target.name)in A||(A[h]=[]),A[h].push(v)}for(var P=0,w=this._slotBlendTimelines;P<w.length;P++){(h=(v=w[P]).target.target.name)in A||(A[h]=[]),A[h].push(v)}for(var E=0,O=this._armature.getSlots();E<O.length;E++){var C=O[E],x=C.parent.name;if(this.containsBoneMask(x))if((h=C.name)in A)delete A[h];else{var M=!1,D=!1;if(b.length=0,null!==(p=this._animationData.getSlotTimelines(h)))for(var I=0,R=p;I<R.length;I++){var B;switch((B=R[I]).type){case 20:(v=o.BaseObject.borrowObject(a.SlotDisplayTimelineState)).target=C,v.init(this._armature,this,B),this._slotTimelines.push(v),M=!0;break;case 23:(v=o.BaseObject.borrowObject(a.SlotZIndexTimelineState)).target=this._armature.animation.getBlendState(u.SLOT_Z_INDEX,C.name,C),v.init(this._armature,this,B),this._slotBlendTimelines.push(v);break;case 21:(v=o.BaseObject.borrowObject(a.SlotColorTimelineState)).target=C,v.init(this._armature,this,B),this._slotTimelines.push(v),D=!0;break;case 22:(v=o.BaseObject.borrowObject(a.DeformTimelineState)).target=this._armature.animation.getBlendState(u.SLOT_DEFORM,C.name,C),v.init(this._armature,this,B),null!==v.target?(this._slotBlendTimelines.push(v),b.push(v.geometryOffset)):v.returnToPool();break;case 24:(v=o.BaseObject.borrowObject(a.AlphaTimelineState)).target=this._armature.animation.getBlendState(u.SLOT_ALPHA,C.name,C),v.init(this._armature,this,B),this._slotBlendTimelines.push(v)}}if(this.resetToPose){if(!M)(v=o.BaseObject.borrowObject(a.SlotDisplayTimelineState)).target=C,v.init(this._armature,this,null),this._slotTimelines.push(v),this._poseTimelines.push(v);if(!D)(v=o.BaseObject.borrowObject(a.SlotColorTimelineState)).target=C,v.init(this._armature,this,null),this._slotTimelines.push(v),this._poseTimelines.push(v);for(var N=0,L=C.displayFrameCount;N<L;++N){var k=C.getDisplayFrameAt(N);if(0!==k.deformVertices.length){var F=k.getGeometryData();if(null!==F&&b.indexOf(F.offset)<0)(v=o.BaseObject.borrowObject(a.DeformTimelineState)).geometryOffset=F.offset,v.displayFrame=k,v.target=this._armature.animation.getBlendState(u.SLOT_DEFORM,C.name,C),v.init(this._armature,this,null),this._slotBlendTimelines.push(v),this._poseTimelines.push(v)}}}}}for(var y in A)for(var j=0,G=A[y];j<G.length;j++){var V;v=G[j];(V=this._slotTimelines.indexOf(v))>=0&&(this._slotTimelines.splice(V,1),v.returnToPool()),(V=this._slotBlendTimelines.indexOf(v))>=0&&(this._slotBlendTimelines.splice(V,1),v.returnToPool())}},e.prototype._advanceFadeTime=function(t){var e=this._fadeState>0;if(this._subFadeState<0&&(this._subFadeState=0,null===this._parent&&this.actionEnabled)){var n=e?s.EventObject.FADE_OUT:s.EventObject.FADE_IN;if(this._armature.eventDispatcher.hasDBEventListener(n))(r=o.BaseObject.borrowObject(s.EventObject)).type=n,r.armature=this._armature,r.animationState=this,this._armature._dragonBones.bufferEvent(r)}if((t<0&&(t=-t),this._fadeTime+=t,this._fadeTime>=this.fadeTotalTime?(this._subFadeState=1,this._fadeProgress=e?0:1):this._fadeTime>0?this._fadeProgress=e?1-this._fadeTime/this.fadeTotalTime:this._fadeTime/this.fadeTotalTime:this._fadeProgress=e?1:0,this._subFadeState>0)&&(e||(this._playheadState|=1,this._fadeState=0),null===this._parent&&this.actionEnabled)){var r;n=e?s.EventObject.FADE_OUT_COMPLETE:s.EventObject.FADE_IN_COMPLETE;if(this._armature.eventDispatcher.hasDBEventListener(n))(r=o.BaseObject.borrowObject(s.EventObject)).type=n,r.armature=this._armature,r.animationState=this,this._armature._dragonBones.bufferEvent(r)}},e.prototype.init=function(t,e,n){if(null===this._armature){if(this._armature=t,this._animationData=e,this.resetToPose=n.resetToPose,this.additive=n.additive,this.displayControl=n.displayControl,this.actionEnabled=n.actionEnabled,this.blendType=e.blendType,this.layer=n.layer,this.playTimes=n.playTimes,this.timeScale=n.timeScale,this.fadeTotalTime=n.fadeInTime,this.autoFadeOutTime=n.autoFadeOutTime,this.name=n.name.length>0?n.name:n.animation,this.group=n.group,this._weight=n.weight,n.pauseFadeIn?this._playheadState=2:this._playheadState=3,n.duration<0?(this._position=0,this._duration=this._animationData.duration,0!==n.position?this.timeScale>=0?this._time=n.position:this._time=n.position-this._duration:this._time=0):(this._position=n.position,this._duration=n.duration,this._time=0),this.timeScale<0&&0===this._time&&(this._time=-1e-6),this.fadeTotalTime<=0&&(this._fadeProgress=.999999),n.boneMask.length>0){this._boneMask.length=n.boneMask.length;for(var r=0,i=this._boneMask.length;r<i;++r)this._boneMask[r]=n.boneMask[r]}this._actionTimeline=o.BaseObject.borrowObject(a.ActionTimelineState),this._actionTimeline.init(this._armature,this,this._animationData.actionTimeline),this._actionTimeline.currentTime=this._time,this._actionTimeline.currentTime<0&&(this._actionTimeline.currentTime=this._duration-this._actionTimeline.currentTime),null!==this._animationData.zOrderTimeline&&(this._zOrderTimeline=o.BaseObject.borrowObject(a.ZOrderTimelineState),this._zOrderTimeline.init(this._armature,this,this._animationData.zOrderTimeline))}},e.prototype.advanceTime=function(t,e){0===this._fadeState&&0===this._subFadeState||this._advanceFadeTime(t),3===this._playheadState&&(1!==this.timeScale&&(t*=this.timeScale),this._time+=t),0!==this._timelineDirty&&(2===this._timelineDirty&&this._updateTimelines(),this._timelineDirty=0,this._updateBoneAndSlotTimelines());var n=0!==this._fadeState||0===this._subFadeState,r=0===this._fadeState&&e>0,i=!0,o=!0,a=this._time;if(this._weightResult=this._weight*this._fadeProgress,null!==this._parent&&(this._weightResult*=this._parent._weightResult),this._actionTimeline.playState<=0&&this._actionTimeline.update(a),0!==this._weight){if(r){var s=2*e;this._actionTimeline.currentTime=Math.floor(this._actionTimeline.currentTime*s)/s}if(null!==this._zOrderTimeline&&this._zOrderTimeline.playState<=0&&this._zOrderTimeline.update(a),r){var l=Math.floor(this._actionTimeline.currentTime*e);this._armature._cacheFrameIndex===l?(i=!1,o=!1):(this._armature._cacheFrameIndex=l,this._animationData.cachedFrames[l]?o=!1:this._animationData.cachedFrames[l]=!0)}if(i){var u=!1,c=null;if(o)for(var h=0,p=this._boneTimelines.length;h<p;++h){if((P=this._boneTimelines[h]).playState<=0&&P.update(a),P.target!==c)if(u=(_=P.target).update(this),c=_,1===_.dirty){var f=_.target.animationPose;f.x=0,f.y=0,f.rotation=0,f.skew=0,f.scaleX=1,f.scaleY=1}u&&P.blend(n)}for(h=0,p=this._boneBlendTimelines.length;h<p;++h){(P=this._boneBlendTimelines[h]).playState<=0&&P.update(a),P.target.update(this)&&P.blend(n)}if(this.displayControl)for(h=0,p=this._slotTimelines.length;h<p;++h){if((P=this._slotTimelines[h]).playState<=0){var d=P.target.displayController;null!==d&&d!==this.name&&d!==this.group||P.update(a)}}for(h=0,p=this._slotBlendTimelines.length;h<p;++h){if((P=this._slotBlendTimelines[h]).playState<=0){var _=P.target;P.update(a),_.update(this)&&P.blend(n)}}for(h=0,p=this._constraintTimelines.length;h<p;++h){(P=this._constraintTimelines[h]).playState<=0&&P.update(a)}if(this._animationTimelines.length>0){var y=100,m=100,g=null,v=null;for(h=0,p=this._animationTimelines.length;h<p;++h){if((P=this._animationTimelines[h]).playState<=0&&P.update(a),1===this.blendType){var A=P.target,b=this.parameterX-A.positionX;b>=0?b<y&&(y=b,g=A):-b<m&&(m=-b,v=A)}}null!==g&&(this._activeChildA!==g&&(null!==this._activeChildA&&(this._activeChildA.weight=0),this._activeChildA=g,this._activeChildA.activeTimeline()),this._activeChildB!==v&&(null!==this._activeChildB&&(this._activeChildB.weight=0),this._activeChildB=v),g.weight=m/(y+m),v&&(v.weight=1-g.weight))}}if(0===this._fadeState){if(this._subFadeState>0&&(this._subFadeState=0,this._poseTimelines.length>0)){for(var T=0,S=this._poseTimelines;T<S.length;T++){var P=S[T],w=this._boneTimelines.indexOf(P);w>=0?(this._boneTimelines.splice(w,1),P.returnToPool()):(w=this._boneBlendTimelines.indexOf(P))>=0?(this._boneBlendTimelines.splice(w,1),P.returnToPool()):(w=this._slotTimelines.indexOf(P))>=0?(this._slotTimelines.splice(w,1),P.returnToPool()):(w=this._slotBlendTimelines.indexOf(P))>=0?(this._slotBlendTimelines.splice(w,1),P.returnToPool()):(w=this._constraintTimelines.indexOf(P))>=0&&(this._constraintTimelines.splice(w,1),P.returnToPool())}this._poseTimelines.length=0}this._actionTimeline.playState>0&&this.autoFadeOutTime>=0&&this.fadeOut(this.autoFadeOutTime)}}},e.prototype.play=function(){this._playheadState=3},e.prototype.stop=function(){this._playheadState&=1},e.prototype.fadeOut=function(t,e){if(void 0===e&&(e=!0),t<0&&(t=0),e&&(this._playheadState&=2),this._fadeState>0){if(t>this.fadeTotalTime-this._fadeTime)return}else{this._fadeState=1,this._subFadeState=-1,(t<=0||this._fadeProgress<=0)&&(this._fadeProgress=1e-6);for(var n=0,r=this._boneTimelines;n<r.length;n++){(d=r[n]).fadeOut()}for(var i=0,o=this._boneBlendTimelines;i<o.length;i++){(d=o[i]).fadeOut()}for(var a=0,s=this._slotTimelines;a<s.length;a++){(d=s[a]).fadeOut()}for(var l=0,u=this._slotBlendTimelines;l<u.length;l++){(d=u[l]).fadeOut()}for(var c=0,h=this._constraintTimelines;c<h.length;c++){(d=h[c]).fadeOut()}for(var p=0,f=this._animationTimelines;p<f.length;p++){var d;(d=f[p]).fadeOut(),d.target.fadeOut(999999,!0)}}this.displayControl=!1,this.fadeTotalTime=this._fadeProgress>1e-6?t/this._fadeProgress:0,this._fadeTime=this.fadeTotalTime*(1-this._fadeProgress)},e.prototype.containsBoneMask=function(t){return 0===this._boneMask.length||this._boneMask.indexOf(t)>=0},e.prototype.addBoneMask=function(t,e){void 0===e&&(e=!0);var n=this._armature.getBone(t);if(null!==n){if(this._boneMask.indexOf(t)<0&&this._boneMask.push(t),e)for(var r=0,i=this._armature.getBones();r<i.length;r++){var o=i[r];this._boneMask.indexOf(o.name)<0&&n.contains(o)&&this._boneMask.push(o.name)}this._timelineDirty=1}},e.prototype.removeBoneMask=function(t,e){void 0===e&&(e=!0);var n=this._boneMask.indexOf(t);if(n>=0&&this._boneMask.splice(n,1),e){var r=this._armature.getBone(t);if(null!==r){var i=this._armature.getBones();if(this._boneMask.length>0)for(var o=0,a=i;o<a.length;o++){var s=a[o],l=this._boneMask.indexOf(s.name);l>=0&&r.contains(s)&&this._boneMask.splice(l,1)}else for(var u=0,c=i;u<c.length;u++){(s=c[u])!==r&&(r.contains(s)||this._boneMask.push(s.name))}}}this._timelineDirty=1},e.prototype.removeAllBoneMask=function(){this._boneMask.length=0,this._timelineDirty=1},e.prototype.addState=function(t,e){if(void 0===e&&(e=null),null!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n];switch(i.type){case 40:if((l=o.BaseObject.borrowObject(a.AnimationProgressTimelineState)).target=t,l.init(this._armature,this,i),this._animationTimelines.push(l),0!==this.blendType){var s=i;t.positionX=s.x,t.positionY=s.y,t.weight=0}t._parent=this,this.resetToPose=!1;break;case 41:(l=o.BaseObject.borrowObject(a.AnimationWeightTimelineState)).target=t,l.init(this._armature,this,i),this._animationTimelines.push(l);break;case 42:var l;(l=o.BaseObject.borrowObject(a.AnimationParametersTimelineState)).target=t,l.init(this._armature,this,i),this._animationTimelines.push(l)}}null===t._parent&&(t._parent=this)},e.prototype.activeTimeline=function(){for(var t=0,e=this._slotTimelines;t<e.length;t++){var n=e[t];n.dirty=!0,n.currentTime=-1}},Object.defineProperty(e.prototype,"isFadeIn",{get:function(){return this._fadeState<0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFadeOut",{get:function(){return this._fadeState>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFadeComplete",{get:function(){return 0===this._fadeState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return 0!=(2&this._playheadState)&&this._actionTimeline.playState<=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCompleted",{get:function(){return this._actionTimeline.playState>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentPlayTimes",{get:function(){return this._actionTimeline.currentPlayTimes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalTime",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._actionTimeline.currentTime},set:function(t){var e=this._actionTimeline.currentPlayTimes-(this._actionTimeline.playState>0?1:0);if((t<0||this._duration<t)&&(t=t%this._duration+e*this._duration)<0&&(t+=this._duration),this.playTimes>0&&e===this.playTimes-1&&t===this._duration&&null===this._parent&&(t=this._duration-1e-6),this._time!==t){this._time=t,this._actionTimeline.setCurrentTime(this._time),null!==this._zOrderTimeline&&(this._zOrderTimeline.playState=-1);for(var n=0,r=this._boneTimelines;n<r.length;n++){r[n].playState=-1}for(var i=0,o=this._slotTimelines;i<o.length;i++){o[i].playState=-1}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._weight},set:function(t){if(this._weight!==t){this._weight=t;for(var e=0,n=this._boneTimelines;e<n.length;e++){n[e].dirty=!0}for(var r=0,i=this._boneBlendTimelines;r<i.length;r++){i[r].dirty=!0}for(var o=0,a=this._slotBlendTimelines;o<a.length;o++){a[o].dirty=!0}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationData",{get:function(){return this._animationData},enumerable:!1,configurable:!0}),e}(o.BaseObject);e.AnimationState=l;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.BlendState]"},e.prototype._onClear=function(){this.reset(),this.target=null},e.prototype.update=function(t){var e=t.layer,n=t._weightResult;if(this.dirty>0){if(this.leftWeight>0){if(this.layer!==e){if(this.layerWeight>=this.leftWeight)return this.dirty++,this.layer=e,this.leftWeight=0,this.blendWeight=0,!1;this.layer=e,this.leftWeight-=this.layerWeight,this.layerWeight=0}return n*=this.leftWeight,this.dirty++,this.blendWeight=n,this.layerWeight+=this.blendWeight,!0}return!1}return this.dirty++,this.layer=e,this.leftWeight=1,this.blendWeight=n,this.layerWeight=n,!0},e.prototype.reset=function(){this.dirty=0,this.layer=0,this.leftWeight=0,this.layerWeight=0,this.blendWeight=0},e.BONE_TRANSFORM="boneTransform",e.BONE_ALPHA="boneAlpha",e.SURFACE="surface",e.SLOT_DEFORM="slotDeform",e.SLOT_ALPHA="slotAlpha",e.SLOT_Z_INDEX="slotZIndex",e}(o.BaseObject);e.BlendState=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationParametersTimelineState=e.AnimationWeightTimelineState=e.AnimationProgressTimelineState=e.IKConstraintTimelineState=e.DeformTimelineState=e.SlotZIndexTimelineState=e.SlotColorTimelineState=e.SlotDisplayTimelineState=e.AlphaTimelineState=e.SurfaceTimelineState=e.BoneScaleTimelineState=e.BoneRotateTimelineState=e.BoneTranslateTimelineState=e.BoneAllTimelineState=e.ZOrderTimelineState=e.ActionTimelineState=void 0;var o=n(133),a=n(10),s=n(20),l=n(2),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.ActionTimelineState]"},e.prototype._onCrossFrame=function(t){var e=this._armature.eventDispatcher;if(this._animationState.actionEnabled)for(var n=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+t],r=this._frameArray[n+1],i=this._animationData.parent.actions,o=0;o<r;++o){var a=i[this._frameArray[n+2+o]];if(0===a.type){(u=l.BaseObject.borrowObject(s.EventObject)).time=this._frameArray[n]/this._frameRate,u.animationState=this._animationState,s.EventObject.actionDataToInstance(a,u,this._armature),this._armature._bufferAction(u,!0)}else{var u,c=10===a.type?s.EventObject.FRAME_EVENT:s.EventObject.SOUND_EVENT;if(11===a.type||e.hasDBEventListener(c))(u=l.BaseObject.borrowObject(s.EventObject)).time=this._frameArray[n]/this._frameRate,u.animationState=this._animationState,s.EventObject.actionDataToInstance(a,u,this._armature),this._armature._dragonBones.bufferEvent(u)}}},e.prototype._onArriveAtFrame=function(){},e.prototype._onUpdateFrame=function(){},e.prototype.update=function(t){var e=this.playState,n=this.currentPlayTimes,r=this.currentTime;if(this._setCurrentTime(t)){var i=null===this._animationState._parent&&this._animationState.actionEnabled,o=this._armature.eventDispatcher;if(e<0){if(this.playState===e)return;if(this._animationState.displayControl&&this._animationState.resetToPose&&this._armature._sortZOrder(null,0),n=this.currentPlayTimes,i&&o.hasDBEventListener(s.EventObject.START)){var a=l.BaseObject.borrowObject(s.EventObject);a.type=s.EventObject.START,a.armature=this._armature,a.animationState=this._animationState,this._armature._dragonBones.bufferEvent(a)}}var u=this._animationState.timeScale<0,c=null,h=null;if(i&&this.currentPlayTimes!==n&&(o.hasDBEventListener(s.EventObject.LOOP_COMPLETE)&&((c=l.BaseObject.borrowObject(s.EventObject)).type=s.EventObject.LOOP_COMPLETE,c.armature=this._armature,c.animationState=this._animationState),this.playState>0&&o.hasDBEventListener(s.EventObject.COMPLETE)&&((h=l.BaseObject.borrowObject(s.EventObject)).type=s.EventObject.COMPLETE,h.armature=this._armature,h.animationState=this._animationState)),this._frameCount>1){var p=this._timelineData,f=Math.floor(this.currentTime*this._frameRate),d=this._frameIndices[p.frameIndicesOffset+f];if(this._frameIndex!==d){var _=this._frameIndex;if(this._frameIndex=d,null!==this._timelineArray)if(this._frameOffset=this._animationData.frameOffset+this._timelineArray[p.offset+5+this._frameIndex],u){if(_<0){var y=Math.floor(r*this._frameRate);_=this._frameIndices[p.frameIndicesOffset+y],this.currentPlayTimes===n&&_===d&&(_=-1)}for(;_>=0;){var m=this._animationData.frameOffset+this._timelineArray[p.offset+5+_],g=this._frameArray[m]/this._frameRate;if(this._position<=g&&g<=this._position+this._duration&&this._onCrossFrame(_),null!==c&&0===_&&(this._armature._dragonBones.bufferEvent(c),c=null),_>0?_--:_=this._frameCount-1,_===d)break}}else{if(_<0){y=Math.floor(r*this._frameRate);_=this._frameIndices[p.frameIndicesOffset+y];m=this._animationData.frameOffset+this._timelineArray[p.offset+5+_],g=this._frameArray[m]/this._frameRate;this.currentPlayTimes===n&&(r<=g?_>0?_--:_=this._frameCount-1:_===d&&(_=-1))}for(;_>=0;){_<this._frameCount-1?_++:_=0;m=this._animationData.frameOffset+this._timelineArray[p.offset+5+_],g=this._frameArray[m]/this._frameRate;if(this._position<=g&&g<=this._position+this._duration&&this._onCrossFrame(_),null!==c&&0===_&&(this._armature._dragonBones.bufferEvent(c),c=null),_===d)break}}}}else if(this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData)){this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5];g=this._frameArray[this._frameOffset]/this._frameRate;this.currentPlayTimes===n?r<=g&&this._onCrossFrame(this._frameIndex):this._position<=g&&(u||null===c||(this._armature._dragonBones.bufferEvent(c),c=null),this._onCrossFrame(this._frameIndex))}null!==c&&this._armature._dragonBones.bufferEvent(c),null!==h&&this._armature._dragonBones.bufferEvent(h)}},e.prototype.setCurrentTime=function(t){this._setCurrentTime(t),this._frameIndex=-1},e}(o.TimelineState);e.ActionTimelineState=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.ZOrderTimelineState]"},e.prototype._onArriveAtFrame=function(){this.playState>=0&&(this._frameArray[this._frameOffset+1]>0?this._armature._sortZOrder(this._frameArray,this._frameOffset+2):this._armature._sortZOrder(null,0))},e.prototype._onUpdateFrame=function(){},e}(o.TimelineState);e.ZOrderTimelineState=c;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.BoneAllTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._rd[2]=a.Transform.normalizeRadian(this._rd[2]),this._rd[3]=a.Transform.normalizeRadian(this._rd[3])),null===this._timelineData&&(this._rd[4]=1,this._rd[5]=1)},e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=6,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.fadeOut=function(){this.dirty=!1,this._rd[2]=a.Transform.normalizeRadian(this._rd[2]),this._rd[3]=a.Transform.normalizeRadian(this._rd[3])},e.prototype.blend=function(t){var e=this._armature.armatureData.scale,n=this._rd,r=this.target,i=r.target,o=r.blendWeight,a=i.animationPose;r.dirty>1?(a.x+=n[0]*o*e,a.y+=n[1]*o*e,a.rotation+=n[2]*o,a.skew+=n[3]*o,a.scaleX+=(n[4]-1)*o,a.scaleY+=(n[5]-1)*o):(a.x=n[0]*o*e,a.y=n[1]*o*e,a.rotation=n[2]*o,a.skew=n[3]*o,a.scaleX=(n[4]-1)*o+1,a.scaleY=(n[5]-1)*o+1),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},e}(o.MutilpleValueTimelineState);e.BoneAllTimelineState=h;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.BoneTranslateTimelineState]"},e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._valueOffset=this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.blend=function(t){var e=this.target,n=e.target,r=e.blendWeight,i=n.animationPose;e.dirty>1?(i.x+=this._resultA*r,i.y+=this._resultB*r):1!==r?(i.x=this._resultA*r,i.y=this._resultB*r):(i.x=this._resultA,i.y=this._resultB),(t||this.dirty)&&(this.dirty=!1,n._transformDirty=!0)},e}(o.DoubleValueTimelineState);e.BoneTranslateTimelineState=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.BoneRotateTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._differenceA=a.Transform.normalizeRadian(this._differenceA),this._differenceB=a.Transform.normalizeRadian(this._differenceB))},e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.fadeOut=function(){this.dirty=!1,this._resultA=a.Transform.normalizeRadian(this._resultA),this._resultB=a.Transform.normalizeRadian(this._resultB)},e.prototype.blend=function(t){var e=this.target,n=e.target,r=e.blendWeight,i=n.animationPose;e.dirty>1?(i.rotation+=this._resultA*r,i.skew+=this._resultB*r):1!==r?(i.rotation=this._resultA*r,i.skew=this._resultB*r):(i.rotation=this._resultA,i.skew=this._resultB),(t||this.dirty)&&(this.dirty=!1,n._transformDirty=!0)},e}(o.DoubleValueTimelineState);e.BoneRotateTimelineState=f;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.BoneScaleTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._resultA=1,this._resultB=1)},e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.blend=function(t){var e=this.target,n=e.target,r=e.blendWeight,i=n.animationPose;e.dirty>1?(i.scaleX+=(this._resultA-1)*r,i.scaleY+=(this._resultB-1)*r):1!==r?(i.scaleX=(this._resultA-1)*r+1,i.scaleY=(this._resultB-1)*r+1):(i.scaleX=this._resultA,i.scaleY=this._resultB),(t||this.dirty)&&(this.dirty=!1,n._transformDirty=!0)},e}(o.DoubleValueTimelineState);e.BoneScaleTimelineState=d;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.SurfaceTimelineState]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},e.prototype.init=function(e,n,r){if(t.prototype.init.call(this,e,n,r),null!==this._timelineData){var i=this._animationData.parent.parent,o=i.frameIntArray,a=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3];this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=o[a+2],this._deformCount=o[a+1],this._deformOffset=o[a+3],this._sameValueOffset=o[a+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=i.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.target.target._deformVertices.length},e.prototype.blend=function(t){var e=this.target,n=e.target,r=e.blendWeight,i=n._deformVertices,o=this._valueArray;if(null!==o)for(var a=this._valueCount,s=this._deformOffset,l=this._sameValueOffset,u=this._rd,c=0;c<this._deformCount;++c){var h=0;h=c<s?o[l+c]:c<s+a?u[c-s]:o[l+c-a],e.dirty>1?i[c]+=h*r:i[c]=h*r}else if(1===e.dirty)for(c=0;c<this._deformCount;++c)i[c]=0;(t||this.dirty)&&(this.dirty=!1,n._transformDirty=!0)},e}(o.MutilpleValueTimelineState);e.SurfaceTimelineState=_;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.AlphaTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._result=1)},e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},e.prototype.blend=function(t){var e=this.target,n=e.target,r=e.blendWeight;e.dirty>1?(n._alpha+=this._result*r,n._alpha>1&&(n._alpha=1)):n._alpha=this._result*r,(t||this.dirty)&&(this.dirty=!1,this._armature._alphaDirty=!0)},e}(o.SingleValueTimelineState);e.AlphaTimelineState=y;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.SlotDisplayTimelineState]"},e.prototype._onArriveAtFrame=function(){if(this.playState>=0){var t=this.target,e=null!==this._timelineData?this._frameArray[this._frameOffset+1]:t._slotData.displayIndex;t.displayIndex!==e&&t._setDisplayIndex(e,!0)}},e.prototype._onUpdateFrame=function(){},e}(o.TimelineState);e.SlotDisplayTimelineState=m;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._current=[0,0,0,0,0,0,0,0],e._difference=[0,0,0,0,0,0,0,0],e._result=[0,0,0,0,0,0,0,0],e}return i(e,t),e.toString=function(){return"[class dragonBones.SlotColorTimelineState]"},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._animationData.parent.parent,n=e.colorArray,r=e.frameIntArray,i=this._animationData.frameIntOffset+this._frameValueOffset+this._frameIndex,o=r[i];o<0&&(o+=65536),this._isTween?(this._current[0]=n[o++],this._current[1]=n[o++],this._current[2]=n[o++],this._current[3]=n[o++],this._current[4]=n[o++],this._current[5]=n[o++],this._current[6]=n[o++],this._current[7]=n[o++],(o=this._frameIndex===this._frameCount-1?r[this._animationData.frameIntOffset+this._frameValueOffset]:r[i+1])<0&&(o+=65536),this._difference[0]=n[o++]-this._current[0],this._difference[1]=n[o++]-this._current[1],this._difference[2]=n[o++]-this._current[2],this._difference[3]=n[o++]-this._current[3],this._difference[4]=n[o++]-this._current[4],this._difference[5]=n[o++]-this._current[5],this._difference[6]=n[o++]-this._current[6],this._difference[7]=n[o++]-this._current[7]):(this._result[0]=.01*n[o++],this._result[1]=.01*n[o++],this._result[2]=.01*n[o++],this._result[3]=.01*n[o++],this._result[4]=n[o++],this._result[5]=n[o++],this._result[6]=n[o++],this._result[7]=n[o++])}else{var a=this.target.slotData.color;this._result[0]=a.alphaMultiplier,this._result[1]=a.redMultiplier,this._result[2]=a.greenMultiplier,this._result[3]=a.blueMultiplier,this._result[4]=a.alphaOffset,this._result[5]=a.redOffset,this._result[6]=a.greenOffset,this._result[7]=a.blueOffset}},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._result[0]=.01*(this._current[0]+this._difference[0]*this._tweenProgress),this._result[1]=.01*(this._current[1]+this._difference[1]*this._tweenProgress),this._result[2]=.01*(this._current[2]+this._difference[2]*this._tweenProgress),this._result[3]=.01*(this._current[3]+this._difference[3]*this._tweenProgress),this._result[4]=this._current[4]+this._difference[4]*this._tweenProgress,this._result[5]=this._current[5]+this._difference[5]*this._tweenProgress,this._result[6]=this._current[6]+this._difference[6]*this._tweenProgress,this._result[7]=this._current[7]+this._difference[7]*this._tweenProgress)},e.prototype.fadeOut=function(){this._isTween=!1},e.prototype.update=function(e){if(t.prototype.update.call(this,e),this._isTween||this.dirty){var n=this.target,r=n._colorTransform;if(0!==this._animationState._fadeState||0!==this._animationState._subFadeState){if(r.alphaMultiplier!==this._result[0]||r.redMultiplier!==this._result[1]||r.greenMultiplier!==this._result[2]||r.blueMultiplier!==this._result[3]||r.alphaOffset!==this._result[4]||r.redOffset!==this._result[5]||r.greenOffset!==this._result[6]||r.blueOffset!==this._result[7]){var i=Math.pow(this._animationState._fadeProgress,4);r.alphaMultiplier+=(this._result[0]-r.alphaMultiplier)*i,r.redMultiplier+=(this._result[1]-r.redMultiplier)*i,r.greenMultiplier+=(this._result[2]-r.greenMultiplier)*i,r.blueMultiplier+=(this._result[3]-r.blueMultiplier)*i,r.alphaOffset+=(this._result[4]-r.alphaOffset)*i,r.redOffset+=(this._result[5]-r.redOffset)*i,r.greenOffset+=(this._result[6]-r.greenOffset)*i,r.blueOffset+=(this._result[7]-r.blueOffset)*i,n._colorDirty=!0}}else this.dirty&&(this.dirty=!1,r.alphaMultiplier===this._result[0]&&r.redMultiplier===this._result[1]&&r.greenMultiplier===this._result[2]&&r.blueMultiplier===this._result[3]&&r.alphaOffset===this._result[4]&&r.redOffset===this._result[5]&&r.greenOffset===this._result[6]&&r.blueOffset===this._result[7]||(r.alphaMultiplier=this._result[0],r.redMultiplier=this._result[1],r.greenMultiplier=this._result[2],r.blueMultiplier=this._result[3],r.alphaOffset=this._result[4],r.redOffset=this._result[5],r.greenOffset=this._result[6],r.blueOffset=this._result[7],n._colorDirty=!0))}},e}(o.TweenTimelineState);e.SlotColorTimelineState=g;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.SlotZIndexTimelineState]"},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null===this._timelineData){var e=this.target.target;this._result=e.slotData.zIndex}},e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._valueOffset=this._animationData.frameIntOffset,this._valueArray=this._animationData.parent.parent.frameIntArray},e.prototype.blend=function(t){var e=this.target,n=e.target,r=e.blendWeight;e.dirty>1?n._zIndex+=this._result*r:n._zIndex=this._result*r,(t||this.dirty)&&(this.dirty=!1,this._armature._zIndexDirty=!0)},e}(o.SingleValueTimelineState);e.SlotZIndexTimelineState=v;var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.DeformTimelineState]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.geometryOffset=0,this.displayFrame=null,this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},e.prototype.init=function(e,n,r){if(t.prototype.init.call(this,e,n,r),null!==this._timelineData){var i=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3],o=this._animationData.parent.parent,a=o.frameIntArray,s=this.target.target;this.geometryOffset=a[i+0],this.geometryOffset<0&&(this.geometryOffset+=65536);for(var l=0,u=s.displayFrameCount;l<u;++l){var c=s.getDisplayFrameAt(l),h=c.getGeometryData();if(null!==h&&h.offset===this.geometryOffset){this.displayFrame=c,this.displayFrame.updateDeformVertices();break}}if(null===this.displayFrame)return void this.returnToPool();this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=a[i+2],this._deformCount=a[i+1],this._deformOffset=a[i+3],this._sameValueOffset=a[i+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=o.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.displayFrame.deformVertices.length},e.prototype.blend=function(t){var e=this.target,n=e.target,r=e.blendWeight,i=this.displayFrame.deformVertices,o=this._valueArray;if(null!==o)for(var a=this._valueCount,s=this._deformOffset,l=this._sameValueOffset,u=this._rd,c=0;c<this._deformCount;++c){var h=0;h=c<s?o[l+c]:c<s+a?u[c-s]:o[l+c-a],e.dirty>1?i[c]+=h*r:i[c]=h*r}else if(1===e.dirty)for(c=0;c<this._deformCount;++c)i[c]=0;(t||this.dirty)&&(this.dirty=!1,n._geometryData===this.displayFrame.getGeometryData()&&(n._verticesDirty=!0))},e}(o.MutilpleValueTimelineState);e.DeformTimelineState=A;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.IKConstraintTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;if(null!==this._timelineData)e._bendPositive=this._currentA>0,e._weight=this._currentB;else{var n=e._constraintData;e._bendPositive=n.bendPositive,e._weight=n.weight}e.invalidUpdate(),this.dirty=!1},e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(o.DoubleValueTimelineState);e.IKConstraintTimelineState=b;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.AnimationProgressTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.currentTime=this._result*e.totalTime),this.dirty=!1},e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(o.SingleValueTimelineState);e.AnimationProgressTimelineState=T;var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.AnimationWeightTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.weight=this._result),this.dirty=!1},e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(o.SingleValueTimelineState);e.AnimationWeightTimelineState=S;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.AnimationParametersTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.parameterX=this._resultA,e.parameterY=this._resultB),this.dirty=!1},e.prototype.init=function(e,n,r){t.prototype.init.call(this,e,n,r),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(o.DoubleValueTimelineState);e.AnimationParametersTimelineState=P},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MutilpleValueTimelineState=e.DoubleValueTimelineState=e.SingleValueTimelineState=e.TweenTimelineState=e.TimelineState=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"armature",{get:function(){return this._armature},set:function(t){this._armature=t},enumerable:!1,configurable:!0}),e.prototype._onClear=function(){this.dirty=!1,this.playState=-1,this.currentPlayTimes=0,this.currentTime=-1,this.target=null,this._isTween=!1,this._valueOffset=0,this._frameValueOffset=0,this._frameOffset=0,this._frameRate=0,this._frameCount=0,this._frameIndex=-1,this._frameRateR=0,this._position=0,this._duration=0,this._timeScale=1,this._timeOffset=0,this._animationData=null,this._timelineData=null,this._armature=null,this._animationState=null,this._actionTimeline=null,this._frameArray=null,this._valueArray=null,this._timelineArray=null,this._frameIndices=null},e.prototype._setCurrentTime=function(t){var e=this.playState,n=this.currentPlayTimes,r=this.currentTime;if(null!==this._actionTimeline&&this._frameCount<=1)this.playState=this._actionTimeline.playState>=0?1:-1,this.currentPlayTimes=1,this.currentTime=this._actionTimeline.currentTime;else if(null===this._actionTimeline||1!==this._timeScale||0!==this._timeOffset){var i=this._animationState.playTimes,o=i*this._duration;t*=this._timeScale,0!==this._timeOffset&&(t+=this._timeOffset*this._animationData.duration),i>0&&(t>=o||t<=-o)?(this.playState<=0&&3===this._animationState._playheadState&&(this.playState=1),this.currentPlayTimes=i,this.currentTime=t<0?0:1===this.playState?this._duration+1e-6:this._duration):(0!==this.playState&&3===this._animationState._playheadState&&(this.playState=0),t<0?(t=-t,this.currentPlayTimes=Math.floor(t/this._duration),this.currentTime=this._duration-t%this._duration):(this.currentPlayTimes=Math.floor(t/this._duration),this.currentTime=t%this._duration)),this.currentTime+=this._position}else this.playState=this._actionTimeline.playState,this.currentPlayTimes=this._actionTimeline.currentPlayTimes,this.currentTime=this._actionTimeline.currentTime;return(this.currentPlayTimes!==n||this.currentTime!==r)&&((e<0&&this.playState!==e||this.playState<=0&&this.currentPlayTimes!==n)&&(this._frameIndex=-1),!0)},e.prototype.init=function(t,e,n){if(this._armature=t,this._animationState=e,this._timelineData=n,this._actionTimeline=this._animationState._actionTimeline,this===this._actionTimeline&&(this._actionTimeline=null),this._animationData=this._animationState.animationData,this._frameRate=this._animationData.parent.frameRate,this._frameRateR=1/this._frameRate,this._position=this._animationState._position,this._duration=this._animationState._duration,null!==this._timelineData){var r=this._animationData.parent.parent;this._frameArray=r.frameArray,this._timelineArray=r.timelineArray,this._frameIndices=r.frameIndices,this._frameCount=this._timelineArray[this._timelineData.offset+2],this._frameValueOffset=this._timelineArray[this._timelineData.offset+4],this._timeScale=100/this._timelineArray[this._timelineData.offset+0],this._timeOffset=.01*this._timelineArray[this._timelineData.offset+1]}},e.prototype.fadeOut=function(){this.dirty=!1},e.prototype.update=function(t){if(this._setCurrentTime(t)){if(this._frameCount>1){var e=Math.floor(this.currentTime*this._frameRate),n=this._frameIndices[this._timelineData.frameIndicesOffset+e];this._frameIndex!==n&&(this._frameIndex=n,this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex],this._onArriveAtFrame())}else this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData&&(this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5]),this._onArriveAtFrame());(this._isTween||this.dirty)&&this._onUpdateFrame()}},e.prototype.blend=function(t){},e}(n(2).BaseObject);e.TimelineState=o;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e._getEasingValue=function(t,e,n){var r=e;switch(t){case 3:r=Math.pow(e,2);break;case 4:r=1-Math.pow(1-e,2);break;case 5:r=.5*(1-Math.cos(e*Math.PI))}return(r-e)*n+e},e._getEasingCurveValue=function(t,e,n,r){if(t<=0)return 0;if(t>=1)return 1;var i=n>0,o=n+1,a=Math.floor(t*o),s=0,l=0;return i?(s=0===a?0:e[r+a-1],l=a===o-1?1e4:e[r+a]):(s=e[r+a-1],l=e[r+a]),1e-4*(s+(l-s)*(t*o-a))},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._tweenType=0,this._curveCount=0,this._framePosition=0,this._frameDurationR=0,this._tweenEasing=0,this._tweenProgress=0,this._valueScale=1},e.prototype._onArriveAtFrame=function(){if(this._frameCount>1&&(this._frameIndex!==this._frameCount-1||0===this._animationState.playTimes||this._animationState.currentPlayTimes<this._animationState.playTimes-1))if(this._tweenType=this._frameArray[this._frameOffset+1],this._isTween=0!==this._tweenType,this._isTween?2===this._tweenType?this._curveCount=this._frameArray[this._frameOffset+2]:0!==this._tweenType&&1!==this._tweenType&&(this._tweenEasing=.01*this._frameArray[this._frameOffset+2]):this.dirty=!0,this._framePosition=this._frameArray[this._frameOffset]*this._frameRateR,this._frameIndex===this._frameCount-1)this._frameDurationR=1/(this._animationData.duration-this._framePosition);else{var t=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex+1],e=this._frameArray[t]*this._frameRateR-this._framePosition;this._frameDurationR=e>0?1/e:0}else this.dirty=!0,this._isTween=!1},e.prototype._onUpdateFrame=function(){this._isTween&&(this.dirty=!0,this._tweenProgress=(this.currentTime-this._framePosition)*this._frameDurationR,2===this._tweenType?this._tweenProgress=e._getEasingCurveValue(this._tweenProgress,this._frameArray,this._curveCount,this._frameOffset+3):1!==this._tweenType&&(this._tweenProgress=e._getEasingValue(this._tweenType,this._tweenProgress,this._tweenEasing)))},e}(o);e.TweenTimelineState=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._current=0,this._difference=0,this._result=0},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._valueScale,n=this._valueArray,r=this._valueOffset+this._frameValueOffset+this._frameIndex;if(this._isTween){var i=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:r+1;1===e?(this._current=n[r],this._difference=n[i]-this._current):(this._current=n[r]*e,this._difference=n[i]*e-this._current)}else this._result=n[r]*e}else this._result=0},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._result=this._current+this._difference*this._tweenProgress)},e}(a);e.SingleValueTimelineState=s;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._currentA=0,this._currentB=0,this._differenceA=0,this._differenceB=0,this._resultA=0,this._resultB=0},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._valueScale,n=this._valueArray,r=this._valueOffset+this._frameValueOffset+2*this._frameIndex;if(this._isTween){var i=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:r+2;1===e?(this._currentA=n[r],this._currentB=n[r+1],this._differenceA=n[i]-this._currentA,this._differenceB=n[i+1]-this._currentB):(this._currentA=n[r]*e,this._currentB=n[r+1]*e,this._differenceA=n[i]*e-this._currentA,this._differenceB=n[i+1]*e-this._currentB)}else this._resultA=n[r]*e,this._resultB=n[r+1]*e}else this._resultA=0,this._resultB=0},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._resultA=this._currentA+this._differenceA*this._tweenProgress,this._resultB=this._currentB+this._differenceB*this._tweenProgress)},e}(a);e.DoubleValueTimelineState=l;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rd=[],e}return i(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._valueCount=0,this._rd.length=0},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);var e=this._valueCount,n=this._rd;if(null!==this._timelineData){var r=this._valueScale,i=this._valueArray,o=this._valueOffset+this._frameValueOffset+this._frameIndex*e;if(this._isTween){var a=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:o+e;if(1===r)for(var s=0;s<e;++s)n[e+s]=i[a+s]-i[o+s];else for(s=0;s<e;++s)n[e+s]=(i[a+s]-i[o+s])*r}else if(1===r)for(s=0;s<e;++s)n[s]=i[o+s];else for(s=0;s<e;++s)n[s]=i[o+s]*r}else for(s=0;s<e;++s)n[s]=0},e.prototype._onUpdateFrame=function(){if(t.prototype._onUpdateFrame.call(this),this._isTween){var e=this._valueCount,n=this._valueScale,r=this._tweenProgress,i=this._valueArray,o=this._rd,a=this._valueOffset+this._frameValueOffset+this._frameIndex*e;if(1===n)for(var s=0;s<e;++s)o[s]=i[a+s]+o[e+s]*r;else for(s=0;s<e;++s)o[s]=i[a+s]*n+o[e+s]*r}},e}(a);e.MutilpleValueTimelineState=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationConfig=void 0;var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boneMask=[],e}return i(e,t),e.toString=function(){return"[class dragonBones.AnimationConfig]"},e.prototype._onClear=function(){this.pauseFadeOut=!0,this.fadeOutMode=4,this.fadeOutTweenType=1,this.fadeOutTime=-1,this.actionEnabled=!0,this.additive=!1,this.displayControl=!0,this.pauseFadeIn=!0,this.resetToPose=!0,this.fadeInTweenType=1,this.playTimes=-1,this.layer=0,this.position=0,this.duration=-1,this.timeScale=-100,this.weight=1,this.fadeInTime=-1,this.autoFadeOutTime=-1,this.name="",this.animation="",this.group="",this.boneMask.length=0},e.prototype.clear=function(){this._onClear()},e.prototype.copyFrom=function(t){this.pauseFadeOut=t.pauseFadeOut,this.fadeOutMode=t.fadeOutMode,this.autoFadeOutTime=t.autoFadeOutTime,this.fadeOutTweenType=t.fadeOutTweenType,this.actionEnabled=t.actionEnabled,this.additive=t.additive,this.displayControl=t.displayControl,this.pauseFadeIn=t.pauseFadeIn,this.resetToPose=t.resetToPose,this.playTimes=t.playTimes,this.layer=t.layer,this.position=t.position,this.duration=t.duration,this.timeScale=t.timeScale,this.fadeInTime=t.fadeInTime,this.fadeOutTime=t.fadeOutTime,this.fadeInTweenType=t.fadeInTweenType,this.weight=t.weight,this.name=t.name,this.animation=t.animation,this.group=t.group,this.boneMask.length=t.boneMask.length;for(var e=0,n=this.boneMask.length;e<n;++e)this.boneMask[e]=t.boneMask[e]},e}(n(2).BaseObject);e.AnimationConfig=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PathConstraint=e.IKConstraint=e.Constraint=void 0;var o=n(2),a=n(36),s=n(10),l=n(37),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onClear=function(){this._armature=null,this._target=null,this._root=null,this._bone=null},Object.defineProperty(e.prototype,"name",{get:function(){return this._constraintData.name},enumerable:!1,configurable:!0}),e._helpMatrix=new a.Matrix,e._helpTransform=new s.Transform,e._helpPoint=new l.Point,e}(o.BaseObject);e.Constraint=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.IKConstraint]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._scaleEnabled=!1,this._bendPositive=!1,this._weight=1,this._constraintData=null},e.prototype._computeA=function(){var t=this._target.global,e=this._root.global,n=this._root.globalTransformMatrix,r=Math.atan2(t.y-e.y,t.x-e.x);e.scaleX<0&&(r+=Math.PI),e.rotation+=s.Transform.normalizeRadian(r-e.rotation)*this._weight,e.toMatrix(n)},e.prototype._computeB=function(){var t=this._bone._boneData.length,e=this._root,n=this._target.global,r=e.global,i=this._bone.global,o=this._bone.globalTransformMatrix,a=o.a*t,l=o.b*t,u=a*a+l*l,c=Math.sqrt(u),h=i.x-r.x,p=i.y-r.y,f=h*h+p*p,d=Math.sqrt(f),_=i.rotation,y=r.rotation,m=Math.atan2(p,h),g=(h=n.x-r.x)*h+(p=n.y-r.y)*p,v=Math.sqrt(g),A=0;if(c+d<=v||v+c<=d||v+d<=c)A=Math.atan2(n.y-r.y,n.x-r.x),c+d<=v||d<c&&(A+=Math.PI);else{var b=(f-u+g)/(2*g),T=Math.sqrt(f-b*b*g)/v,S=r.x+h*b,P=r.y+p*b,w=-p*T,E=h*T,O=!1,C=e.parent;if(null!==C){var x=C.globalTransformMatrix;O=x.a*x.d-x.b*x.c<0}O!==this._bendPositive?(i.x=S-w,i.y=P-E):(i.x=S+w,i.y=P+E),A=Math.atan2(i.y-r.y,i.x-r.x)}var M=s.Transform.normalizeRadian(A-m);r.rotation=y+M*this._weight,r.toMatrix(e.globalTransformMatrix);var D=m+M*this._weight;i.x=r.x+Math.cos(D)*d,i.y=r.y+Math.sin(D)*d;var I=Math.atan2(n.y-i.y,n.x-i.x);i.scaleX<0&&(I+=Math.PI),i.rotation=r.rotation+_-y+s.Transform.normalizeRadian(I-M-_)*this._weight,i.toMatrix(o)},e.prototype.init=function(t,e){if(null===this._constraintData){this._constraintData=t,this._armature=e,this._target=this._armature.getBone(this._constraintData.target.name),this._root=this._armature.getBone(this._constraintData.root.name),this._bone=null!==this._constraintData.bone?this._armature.getBone(this._constraintData.bone.name):null;var n=this._constraintData;this._scaleEnabled=n.scaleEnabled,this._bendPositive=n.bendPositive,this._weight=n.weight,this._root._hasConstraint=!0}},e.prototype.update=function(){this._root.updateByConstraint(),null!==this._bone?(this._bone.updateByConstraint(),this._computeB()):this._computeA()},e.prototype.invalidUpdate=function(){this._root.invalidUpdate(),null!==this._bone&&this._bone.invalidUpdate()},e}(u);e.IKConstraint=c;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bones=[],e._spaces=[],e._positions=[],e._curves=[],e._boneLengths=[],e._pathGlobalVertices=[],e._segments=[10],e}return i(e,t),e.toString=function(){return"[class dragonBones.PathConstraint]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.dirty=!1,this.pathOffset=0,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=1,this.translateMix=1,this._pathSlot=null,this._bones.length=0,this._spaces.length=0,this._positions.length=0,this._curves.length=0,this._boneLengths.length=0,this._pathGlobalVertices.length=0},e.prototype._updatePathVertices=function(t){var e=this._armature,n=e.armatureData.parent,r=e.armatureData.scale,i=n.intArray,o=n.floatArray,a=t.offset,s=i[a+0],l=i[a+2];this._pathGlobalVertices.length=2*s;var u=t.weight;if(null!==u)for(var c=this._pathSlot._geometryBones,h=u.bones.length,p=u.offset,f=i[p+1],d=p+2+h,_=(P=0,0);P<s;P++){for(var y=0,m=0,g=0,v=i[d++];g<v;g++){var A=c[i[d++]];if(null!==A){A.updateByConstraint();S=A.globalTransformMatrix;var b=o[f++];E=o[f++]*r,O=o[f++]*r;y+=(S.a*E+S.c*O+S.tx)*b,m+=(S.b*E+S.d*O+S.ty)*b}}this._pathGlobalVertices[_++]=y,this._pathGlobalVertices[_++]=m}else{var T=this._pathSlot.parent;T.updateByConstraint();for(var S=T.globalTransformMatrix,P=0,w=l;P<s;P+=2){var E=o[w++]*r,O=o[w++]*r,C=S.a*E+S.c*O+S.tx,x=S.b*E+S.d*O+S.ty;this._pathGlobalVertices[P]=C,this._pathGlobalVertices[P+1]=x}}},e.prototype._computeVertices=function(t,e,n,r){for(var i=n,o=t;i<e;i+=2)r[i]=this._pathGlobalVertices[o++],r[i+1]=this._pathGlobalVertices[o++]},e.prototype._computeBezierCurve=function(t,e,n,r,i){var o=this._armature.armatureData.parent.intArray[t.geometry.offset+0],a=this._positions,s=this._spaces,l=t.closed,u=Array(),c=2*o,h=c/6,p=-1,f=this.position;a.length=3*e+2;var d=0;if(t.constantSpeed){l?(c+=2,u.length=o,this._computeVertices(2,c-4,0,u),this._computeVertices(0,2,c-4,u),u[c-2]=u[0],u[c-1]=u[1]):(h--,c-=4,u.length=c,this._computeVertices(2,c,0,u));var _=new Array(h);d=0;for(var y,m,g,v,A,b,T,S,P=u[0],w=u[1],E=0,O=0,C=0,x=0,M=0,D=0,I=(H=0,2);H<h;H++,I+=6)E=u[I],O=u[I+1],C=u[I+2],x=u[I+3],A=2*(y=.1875*(P-2*E+C))+(g=.09375*(3*(E-C)-P+(M=u[I+4]))),b=2*(m=.1875*(w-2*O+x))+(v=.09375*(3*(O-x)-w+(D=u[I+5]))),T=.75*(E-P)+y+.16666667*g,S=.75*(O-w)+m+.16666667*v,d+=Math.sqrt(T*T+S*S),T+=A,S+=b,A+=g,b+=v,d+=Math.sqrt(T*T+S*S),T+=A,S+=b,d+=Math.sqrt(T*T+S*S),T+=A+g,S+=b+v,d+=Math.sqrt(T*T+S*S),_[H]=d,P=M,w=D;if(r&&(f*=d),i)for(H=0;H<e;H++)s[H]*=d;for(var R=this._segments,B=0,N=(H=0,U=0,X=0,0);H<e;H++,U+=3){var L=f+=s[H];if(l)(L%=d)<0&&(L+=d),X=0;else{if(L<0)continue;if(L>d)continue}for(;;X++){var k=_[X];if(!(L>k)){if(0===X)L/=k;else L=(L-(G=_[X-1]))/(k-G);break}}if(X!==p){p=X;var F=6*X;for(P=u[F],w=u[F+1],E=u[F+2],O=u[F+3],C=u[F+4],x=u[F+5],A=2*(y=.03*(P-2*E+C))+(g=.006*(3*(E-C)-P+(M=u[F+6]))),b=2*(m=.03*(w-2*O+x))+(v=.006*(3*(O-x)-w+(D=u[F+7]))),T=.3*(E-P)+y+.16666667*g,S=.3*(O-w)+m+.16666667*v,B=Math.sqrt(T*T+S*S),R[0]=B,F=1;F<8;F++)T+=A,S+=b,A+=g,b+=v,B+=Math.sqrt(T*T+S*S),R[F]=B;T+=A,S+=b,B+=Math.sqrt(T*T+S*S),R[8]=B,T+=A+g,S+=b+v,B+=Math.sqrt(T*T+S*S),R[9]=B,N=0}for(L*=B;;N++){var j=R[N];if(!(L>j)){var G;if(0===N)L/=j;else L=N+(L-(G=R[N-1]))/(j-G);break}}this.addCurvePosition(.1*L,P,w,E,O,C,x,M,D,a,U,n)}}else{var V=t.curveLengths;if(d=V[h-=l?1:2],r&&(f*=d),i)for(var H=0;H<e;H++)s[H]*=d;u.length=8;for(var H=0,U=0,X=0;H<e;H++,U+=3){if(f+=s[H],l)(f%=d)<0&&(f+=d),X=0;else{if(f<0)continue;if(f>d)continue}for(var W=0;;X++){var z=V[X];if(!(f>z)){if(0===X)W=f/z;else{var Y=V[X-1];W=(f-Y)/(z-Y)}break}}X!==p&&(p=X,l&&X===h?(this._computeVertices(c-4,4,0,u),this._computeVertices(0,4,4,u)):this._computeVertices(6*X+2,8,0,u)),this.addCurvePosition(W,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],a,U,n)}}},e.prototype.addCurvePosition=function(t,e,n,r,i,o,a,s,l,u,c,h){if(0===t)return u[c]=e,u[c+1]=n,void(u[c+2]=0);if(1===t)return u[c]=s,u[c+1]=l,void(u[c+2]=0);var p=1-t,f=p*p,d=t*t,_=f*p,y=f*t*3,m=p*d*3,g=t*d,v=_*e+y*r+m*o+g*s,A=_*n+y*i+m*a+g*l;u[c]=v,u[c+1]=A,u[c+2]=h?Math.atan2(A-(_*n+y*i+m*a),v-(_*e+y*r+m*o)):0},e.prototype.init=function(t,e){this._constraintData=t,this._armature=e;var n=t;this.pathOffset=n.pathDisplayData.geometry.offset,this.position=n.position,this.spacing=n.spacing,this.rotateOffset=n.rotateOffset,this.rotateMix=n.rotateMix,this.translateMix=n.translateMix,this._root=this._armature.getBone(n.root.name),this._target=this._armature.getBone(n.target.name),this._pathSlot=this._armature.getSlot(n.pathSlot.name);for(var r=0,i=n.bones.length;r<i;r++){var o=this._armature.getBone(n.bones[r].name);null!==o&&this._bones.push(o)}2===n.rotateMode&&(this._boneLengths.length=this._bones.length),this._root._hasConstraint=!0},e.prototype.update=function(){var t=this._pathSlot;if(null!==t._geometryData&&t._geometryData.offset===this.pathOffset){var e=this._constraintData,n=!1;if(this._root._childrenTransformDirty?(this._updatePathVertices(t._geometryData),n=!0):(t._verticesDirty||t._isBonesUpdate())&&(this._updatePathVertices(t._geometryData),t._verticesDirty=!1,n=!0),n||this.dirty){var r=e.positionMode,i=e.spacingMode,o=e.rotateMode,a=this._bones,l=0===i,u=2===o,c=0===o,h=a.length,p=c?h:h+1,f=this.spacing,d=this._spaces;if(d.length=p,u||l){d[0]=0;for(var _=0,y=p-1;_<y;_++){(x=a[_]).updateByConstraint();var m=x._boneData.length,g=m*(M=x.globalTransformMatrix).a,v=m*M.b,A=Math.sqrt(g*g+v*v);u&&(this._boneLengths[_]=A),d[_+1]=(m+f)*A/m}}else for(_=0;_<p;_++)d[_]=f;this._computeBezierCurve(t._displayFrame.rawDisplayData,p,c,1===r,2===i);var b,T=this._positions,S=this.rotateOffset,P=T[0],w=T[1];if(0===S)b=1===o;else if(b=!1,null!==(x=t.parent))S*=(M=x.globalTransformMatrix).a*M.d-M.b*M.c>0?s.Transform.DEG_RAD:-s.Transform.DEG_RAD;for(var E=this.rotateMix,O=this.translateMix,C=(_=0,3);_<h;_++,C+=3){var x,M;(x=a[_]).updateByConstraint(),(M=x.globalTransformMatrix).tx+=(P-M.tx)*O,M.ty+=(w-M.ty)*O;var D=(g=T[C])-P,I=(v=T[C+1])-w;if(u){var R=this._boneLengths[_],B=(Math.sqrt(D*D+I*I)/R-1)*E+1;M.a*=B,M.b*=B}if(P=g,w=v,E>0){var N=M.a,L=M.b,k=M.c,F=M.d,j=void 0,G=void 0,V=void 0;if(j=c?T[C-1]:Math.atan2(I,D),j-=Math.atan2(L,N),b){G=Math.cos(j),V=Math.sin(j);var H=x._boneData.length;P+=(H*(G*N-V*L)-D)*E,w+=(H*(V*N+G*L)-I)*E}else j+=S;j>s.Transform.PI?j-=s.Transform.PI_D:j<-s.Transform.PI&&(j+=s.Transform.PI_D),j*=E,G=Math.cos(j),V=Math.sin(j),M.a=G*N-V*L,M.b=V*N+G*L,M.c=G*k-V*F,M.d=V*k+G*F}x.global.fromMatrix(M)}this.dirty=!1}}},e.prototype.invalidUpdate=function(){},e}(u);e.PathConstraint=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Surface=void 0;var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._vertices=[],e._deformVertices=[],e._hullCache=[],e._matrixCahce=[],e}return i(e,t),e.toString=function(){return"[class dragonBones.Surface]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._dX=0,this._dY=0,this._k=0,this._kX=0,this._kY=0,this._vertices.length=0,this._deformVertices.length=0,this._matrixCahce.length=0,this._hullCache.length=0,this._bone=null},e.prototype._getAffineTransform=function(t,e,n,r,i,o,a,s,l,u,c,h,p){var f=a-i,d=s-o,_=l-i,y=u-o;c.rotation=Math.atan2(d,f),c.skew=Math.atan2(y,_)-.5*Math.PI-c.rotation,p&&(c.rotation+=Math.PI),c.scaleX=Math.sqrt(f*f+d*d)/n,c.scaleY=Math.sqrt(_*_+y*y)/r,c.toMatrix(h),c.x=h.tx=i-(h.a*t+h.c*e),c.y=h.ty=o-(h.b*t+h.d*e)},e.prototype._updateVertices=function(){var t=this._armature.armatureData.parent,e=this._boneData.geometry,n=t.intArray,r=t.floatArray,i=n[e.offset+0],o=n[e.offset+2],a=this._vertices,s=this._deformVertices;if(null!==this._parent)if(1===this._parent._boneData.type)for(var l=0,u=i;l<u;++l){var c=r[o+(d=2*l)]+s[d],h=r[o+d+1]+s[d+1],p=this._parent._getGlobalTransformMatrix(c,h);a[d]=p.a*c+p.c*h+p.tx,a[d+1]=p.b*c+p.d*h+p.ty}else{var f=this._parent.globalTransformMatrix;for(l=0,u=i;l<u;++l){c=r[o+(d=2*l)]+s[d],h=r[o+d+1]+s[d+1];a[d]=f.a*c+f.c*h+f.tx,a[d+1]=f.b*c+f.d*h+f.ty}}else for(l=0,u=i;l<u;++l){var d;a[d=2*l]=r[o+d]+s[d],a[d+1]=r[o+d+1]+s[d+1]}},e.prototype._updateGlobalTransformMatrix=function(t){var e=2*this._boneData.segmentX,n=this._vertices.length-2,r=this._vertices[0],i=this._vertices[1],o=this._vertices[e],a=this._vertices[e+1],s=this._vertices[n],l=this._vertices[n+1],u=this._vertices[n-e],c=this._vertices[n-e+1],h=r+.5*(s-r),p=i+.5*(l-i),f=h+.5*(o+.5*(u-o)-h),d=p+.5*(a+.5*(c-a)-p),_=o+.5*(s-o),y=a+.5*(l-a),m=u+.5*(s-u),g=c+.5*(l-c);this._getAffineTransform(0,0,200,200,f,d,_,y,m,g,this.global,this.globalTransformMatrix,!1),this._globalDirty=!1},e.prototype._getGlobalTransformMatrix=function(t,n){var r=200,i=1e3;if(t<-i||i<t||n<-i||i<n)return this.globalTransformMatrix;var o=!1,a=this._boneData,s=a.segmentX,l=a.segmentY,u=2*a.segmentX,c=this._dX,h=this._dY,p=Math.floor((t+r)/c),f=Math.floor((n+r)/h),d=0,_=p*c-r,y=f*h-r,m=this._matrixCahce,g=e._helpMatrix;if(t<-r){if(n<-r||n>=r)return this.globalTransformMatrix;if(m[d=7*(2*(s*l+s+l+l+f)+((o=n>this._kX*(t+r)+y)?1:0))]>0)g.copyFromArray(m,d+1);else{var v=f*(u+2),A=this._hullCache[4],b=this._hullCache[5],T=this._hullCache[2]-(l-f)*A,S=this._hullCache[3]-(l-f)*b,P=this._vertices;o?this._getAffineTransform(-r,y+h,800,h,P[v+u+2],P[v+u+3],T+A,S+b,P[v],P[v+1],e._helpTransform,g,!0):this._getAffineTransform(-i,y,800,h,T,S,P[v],P[v+1],T+A,S+b,e._helpTransform,g,!1),m[d]=1,m[d+1]=g.a,m[d+2]=g.b,m[d+3]=g.c,m[d+4]=g.d,m[d+5]=g.tx,m[d+6]=g.ty}}else if(t>=r){if(n<-r||n>=r)return this.globalTransformMatrix;if(m[d=7*(2*(s*l+s+f)+((o=n>this._kX*(t-i)+y)?1:0))]>0)g.copyFromArray(m,d+1);else{v=(f+1)*(u+2)-2,A=this._hullCache[4],b=this._hullCache[5],T=this._hullCache[0]+f*A,S=this._hullCache[1]+f*b,P=this._vertices;o?this._getAffineTransform(i,y+h,800,h,T+A,S+b,P[v+u+2],P[v+u+3],T,S,e._helpTransform,g,!0):this._getAffineTransform(r,y,800,h,P[v],P[v+1],T,S,P[v+u+2],P[v+u+3],e._helpTransform,g,!1),m[d]=1,m[d+1]=g.a,m[d+2]=g.b,m[d+3]=g.c,m[d+4]=g.d,m[d+5]=g.tx,m[d+6]=g.ty}}else if(n<-r){if(t<-r||t>=r)return this.globalTransformMatrix;if(m[d=7*(2*(s*l+p)+((o=n>this._kY*(t-_-c)-i)?1:0))]>0)g.copyFromArray(m,d+1);else{v=2*p,A=this._hullCache[10],b=this._hullCache[11],T=this._hullCache[8]+p*A,S=this._hullCache[9]+p*b,P=this._vertices;o?this._getAffineTransform(_+c,-r,c,800,P[v+2],P[v+3],P[v],P[v+1],T+A,S+b,e._helpTransform,g,!0):this._getAffineTransform(_,-i,c,800,T,S,T+A,S+b,P[v],P[v+1],e._helpTransform,g,!1),m[d]=1,m[d+1]=g.a,m[d+2]=g.b,m[d+3]=g.c,m[d+4]=g.d,m[d+5]=g.tx,m[d+6]=g.ty}}else if(n>=r){if(t<-r||t>=r)return this.globalTransformMatrix;if(m[d=7*(2*(s*l+s+l+p)+((o=n>this._kY*(t-_-c)+r)?1:0))]>0)g.copyFromArray(m,d+1);else{v=l*(u+2)+2*p,A=this._hullCache[10],b=this._hullCache[11],T=this._hullCache[6]-(s-p)*A,S=this._hullCache[7]-(s-p)*b,P=this._vertices;o?this._getAffineTransform(_+c,i,c,800,T+A,S+b,T,S,P[v+2],P[v+3],e._helpTransform,g,!0):this._getAffineTransform(_,r,c,800,P[v],P[v+1],P[v+2],P[v+3],T,S,e._helpTransform,g,!1),m[d]=1,m[d+1]=g.a,m[d+2]=g.b,m[d+3]=g.c,m[d+4]=g.d,m[d+5]=g.tx,m[d+6]=g.ty}}else if(m[d=7*(2*(s*f+p)+((o=n>this._k*(t-_-c)+y)?1:0))]>0)g.copyFromArray(m,d+1);else{v=2*p+f*(u+2),P=this._vertices;o?this._getAffineTransform(_+c,y+h,c,h,P[v+u+4],P[v+u+5],P[v+u+2],P[v+u+3],P[v+2],P[v+3],e._helpTransform,g,!0):this._getAffineTransform(_,y,c,h,P[v],P[v+1],P[v+2],P[v+3],P[v+u+2],P[v+u+3],e._helpTransform,g,!1),m[d]=1,m[d+1]=g.a,m[d+2]=g.b,m[d+3]=g.c,m[d+4]=g.d,m[d+5]=g.tx,m[d+6]=g.ty}return g},e.prototype.init=function(e,n){if(null===this._boneData){t.prototype.init.call(this,e,n);var r=e.segmentX,i=e.segmentY,o=this._armature.armatureData.parent.intArray[e.geometry.offset+0];this._dX=400/r,this._dY=400/i,this._k=-this._dY/this._dX,this._kX=-this._dY/800,this._kY=-800/this._dX,this._vertices.length=2*o,this._deformVertices.length=2*o,this._matrixCahce.length=2*(r*i+2*r+2*i)*7,this._hullCache.length=10;for(var a=0;a<2*o;++a)this._deformVertices[a]=0;null!==this._parent&&(0===this._parent.boneData.type?this._bone=this._parent:this._bone=this._parent._bone)}},e.prototype.update=function(t){if(t>=0&&null!==this._cachedFrameIndices){var n=this._cachedFrameIndices[t];if(n>=0&&this._cachedFrameIndex===n)this._transformDirty=!1;else if(n>=0)this._transformDirty=!0,this._cachedFrameIndex=n;else{if(this._hasConstraint)for(var r=0,i=this._armature._constraints;r<i.length;r++){(s=i[r])._root===this&&s.update()}this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var o=0,a=this._armature._constraints;o<a.length;o++){var s;(s=a[o])._root===this&&s.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty){this._transformDirty=!1,this._childrenTransformDirty=!0;for(var l=0,u=this._matrixCahce.length;l<u;l+=7)this._matrixCahce[l]=-1;if(this._updateVertices(),this._cachedFrameIndex<0){var c=t>=0;this._localDirty&&this._updateGlobalTransformMatrix(c),c&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);var h=2*this.global.x,p=2*this.global.y,f=e._helpPoint;this.globalTransformMatrix.transformPoint(1e3,-200,f),this._hullCache[0]=f.x,this._hullCache[1]=f.y,this._hullCache[2]=h-f.x,this._hullCache[3]=p-f.y,this.globalTransformMatrix.transformPoint(0,this._dY,f,!0),this._hullCache[4]=f.x,this._hullCache[5]=f.y,this.globalTransformMatrix.transformPoint(200,1e3,f),this._hullCache[6]=f.x,this._hullCache[7]=f.y,this._hullCache[8]=h-f.x,this._hullCache[9]=p-f.y,this.globalTransformMatrix.transformPoint(this._dX,0,f,!0),this._hullCache[10]=f.x,this._hullCache[11]=f.y}else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},e}(n(75).Bone);e.Surface=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryDataParser=void 0;var o=n(77),a=n(51),s=n(2),l=n(78),u=n(79),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._inRange=function(t,e,n){return e<=t&&t<=n},e.prototype._decodeUTF8=function(t){for(var e,n=0,r="",i=0,o=0,a=0,s=0;t.length>n;){var l=t[n++];if(-1===l)e=0!==o?65533:-1;else if(0===o)this._inRange(l,0,127)?e=l:(this._inRange(l,194,223)?(o=1,s=128,i=l-192):this._inRange(l,224,239)?(o=2,s=2048,i=l-224):this._inRange(l,240,244)&&(o=3,s=65536,i=l-240),i*=Math.pow(64,o),e=null);else if(this._inRange(l,128,191))if(a+=1,i+=(l-128)*Math.pow(64,o-a),a!==o)e=null;else{var u=i,c=s;i=0,o=0,a=0,s=0,e=this._inRange(u,c,1114111)&&!this._inRange(u,55296,57343)?u:l}else i=0,o=0,a=0,s=0,n--,e=l;null!==e&&-1!==e&&(e<=65535?e>0&&(r+=String.fromCharCode(e)):(e-=65536,r+=String.fromCharCode(55296+(e>>10&1023)),r+=String.fromCharCode(56320+(1023&e))))}return r},e.prototype._parseBinaryTimeline=function(t,e,n){void 0===n&&(n=null);var r=null!==n?n:s.BaseObject.borrowObject(u.TimelineData);r.type=t,r.offset=e,this._timeline=r;var i=this._timelineArrayBuffer[r.offset+2];if(1===i)r.frameIndicesOffset=-1;else{var o,a=this._animation.frameCount+1,l=this._data.frameIndices;o=l.length,l.length+=a,r.frameIndicesOffset=o;for(var c=0,h=0,p=0,f=0;c<a;++c)p+f<=c&&h<i&&(p=this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[r.offset+5+h]],f=h===i-1?this._animation.frameCount-p:this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[r.offset+5+h+1]]-p,h++),l[o+c]=h-1}return this._timeline=null,r},e.prototype._parseAnimation=function(t){var e=s.BaseObject.borrowObject(u.AnimationData);e.blendType=o.DataParser._getAnimationBlendType(l.ObjectDataParser._getString(t,o.DataParser.BLEND_TYPE,"")),e.frameCount=l.ObjectDataParser._getNumber(t,o.DataParser.DURATION,0),e.playTimes=l.ObjectDataParser._getNumber(t,o.DataParser.PLAY_TIMES,1),e.duration=e.frameCount/this._armature.frameRate,e.fadeInTime=l.ObjectDataParser._getNumber(t,o.DataParser.FADE_IN_TIME,0),e.scale=l.ObjectDataParser._getNumber(t,o.DataParser.SCALE,1),e.name=l.ObjectDataParser._getString(t,o.DataParser.NAME,o.DataParser.DEFAULT_NAME),0===e.name.length&&(e.name=o.DataParser.DEFAULT_NAME);var n=t[o.DataParser.OFFSET];if(e.frameIntOffset=n[0],e.frameFloatOffset=n[1],e.frameOffset=n[2],this._animation=e,o.DataParser.ACTION in t&&(e.actionTimeline=this._parseBinaryTimeline(0,t[o.DataParser.ACTION])),o.DataParser.Z_ORDER in t&&(e.zOrderTimeline=this._parseBinaryTimeline(1,t[o.DataParser.Z_ORDER])),o.DataParser.BONE in t){var r=t[o.DataParser.BONE];for(var i in r){var a=r[i],c=this._armature.getBone(i);if(null!==c)for(var h=0,p=a.length;h<p;h+=2){var f=a[h],d=a[h+1],_=this._parseBinaryTimeline(f,d);this._animation.addBoneTimeline(c.name,_)}}}if(o.DataParser.SLOT in t){r=t[o.DataParser.SLOT];for(var i in r){a=r[i];var y=this._armature.getSlot(i);if(null!==y)for(h=0,p=a.length;h<p;h+=2){f=a[h],d=a[h+1],_=this._parseBinaryTimeline(f,d);this._animation.addSlotTimeline(y.name,_)}}}if(o.DataParser.CONSTRAINT in t){r=t[o.DataParser.CONSTRAINT];for(var i in r){a=r[i];var m=this._armature.getConstraint(i);if(null!==m)for(h=0,p=a.length;h<p;h+=2){f=a[h],d=a[h+1],_=this._parseBinaryTimeline(f,d);this._animation.addConstraintTimeline(m.name,_)}}}if(o.DataParser.TIMELINE in t)for(var g=0,v=a=t[o.DataParser.TIMELINE];g<v.length;g++){var A=v[g];if((d=l.ObjectDataParser._getNumber(A,o.DataParser.OFFSET,0))>=0){f=l.ObjectDataParser._getNumber(A,o.DataParser.TYPE,0);var b=l.ObjectDataParser._getString(A,o.DataParser.NAME,"");_=null;if(40===f&&0!==e.blendType){var T=_=s.BaseObject.borrowObject(u.AnimationTimelineData);T.x=l.ObjectDataParser._getNumber(A,o.DataParser.X,0),T.y=l.ObjectDataParser._getNumber(A,o.DataParser.Y,0)}switch(_=this._parseBinaryTimeline(f,d,_),f){case 0:case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(b,_);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(b,_);break;case 30:this._animation.addConstraintTimeline(b,_);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(b,_)}}}return this._animation=null,e},e.prototype._parseGeometry=function(t,e){e.offset=t[o.DataParser.OFFSET],e.data=this._data;var n=this._intArrayBuffer[e.offset+3];if(n>=0){var r=s.BaseObject.borrowObject(a.WeightData),i=this._intArrayBuffer[e.offset+0],l=this._intArrayBuffer[n+0];r.offset=n;for(var u=0;u<l;++u){var c=this._intArrayBuffer[n+2+u];r.addBone(this._rawBones[c])}for(var h=n+2+l,p=0,f=(u=0,i);u<f;++u){var d=this._intArrayBuffer[h++];p+=d,h+=d}r.count=p,e.weight=r}},e.prototype._parseArray=function(t){var e=t[o.DataParser.OFFSET],n=e[1],r=e[3],i=e[5],a=e[7],s=e[9],l=e[11],u=e.length>12?e[13]:0,c=new Int16Array(this._binary,this._binaryOffset+e[0],n/Int16Array.BYTES_PER_ELEMENT),h=new Float32Array(this._binary,this._binaryOffset+e[2],r/Float32Array.BYTES_PER_ELEMENT),p=new Int16Array(this._binary,this._binaryOffset+e[4],i/Int16Array.BYTES_PER_ELEMENT),f=new Float32Array(this._binary,this._binaryOffset+e[6],a/Float32Array.BYTES_PER_ELEMENT),d=new Int16Array(this._binary,this._binaryOffset+e[8],s/Int16Array.BYTES_PER_ELEMENT),_=new Uint16Array(this._binary,this._binaryOffset+e[10],l/Uint16Array.BYTES_PER_ELEMENT),y=u>0?new Int16Array(this._binary,this._binaryOffset+e[12],u/Int16Array.BYTES_PER_ELEMENT):c;this._data.binary=this._binary,this._data.intArray=this._intArrayBuffer=c,this._data.floatArray=h,this._data.frameIntArray=p,this._data.frameFloatArray=f,this._data.frameArray=this._frameArrayBuffer=d,this._data.timelineArray=this._timelineArrayBuffer=_,this._data.colorArray=y},e.prototype.parseDragonBonesData=function(e,n){void 0===n&&(n=1),console.assert(null!=e&&e instanceof ArrayBuffer,"Data error.");var r=new Uint8Array(e,0,8);if(r[0]!=="D".charCodeAt(0)||r[1]!=="B".charCodeAt(0)||r[2]!=="D".charCodeAt(0)||r[3]!=="T".charCodeAt(0))return console.assert(!1,"Nonsupport data."),null;var i=new Uint32Array(e,8,1)[0],o=new Uint8Array(e,12,i),a=this._decodeUTF8(o),s=JSON.parse(a);return this._binaryOffset=12+i,this._binary=e,t.prototype.parseDragonBonesData.call(this,s,n)},e.getInstance=function(){return null===e._binaryDataParserInstance&&(e._binaryDataParserInstance=new e),e._binaryDataParserInstance},e._binaryDataParserInstance=null,e}(l.ObjectDataParser);e.BinaryDataParser=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.DragonBonesData=void 0;var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameIndices=[],e.cachedFrames=[],e.armatureNames=[],e.armatures={},e.userData=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.DragonBonesData]"},e.prototype._onClear=function(){for(var t in this.armatures)this.armatures[t].returnToPool(),delete this.armatures[t];null!==this.userData&&this.userData.returnToPool(),this.autoSearch=!1,this.frameRate=0,this.version="",this.name="",this.stage=null,this.frameIndices.length=0,this.cachedFrames.length=0,this.armatureNames.length=0,this.binary=null,this.intArray=null,this.floatArray=null,this.frameIntArray=null,this.frameFloatArray=null,this.frameArray=null,this.timelineArray=null,this.colorArray=null,this.userData=null},e.prototype.addArmature=function(t){t.name in this.armatures?console.warn("Same armature: "+t.name):(t.parent=this,this.armatures[t.name]=t,this.armatureNames.push(t.name))},e.prototype.getArmature=function(t){return t in this.armatures?this.armatures[t]:null},e}(n(2).BaseObject);e.DragonBonesData=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ActionData=e.UserData=void 0;var o=n(2),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ints=[],e.floats=[],e.strings=[],e}return i(e,t),e.toString=function(){return"[class dragonBones.UserData]"},e.prototype._onClear=function(){this.ints.length=0,this.floats.length=0,this.strings.length=0},e.prototype.addInt=function(t){this.ints.push(t)},e.prototype.addFloat=function(t){this.floats.push(t)},e.prototype.addString=function(t){this.strings.push(t)},e.prototype.getInt=function(t){return void 0===t&&(t=0),t>=0&&t<this.ints.length?this.ints[t]:0},e.prototype.getFloat=function(t){return void 0===t&&(t=0),t>=0&&t<this.floats.length?this.floats[t]:0},e.prototype.getString=function(t){return void 0===t&&(t=0),t>=0&&t<this.strings.length?this.strings[t]:""},e}(o.BaseObject);e.UserData=a;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.ActionData]"},e.prototype._onClear=function(){null!==this.data&&this.data.returnToPool(),this.type=0,this.name="",this.bone=null,this.slot=null,this.data=null},e}(o.BaseObject);e.ActionData=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SlotData=e.SurfaceData=e.BoneData=e.ArmatureData=void 0;var o=n(2),a=n(52),s=n(51),l=n(10),u=n(74),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aabb=new u.Rectangle,e.animationNames=[],e.sortedBones=[],e.sortedSlots=[],e.defaultActions=[],e.actions=[],e.bones={},e.slots={},e.constraints={},e.skins={},e.animations={},e.canvas=null,e.userData=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.ArmatureData]"},e.prototype._onClear=function(){for(var t=0,e=this.defaultActions;t<e.length;t++){e[t].returnToPool()}for(var n=0,r=this.actions;n<r.length;n++){r[n].returnToPool()}for(var i in this.bones)this.bones[i].returnToPool(),delete this.bones[i];for(var i in this.slots)this.slots[i].returnToPool(),delete this.slots[i];for(var i in this.constraints)this.constraints[i].returnToPool(),delete this.constraints[i];for(var i in this.skins)this.skins[i].returnToPool(),delete this.skins[i];for(var i in this.animations)this.animations[i].returnToPool(),delete this.animations[i];null!==this.canvas&&this.canvas.returnToPool(),null!==this.userData&&this.userData.returnToPool(),this.type=0,this.frameRate=0,this.cacheFrameRate=0,this.scale=1,this.name="",this.aabb.clear(),this.animationNames.length=0,this.sortedBones.length=0,this.sortedSlots.length=0,this.defaultActions.length=0,this.actions.length=0,this.defaultSkin=null,this.defaultAnimation=null,this.canvas=null,this.userData=null,this.parent=null},e.prototype.sortBones=function(){var t=this.sortedBones.length;if(!(t<=0)){var e=this.sortedBones.concat(),n=0,r=0;for(this.sortedBones.length=0;r<t;){var i=e[n++];if(n>=t&&(n=0),!(this.sortedBones.indexOf(i)>=0)){var o=!1;for(var a in this.constraints){var s=this.constraints[a];if(s.root===i&&this.sortedBones.indexOf(s.target)<0){o=!0;break}}o||null!==i.parent&&this.sortedBones.indexOf(i.parent)<0||(this.sortedBones.push(i),r++)}}}},e.prototype.cacheFrames=function(t){if(!(this.cacheFrameRate>0))for(var e in this.cacheFrameRate=t,this.animations)this.animations[e].cacheFrames(this.cacheFrameRate)},e.prototype.setCacheFrame=function(t,e){var n=this.parent.cachedFrames,r=n.length;return n.length+=10,n[r]=t.a,n[r+1]=t.b,n[r+2]=t.c,n[r+3]=t.d,n[r+4]=t.tx,n[r+5]=t.ty,n[r+6]=e.rotation,n[r+7]=e.skew,n[r+8]=e.scaleX,n[r+9]=e.scaleY,r},e.prototype.getCacheFrame=function(t,e,n){var r=this.parent.cachedFrames;t.a=r[n],t.b=r[n+1],t.c=r[n+2],t.d=r[n+3],t.tx=r[n+4],t.ty=r[n+5],e.rotation=r[n+6],e.skew=r[n+7],e.scaleX=r[n+8],e.scaleY=r[n+9],e.x=t.tx,e.y=t.ty},e.prototype.addBone=function(t){t.name in this.bones?console.warn("Same bone: "+t.name):(this.bones[t.name]=t,this.sortedBones.push(t))},e.prototype.addSlot=function(t){t.name in this.slots?console.warn("Same slot: "+t.name):(this.slots[t.name]=t,this.sortedSlots.push(t))},e.prototype.addConstraint=function(t){t.name in this.constraints?console.warn("Same constraint: "+t.name):this.constraints[t.name]=t},e.prototype.addSkin=function(t){t.name in this.skins?console.warn("Same skin: "+t.name):(t.parent=this,this.skins[t.name]=t,null===this.defaultSkin&&(this.defaultSkin=t),"default"===t.name&&(this.defaultSkin=t))},e.prototype.addAnimation=function(t){t.name in this.animations?console.warn("Same animation: "+t.name):(t.parent=this,this.animations[t.name]=t,this.animationNames.push(t.name),null===this.defaultAnimation&&(this.defaultAnimation=t))},e.prototype.addAction=function(t,e){e?this.defaultActions.push(t):this.actions.push(t)},e.prototype.getBone=function(t){return t in this.bones?this.bones[t]:null},e.prototype.getSlot=function(t){return t in this.slots?this.slots[t]:null},e.prototype.getConstraint=function(t){return t in this.constraints?this.constraints[t]:null},e.prototype.getSkin=function(t){return t in this.skins?this.skins[t]:null},e.prototype.getMesh=function(t,e,n){var r=this.getSkin(t);return null===r?null:r.getDisplay(e,n)},e.prototype.getAnimation=function(t){return t in this.animations?this.animations[t]:null},e}(o.BaseObject);e.ArmatureData=c;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.transform=new l.Transform,e.userData=null,e}return i(e,t),e.toString=function(){return"[class dragonBones.BoneData]"},e.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.inheritTranslation=!1,this.inheritRotation=!1,this.inheritScale=!1,this.inheritReflection=!1,this.type=0,this.length=0,this.alpha=1,this.name="",this.transform.identity(),this.userData=null,this.parent=null},e}(o.BaseObject);e.BoneData=h;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.geometry=new s.GeometryData,e}return i(e,t),e.toString=function(){return"[class dragonBones.SurfaceData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=1,this.segmentX=0,this.segmentY=0,this.geometry.clear()},e}(h);e.SurfaceData=p;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.color=null,e.userData=null,e}return i(e,t),e.createColor=function(){return new a.ColorTransform},e.toString=function(){return"[class dragonBones.SlotData]"},e.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.blendMode=0,this.displayIndex=0,this.zOrder=0,this.zIndex=0,this.alpha=1,this.name="",this.color=null,this.userData=null,this.parent=null},e.DEFAULT_COLOR=new a.ColorTransform,e}(o.BaseObject);e.SlotData=f},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonBoundingBoxData=e.EllipseBoundingBoxData=e.RectangleBoundingBoxData=e.BoundingBoxData=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onClear=function(){this.color=0,this.width=0,this.height=0},e}(n(2).BaseObject);e.BoundingBoxData=o;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.RectangleBoundingBoxData]"},e._computeOutCode=function(t,e,n,r,i,o){var a=0;return t<n?a|=1:t>i&&(a|=2),e<r?a|=4:e>o&&(a|=8),a},e.rectangleIntersectsSegment=function(t,n,r,i,o,a,s,l,u,c,h){void 0===u&&(u=null),void 0===c&&(c=null),void 0===h&&(h=null);var p=t>o&&t<s&&n>a&&n<l,f=r>o&&r<s&&i>a&&i<l;if(p&&f)return-1;for(var d=0,_=e._computeOutCode(t,n,o,a,s,l),y=e._computeOutCode(r,i,o,a,s,l);;){if(0==(_|y)){d=2;break}if(0!=(_&y))break;var m=0,g=0,v=0,A=0!==_?_:y;0!=(4&A)?(m=t+(r-t)*(a-n)/(i-n),g=a,null!==h&&(v=.5*-Math.PI)):0!=(8&A)?(m=t+(r-t)*(l-n)/(i-n),g=l,null!==h&&(v=.5*Math.PI)):0!=(2&A)?(g=n+(i-n)*(s-t)/(r-t),m=s,null!==h&&(v=0)):0!=(1&A)&&(g=n+(i-n)*(o-t)/(r-t),m=o,null!==h&&(v=Math.PI)),A===_?(t=m,n=g,_=e._computeOutCode(t,n,o,a,s,l),null!==h&&(h.x=v)):(r=m,i=g,y=e._computeOutCode(r,i,o,a,s,l),null!==h&&(h.y=v))}return d&&(p?(d=2,null!==u&&(u.x=r,u.y=i),null!==c&&(c.x=r,c.y=r),null!==h&&(h.x=h.y+Math.PI)):f?(d=1,null!==u&&(u.x=t,u.y=n),null!==c&&(c.x=t,c.y=n),null!==h&&(h.y=h.x+Math.PI)):(d=3,null!==u&&(u.x=t,u.y=n),null!==c&&(c.x=r,c.y=i))),d},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=0},e.prototype.containsPoint=function(t,e){var n=.5*this.width;if(t>=-n&&t<=n){var r=.5*this.height;if(e>=-r&&e<=r)return!0}return!1},e.prototype.intersectsSegment=function(t,n,r,i,o,a,s){void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null);var l=.5*this.width,u=.5*this.height;return e.rectangleIntersectsSegment(t,n,r,i,-l,-u,l,u,o,a,s)},e}(o);e.RectangleBoundingBoxData=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.EllipseData]"},e.ellipseIntersectsSegment=function(t,e,n,r,i,o,a,s,l,u,c){void 0===l&&(l=null),void 0===u&&(u=null),void 0===c&&(c=null);var h=a/s,p=h*h,f=n-t,d=(r*=h)-(e*=h),_=Math.sqrt(f*f+d*d),y=f/_,m=d/_,g=(i-t)*y+(o-e)*m,v=a*a,A=v-(t*t+e*e)+g*g,b=0;if(A>=0){var T=Math.sqrt(A),S=g-T,P=g+T,w=S<0?-1:S<=_?0:1,E=P<0?-1:P<=_?0:1,O=w*E;if(O<0)return-1;0===O&&(-1===w?(b=2,n=t+P*y,r=(e+P*m)/h,null!==l&&(l.x=n,l.y=r),null!==u&&(u.x=n,u.y=r),null!==c&&(c.x=Math.atan2(r/v*p,n/v),c.y=c.x+Math.PI)):1===E?(b=1,t+=S*y,e=(e+S*m)/h,null!==l&&(l.x=t,l.y=e),null!==u&&(u.x=t,u.y=e),null!==c&&(c.x=Math.atan2(e/v*p,t/v),c.y=c.x+Math.PI)):(b=3,null!==l&&(l.x=t+S*y,l.y=(e+S*m)/h,null!==c&&(c.x=Math.atan2(l.y/v*p,l.x/v))),null!==u&&(u.x=t+P*y,u.y=(e+P*m)/h,null!==c&&(c.y=Math.atan2(u.y/v*p,u.x/v)))))}return b},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=1},e.prototype.containsPoint=function(t,e){var n=.5*this.width;if(t>=-n&&t<=n){var r=.5*this.height;if(e>=-r&&e<=r)return e*=n/r,Math.sqrt(t*t+e*e)<=n}return!1},e.prototype.intersectsSegment=function(t,n,r,i,o,a,s){return void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),e.ellipseIntersectsSegment(t,n,r,i,0,0,.5*this.width,.5*this.height,o,a,s)},e}(o);e.EllipseBoundingBoxData=s;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.vertices=[],e}return i(e,t),e.toString=function(){return"[class dragonBones.PolygonBoundingBoxData]"},e.polygonIntersectsSegment=function(t,e,n,r,i,o,a,s){void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),t===n&&(t=n+1e-6),e===r&&(e=r+1e-6);for(var l=i.length,u=t-n,c=e-r,h=t*r-e*n,p=0,f=i[l-2],d=i[l-1],_=0,y=0,m=0,g=0,v=0,A=0,b=0;b<l;b+=2){var T=i[b],S=i[b+1];f===T&&(f=T+1e-4),d===S&&(d=S+1e-4);var P=f-T,w=d-S,E=f*S-d*T,O=u*w-c*P,C=(h*P-u*E)/O;if((C>=f&&C<=T||C>=T&&C<=f)&&(0===u||C>=t&&C<=n||C>=n&&C<=t)){var x=(h*w-c*E)/O;if((x>=d&&x<=S||x>=S&&x<=d)&&(0===c||x>=e&&x<=r||x>=r&&x<=e)){if(null===a){m=C,g=x,v=C,A=x,p++,null!==s&&(s.x=Math.atan2(S-d,T-f)-.5*Math.PI,s.y=s.x);break}var M=C-t;M<0&&(M=-M),0===p?(_=M,y=M,m=C,g=x,v=C,A=x,null!==s&&(s.x=Math.atan2(S-d,T-f)-.5*Math.PI,s.y=s.x)):(M<_&&(_=M,m=C,g=x,null!==s&&(s.x=Math.atan2(S-d,T-f)-.5*Math.PI)),M>y&&(y=M,v=C,A=x,null!==s&&(s.y=Math.atan2(S-d,T-f)-.5*Math.PI))),p++}}f=T,d=S}return 1===p?(null!==o&&(o.x=m,o.y=g),null!==a&&(a.x=m,a.y=g),null!==s&&(s.y=s.x+Math.PI)):p>1&&(p++,null!==o&&(o.x=m,o.y=g),null!==a&&(a.x=v,a.y=A)),p},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=2,this.x=0,this.y=0,this.vertices.length=0},e.prototype.containsPoint=function(t,e){var n=!1;if(t>=this.x&&t<=this.width&&e>=this.y&&e<=this.height)for(var r=0,i=this.vertices.length,o=i-2;r<i;r+=2){var a=this.vertices[o+1],s=this.vertices[r+1];if(s<e&&a>=e||a<e&&s>=e){var l=this.vertices[o],u=this.vertices[r];(e-s)*(l-u)/(a-s)+u<t&&(n=!n)}o=r}return n},e.prototype.intersectsSegment=function(t,n,r,i,o,s,l){void 0===o&&(o=null),void 0===s&&(s=null),void 0===l&&(l=null);var u=0;return 0!==a.rectangleIntersectsSegment(t,n,r,i,this.x,this.y,this.x+this.width,this.y+this.height,null,null,null)&&(u=e.polygonIntersectsSegment(t,n,r,i,this.vertices,o,s,l)),u},e}(o);e.PolygonBoundingBoxData=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SkinData=void 0;var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displays={},e}return i(e,t),e.toString=function(){return"[class dragonBones.SkinData]"},e.prototype._onClear=function(){for(var t in this.displays){for(var e=0,n=this.displays[t];e<n.length;e++){var r=n[e];null!==r&&r.returnToPool()}delete this.displays[t]}this.name="",this.parent=null},e.prototype.addDisplay=function(t,e){t in this.displays||(this.displays[t]=[]),null!==e&&(e.parent=this),this.displays[t].push(e)},e.prototype.getDisplay=function(t,e){var n=this.getDisplays(t);if(null!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r];if(null!==o&&o.name===e)return o}return null},e.prototype.getDisplays=function(t){return t in this.displays?this.displays[t]:null},e}(n(2).BaseObject);e.SkinData=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PathConstraintData=e.IKConstraintData=e.ConstraintData=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onClear=function(){this.order=0,this.name="",this.type=0,this.target=null,this.root=null,this.bone=null},e}(n(2).BaseObject);e.ConstraintData=o;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.IKConstraintData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.scaleEnabled=!1,this.bendPositive=!1,this.weight=1},e}(o);e.IKConstraintData=a;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bones=[],e}return i(e,t),e.toString=function(){return"[class dragonBones.PathConstraintData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.pathSlot=null,this.pathDisplayData=null,this.bones.length=0,this.positionMode=0,this.spacingMode=1,this.rotateMode=1,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=0,this.translateMix=0},e.prototype.AddBone=function(t){this.bones.push(t)},e}(o);e.PathConstraintData=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasData=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.CanvasData]"},e.prototype._onClear=function(){this.hasBackground=!1,this.color=0,this.x=0,this.y=0,this.width=0,this.height=0},e}(n(2).BaseObject);e.CanvasData=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PixiSlot=void 0;var o=n(80),a=n(72),s=n(2),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.toString=function(){return"[class dragonBones.PixiSlot]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._textureScale=1,this._renderDisplay=null,this._updateTransform="3"===PIXI.VERSION[0]?this._updateTransformV3:this._updateTransformV4},e.prototype._initDisplay=function(t,e){},e.prototype._disposeDisplay=function(t,e){e||t.destroy()},e.prototype._onUpdateDisplay=function(){this._renderDisplay=this._display?this._display:this._rawDisplay},e.prototype._addDisplay=function(){this._armature.display.addChild(this._renderDisplay)},e.prototype._replaceDisplay=function(t){var e=this._armature.display,n=t;e.addChild(this._renderDisplay),e.swapChildren(this._renderDisplay,n),e.removeChild(n),this._textureScale=1},e.prototype._removeDisplay=function(){this._renderDisplay.parent.removeChild(this._renderDisplay)},e.prototype._updateZOrder=function(){var t=this._armature.display;t.getChildIndex(this._renderDisplay)!==this._zOrder&&t.addChildAt(this._renderDisplay,this._zOrder)},e.prototype._updateVisible=function(){this._renderDisplay.visible=this._parent.visible&&this._visible},e.prototype._updateBlendMode=function(){if(this._renderDisplay instanceof PIXI.Sprite)switch(this._blendMode){case 0:this._renderDisplay.blendMode=PIXI.BLEND_MODES.NORMAL;break;case 1:this._renderDisplay.blendMode=PIXI.BLEND_MODES.ADD;break;case 3:this._renderDisplay.blendMode=PIXI.BLEND_MODES.DARKEN;break;case 4:this._renderDisplay.blendMode=PIXI.BLEND_MODES.DIFFERENCE;break;case 6:this._renderDisplay.blendMode=PIXI.BLEND_MODES.HARD_LIGHT;break;case 9:this._renderDisplay.blendMode=PIXI.BLEND_MODES.LIGHTEN;break;case 10:this._renderDisplay.blendMode=PIXI.BLEND_MODES.MULTIPLY;break;case 11:this._renderDisplay.blendMode=PIXI.BLEND_MODES.OVERLAY;break;case 12:this._renderDisplay.blendMode=PIXI.BLEND_MODES.SCREEN}},e.prototype._updateColor=function(){var t=this._colorTransform.alphaMultiplier*this._globalAlpha;if(this._renderDisplay.alpha=t,this._renderDisplay instanceof PIXI.Sprite||this._renderDisplay instanceof PIXI.mesh.Mesh){var e=(Math.round(255*this._colorTransform.redMultiplier)<<16)+(Math.round(255*this._colorTransform.greenMultiplier)<<8)+Math.round(255*this._colorTransform.blueMultiplier);this._renderDisplay.tint=e}},e.prototype._updateFrame=function(){var t=this._textureData;if(this._displayIndex>=0&&null!==this._display&&null!==t){var e=t.parent;null!==this._armature.replacedTexture&&(null===this._armature._replaceTextureAtlasData?((e=s.BaseObject.borrowObject(a.PixiTextureAtlasData)).copyFrom(t.parent),e.renderTexture=this._armature.replacedTexture,this._armature._replaceTextureAtlasData=e):e=this._armature._replaceTextureAtlasData,t=e.getTexture(t.name));var n=t.renderTexture;if(null!==n){if(null!==this._geometryData){var r=this._geometryData.data,i=r.intArray,o=r.floatArray,l=i[this._geometryData.offset+0],u=i[this._geometryData.offset+1],c=i[this._geometryData.offset+2];c<0&&(c+=65536);var h=c+2*l,p=this._armature._armatureData.scale,f=this._renderDisplay,d=e.width>0?e.width:n.baseTexture.width,_=e.height>0?e.height:n.baseTexture.height,y=t.region;f.vertices=new Float32Array(2*l),f.uvs=new Float32Array(2*l),f.indices=new Uint16Array(3*u);for(var m=0,g=2*l;m<g;++m)f.vertices[m]=o[c+m]*p;for(m=0;m<3*u;++m)f.indices[m]=i[this._geometryData.offset+4+m];for(m=0,g=2*l;m<g;m+=2){var v=o[h+m],A=o[h+m+1];t.rotated?(f.uvs[m]=(y.x+(1-A)*y.width)/d,f.uvs[m+1]=(y.y+v*y.height)/_):(f.uvs[m]=(y.x+v*y.width)/d,f.uvs[m+1]=(y.y+A*y.height)/_)}this._textureScale=1,f.texture=n,f.dirty++,f.indexDirty++;var b=null!==this._geometryData.weight,T=0!==this._parent._boneData.type;(b||T)&&this._identityTransform()}else{var S;this._textureScale=t.parent.scale*this._armature._armatureData.scale,(S=this._renderDisplay).texture=n}return void(this._visibleDirty=!0)}}null!==this._geometryData?((f=this._renderDisplay).texture=null,f.x=0,f.y=0,f.visible=!1):((S=this._renderDisplay).texture=null,S.x=0,S.y=0,S.visible=!1)},e.prototype._updateMesh=function(){var t=this._armature._armatureData.scale,e=this._displayFrame.deformVertices,n=this._geometryBones,r=this._geometryData,i=r.weight,o=e.length>0&&r.inheritDeform,a=this._renderDisplay;if(null!==i){var s=(w=r.data).intArray,l=w.floatArray,u=s[r.offset+0],c=s[i.offset+1];c<0&&(c+=65536);for(var h=0,p=0,f=i.offset+2+n.length,d=c,_=0;h<u;++h){for(var y=s[f++],m=0,g=0,v=0;v<y;++v){var A=n[s[f++]];if(null!==A){var b=A.globalTransformMatrix,T=l[d++],S=l[d++]*t,P=l[d++]*t;o&&(S+=e[_++],P+=e[_++]),m+=(b.a*S+b.c*P+b.tx)*T,g+=(b.b*S+b.d*P+b.ty)*T}}a.vertices[p++]=m,a.vertices[p++]=g}}else{var w,E=0!==this._parent._boneData.type,O=(s=(w=r.data).intArray,l=w.floatArray,u=s[r.offset+0],s[r.offset+2]);O<0&&(O+=65536);h=0;for(var C=2*u;h<C;h+=2){var x=l[O+h]*t,M=l[O+h+1]*t;if(o&&(x+=e[h],M+=e[h+1]),E){b=this._parent._getGlobalTransformMatrix(x,M);a.vertices[h]=b.a*x+b.c*M+b.tx,a.vertices[h+1]=b.b*x+b.d*M+b.ty}else a.vertices[h]=x,a.vertices[h+1]=M}}},e.prototype._updateTransform=function(){throw new Error},e.prototype._updateTransformV3=function(){this.updateGlobalTransform();var t=this.global;if(this._renderDisplay===this._rawDisplay||this._renderDisplay===this._meshDisplay){var e=t.x-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),n=t.y-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);this._renderDisplay.setTransform(e,n,t.scaleX*this._textureScale,t.scaleY*this._textureScale,t.rotation,t.skew,0)}else this._renderDisplay.position.set(t.x,t.y),this._renderDisplay.rotation=t.rotation,this._renderDisplay.skew.set(t.skew,0),this._renderDisplay.scale.set(t.scaleX,t.scaleY)},e.prototype._updateTransformV4=function(){this.updateGlobalTransform();var t=this.global;if(this._renderDisplay===this._rawDisplay||this._renderDisplay===this._meshDisplay){var e=t.x-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),n=t.y-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);this._renderDisplay.setTransform(e,n,t.scaleX*this._textureScale,t.scaleY*this._textureScale,t.rotation,-t.skew,0)}else this._renderDisplay.position.set(t.x,t.y),this._renderDisplay.rotation=t.rotation,this._renderDisplay.skew.set(-t.skew,0),this._renderDisplay.scale.set(t.scaleX,t.scaleY)},e.prototype._identityTransform=function(){this._renderDisplay.setTransform(0,0,1,1,0,0,0)},e}(o.Slot);e.PixiSlot=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=void 0,e.FontLoader=function(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),(n=n||0).timeoutAfter&&setTimeout((function(){r&&(document.body.removeChild(r),r=0,n.onTimeout&&n.onTimeout())}),n.timeoutAfter),(i=function(){r&&r.firstChild.clientWidth==r.lastChild.clientWidth&&(document.body.removeChild(r),r=0,e())})(document.body.appendChild(r=document.createElement("div")).innerHTML='<div style="position:fixed;white-space:pre;bottom:999%;right:999%;font:999px '+(n.generic?"":"'")+t+(n.generic?"":"'")+',serif">'+(n.sampleText||" ")+'</div><div style="position:fixed;white-space:pre;bottom:999%;right:999%;font:999px '+(n.generic?"":"'")+t+(n.generic?"":"'")+',monospace">'+(n.sampleText||" ")+"</div>"),r&&(r.firstChild.appendChild(t=document.createElement("iframe")).style.width="999%",t.contentWindow.onresize=i,r.lastChild.appendChild(t=document.createElement("iframe")).style.width="999%",t.contentWindow.onresize=i,t=setTimeout(i))}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.PixiAnimationLoader=void 0;var o=n(148),a=n(149),s=n(8),l=function(){function t(t){this._data=t,this.library=new a.Library(this._data),this.debug=!0,this.animation=new o.PixiAnimationFactory,this.animation.__name=this.library.stage.name}return t.prototype.exportAssets=function(t){this.animation.__scope=t;var e={};if(this.library.bitmaps.forEach((function(n){e[t+n.name]=n.src})),this.library.sounds.forEach((function(n){e[t+n.name]=n.src})),this._data._meta.spritesheets&&this._data._meta.spritesheets.bitmaps)for(var n=0;n<this._data._meta.spritesheets.bitmaps.length;n++){var r=this._data._meta.spritesheets.bitmaps[n].data;this.animation.__spritesheets.push({data:r})}if(this._data._meta.spritesheets&&this._data._meta.spritesheets.shapes)for(n=0;n<this._data._meta.spritesheets.shapes.length;n++){r=this._data._meta.spritesheets.shapes[n].data;this.animation.__shapesheets.push({data:r})}this.animation.__assets=e},t.prototype.destroy=function(){this._data=null,this.library.destroy(),this.library=null},t.prototype.getInstance=function(t){var e=this.animation[t||this._data._meta.stageName];if(!e)throw"can't find library item with name = "+t;var n=e.getInstance({});for(var r in this.animation){var i=this.animation[r];i.reset&&i.reset()}return n},t.prototype.build=function(t){var e=this;void 0===t&&(t=""),this.exportAssets(t),this.library.timelines.forEach((function(t){try{t.render(e.animation)}catch(t){console.error("build error",t)}}))},r([s.GamePerformanceMethod("PixiAnimationLoader","getInstance"),i("design:type",Function),i("design:paramtypes",[String]),i("design:returntype",void 0)],t.prototype,"getInstance",null),t}();e.PixiAnimationLoader=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PixiAnimationFactory=void 0;var r=function(){this.__assets={},this.__spritesheets=[],this.__shapesheets=[]};e.PixiAnimationFactory=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Library=void 0;var r=n(150),i=n(167),o=n(172),a=n(173),s=n(175),l=n(178),u=n(85),c=n(84),h=function(){function t(t){var e=this;this.bitmaps=[],this.sounds=[],this.shapes=[],this.texts=[],this.timelines=[];var n=this._mapById={},h=this._mapByName={};this.stage=null,this.meta=t._meta,this.hasContainer=!1;var p=this;t.Bitmaps.forEach((function(t){var i=new r.Bitmap(p,t);e.bitmaps.push(i),n[i.assetId]=i})),t.Shapes.forEach((function(t,r){var o=new i.Shape(p,t);o.id=r,e.shapes.push(o),n[o.assetId]=o})),t.Sounds.forEach((function(t){var r=new o.Sound(p,t);e.sounds.push(r),n[r.assetId]=r})),t.Texts.forEach((function(t){var r=new l.Text(p,t);e.texts.push(r),n[r.assetId]=r}));var f=this;t.Timelines.forEach((function(r){var i;if(r.totalFrames<=1&&r.type!=c.Timeline.STAGE?(f.hasContainer=!0,i=new u.Container(p,r)):r.type==c.Timeline.GRAPHIC?i=new a.Graphic(p,r):r.type==c.Timeline.STAGE?f.stage=i=new s.Stage(p,r,t._meta.framerate):i=new c.Timeline(p,r),e.timelines.push(i),i.type==c.Timeline.MOVIE_CLIP){for(var o=/_[0-9]+$/,l=i.name;h[l]||l==t._meta.stageName;){var d=void 0;o.test(l)?(l=l.split("_"),d=parseInt(l.pop())+1,l=l.join("_")):d=1,l+="_"+d.toString()}h[l]=i,i.name=l}n[i.assetId]=i}))}return t.prototype.createInstance=function(t,e){return this._mapById[t].create(e)},t.prototype.destroy=function(){this.shapes.length=0,this.shapes=null,this.bitmaps.length=0,this.bitmaps=null,this._mapById=null},t}();e.Library=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Bitmap=void 0;var o=n(14),a=n(151),s=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.create=function(t){return new a.BitmapInstance(this,t)},e}(o.LibraryItem);e.Bitmap=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BitmapInstance=void 0;var o=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.buildContent=function(t,e,n){if(void 0===e&&(e=!1),null!==this.libraryItem.spritesheetId&&void 0!==this.libraryItem.spritesheetId&&t.animation.__spritesheets[this.libraryItem.spritesheetId]){var r=t.animation.__spritesheets[this.libraryItem.spritesheetId].spritesheet.textures[this.libraryItem.assetId],i=new PIXI.Sprite(r);return i.name=this.libraryItem.assetId+"",i}var o=new PIXI.Sprite(PIXI.Texture.fromFrame(t.animation.__scope+this.libraryItem.name));return o.name=this.libraryItem.name,o},e}(n(11).Instance);e.BitmapInstance=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommandFactory=void 0;var r=n(153),i=n(154),o=n(155),a=n(156),s=n(157),l=n(158),u=n(160),c=n(161),h=n(162),p=n(163),f=function(){function t(t,e){}return t.prototype.toString=function(){return"[CommandFactory (type:"+this.type+")]"},t.prototype.toFrame=function(t){},t.create=function(e){var n={BlendMode:r.BlendMode,ColorTransform:i.ColorTransform,Command:t,Filter:o.Filter,Mask:a.Mask,Move:s.Move,Place:l.Place,SoundPlace:u.SoundPlace,Remove:c.Remove,Visibility:h.Visibility,ZOrder:p.ZOrder}[e.type];if(!n)throw new Error(e.type+" is not a valid timeline command");return new n(e)},t}();e.CommandFactory=f},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BlendMode=void 0;var o=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e}(n(4).CommandBase);e.BlendMode=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ColorTransform=void 0;var o=n(4),a=n(15),s=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype._round=function(t){return a.DataUtils.toPrecision(t)},e.prototype.toFrame=function(t){t.c=[this.colorMatrix.r,this._round(this.colorMatrix.rA),this.colorMatrix.g,this._round(this.colorMatrix.gA),this.colorMatrix.b,this._round(this.colorMatrix.bA)],t.a=Math.max(0,Math.min(1,this.colorMatrix.a+this.colorMatrix.aA))},e}(o.CommandBase);e.ColorTransform=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Filter=void 0;var o=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e}(n(4).CommandBase);e.Filter=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Mask=void 0;var o=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.toFrame=function(t){t.maskTill=this.maskTill},e}(n(4).CommandBase);e.Mask=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Move=void 0;var o=n(4),a=n(81),s=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.transform=new a.Matrix(r.transform),r}return i(e,t),e.prototype.toFrame=function(t){Object.assign(t,this.transform.toTween())},e}(o.CommandBase);e.Move=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Place=void 0;var o=n(4),a=n(81),s=n(159),l=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.transform=new a.Matrix(r.transform),r.bounds&&(r.bounds=new s.Rectangle(r.bounds)),r.instanceName=r.instanceName||null,r}return i(e,t),e.prototype.toFrame=function(t){Object.assign(t,this.transform.toTween()),t.bounds=this.bounds,this.bounds&&(t.x+=t.bounds.x*(null!=t.sx?t.sx:1),t.y+=t.bounds.y*(null!=t.sy?t.sy:1)),t.placeAfter=this.placeAfter},e}(o.CommandBase);e.Place=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var r=n(15),i=function(){function t(t){this.x=this.round(t.x),this.y=this.round(t.y),this.width=this.round(t.width),this.height=this.round(t.height)}return t.prototype.round=function(t){return r.DataUtils.toPrecision(t,2)},t}();e.Rectangle=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SoundPlace=void 0;var o=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e}(n(4).CommandBase);e.SoundPlace=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Remove=void 0;var o=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e}(n(4).CommandBase);e.Remove=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Visibility=void 0;var o=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.toFrame=function(t){t.v=this.visibility?1:0},e}(n(4).CommandBase);e.Visibility=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ZOrder=void 0;var o=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.toFrame=function(t){t.placeAfter=this.placeAfter},e}(n(4).CommandBase);e.ZOrder=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Frame=void 0;var r={x:"X",y:"Y",sx:"A",sy:"B",kx:"C",ky:"D",r:"R",a:"L",t:"T",c:"F",v:"V",placeAfter:"P",maskTill:"M"},i=function(){function t(){this.a=null,this.c=[1,0,1,0,1,0],this.a=null,this.t=null,this.c=[1,0,1,0,1,0],this.x=null,this.y=null,this.sx=null,this.sy=null,this.kx=null,this.ky=null,this.r=null,this.v=null,this.bounds=null}return t.prototype.addCommand=function(t){t.toFrame(this)},Object.defineProperty(t.prototype,"hasValues",{get:function(){for(var t in r)if(null!==this[t])return!0;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validKeys",{get:function(){var t=[];for(var e in r)null!==this[e]&&t.push(e);return t},enumerable:!1,configurable:!0}),t.prototype.clean=function(t){for(var e in r)-1==t.indexOf(e)&&(this[e]=null)},t.prototype.render=function(t){var e=this.toTransform();if(e.length&&(t.setTransform=function(){var t;(t=this.instance).setTransform.apply(t,e)}),null!==this.a&&this.a<1){var n=this.a;t.setAlpha=function(){try{this.instance.setAlpha(n)}catch(t){}}}if(null!==this.t&&"0xfff"!=this.t){var r=this.t;t.setTint=function(){this.instance.setTint(parseInt(r,16))}}else if(this.c&&!this.isDefaultColorTransform(this.c)){var i=this.c;t.setColorTransform=function(){var t;(t=this.instance).setColorTransform.apply(t,i)}}},t.prototype.isDefaultColorTransform=function(e){for(var n=0;n<e.length;n++)if(e[n]!==t.DEFAULT_VALUES.c[n])return!1;return!0},t.prototype.toTransform=function(){for(var t=[0,0,1,1,0,0,0],e=[this.x,this.y,this.sx,this.sy,this.r,this.kx,this.ky],n=0,r=t.length-1;r>=0&&e[r]==t[r];r--)n++;return n>0&&n<=e.length&&e.splice(e.length-n,n),e},t.prototype.toJSON=function(){var t={};for(var e in r)null!==this[e]&&(t[e]=this[e]);return t},t.prototype.toString=function(){return JSON.stringify(this.toJSON())},t.DEFAULT_VALUES={c:[1,0,1,0,1,0],a:1,r:0,x:0,y:0,sx:1,sy:1,kx:0,ky:0,v:1,placeAfter:null,maskTill:null},t}();e.Frame=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Timeline=e.ChildTimeline=void 0;var a=n(166);function s(t,e,n,r){this.extendLastFrame(e-1);var i,s={};for(i in t)if(this._currentProps.hasOwnProperty(i))s[i]=this._currentProps[i];else for(var l=s[i]=this.getPropFromShorthand(i),u=this.length-1;u>=0;--u)this[u].startProps[i]=l,this[u].endProps[i]=l;var c=new a.Tween(s,t,e,n,r);this.push(c),this._currentProps=o(o({},this._currentProps),c.endProps)}function l(t,e){this.extendLastFrame(e-1);var n=o(o({},this._currentProps),t),r=new a.Tween(n,null,e,0);return this.push(r),this._currentProps=o(o({},this._currentProps),r.endProps),r}function u(t){if(this.length){var e=this[this.length-1];e.endFrame<t&&(e.isTweenlessFrame?e.endFrame=t:this.addKeyframe(this._currentProps,e.endFrame+1,t-e.endFrame+1))}}function c(t){var e=this.target;switch(t){case"x":return e.position.x;case"y":return e.position.y;case"sx":return e.scale.x;case"sy":return e.scale.y;case"kx":return e.skew.x;case"ky":return e.skew.y;case"r":return e.rotation;case"a":return e.alpha;case"v":return e.visible;case"m":return e.mask}return null}var h=function(t){function e(e){var n=t.call(this)||this;return n.targetIndex=e,n}return i(e,t),e}(Array);e.ChildTimeline=h;var p=function(t){function e(e){var n=t.call(this)||this;return n._currentProps={},n.targetIndex=e,n.addTween=s,n.addKeyframe=l,n.extendLastFrame=u,n.getPropFromShorthand=c,n}return i(e,t),e}(Array);e.Timeline=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tween=void 0;var r=function(){function t(t,e,n,r,i){var o;if(this.startProps=t,this.endProps={},this.duration=r,this.startFrame=n,this.endFrame=n+r,this.ease=i,this.isTweenlessFrame=!e,e)for(o in e)this.endProps[o]=e[o];for(o in t)this.endProps.hasOwnProperty(o)||(this.endProps[o]=t[o])}return t.prototype.setPosition=function(t,e){if(e>=this.endFrame)this.setToEnd(t);else if(this.isTweenlessFrame)this.setToEnd(t);else{var n=(e-this.startFrame)/this.duration;this.ease&&(n=this.ease(n));var r=this.startProps,i=this.endProps;for(var a in i){var s=o[a];l(t,a,s?s(r[a],i[a],n):r[a])}}},t.prototype.setToEnd=function(t){var e=this.endProps;for(var n in e)l(t,n,e[n])},t}();function i(t,e,n){return t+(e-t)*n}e.Tween=r;var o={x:i,y:i,sx:i,sy:i,kx:i,ky:i,r:function(t,e,n){Math.abs(e-t)>a&&(e>t?t+=s:e+=a+s);return t+(e-t)*n},a:i,t:null,v:null,c:null,m:null,g:null,placeAfter:null,maskTill:null},a=Math.PI,s=2*a;function l(t,e,n){switch(e){case"x":t.transform.position.x=n;break;case"y":t.transform.position.y=n;break;case"sx":t.transform.scale.x=n;break;case"sy":t.transform.scale.y=n;break;case"kx":t.transform.skew.x=n;break;case"ky":t.transform.skew.y=n;break;case"r":t.transform.rotation=n;break;case"a":t.alpha=n;break;case"t":t.i(n);break;case"c":t.c.apply(t,n);break;case"v":t.visible=n;break;case"placeAfter":if(!n)return;t._placeAfter=n;break;case"maskTill":if(!n)return;t._maskTill=n}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=void 0;var o=n(82),a=n(15),s=n(14),l=n(39),u=function(t){function e(e,n){var r=t.call(this,e,n)||this;r.name="";var i=[];if(r.isIE())for(var o=0,a=r.paths.length;o<a;o++){var s=r.paths[o],u=s.radialGradient||s.linearGradient;if(s.stroke){i.push("f",0,0);var c=0,h=0;u?(c=l.default.hexToUint(u.stop[0].stopColor),h=u.stop[0].stopOpacity):(c=l.default.hexToUint(s.color),h=s.alpha),i.push("s",s.thickness,c,h)}else u?i.push("f",l.default.hexToUint(u.stop[0].stopColor),u.stop[0].stopOpacity):s.image?i.push("f",0,1):i.push("f",l.default.hexToUint(s.color),s.alpha);s.d.forEach((function(t,e,n){"number"==typeof t&&(n[e]=Math.round(100*t)/100)})),i.push.apply(i,s.d)}return r.draw=i,r}return i(e,t),e.prototype.isIE=function(){if(e._isIe||e._isNotIe)return e._isIe;var t=window.navigator.userAgent,n=t.indexOf("MSIE "),r=t.indexOf("Trident/");return e._isIe=n>0||r>0,e._isNotIe=!e._isIe,e._isIe},e.prototype.toColor=function(t){return a.DataUtils.compressColors(t)},e.prototype.create=function(t){return new o.ShapeInstance(this,t)},e.prototype.toString=function(){return this.draw.join(" ")},e._isIe=!1,e._isNotIe=!1,e}(s.LibraryItem);e.Shape=u},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.MemoryAtlas=void 0;var s=n(0),l=n(169),u=function(){function t(){this.Size=2048,this._frames={},this._containerPromises={},this._baseAtlases=[],this._canvases=[],this._baseTextureAtlases=[],this.createNewAtlas()}return t.prototype.fillContainer=function(t,e,n){return o(this,void 0,void 0,(function(){var r,i,o,s,l,u=this;return a(this,(function(a){if(this._containerPromises[t])return this.addSprites(t,e),[2];for(r=[],this._frames[t]=[],i=function(e){r.push(new Promise((function(n,r){var i=new Image;i.src=e.svgBase64,i.onload=function(){var r=u._current.baseAtlas.pack(i).rect;r||(u.createNewAtlas(),r=u._current.baseAtlas.pack(i).rect),u._frames[t].push({atlasId:u._current.id,x:r.x,y:r.y,width:r.w,height:r.h,spritePosition:{x:e.offsetX,y:e.offsetY}}),n()}})))},o=0,s=n;o<s.length;o++)l=s[o],i(l);return this._containerPromises[t]=r,this.addSprites(t,e),[2]}))}))},t.prototype.addSprites=function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o,s,l;return a(this,(function(a){switch(a.label){case 0:return[4,Promise.all(this._containerPromises[t])];case 1:for(a.sent(),n=0,r=this._frames[t];n<r.length;n++)i=r[n],o=new PIXI.Rectangle(i.x,i.y,i.width,i.height),s=new PIXI.Texture(this._baseTextureAtlases[i.atlasId],o),(l=new PIXI.Sprite(s)).x=i.spritePosition.x,l.y=i.spritePosition.y,e.addChild(l);return[2]}}))}))},t.prototype.createNewAtlas=function(){var t=document.createElement("canvas");t.width=this.Size,t.height=this.Size;var e=new l.Atlas(t),n=new PIXI.BaseTexture(t);this._canvases.push(t),this._baseAtlases.push(e),this._baseTextureAtlases.push(n);var r=this._baseAtlases.indexOf(e);this._current={id:r,baseAtlas:e,baseTextureAtlas:n,canvas:t},document.body.appendChild(t)},t=r([s.Singleton,i("design:paramtypes",[])],t)}();e.MemoryAtlas=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Atlas=void 0;var r=function(){function t(t,e,n,r){this.Padding=2,1===arguments.length&&(this.canvas=t,t=e=0,n=this.canvas.width,r=this.canvas.height),2===arguments.length&&(n=t,r=e,t=e=0),this.left=this.right=null,this.rect=new i(t,e,n,r),this.filled=!1,this.tilepad=!1,this._cache=[],this._uvcache=Object.create(null)}return t.prototype.pack=function(e){return this._cache=[],this._uvcache=Object.create(null),e=this._toRect(e),this.img&&this.tilepad&&(e=this._tilepad(e)),null!==this.left?this._ontoCanvas(this.left.pack(e)||this.right.pack(e)):!(this.filled||!e.fitsIn(this.rect))&&(e.sameSizeAs(this.rect)?(this.filled=!0,this._ontoCanvas(this)):(this.rect.w-e.w>this.rect.h-e.h?(this.left=new t(this.rect.x,this.rect.y,e.w,this.rect.h),this.right=new t(this.rect.x+e.w+this.Padding,this.rect.y,this.rect.w-e.w-this.Padding,this.rect.h)):(this.left=new t(this.rect.x,this.rect.y,this.rect.w,e.h),this.right=new t(this.rect.x,this.rect.y+e.h+this.Padding,this.rect.w,this.rect.h-e.h-this.Padding)),this._ontoCanvas(this.left.pack(e))))},t.prototype.expand=function(e){var n,r=this;if(e=this._toRect(e),this.img&&this.tilepad&&(e=this._tilepad(e)),this.rect.w<this.rect.h?((n=new t(0,0,this.rect.w+e.w,this.rect.h)).right=new t(this.rect.w,0,e.w,this.rect.h),n.left=this):((n=new t(0,0,this.rect.w,this.rect.h+e.h)).right=new t(0,this.rect.h,this.rect.w,e.h),n.left=this),["canvas","context","img"].forEach((function(t){r[t]&&(n[t]=r[t],r[t]=null)})),n.canvas){n.context||(n.context=n.canvas.getContext("2d"));var i=n.context.getImageData(0,0,n.canvas.width,n.canvas.height);n.canvas.width=n.rect.w,n.canvas.height=n.rect.h,n.context.putImageData(i,0,0)}return!1===n.pack(e)?n.expand(e):n},t.prototype.index=function(){var t=this;return t._cache.length>0||function e(n){null!==n.left?(e(n.left),e(n.right)):n.rect.name&&t._cache.push(n.rect)}(t),t._cache},t.prototype.uv=function(t,e){var n=this;t=t||n.rect.w,e=e||n.rect.h;var r=this.tilepad;return function i(o){if(null!==o.left)i(o.left),i(o.right);else if(void 0!==o.rect.name){var a=r?o.rect.w/4:0;n._uvcache[o.rect.name]=[[o.rect.x+a,o.rect.y+a],[o.rect.x+a+(o.rect.w-2*a),o.rect.y+a],[o.rect.x+a+(o.rect.w-2*a),o.rect.y+a+(o.rect.h-2*a)],[o.rect.x+a,o.rect.y+a+(o.rect.h-2*a)]].map((function(n){return 0!==n[0]&&(n[0]=n[0]/t),0!==n[1]&&(n[1]=n[1]/e),n}))}}(n),n._uvcache},t.prototype.json=function(e){return e?("string"==typeof e&&(e=JSON.parse(e)),function e(n){if(n&&n.rect){var r=new t(n.rect.x,n.rect.y,n.rect.w,n.rect.h);return n.left&&(r.left=e(n.left)),n.right&&(r.right=e(n.right)),r}}(e)):JSON.stringify(function t(e){var n={left:null,right:null,rect:e.rect,filled:e.filled};return null!==e.left&&(n.left=t(e.left),n.right=t(e.right)),n}(this),null,2)},t.prototype._tilepad=function(t){var e=this.img;if(!e)return t;var n=e.width/2,r=document.createElement("canvas");r.name=e.name||e.src,r.id=e.id||"",r.width=e.width+e.width,r.height=e.height+e.height;var o=r.getContext("2d"),a=o.createPattern(e,"repeat");return o.fillStyle=a,o.translate(n,n),o.fillRect(-n,-n,r.width+n,r.height+n),o.translate(-n,-n),this.img=r,new i(t.x,t.y,this.img.width,this.img.height)},t.prototype._ontoCanvas=function(t){return t&&this.img&&this.canvas&&(this.context||(this.context=this.canvas.getContext("2d")),this.context.clearRect(t.rect.x,t.rect.y,t.rect.w,t.rect.h),this.context.drawImage(this.img,t.rect.x,t.rect.y,t.rect.w,t.rect.h),t.rect.name=this.img.id||this.img.name||this.img.src||null),t},t.prototype._toRect=function(t){return!t.nodeName||"IMG"!==t.nodeName&&"CANVAS"!==t.nodeName||(this.img=t,t=new i(t.x,t.y,t.width,t.height)),t instanceof i||(t=new i(t.x||0,t.y||0,t.w||t.width,t.h||t.height)),t},t}();e.Atlas=r;var i=function(){function t(t,e,n,r){this.x=t,this.y=e,this.w=n,this.h=r}return t.prototype.fitsIn=function(t){return t.w>=this.w&&t.h>=this.h},t.prototype.sameSizeAs=function(t){return this.w===t.w&&this.h===t.h},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVGPath=e.SVGParser=e.Outline=e.PointCurveShape=void 0;var r=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("NaN encountered: "+t+"/"+e);this.x=t,this.y=e},i=function(){function t(t,e){this.main=new r(t,e),this.left=null,this.right=null,this.isplain=!0}return t.prototype.setLeft=function(t,e){this.isplain=!1,this.left=new r(t,e)},t.prototype.setRight=function(t,e){this.isplain=!1,this.right=new r(t,e)},t.prototype.isPlain=function(){return this.isplain},t.prototype.getPoint=function(){return this.main},t.prototype.getLeft=function(){return this.isplain||null==this.left?this.main:this.left},t.prototype.getRight=function(){return this.isplain||null==this.right?this.main:this.right},t}(),o=function(){function t(){this.points=[]}return t.prototype.current=function(){return this.points.slice(-1)[0]},t.prototype.addPoint=function(t,e){this.points.push(new i(t,e))},t.prototype.setLeft=function(t,e){this.current().setLeft(t,e)},t.prototype.setRight=function(t,e){this.current().setRight(t,e)},t.prototype.toSVG=function(){for(var t=this.points,e=t[0].getPoint(),n=e.x,r=e.y,i="M"+n+(r<0?r:" "+r),o=1;o<t.length;o++){var a=t[o-1],s=t[o];if(s.isPlain()&&a.isPlain()){var l=s.getPoint().x,u=s.getPoint().y;i+="L"+l+(u<0?u:" "+u)}else{var c=a.getRight().x,h=a.getRight().y,p=s.getLeft().x,f=s.getLeft().y,d=s.getPoint().x,_=s.getPoint().y;i+="C"+c+(h<0?h:" "+h)+(p<0?p:" "+p)+(f<0?f:" "+f)+(d<0?d:" "+d)+(_<0?_:" "+_)}}return i},t}();e.PointCurveShape=o;var a=function(){function t(){this.curveshapes=[],this.current=new o}return t.prototype.getShapes=function(){return this.curveshapes},t.prototype.getShape=function(t){return this.curveshapes[t]},t.prototype.toSVG=function(){var t="";return this.curveshapes.forEach((function(e){return t+=e.toSVG()})),t},t.prototype.startGroup=function(){this.curveshapes=[]},t.prototype.startShape=function(){this.current=new o},t.prototype.addPoint=function(t,e){this.current.addPoint(t,e),this.updateBounds(t,e,t,e)},t.prototype.updateBounds=function(t,e,n,r){this.bounds||(this.bounds={xMin:t,yMin:e,xMax:n,yMax:r}),t<this.bounds.xMin&&(this.bounds.xMin=t),n>this.bounds.xMax&&(this.bounds.xMax=n),e<this.bounds.yMin&&(this.bounds.yMin=e),r>this.bounds.yMax&&(this.bounds.yMax=r)},t.prototype.setLeftControl=function(t,e){this.current.setLeft(t,e)},t.prototype.setRightControl=function(t,e){this.current.setRight(t,e)},t.prototype.closeShape=function(){this.curveshapes.push(this.current),this.current=null},t.prototype.closeGroup=function(){this.curveshapes.push(this.current),this.current=null},t}();e.Outline=a;var s=function(){function t(t){this.receiver=t}return t.prototype.getReceiver=function(){return this.receiver},t.prototype.parse=function(t,e,n){e=e||0,n=n||0;var r=(t=t.replace(/\s*([mlvhqczMLVHQCZ])\s*/g,"\n$1 ").replace(/,/g," ").replace(/-/g," -").replace(/ +/g," ")).split("\n"),i=e,o=n,a=this.receiver;a.startGroup();for(var s=function(t){var s=r[t].trim(),u=s.substring(0,1),c=s.length>1?s.substring(2).trim().split(" "):[];if("m"===u||"M"===u){if("m"===u?(i+=parseFloat(c[0]),o+=parseFloat(c[1])):"M"===u&&(i=parseFloat(c[0])+e,o=parseFloat(c[1])+n),t<r.length-1){var h=r[t+1].trim().substring(0,1);"m"!==h&&"M"!==h&&"z"!==h&&"Z"!==h&&(t>1&&a.closeShape(),a.startShape(),a.addPoint(i,o))}}else if("l"===u||"L"===u)for(var p=0;p<c.length;p+=2)"l"===u?(i+=parseFloat(c[p+0]),o+=parseFloat(c[p+1])):"L"===u&&(i=parseFloat(c[p+0])+e,o=parseFloat(c[p+1])+n),a.addPoint(i,o);else if("v"===u||"V"===u)c.forEach((function(t){"v"===u?o+=parseFloat(t):"V"===u&&(o=parseFloat(t)+n),a.addPoint(i,o)}));else if("h"===u||"H"===u)c.forEach((function(t){"h"===u?i+=parseFloat(t):"H"===u&&(i=parseFloat(t)+n),a.addPoint(i,o)}));else if("q"===u||"Q"===u)for(var f=0;f<c.length;f+=4){var d=0,_=0;"q"===u?(d=i+parseFloat(c[f]),_=o+parseFloat(c[f+1])):"Q"===u&&(d=parseFloat(c[f])+e,_=parseFloat(c[f+1])+n);var y=(o+_+_)/3;i==(b=(i+d+d)/3)&&o==y||a.setRightControl(b,y);var m=l.getQuadraticCurveBounds(i,o,parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));a.updateBounds(m.xMin,m.yMin,m.xMax,m.yMax),"q"===u?(i+=parseFloat(c[f+2]),o+=parseFloat(c[f+3])):"Q"===u&&(i=parseFloat(c[f+2])+e,o=parseFloat(c[f+3])+n);var g=(i+d+d)/3,v=(o+_+_)/3;a.addPoint(i,o),i==g&&o==v||a.setLeftControl(g,v)}else if("c"===u||"C"===u)for(var A=0;A<c.length;A+=6){var b=0;y=0;"c"===u?(b=i+parseFloat(c[A]),y=o+parseFloat(c[A+1])):"C"===u&&(b=parseFloat(c[A])+e,y=parseFloat(c[A+1])+n),i==b&&o==y||a.setRightControl(b,y);g=0,v=0;"c"===u?(g=i+parseFloat(c[A+2]),v=o+parseFloat(c[A+3])):"C"===u&&(g=parseFloat(c[A+2])+e,v=parseFloat(c[A+3])+n),"c"===u?(i+=parseFloat(c[A+4]),o+=parseFloat(c[A+5])):"C"===u&&(i=parseFloat(c[A+4])+e,o=parseFloat(c[A+5])+n),a.addPoint(i,o),i==g&&o==v||a.setLeftControl(g,v)}else if("z"===u||"Z"===u)return a.closeGroup(),{value:void 0}},l=this,u=1;u<r.length;u++){var c=s(u);if("object"==typeof c)return c.value}a.closeGroup()},t.prototype.getQuadraticCurveBounds=function(t,e,n,r,i,o){function a(t,e){this.x=t,this.y=e}function s(t,e,n,r){if(r<=0||1<=r||isNaN(r))return!1;var i=new a(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r),o=new a(e.x+(n.x-e.x)*r,e.y+(n.y-e.y)*r);return new a(i.x+(o.x-i.x)*r,i.y+(o.y-i.y)*r)}var l=new a(t,e),u=new a(n,r),c=new a(i,o),h=(l.x-u.x)/(l.x-2*u.x+c.x),p=(l.y-u.y)/(l.y-2*u.y+c.y),f=s(l,u,c,h),d=f?Math.min(l.x,c.x,f.x):Math.min(l.x,c.x),_=f?Math.max(l.x,c.x,f.x):Math.max(l.x,c.x),y=s(l,u,c,p);return{xMin:d,yMin:y?Math.min(l.y,c.y,y.y):Math.min(l.y,c.y),xMax:_,yMax:y?Math.max(l.y,c.y,y.y):Math.max(l.y,c.y)}},t}();e.SVGParser=s;var l=function(){function t(){}return t.parse=function(t){var e=new a;return new s(e).parse(t),e},t}();e.SVGPath=l},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.MemoryCache=void 0;var o=n(0),a=function(){function t(){this._collection={}}return t.prototype.get=function(t){return this._collection[t]?this._collection[t]:void 0},t.prototype.add=function(t,e){this._collection[t]=e},t.prototype.remove=function(t){delete this._collection[t]},t.prototype.clear=function(){for(var t in this._collection)delete this._collection[t]},t=r([o.Singleton,i("design:paramtypes",[])],t)}();e.MemoryCache=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Sound=void 0;var o=n(14),a=n(83),s=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.create=function(t){return new a.SoundInstance(this,t)},e}(o.LibraryItem);e.Sound=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Graphic=void 0;var o=n(14),a=n(174),s=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.render=function(t){},e.prototype.create=function(t){return new a.GraphicInstance(this,t)},e}(o.LibraryItem);e.Graphic=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GraphicInstance=void 0;var o=n(11),a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.mode=2,r}return i(e,t),e.prototype.buildContent=function(t,e,n){return void 0===e&&(e=!1),t._children[this.libraryItem.name].getInstance()},e}(o.Instance);e.GraphicInstance=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=void 0;var o=n(84),a=n(38),s=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.framerate=r,i.assets={},i}return i(e,t),e.prototype.render=function(t){var e={duration:this.totalFrames,framerate:this.framerate,loop:!1,labels:{}},n=this.getLabels();!!Object.keys(n).length&&(e.labels=n);var r=new a.AnimationClipFactory(e,t,this.name);t[this.name]=r,this.getContents(r)},e}(o.Timeline);e.Stage=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TimelineInstance=void 0;var o=n(11),a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.mode=0,r}return i(e,t),e.prototype.buildContent=function(t,e,n){void 0===e&&(e=!1);return this.loop,t.animation[this.libraryItem.name].getInstance({})},e}(o.Instance);e.TimelineInstance=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerInstance=void 0;var o=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.buildContent=function(t,e,n){return void 0===e&&(e=!1),t.animation[this.libraryItem.name].getInstance(n)},e}(n(11).Instance);e.ContainerInstance=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Text=void 0;var o=n(14),a=n(179),s=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.create=function(t){return new a.TextInstance(this,t)},e}(o.LibraryItem);e.Text=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TextInstance=void 0;var o=n(11),a=n(15),s=n(86),l=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.paragraph=e.paras[0],r.style=r.paragraph.textRun[0].style,r.align=r.paragraph.alignment,r.instanceName=e.behaviour.name||null,r}return i(e,t),e.prototype.buildContent=function(t,e,n){void 0===e&&(e=!1);var r=this.style,i={},o=r.fontStyle.replace("Style","");i.fontFamily=r.fontName,i.fontSize=Math.floor(1.02*r.fontSize),i.marginTop=1.22*r.fontSize-r.fontSize,"italic"==(o=o.toLowerCase())&&(i.fontStyle=o),"bold"==o&&(i.fontWeight=o),"#000000"!=r.fontColor&&(i.fill=a.DataUtils.compressColors(r.fontColor)),r.letterSpacing&&(i.letterSpacing=r.letterSpacing),"multi"===this.libraryItem.behaviour.lineMode&&(i.wordWrap=!0,i.wordWrapWidth=this.initFrame.bounds.width);var l=this.libraryItem.txt||"";return i.align=this.align,i.width=this.initFrame.bounds.width,new s.MultiStyleText(l.replace(/\\n/g,"\n"),{default:i,b:{fill:"#000000"}},this.initFrame.bounds.height)},e}(o.Instance);e.TextInstance=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Stats=e.StatsJSAdapter=e.PIXIHooks=e.BaseHooks=e.GLHook=e.TextureHook=void 0;var o=function(){function t(t){this.createdTextures=new Array,this.maxTexturesCount=0,this.isInit=!1,this.realGLCreateTexture=function(){},this.realGLDeleteTexture=function(){},t?t.__proto__.createTexture&&(this.gl=t,this.realGLCreateTexture=t.__proto__.createTexture,this.realGLDeleteTexture=t.__proto__.deleteTexture,t.__proto__.createTexture=this.fakeGLCreateTexture.bind(this),t.__proto__.deleteTexture=this.fakeGLDeleteTexture.bind(this),this.isInit=!0,console.log("[TextureHook] GL was Hooked!")):console.error("[TextureHook] GL can't be NULL")}return Object.defineProperty(t.prototype,"currentTextureCount",{get:function(){return this.createdTextures.length},enumerable:!1,configurable:!0}),t.prototype.registerTexture=function(t){this.createdTextures.push(t),this.maxTexturesCount=Math.max(this.createdTextures.length,this.maxTexturesCount)},t.prototype.fakeGLCreateTexture=function(){var t=this.realGLCreateTexture.call(this.gl);return this.registerTexture(t),t},t.prototype.fakeGLDeleteTexture=function(t){var e=this.createdTextures.indexOf(t);e>-1&&this.createdTextures.splice(e,1),this.realGLDeleteTexture.call(this.gl,t)},t.prototype.reset=function(){this.createdTextures=new Array,this.maxTexturesCount=0},t.prototype.release=function(){this.isInit&&(this.gl.__proto__.createTexture=this.realGLCreateTexture,this.gl.__proto__.deleteTexture=this.realGLDeleteTexture,console.log("[TextureHook] Hook was removed!")),this.isInit=!1},t}();e.TextureHook=o;var a=function(){function t(t){this.drawPasses=0,this.isInit=!1,this.realGLDrawElements=function(){},t?t.__proto__.drawElements&&(this.gl=t,this.realGLDrawElements=t.__proto__.drawElements,t.__proto__.drawElements=this.fakeGLdrawElements.bind(this),this.isInit=!0,console.log("[GLHook] GL was Hooked!")):console.error("[GLHook] GL can't be NULL")}return t.prototype.fakeGLdrawElements=function(t,e,n,r){this.drawPasses++,this.realGLDrawElements.call(this.gl,t,e,n,r)},t.prototype.reset=function(){this.drawPasses=0},t.prototype.release=function(){this.isInit&&(this.gl.__proto__.drawElements=this.realGLDrawElements,console.log("[GLHook] Hook was removed!")),this.isInit=!1},t}();e.GLHook=a;var s=function(){function t(){this._drawCalls=-1,this._maxDeltaDrawCalls=-1}return t.prototype.attach=function(t){this.glhook=new a(t),this.texturehook=new o(t)},Object.defineProperty(t.prototype,"drawCalls",{get:function(){return this.glhook&&this.glhook.isInit?this.glhook.drawPasses:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxDeltaDrawCalls",{get:function(){return this._maxDeltaDrawCalls},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deltaDrawCalls",{get:function(){if(-1==this._drawCalls)return this._drawCalls=this.drawCalls,0;var t=this.drawCalls,e=t-this._drawCalls;return this._drawCalls=t,this._maxDeltaDrawCalls=Math.max(this._maxDeltaDrawCalls,e),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTextureCount",{get:function(){return this.texturehook&&this.texturehook.isInit?this.texturehook.maxTexturesCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texturesCount",{get:function(){return this.texturehook&&this.texturehook.isInit?this.texturehook.currentTextureCount:0},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._maxDeltaDrawCalls=-1,this._drawCalls=-1,this.glhook&&this.glhook.reset(),this.texturehook&&this.texturehook.reset()},t.prototype.release=function(){this.glhook&&this.glhook.release(),this.texturehook&&this.texturehook.release()},t}();e.BaseHooks=s;var l=function(t){function e(e){var n=t.call(this)||this;if(!e)return console.error("renderer can't passed or NULL"),n;if(e instanceof PIXI.WebGLRenderer){n.attach(e.gl);var r=e.textureManager._managedTextures;if(r&&n.texturehook){console.log("[PIXI Hooks] Collect used textures:",r.length);for(var i=0;i<r.length;++i)for(var o=r[i]._glTextures,a=0;a<o.length;++a)o[a].gl===e.gl&&n.texturehook.registerTexture(o[a].texture)}}else console.error("[PIXI Hook]Canvas renderer is not allowed");return n}return i(e,t),e}(s);e.PIXIHooks=l;var u=function(){function t(t,e){this.hook=t,e?this.stats=e:(this.stats=null,window.Stats&&(this.stats=new window.Stats)),this.stats?(this.dcPanel=this.stats.addPanel(c.Panel("DC:","#330570","#A69700")),this.tcPanel=this.stats.addPanel(c.Panel("TC:","#A62500","#00B454")),this.stats.showPanel(0)):console.error("Stats can't found in window, pass instance of Stats.js as second param")}return t.prototype.update=function(){this.stats&&(this.hook&&(this.dcPanel.update(this.hook.deltaDrawCalls,Math.max(50,this.hook.maxDeltaDrawCalls)),this.tcPanel.update(this.hook.texturesCount,Math.max(20,this.hook.maxTextureCount))),this.stats.update())},t.prototype.reset=function(){this.hook&&this.hook.reset()},t}();e.StatsJSAdapter=u;var c=function(){function t(){var e=0,n=document.createElement("div");function r(t){return n.appendChild(t.dom),t}function i(t){for(var r=0;r<n.children.length;r++)n.children[r].style.display=r===t?"block":"none";e=t}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(t){t.preventDefault(),i(++e%n.children.length)}),!1),this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.frames=0,this.fpsPanel=r(t.Panel("FPS","#0ff","#002")),this.msPanel=r(t.Panel("MS","#0f0","#020")),self.performance&&self.performance.memory&&(this.memPanel=r(t.Panel("MB","#f08","#201"))),i(0),this.dom=n,this.domElement=n,this.addPanel=r,this.showPanel=i,this.setMode=i}return t.prototype.begin=function(){this.beginTime=(performance||Date).now()},t.prototype.end=function(){this.frames++;var t=(performance||Date).now();if(this.msPanel.update(t-this.beginTime,200),t>=this.prevTime+1e3&&(this.fpsPanel.update(1e3*this.frames/(t-this.prevTime),100),this.prevTime=t,this.frames=0,this.memPanel)){var e=performance.memory;this.memPanel.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},t.prototype.update=function(){this.beginTime=this.end()},t.Panel=function(t,e,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,u=3*a,c=2*a,h=3*a,p=15*a,f=74*a,d=30*a,_=document.createElement("canvas");_.width=s,_.height=l,_.style.cssText="width:80px;height:48px";var y=_.getContext("2d");return y.font="bold "+9*a+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=n,y.fillRect(0,0,s,l),y.fillStyle=e,y.fillText(t,u,c),y.fillRect(h,p,f,d),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(h,p,f,d),{dom:_,update:function(l,m){r=Math.min(r,l),i=Math.max(i,l),y.fillStyle=n,y.globalAlpha=1,y.fillRect(0,0,s,p),y.fillStyle=e,y.fillText(o(l)+" "+t+" ("+o(r)+"-"+o(i)+")",u,c),y.drawImage(_,h+a,p,f-a,d,h,p,f-a,d),y.fillRect(h+f-a,p,a,d),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(h+f-a,p,a,o((1-l/m)*d))}}},t}();e.Stats=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PixiAnimationInit=void 0;var r=n(39),i=function(){function t(){}return t._setupContainer=function(){var t=PIXI.Container.prototype;t.ac=t.addChild,PIXI.Container.extend=PIXI.Container.e=function(e){return e.prototype=Object.create(t),e.prototype.__parent=t,e.prototype.constructor=e,e}},t._setupDisplayObject=function(){var t,e=PIXI.DisplayObject.prototype;PIXI.filters&&(t=PIXI.filters.ColorMatrixFilter),e.setRenderable=e.re=function(t){return this.renderable=!!t,this},e.t=e.setTransform,e.setMask=e.ma=function(t){return t&&!(t instanceof PIXI.Graphics||t instanceof PIXI.Sprite)?("undefined"!=typeof console&&console.warn&&console.warn("Warning: Masks can only be PIXI.Graphics or PIXI.Sprite objects."),this):(this.mask=t,this)},e.setAlpha=e.a=function(t){return this.alpha=t,this},e.setTint=e.i=function(t){"string"==typeof t&&(t=r.default.hexToUint(t));var e=t>>16&255,n=t>>8&255,i=255&t;return this.c(e/255,0,n/255,0,i/255,0)},e.setColorTransform=e.c=function(t,e,n,r,i,o){var a=this.colorTransformFilter;return a.matrix[0]=t,a.matrix[4]=e,a.matrix[6]=n,a.matrix[9]=r,a.matrix[12]=i,a.matrix[14]=o,this.filters=[a],this},e.hasOwnProperty("colorTransformFilter")||Object.defineProperty(e,"colorTransformFilter",{set:function(t){this._colorTransformFilter=t},get:function(){return this._colorTransformFilter||new t}}),PIXI.DisplayObject.extend=PIXI.DisplayObject.e=function(t){return t.prototype=Object.create(e),t.prototype.__parent=e,t.prototype.constructor=t,t}},t._setupGraphics=function(){var t=PIXI.Graphics.prototype;t.drawCommands=t.d=function(t){for(var e,n=[],r=0;r<=t.length;){var i=t[r++];void 0===i||this[i]?(e&&(this[e].apply(this,n),n.length=0),e=i):n.push(i)}return this},t.c=t.closePath,t.h=t.addHole,t.m=t.moveTo,t.l=t.lineTo,t.q=t.quadraticCurveTo,t.b=t.bezierCurveTo,t.f=t.beginFill,t.s=t.lineStyle,t.dr=t.drawRect,t.rr=t.drawRoundedRect,t.rc=t.drawRoundedRect,t.dc=t.drawCircle,t.ar=t.arc,t.at=t.arcTo,t.de=t.drawEllipse,t.lf=function(t){return console.warn("Linear gradient fills are not supported"),this.f(t[0])},t.rf=function(t){return console.warn("Radial gradient fills are not supported"),this.f(t[0])},t.bf=function(){return console.warn("Bitmap fills are not supported"),this.f(0)},t.sd=function(){return console.warn("Dashed strokes are not supported"),this},t.bs=function(){return console.warn("Bitmap strokes are not supported"),this},t.ls=function(){return console.warn("Linear gradient strokes are not supported"),this},t.rs=function(){return console.warn("Radial gradient strokes are not supported"),this}},t._setupSprite=function(){var t=PIXI.Sprite.prototype;PIXI.Sprite.extend=PIXI.Sprite.e=function(e){return e.prototype=Object.create(t),e.prototype.__parent=t,e.prototype.constructor=e,e}},t._setupText=function(){var t=PIXI.Text.prototype,e=["center","right"];t.setAlign=t.g=function(t){return"string"==typeof t&&(t=e.indexOf(t)),this.style.align=e[t]||"left",this.anchor.x=(t+1)/2,this};var n={o:"font",z:"fontSize",f:"fontFamily",y:"fontStyle",g:"fontWeight",i:"fill",a:"align",s:"stroke",t:"strokeThickness",w:"wordWrap",d:"wordWrapWidth",l:"lineHeight",h:"dropShadow",c:"dropShadowColor",n:"dropShadowAngle",b:"dropShadowBlur",p:"padding",x:"textBaseline",j:"lineJoin",m:"miterLimit",e:"letterSpacing"};t.setStyle=t.ss=function(t){for(var e in n)void 0!==t[e]&&(t[n[e]]=t[e],delete t[e]);return this.style=t,this},t.setShadow=t.sh=function(t,e,n){var i=this.style;return i.dropShadow=!0,void 0!==t&&(t="#"+t.toString(16)),i.dropShadowColor=r(t,i.dropShadowColor),i.dropShadowAngle=r(e,i.dropShadowAngle),i.dropShadowDistance=r(n,i.dropShadowDistance),this};var r=function(t,e){return void 0===t?e:t}},t.setup=function(){t._setupContainer(),t._setupDisplayObject(),t._setupSprite(),t._setupGraphics(),t._setupText()},t}();e.PixiAnimationInit=i},function(t,e,n){!function(t,e){t((function(){"use strict";var t,e={mobileDetectRules:{phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO Controller 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllControllerTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfControllerTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ControllersonicTablet:"ControllerPad 10pi|ControllerPad 10e|ControllerPad 10s|ControllerPad E72|ControllerPad7|ControllerPad E100|ControllerPad 7e|ControllerSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},detectMobileBrowsers:{fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i}},n=Object.prototype.hasOwnProperty;function r(t,e){return null!=t&&null!=e&&t.toLowerCase()===e.toLowerCase()}function i(t,e){var n,r,i=t.length;if(!i||!e)return!1;for(n=e.toLowerCase(),r=0;r<i;++r)if(n===t[r].toLowerCase())return!0;return!1}function o(t){for(var e in t)n.call(t,e)&&(t[e]=new RegExp(t[e],"i"))}function a(t,e){this.ua=function(t){return(t||"").substr(0,500)}(t),this._cache={},this.maxPhoneWidth=e||600}return e.FALLBACK_PHONE="UnknownPhone",e.FALLBACK_TABLET="UnknownTablet",e.FALLBACK_MOBILE="UnknownMobile",t="isArray"in Array?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},function(){var r,i,a,s,l,u,c=e.mobileDetectRules;for(r in c.props)if(n.call(c.props,r)){for(i=c.props[r],t(i)||(i=[i]),l=i.length,s=0;s<l;++s)(u=(a=i[s]).indexOf("[VER]"))>=0&&(a=a.substring(0,u)+"([\\w._\\+]+)"+a.substring(u+5)),i[s]=new RegExp(a,"i");c.props[r]=i}o(c.oss),o(c.phones),o(c.tablets),o(c.uas),o(c.utils),c.oss0={WindowsPhoneOS:c.oss.WindowsPhoneOS,WindowsMobileOS:c.oss.WindowsMobileOS}}(),e.findMatch=function(t,e){for(var r in t)if(n.call(t,r)&&t[r].test(e))return r;return null},e.findMatches=function(t,e){var r=[];for(var i in t)n.call(t,i)&&t[i].test(e)&&r.push(i);return r},e.getVersionStr=function(t,r){var i,o,a,s,l=e.mobileDetectRules.props;if(n.call(l,t))for(a=(i=l[t]).length,o=0;o<a;++o)if(null!==(s=i[o].exec(r)))return s[1];return null},e.getVersion=function(t,n){var r=e.getVersionStr(t,n);return r?e.prepareVersionNo(r):NaN},e.prepareVersionNo=function(t){var e;return 1===(e=t.split(/[a-z._ \/\-]/i)).length&&(t=e[0]),e.length>1&&(t=e[0]+".",e.shift(),t+=e.join("")),Number(t)},e.isMobileFallback=function(t){return e.detectMobileBrowsers.fullPattern.test(t)||e.detectMobileBrowsers.shortPattern.test(t.substr(0,4))},e.isTabletFallback=function(t){return e.detectMobileBrowsers.tabletPattern.test(t)},e.prepareDetectionCache=function(t,n,r){if(void 0===t.mobile){var i,o,s;if(o=e.findMatch(e.mobileDetectRules.tablets,n))return t.mobile=t.tablet=o,void(t.phone=null);if(i=e.findMatch(e.mobileDetectRules.phones,n))return t.mobile=t.phone=i,void(t.tablet=null);e.isMobileFallback(n)?void 0===(s=a.isPhoneSized(r))?(t.mobile=e.FALLBACK_MOBILE,t.tablet=t.phone=null):s?(t.mobile=t.phone=e.FALLBACK_PHONE,t.tablet=null):(t.mobile=t.tablet=e.FALLBACK_TABLET,t.phone=null):e.isTabletFallback(n)?(t.mobile=t.tablet=e.FALLBACK_TABLET,t.phone=null):t.mobile=t.tablet=t.phone=null}},e.mobileGrade=function(t){var e=null!==t.mobile();return t.os("iOS")&&t.version("iPad")>=4.3||t.os("iOS")&&t.version("iPhone")>=3.1||t.os("iOS")&&t.version("iPod")>=3.1||t.version("Android")>2.1&&t.is("Webkit")||t.version("Windows Phone OS")>=7||t.is("BlackBerry")&&t.version("BlackBerry")>=6||t.match("Playbook.*Tablet")||t.version("webOS")>=1.4&&t.match("Palm|Pre|Pixi")||t.match("hp.*TouchPad")||t.is("Firefox")&&t.version("Firefox")>=12||t.is("Chrome")&&t.is("AndroidOS")&&t.version("Android")>=4||t.is("Skyfire")&&t.version("Skyfire")>=4.1&&t.is("AndroidOS")&&t.version("Android")>=2.3||t.is("Opera")&&t.version("Opera Mobi")>11&&t.is("AndroidOS")||t.is("MeeGoOS")||t.is("Tizen")||t.is("Dolfin")&&t.version("Bada")>=2||(t.is("UC Browser")||t.is("Dolfin"))&&t.version("Android")>=2.3||t.match("Kindle Fire")||t.is("Kindle")&&t.version("Kindle")>=3||t.is("AndroidOS")&&t.is("NookTablet")||t.version("Chrome")>=11&&!e||t.version("Safari")>=5&&!e||t.version("Firefox")>=4&&!e||t.version("MSIE")>=7&&!e||t.version("Opera")>=10&&!e?"A":t.os("iOS")&&t.version("iPad")<4.3||t.os("iOS")&&t.version("iPhone")<3.1||t.os("iOS")&&t.version("iPod")<3.1||t.is("Blackberry")&&t.version("BlackBerry")>=5&&t.version("BlackBerry")<6||t.version("Opera Mini")>=5&&t.version("Opera Mini")<=6.5&&(t.version("Android")>=2.3||t.is("iOS"))||t.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||t.version("Opera Mobi")>=11&&t.is("SymbianOS")?"B":(t.version("BlackBerry")<5||t.match("MSIEMobile|Windows CE.*Mobile")||t.version("Windows Mobile"),"C")},e.detectOS=function(t){return e.findMatch(e.mobileDetectRules.oss0,t)||e.findMatch(e.mobileDetectRules.oss,t)},e.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},a.prototype={constructor:a,mobile:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return void 0===this._cache.userAgent&&(this._cache.userAgent=e.findMatch(e.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return void 0===this._cache.userAgents&&(this._cache.userAgents=e.findMatches(e.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return void 0===this._cache.os&&(this._cache.os=e.detectOS(this.ua)),this._cache.os},version:function(t){return e.getVersion(t,this.ua)},versionStr:function(t){return e.getVersionStr(t,this.ua)},is:function(t){return i(this.userAgents(),t)||r(t,this.os())||r(t,this.phone())||r(t,this.tablet())||i(e.findMatches(e.mobileDetectRules.utils,this.ua),t)},match:function(t){return t instanceof RegExp||(t=new RegExp(t,"i")),t.test(this.ua)},isPhoneSized:function(t){return a.isPhoneSized(t||this.maxPhoneWidth)},mobileGrade:function(){return void 0===this._cache.grade&&(this._cache.grade=e.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?a.isPhoneSized=function(t){return t<0?void 0:e.getDeviceSmallerSide()<=t}:a.isPhoneSized=function(){},a._impl=e,a.version="1.4.5 2021-03-13",a}))}(t.exports?function(e){t.exports=e()}:n(71))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gameControl=void 0;var r=n(55),i=n(88),o=n(184);e.gameControl={gamepads:{},axeThreshold:[1],isReady:r.isGamepadSupported(),onConnect:function(){},onDisconnect:function(){},onBeforeCycle:function(){},onAfterCycle:function(){},getGamepads:function(){return this.gamepads},getGamepad:function(t){return this.gamepads[t]?this.gamepads[t]:null},set:function(t,e){if(["axeThreshold"].indexOf(t)>=0){if("axeThreshold"===t&&(!parseFloat(e)||e<0||e>1))return void r.error(i.GAMEPAD_MESSAGES.INVALID_VALUE_NUMBER);if(this[t]=e,"axeThreshold"===t)for(var n=this.getGamepads(),o=Object.keys(n),a=0;a<o.length;a++)n[o[a]].set("axeThreshold",this.axeThreshold)}else r.error(i.GAMEPAD_MESSAGES.INVALID_PROPERTY)},checkStatus:function(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame,n=Object.keys(e.gameControl.gamepads);e.gameControl.onBeforeCycle();for(var r=0;r<n.length;r++)e.gameControl.gamepads[n[r]].checkStatus();e.gameControl.onAfterCycle(),n.length>0&&t(e.gameControl.checkStatus)},init:function(){var t=this;window.addEventListener("gamepadconnected",(function(e){var n=e.gamepad||e.detail.gamepad;if(r.log(i.GAMEPAD_MESSAGES.ON),window.gamepads||(window.gamepads={}),n){if(!window.gamepads[n.index]){window.gamepads[n.index]=n;var a=o.gamepad.init(n);a.set("axeThreshold",t.axeThreshold),t.gamepads[a.id]=a,t.onConnect(t.gamepads[a.id])}1===Object.keys(t.gamepads).length&&t.checkStatus()}})),window.addEventListener("gamepaddisconnected",(function(e){var n=e.gamepad||e.detail.gamepad;r.log(i.GAMEPAD_MESSAGES.OFF),n&&(delete window.gamepads[n.index],delete t.gamepads[n.index],t.onDisconnect(n.index))}))},on:function(t,e){switch(t){case"connect":this.onConnect=e;break;case"disconnect":this.onDisconnect=e;break;case"beforeCycle":case"beforecycle":this.onBeforeCycle=e;break;case"afterCycle":case"aftercycle":this.onAfterCycle=e;break;default:r.error(i.GAMEPAD_MESSAGES.UNKNOWN_EVENT)}return this},off:function(t){switch(t){case"connect":this.onConnect=function(){};break;case"disconnect":this.onDisconnect=function(){};break;case"beforeCycle":case"beforecycle":this.onBeforeCycle=function(){};break;case"afterCycle":case"aftercycle":this.onAfterCycle=function(){};break;default:r.error(i.GAMEPAD_MESSAGES.UNKNOWN_EVENT)}return this}},e.gameControl.init()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gamepad=void 0;var r=n(55),i=n(88);e.gamepad={init:function(t){for(var e={id:t.index,buttons:t.buttons.length,axes:Math.floor(t.axes.length/2),axeValues:[],axeThreshold:[1],hapticActuator:null,vibrationMode:-1,vibration:!1,mapping:t.mapping,buttonActions:{},axesActions:{},pressed:{},set:function(t,e){if(["axeThreshold"].indexOf(t)>=0){if("axeThreshold"===t&&(!parseFloat(e)||e<0||e>1))return void r.error(i.GAMEPAD_MESSAGES.INVALID_VALUE_NUMBER);this[t]=e}else r.error(i.GAMEPAD_MESSAGES.INVALID_PROPERTY)},vibrate:function(t,e){if(void 0===t&&(t=.75),void 0===e&&(e=500),this.hapticActuator)switch(this.vibrationMode){case 0:return this.hapticActuator.pulse(t,e);case 1:return this.hapticActuator.playEffect("dual-rumble",{duration:e,strongMagnitude:t,weakMagnitude:t})}},triggerDirectionalAction:function(t,e,n,r,i){n&&r%2===i?(this.pressed[""+t+e]||(this.pressed[""+t+e]=!0,this.axesActions[e][t].before()),this.axesActions[e][t].action()):this.pressed[""+t+e]&&r%2===i&&(delete this.pressed[""+t+e],this.axesActions[e][t].after())},checkStatus:function(){var t={},e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[];if(e.length){if((t=e[this.id]).buttons)for(var n=0;n<this.buttons;n++)!0===t.buttons[n].pressed?(this.pressed["button"+n]||(this.pressed["button"+n]=!0,this.buttonActions[n].before()),this.buttonActions[n].action()):this.pressed["button"+n]&&(delete this.pressed["button"+n],this.buttonActions[n].after());if(t.axes){var r=t.axes.length%2;for(n=0;n<2*this.axes;n++){var i=t.axes[n+r].toFixed(4),o=Math.floor(n/2);this.axeValues[o][n%2]=i,this.triggerDirectionalAction("right",o,i>=this.axeThreshold[0],n,0),this.triggerDirectionalAction("left",o,i<=-this.axeThreshold[0],n,0),this.triggerDirectionalAction("down",o,i>=this.axeThreshold[0],n,1),this.triggerDirectionalAction("up",o,i<=-this.axeThreshold[0],n,1)}}}},associateEvent:function(t,e,n){if(t.match(/^button\d+$/)){var o=parseInt(t.match(/^button(\d+)$/)[1]);o>=0&&o<this.buttons?this.buttonActions[o][n]=e:r.error(i.GAMEPAD_MESSAGES.INVALID_BUTTON)}else if("start"===t)this.buttonActions[9][n]=e;else if("select"===t)this.buttonActions[8][n]=e;else if("r1"===t)this.buttonActions[5][n]=e;else if("r2"===t)this.buttonActions[7][n]=e;else if("l1"===t)this.buttonActions[4][n]=e;else if("l2"===t)this.buttonActions[6][n]=e;else if("power"===t)this.buttons>=17?this.buttonActions[16][n]=e:r.error(i.GAMEPAD_MESSAGES.INVALID_BUTTON);else if(t.match(/^(up|down|left|right)(\d+)$/)){var a=t.match(/^(up|down|left|right)(\d+)$/),s=a[1],l=parseInt(a[2]);l>=0&&l<this.axes?this.axesActions[l][s][n]=e:r.error(i.GAMEPAD_MESSAGES.INVALID_BUTTON)}else if(t.match(/^(up|down|left|right)$/)){s=t.match(/^(up|down|left|right)$/)[1];this.axesActions[0][s][n]=e}return this},on:function(t,e){return this.associateEvent(t,e,"action")},off:function(t){return this.associateEvent(t,(function(){}),"action")},after:function(t,e){return this.associateEvent(t,e,"after")},before:function(t,e){return this.associateEvent(t,e,"before")}},n=0;n<e.buttons;n++)e.buttonActions[n]=r.emptyEvents();for(n=0;n<e.axes;n++)e.axesActions[n]={down:r.emptyEvents(),left:r.emptyEvents(),right:r.emptyEvents(),up:r.emptyEvents()},e.axeValues[n]=[0,0];return t.hapticActuators?"function"==typeof t.hapticActuators.pulse?(e.hapticActuator=t.hapticActuators,e.vibrationMode=0,e.vibration=!0):t.hapticActuators[0]&&"function"==typeof t.hapticActuators[0].pulse&&(e.hapticActuator=t.hapticActuators[0],e.vibrationMode=0,e.vibration=!0):t.vibrationActuator&&"function"==typeof t.vibrationActuator.playEffect&&(e.hapticActuator=t.vibrationActuator,e.vibrationMode=1,e.vibration=!0),e}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.MobileApi=void 0;var s=n(0),l=n(58),u=function(t){function e(){var e=t.call(this)||this;return e._pauseHandler=function(){e._soundOff()},e._resumeHandler=function(){e._soundOn()},e._mobileManager=s.Container.get(l.MobileManager),e}return i(e,t),e.prototype.registerActions=function(t){},e.prototype.initializeABTest=function(t){},e.prototype.handleGameStart=function(){},e.prototype.handleEventChange=function(){},e.prototype.changeScore=function(t){},e.prototype.handleCustomEvent=function(t,e){},e.prototype.handleGameEnd=function(){},e.prototype.shouldShowInternalGameEnd=function(){return!1},e.prototype.absoluteURL=function(t){return t},e.prototype.getArenaName=function(){return"MobileWrapper"},e.prototype.setArenaName=function(t){},e.prototype.advShowInterstitial=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this._mobileManager.adInterstitialShow()];case 1:return t.sent(),[2]}}))}))},e.prototype.advShowReward=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this._mobileManager.aAdRewardedShow()];case 1:return[2,t.sent()]}}))}))},e.prototype.advRewardAvailable=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this._mobileManager.adRewardedIsLoaded()];case 1:return[2,t.sent()]}}))}))},e.prototype.advInterstitialAvailable=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this._mobileManager.adInterstitialIsLoaded()];case 1:return[2,t.sent()]}}))}))},e.prototype.getPlatform=function(){return""},e.prototype.getGameConfigUrl=function(){return""},e.prototype.getParam=function(t,e){return e},e}(n(16).GameApiBase);e.MobileApi=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GameApi=void 0;var s=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.initializeABTest=function(t){},e.prototype.registerActions=function(t){},e.prototype.advShowInterstitial=function(){return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){return[2,new Promise((function(e,n){t._soundOff(),e()}))]}))}))},e.prototype.advShowReward=function(){return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){return[2,new Promise((function(e,n){t._soundOff(),e()}))]}))}))},e.prototype.advRewardAvailable=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,!0]}))}))},e.prototype.advInterstitialAvailable=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,!0]}))}))},e.prototype.handleCustomEvent=function(t,e){},e.prototype.handleEventChange=function(){},e.prototype.handleGameStart=function(){},e.prototype.changeScore=function(t){},e.prototype.handleGameEnd=function(){},e.prototype.shouldShowInternalGameEnd=function(){return!1},e.prototype.absoluteURL=function(t){return["",t].join("")},e.prototype.getArenaName=function(){return this._arenaName||window.arenaName},e.prototype.setArenaName=function(t){this._arenaName=t},e.prototype.destroy=function(){},e.prototype.getPlatform=function(){return""},e.prototype.getParam=function(t,e){return e},e}(n(16).GameApiBase);e.GameApi=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},l=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultSplashScreenController=e.DefaultLoadingController=e.GameInstanceBase=void 0;var c=n(54),h=n(31),p=n(90),f=n(59),d=n(92),_=n(1),y=n(0),m=n(50),g=n(3),v=n(12),A=n(188),b=n(42),T=n(40),S=n(43),P=n(44),w=n(9),E=n(93),O=n(19),C=n(45),x=n(16),M=function(){function t(t,e,n){this._x=t,this._y=e,this._s=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),t}(),D=function(){function t(e){var n=this;this._preloadLoaded=!1,this._manualResize=!1,this._showSplashScreen=!1,this._contentLoaded=!1,this._initialized=!1,this._scaleFactor=1,this._layers=[],this._orientation=v.ScreenOrientationEnum.PortraitAndLandscape,this._resizeDelay={d:2},this._tweenResizeDelay=new p.Tween(this._resizeDelay).to({d:0},200).easing(f.Easing.Linear.None).onComplete((function(){n.rendererResize(),n._resizeDelay.d=2;for(var t=n._layers.length,e=0;e<t;e++)n._layers[e].visible=!0})),this.graphHigh=!0,this._isLandscape=!0,this._size=new M(t.SIZE_LANDSCAPE.x,t.SIZE_LANDSCAPE.y,1),this._preloaderchildControllers=new d.ChildControllers,this._spalshScreenchildControllers=new d.ChildControllers,this.$childControllers=new d.ChildControllers,this.showLoadingTimeout=2e3,this.__showLoadingTimeout=null,this.__shadowUpdateEnabled=!1,this.__shadowUpdateTime=0,this.__shadowUpdateTime2=0,this.stop=!0,this.frameCount=0,this.currentFps=0;var r=this.defineAssetScale();this._scaleFactor=r,this._resourcesLoader=y.Container.get(h.ResourcesLoader),this._soundManager=y.Container.get(O.SoundManager),this._devicePixelRatio=y.Container.get(b.DevicePixelRatio),this._gameApi=y.Container.get(x.GameApiBase),this._resourcesRoot=y.Container.get(T.GameResources),this._renderer=y.Container.get(S.PIXIRenderer),this._htmlElement=y.Container.get(P.RootHtml),this._keyboardManager=y.Container.get(c.KeyboardManager),this._logger=y.Container.get(w.BaseControllerEmptyLogger),this.__shadowUpdateTime=this.__getUtcNow2()}return Object.defineProperty(t.prototype,"soundManager",{get:function(){return this._soundManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyboardManager",{get:function(){return this._keyboardManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowUpdateEnabled",{get:function(){return this.__shadowUpdateEnabled},set:function(t){!this.__shadowUpdateEnabled&&t&&this._initShadowUpdate(),this.__shadowUpdateEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{set:function(t){this._orientation=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width*this.scaleFactor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height*this.scaleFactor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLandscape",{get:function(){return this._size.x>=this._size.y},enumerable:!1,configurable:!0}),t.prototype.getPreloadersConfiguration=function(){return{childControllers:{loading:{controller:I},preloader:{controller:I}}}},t.prototype.getSplashScreenConfiguration=function(){return{delay:4e3,childControllers:{splash:{controller:R}}}},t.prototype.onUpdate=function(t){},t.prototype.onCreate=function(){},t.prototype.preloaderConfigure=function(){var t=this;this.config=this.getPreloadersConfiguration(),g._u.each(this.config.childControllers,(function(e,n){e.controller&&t._addChild(e,n,t._preloaderchildControllers)}),this);var e=new _.List;return this._preloaderchildControllers.items.forEach((function(t){e.addRange(t.controller.getResources())})),new Promise((function(n,r){t._resourcesLoader.load("Game",e.toArray(),(function(){g._u.each(t.config.childControllers,(function(e,n){e.controller&&t._innitializeChild(e,t._preloaderchildControllers[n],t._layers[2])}),t),t._preloaderchildControllers.get("loading").toggleVisible(!1),t._preloaderchildControllers.get("preloader").toggleVisible(!0),t._contentLoaded=!0,t._preloadLoaded=!0,n()}),t)}))},t.prototype.splashScreenConfigure=function(){var t=this;this.config=this.getSplashScreenConfiguration(),g._u.each(this.config.childControllers,(function(e,n){e.controller&&t._addChild(e,n,t._spalshScreenchildControllers)}),this);var e=new _.List;return this._spalshScreenchildControllers.items.forEach((function(t){e.addRange(t.controller.getResources())})),new Promise((function(n,r){t._resourcesLoader.load("Game",e.toArray(),(function(){return l(t,void 0,void 0,(function(){var t=this;return u(this,(function(e){switch(e.label){case 0:try{g._u.each(this.config.childControllers,(function(e,n){e.controller&&t._innitializeChild(e,t._spalshScreenchildControllers[n],t._layers[4])}),this),this._spalshScreenchildControllers.get("splash").setDelay(this.config.delay),this._spalshScreenchildControllers.get("splash").onShow()}catch(t){r("Core. "+t)}return[4,this._spalshScreenchildControllers.get("splash").onHide()];case 1:return e.sent(),n(),[2]}}))}))}),t)}))},t.prototype.configure=function(){var t=this;this._contentLoaded=!1,this.config=this.getConfiguration(),g._u.each(this.config.childControllers,(function(e,n){e.controller&&t._addChild(e,n,t.$childControllers)}),this);var e=new _.List;this.$childControllers.items.forEach((function(t){e.addRange(t.controller.getResources())})),this._resourcesLoader.load("Game",e.toArray(),(function(){t._contentLoaded=!0,t.initialize()}),this)},t.prototype.initialize=function(){var t=this;this._initialized||(g._u.each(this.config.childControllers,(function(e,n){e.controller&&t._innitializeChild(e,t.$childControllers[n],t._layers[1])}),this),this._preloaderchildControllers.get("preloader").toggleVisible(!1),this.onInitialize(),this._initialized=!0,this.contentLoaded(),this.rendererResize(!0))},t.prototype.showLoading=function(t){var e=this;this._preloadLoaded&&(this.__showLoadingTimeout&&clearTimeout(this.__showLoadingTimeout),this.__showLoadingTimeout=t?setTimeout((function(){e._preloaderchildControllers.get("loading").toggleVisible(t),e.__showLoadingTimeout=null}),this.showLoadingTimeout):setTimeout((function(){e._preloaderchildControllers.get("loading").toggleVisible(t),e.__showLoadingTimeout=null}),50))},t.prototype.setLoading=function(t){if(this._preloadLoaded){var e=this._preloaderchildControllers.get("loading");e.visible&&e.onLoadingProgress(t);var n=this._preloaderchildControllers.get("preloader");n.visible&&n.onLoadingProgress(t)}},t.prototype.create=function(){return l(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){return this._resourcesLoader.setGameInstanceBase(this),[2,new Promise((function(e,n){t._createStage(),t.onCreate();var r=[];return t._showSplashScreen&&r.push(t.splashScreenConfigure()),Promise.all(r).then((function(){return Promise.all([t.preloaderConfigure()]).then((function(){return t.rendererResize(!0),t._showStage(),Promise.all([]).then((function(){setTimeout((function(){t.configure(),e(t)}),300)}))}))}))}))]}))}))},t.prototype._showStage=function(){this._container.visible=!0},t.prototype._createStage=function(){return l(this,void 0,void 0,(function(){var t,e,n;return u(this,(function(r){for(this._container=new PIXI.Container,this._container.visible=!1,5,t=0;t<5;t++)e=new PIXI.Container,this._layers[t]=e,this._container.addChild(e);return this._renderer.stage.addChild(this._container),this.fpsInterval=1e3/this._renderer.fps,this.then=this.__getUtcNow(),this.startTime=this.then,this.stop=!1,(n=PIXI.ticker.shared).autoStart=!1,n.stop(),this._animation(),this._initShadowUpdate(),[2]}))}))},t.prototype._initShadowUpdate=function(){return l(this,void 0,void 0,(function(){var t,e;return u(this,(function(n){switch(n.label){case 0:t=function(t){return new Promise((function(e,n){setTimeout(e,t)}))},n.label=1;case 1:return this.__shadowUpdateEnabled?[4,t(500)]:[3,3];case 2:return n.sent(),this.stop||this.__getUtcNow2()-this.__shadowUpdateTime>1e3&&(e=(this.__getUtcNow2()-this.__shadowUpdateTime2)/1e3,this.update(e,!0)),this.__shadowUpdateTime2=this.__getUtcNow2(),[3,1];case 3:return[2]}}))}))},t.prototype.__getUtcNow2=function(){var t=new Date(Date.now());return this.__getUtcFromLocal2(t)},t.prototype.__getUtcFromLocal2=function(t){return Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())},t.prototype.dispose=function(){this.stop=!0,this.$childControllers.items.forEach((function(t){t.controller.dispose()})),this._renderer.destroy()},t.prototype.focus=function(t){t?this._keyboardManager.enable():this._keyboardManager.disable(),this.onFocus(t),this.$childControllers.items.forEach((function(e){e.controller.focus(t)}))},t.prototype.onFocus=function(t){},t.prototype.update=function(t,e){p.Tween.update(),m.PixiFactory.clockHandler(t),this._soundManager.update(t),this._resourcesLoader.update(t),this.onUpdate(t);for(var n=this.$childControllers.items.toArray(),r=n.length,i=0;i<r;i++)n[i].controller.update(t);r=(n=this._preloaderchildControllers.items.toArray()).length;for(i=0;i<r;i++)n[i].controller.update(t);this._keyboardManager.update(),this._queueUpdate(t,e)},t.prototype._queueUpdate=function(t,e){for(var n in E.QueueItem.queue){E.QueueItem.queue[n].update(t,e)}},t.prototype.play=function(){var t=this.__getUtcNow();this.then=t,this.startTime=this.then,this.last_time=t.getTime(),this.stop=!1},t.prototype.pause=function(){this.stop=!0},t.prototype.__getUtcNow=function(){var t=new Date(Date.now());return this.__getUtcFromLocal(t)},t.prototype.__getUtcFromLocal=function(t){var e=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());return new Date(e)},t.prototype._animation=function(){var t=this;if(this._clientWidth==this._htmlElement.htmlDivElement.clientWidth&&this._clientHeight==this._htmlElement.htmlDivElement.clientHeight||this._manualResize||this.resize(),requestAnimationFrame((function(){t._animation()})),!this.stop){var e=this.__getUtcNow();this.__shadowUpdateTime=this.__getUtcNow2(),this.now=e,this.elapsed=this.now-this.then;var n=e.getTime(),r=(n-this.last_time)/1e3;if(this.last_time=this.last_time?n:e.getTime(),this.update(r,!1),this.elapsed>this.fpsInterval){this.then=this.now-this.elapsed%this.fpsInterval,this._renderer.render();var i=this.now-this.startTime;this.currentFps=Math.round(1e3/(i/++this.frameCount)*100)/100,600==this.frameCount&&(this.startTime=this.now,this.frameCount=0)}}},t.prototype._rendererResize=function(t,e){var n=this;this._clientWidth=t,this._clientHeight=e;var r=this._clientWidth*(this.graphHigh?this._devicePixelRatio.value:1),i=this._clientHeight*(this.graphHigh?this._devicePixelRatio.value:1);this._renderer.renderer.resize(r,i);var o=this._renderer.renderer.view;(o.style.width=this._clientWidth+"px",o.style.height=this._clientHeight+"px",this._contentLoaded)&&(A.OrientationFactory.getOrientation(v.ScreenOrientationEnum.PortraitAndLandscape).run(r,i)==v.ScreenOrientationEnum.Portrait?(this.setPortrait(r,i),this._isLandscape=!1,this.$childControllers.items.forEach((function(t){t.controller.resize(r,i,n._scale)})),this._showSplashScreen&&this._spalshScreenchildControllers.get("splash").resize(r,i,this._scale),this._preloaderchildControllers.get("loading").resize(r,i,this._scale),this._preloaderchildControllers.get("preloader").resize(r,i,this._scale)):this._orientation==v.ScreenOrientationEnum.Portrait?(this.setRotatedPortrait(r,i),this._isLandscape=!1,this.$childControllers.items.forEach((function(t){t.controller.resize(i,r,n._scale)})),this._showSplashScreen&&this._spalshScreenchildControllers.get("splash").resize(i,r,this._scale),this._preloaderchildControllers.get("loading").resize(i,r,this._scale),this._preloaderchildControllers.get("preloader").resize(i,r,this._scale)):(this.setLandscape(r,i),this._isLandscape=!0,this.$childControllers.items.forEach((function(t){t.controller.resize(r,i,n._scale)})),this._showSplashScreen&&this._spalshScreenchildControllers.get("splash").resize(r,i,this._scale),this._preloaderchildControllers.get("loading").resize(r,i,this._scale),this._preloaderchildControllers.get("preloader").resize(r,i,this._scale)))},t.prototype.rendererResize=function(t){void 0===t&&(t=!1),this._manualResize||this._clientWidth==this._htmlElement.htmlDivElement.clientWidth&&this._clientHeight==this._htmlElement.htmlDivElement.clientHeight&&0==t||(this._logger.log("Game","RendererResize",this._htmlElement.htmlDivElement.clientWidth+"-"+this._htmlElement.htmlDivElement.clientHeight,this._htmlElement.htmlDivElement.clientWidth,this._htmlElement.htmlDivElement.clientHeight),this._rendererResize(this._htmlElement.htmlDivElement.clientWidth,this._htmlElement.htmlDivElement.clientHeight))},t.prototype.setRotatedPortrait=function(e,n){this._size.x=t.SIZE_LANDSCAPE.y,this._size.y=t.SIZE_LANDSCAPE.x,this._scale=Math.min(e/(this._size.y*this.scaleFactor),n/(this._size.x*this.scaleFactor));for(var r=this._layers.length,i=0;i<r;i++)0!=i&&(this._layers[i].scale.x=this._layers[i].scale.y=this._scale,this._layers[i].rotation=-Math.PI/2);this._container.x=.5*this._renderer.renderer.view.width,this._container.y=.5*this._renderer.renderer.view.height,this.onPortrait(),this.$childControllers.items.forEach((function(t){t.controller.setPortrait()}))},t.prototype.setPortrait=function(e,n){this._size.x=t.SIZE_LANDSCAPE.y,this._size.y=t.SIZE_LANDSCAPE.x,this._scale=Math.min(n/(this._size.y*this.scaleFactor),e/(this._size.x*this.scaleFactor));for(var r=this._layers.length,i=0;i<r;i++)0!=i&&(this._layers[i].scale.x=this._layers[i].scale.y=this._scale,this._layers[i].rotation=0);this._container.x=.5*this._renderer.renderer.view.width,this._container.y=.5*this._renderer.renderer.view.height,this.onPortrait(),this.$childControllers.items.forEach((function(t){t.controller.setPortrait()}))},t.prototype.setLandscape=function(e,n){this._size.x=t.SIZE_LANDSCAPE.x,this._size.y=t.SIZE_LANDSCAPE.y,this._scale=Math.min(n/(this._size.y*this.scaleFactor),e/(this._size.x*this.scaleFactor));for(var r=this._layers.length,i=1;i<r;i++)this._layers[i].scale.x=this._layers[i].scale.y=this._scale,this._layers[i].rotation=0;this._container.x=.5*this._renderer.renderer.view.width,this._container.y=.5*this._renderer.renderer.view.height,this.onLandscape(),this.$childControllers.items.forEach((function(t){t.controller.setLandscape()}))},t.prototype.clear=function(){this.$childControllers.items.forEach((function(t){t.controller.dispose()})),this.$childControllers=new d.ChildControllers},t.prototype.resize=function(){if(!(this._resizeDelay.d<2)){if(1.1*(this._htmlElement.htmlDivElement.clientWidth*(this.graphHigh?this._devicePixelRatio.value:1))<this._htmlElement.htmlDivElement.clientHeight*(this.graphHigh?this._devicePixelRatio.value:1)){if(this._isLandscape)for(var t=this._layers.length,e=0;e<t;e++)this._layers[e].visible=!1}else if(!this._isLandscape)for(t=this._layers.length,e=0;e<t;e++)this._layers[e].visible=!1;this._tweenResizeDelay.start()}},t.prototype.getLayer=function(t){return!this._layers||t>=this._layers.length?null:this._layers[t]},t.prototype.contentLoaded=function(){this._initialized&&this._contentLoaded&&this.onContentLoaded()},t.prototype.onContentLoaded=function(){},t.prototype.defineAssetScale=function(){window.innerWidth,devicePixelRatio,window.innerHeight,devicePixelRatio;return this._assetScale=1,2},t.prototype._addChild=function(t,e,n){void 0===e&&(e=null);var r=y.Container.get(t.controller,t.options),i=e||r.name;if(this._logger.log("GameInstanceBase","addChild",i,t),r){r.name=i,r.resourcesLoader=this._resourcesLoader,r.isLandscape=this.isLandscape,r.gameBase=this,t.model&&(r.$model=t.model),r.configure(t),g._u.extend(r.config,t.config||{});var o=new d.ChildItem(r);o.name=e,o.viewName=i,n.items.add(o),null!=e&&(n[e]=o)}return r},t.prototype._innitializeChild=function(t,e,n){e.controller.initialize(null,n),null!=t.x&&null!=t.x&&(e.controller.x=t.x),null!=t.y&&null!=t.y&&(e.controller.y=t.y)},t.prototype.removeChildByName=function(t){var e=this.$childControllers.items.firstOrDefault((function(e){return e.name==t}));this._removeChild(e),this.$childControllers[t]=null},t.prototype._removeChild=function(t){null!=t&&(this.$childControllers.items.remove(t),t.controller.dispose())},t.prototype.resourceError=function(t,e,n,r){this.onResourceError(t,e,n,r),r===this&&this.$childControllers.items.forEach((function(r){r.controller.resourceError(t,e,n)}))},t.prototype.onResourceError=function(t,e,n,r){},t.SIZE_LANDSCAPE=new PIXI.Point(640,480),o([y.Inject,a("design:type",h.ResourcesLoader)],t.prototype,"_resourcesLoader",void 0),o([y.Inject,a("design:type",b.DevicePixelRatio)],t.prototype,"_devicePixelRatio",void 0),o([y.Inject,a("design:type",x.GameApiBase)],t.prototype,"_gameApi",void 0),o([y.Inject,a("design:type",T.GameResources)],t.prototype,"_resourcesRoot",void 0),o([y.Inject,a("design:type",S.PIXIRenderer)],t.prototype,"_renderer",void 0),o([y.Inject,a("design:type",P.RootHtml)],t.prototype,"_htmlElement",void 0),o([y.Inject,a("design:type",c.KeyboardManager)],t.prototype,"_keyboardManager",void 0),o([y.Inject,a("design:type",O.SoundManager)],t.prototype,"_soundManager",void 0),o([y.Inject,a("design:type",w.BaseControllerEmptyLogger)],t.prototype,"_logger",void 0),t}();e.GameInstanceBase=D;var I=function(t){function e(e){var n=t.call(this,"DefaultLoadingController")||this;return n._options=e,n}return i(e,t),e.prototype.getConfiguration=function(){return{}},e.prototype.onInitialize=function(){},e.prototype.onLandscape=function(){},e.prototype.onPortrait=function(){},e.prototype.onUpdate=function(t){},e.prototype.onLoadingProgress=function(t){},e.prototype.onHide=function(){},e.prototype.onShow=function(){},e=o([s(0,y.Inject),a("design:paramtypes",[Object])],e)}(C.SimpleLoadingBaseController);e.DefaultLoadingController=I;var R=function(t){function e(e,n,r){var i=t.call(this,"DefaultSplashScreenController")||this;return i._options=e,i._devicePixelRatio=n,i._htmlElement=r,i._splashImgWidth=1280,i._splashImgHeight=960,i._splashImgX=0,i._splashImgY=0,i._spalshImgUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAAeACAMAAAHREjqiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURf///yEZIQAAAO/v74yMjN4AMaWlpdbW1uYZSkJaGRBaGUo6Ut5anBljUsUZGRk6UsUZUt5azuZSGd4Zpd4Z71Le5t5ae0I6OmtrYzoQKbWtrVJaWkpSSlrOEBnOEJzOEBCMpealnGNaWt5a7xAQEL3e5q21vTExKZyclIx7e3NjcxkpKUIQWqWMzt6Mzt7OEBCM5qWt5t7vnN7OnIRaUubm3uZCUlrOMRnOMZzOMRCtpWvOY2uUECnOYymUEBClY2sZhK3OY2sZzhDvpa2UECkZhHOMpSkZzq0ZhK0ZzlrvEBnvEJzvEDGMpUrOY0qUEAjOYwiUEBCEY0oZhIzOY0oZzhDOpYyUEAgZhFKMpQgZzowZhIwZzgAICOaEnL2MnM7Fxd6t72Olc2tapUIQCJwpUpxaKeYhGZylc5wpGaWM73MpUnNaKXMpGd6M797OMRCt5sVjUt7Oc2tazhDv5t6lEClahHOM5ilazq1ahK1azqXvnMVjGd4phN4pzlJae97vEDGM5mOlUkpapZwIUpxaCJylUpwIGXMIUnNaCHMIGcVCUt7OUkpazhDO5t6EEAhahFKM5ghazoxahIxazqXOnMVCGd4IhN4IzsXFxWt7e2vvY+alY1rvMWuUMRnvMSnvYymUMZzvMTGtpTGlY2sZpa3vY2sZ7zHvpa2UMSkZpXOtpSkZ760Zpa0Z73PvpcWlY1LvpUrvY+aEY0qUMQjvYwiUMTGEY0oZpYzvY0oZ7zHOpYyUMQgZpVKtpQgZ74wZpYwZ73POpcWEY1LOpaVaUt7mxd6txRAQOpzv5kIxEJzO5uZjUt7vc3Pv5mta7zHv5t7vMTGt5t6lMSlapXOt5ila761apa1a76Xvvf+9pd7vUnPO5kpa7zHO5t6EMQhapVKt5gha74xapYxa76XOvSEhIZyEWmOEWhAQWhAxCP/m5pyEpebO7/9aIf8ZIf+cIf8hpf+t3v9aY/8ZY/+cY/9jpf/eIf8h5v/eY/9j5uYAEP//ewgQIQAAECEIIYX/b9oAAAAJcEhZcwAADsMAAA7DAcdvqGQAACPESURBVHhe7d3BctpItDBgSWBI1f3XgTJsxkUZ8F2TtyHl14IXyptok7qbeYL/dKsBYeOMk5k4ifm+xKjVEkK0D0fdEuAKAAAAAAAAAAAAAAAAAAAAAHgXPt6UAj/id2+9v8r09/Xxd2jDeb7d5dusLdPOhzL91XbVsNvX/e58B3+5Ovatjh1cdrN3xxaMyaYr/VrjzTjvYFvtS81pB2Nvf7m8N2kHy37FbfxPv+vfZAe5ek2Z/gL5oZtqG7eLVAzNNN+mRbkUubGp5stqNerWfkvD6r6bPESmqVZpLtJMPp6sS8LZx9LVqhrd5jkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgJ/tpkx/V7F/f5Xib+lj/PzWO5j8zjv4tar+73fcwbZMO3+X6a9S70thWq13q6qaV9Wm1Pw+0h5tqrtD262m8ZNLTxrzV2g3/fZq1+m2t4N1N/m1RmUarVVasJtJfn0L8k4NyvSC/DJZ5OIvNKmadfzbNc1D3psm/uVXRFMNm5CqhqU2/by9dbVZPa421S7PjauUolPjraIczRtzx/0aVPv87/BiBwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgLc3uCkFfkRuvS+5yHf7qwTfX92E73N66WrAH/H1Y/Xlw8dc1ID/QorDK2/A+7YUkl2Znuuv8dTNzZUfhgelferJupqkBpwPq2o2jZo26rtCXVWrKpXSNOpX1bidTKIUd756KeZSC0Yjpbk8iSZM2lPhrAFzIc92xavWNUs0RGnArlG6yIrSsbAqjXlswLt00xWv2aEF6lMD5spZ27bjtHDetnUqRMNtom6mAeHXmTXNphRfr25KodqWac9x2VVY5NtxPOv0r435UUwjmY1TS2yqeSxNLdJUy3T4mN7nQ8ww5hfxk25TLuxKTbWOew66BhxG26bqdPuuRQs1cZxIT36bp0m6nTTVbSqlxs1H5kVqwG5ZasAu+lIDds2fmjHXxSR3JNMGt3nVUSy4PhdenC9omjgOAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPBtnz6WAj/kJv/nB31OjacBf9hNfvlqwB9VWk4D/qBDw2nAH/L12G4a8Iecmk0D/pBotk83X0uJH/DxS1X9nRpPA/4bHzTgqkyTtkzP3b60IETrXXsDtvNSCJfbaVSmF910venrNe63Wi5O4mcwm8aSsIlCNOB9KnNJXV7E43YwTjO5EdPPON2kik0UlofojNuHNH9f31a7rurKbUrT5Jtor0Mb5lfusdBvwByZeS7ue/WODTHs5vJ8asTXNGA6vFy79Sak1sjNUlftIE+SJw3YVWrAc107PMbPoVnaKBzb7VgQgS9IR9zQb5blfTW4SzPRaINZqdWAl0W7ZPt+s0wiHbYhAi8KdS6kFaPUpheyBgSA79c0TSl9h+Nd8ljl3OEo/AOb/RP90NNclOnrG/D9tmbuHo9jYLGodovo2t0dWqepBvGzKE89OoWxThP/tnlZLLyPAd4mNWBTTUcxdJ5X07w4rTCP26babAaD/ADpfu9V122uU1OFZpxe0U1qrmE86a558oL4WcWiZT7PFWvHemGR1ohN3EarNdG3TqulvvYgbSVm009eP92+T/mZNdV9acCIrCQNLCJ0mhx1u5hJYZUC7NCA6XW6jp/UgNtqdFsaL4Ixr1pCdxiLu0h+vw1YDabRWg9d4KTWiehb5XJ6zikU008s3lWD1SrWSm0bq22i+cbDbghXRRuPU8Om5lznE4Lrx2o1vq+qx9jUbhfLpqn2uqTWeJXJjxzHAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD+HJ9ukq9lDt7S1xJ6X28GeR7e0KebD6VU3XwpBXgbkfw2pRhu/ioFeAu95JfJgLydSH5/l+KBAOTN3NyUQo8A5K18vBB/ApC3053565QqAcivcQhBAcgF7a4UXuG2LYXv81d3JloAXrX2heCpvyMAR3kbL23pZZ9TBF7sF3It2vX4ctx8fwD+iM83TkNftXZ+dgCtx9Wobus6ag6H4Gk7zdPbtm6Xk7Zt54dwu431lpM6arotLFdxM+3F4iqX23E1jJXi/6aqBvPYQt1O8nKu3mSZbtfHoKnvjsUuACclDm/rxzxNunVu21NNF3XPA7BOt217eLPBPIV75/sP17xDh3CbHcKhzgGZpcg7xs4mh1KRM+DzmhcDcJxnknpYCme1XKtT5luWwOvluegD1scg64dVF27Pa14RgO1dKURxVApcrVH04Y66Xln0AQ/ysbetu3etHLp9WZ55XtMF4MNrA/C2FLhWj/2DaFXnoUYvAMsouO26eu3p2FzC7XlNDsDNKwOwlgGv3KA+fyNym/pnzwMw4iofLcdte5/mBtNIl6mQanIWG9yVmhyA1WM7yRseT+plF6kyIBfsnr4RPlX0Kp8tD+Px08pNr2Z3fJPpYNx7v2l/m6dYPK0MAAC8DxfGEPA2ltt0u3uDS/77RSn0DPOj/5PbphSKJ7M9Ly/h9zQ7RcVg0TTNpqoWwyjcPsZMqm2bJq1yG7Pd2wO2D+m2eazGpSqvdvjNP0TlOsI6JvdVNZ3Mu7uHqGmm1SbfVvnOw1MADtJsc9vV58eJfch3nMT0vmx9GAvTCesmbSWdHEw7OUsVaWmT1u12mj/GIkXD9vR7i+kiR1UcllPiKb/abtppxvlU9Cxf3uitkiens3epapria12CLAXcXbrTblEt02nm1eQQgKNuG6NqnjNxEwGZp48RazGdla0n09hC2rlqvqyWaU/Tqt3a5Yc/ya78ymLSBV5MI4Pl32Qs25x+o4NjGDTVPuKke+9f1OXqsqxM5jlPddFSrQ7LIgDLGwarJl8JOWbAYbeNUVXvc6HsVlTkabc45iMa9ykA08x+W23zO2Zirlu7/PBn2TZ367uUAR+a4XQZ034ARha8G0blfTNdTY6/3e7guNgO5ykX3TUPs0VZNmiWafVds4/D5YUArOrter+NSI8775v98RC8ixw8iXirFotuo8Nmuk/H6kEzGS6OAViP2pR4m0lUpnvG2pO09qTZz9u00mJRIpt3bFzi4T+UEl932AUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgnfn84cPXUoS39vUm+VDm4G19vrnJt391s/CmPpXcl8MQ3tjNzeeu8EkA8uai+3cYfQhA3txfveOuAOStHbp/mQDkjd3cfCylRADypnrdv0wA8pa+PD3tIgB5Q2fdv0wA8nY+nHX/MgHIm/l486WUTgQgb+bmUyn0CEDezOHyW58A5M3kMzBfP3/48OkUiQKQt5PfAdg5jEYEIG/oy8fP3Wno4/kYAcgv8aXkQAHIr/GxuyQnALngri2F12hvS+H7dBflBOB1mwxK4dzsuwNw1G66uVf7nEPvgwC8ZqN6Ukrnvj8Drr47ALsU+PziHFekXV+OtLu6FF7jBw/B1SafjykzXKNdXbXTUj7z/YfgH/H1+ZtjuCoRfbuLoXYKwMmhl3g7nd+torw6Hmpvp5O7YdR0AfijUcj1GqQDbT3sZiLqYnbS1m39eArAthQmddtO2jBud6Um1pws21i7C8B80G57Y5pcPa2rwTxWqnOmHeVSu8rLuXrLNAJZHbt7s3bTLnfVYLg7BODgEH8ReF1h2tZdAB5rHtr6FIB1LwBz9bRdtndpzVXb7tp2HcsH0/byyIdr04VLFz9h1rYPh2IOp3G7zHPHPBgGXQD2asoGXgrAYx+zPuTO2O53j5h5h+ZdEE0PsTSrS7ylWIyb+8M5mlEv2qocRuc1OQBzTT+ySgB2M6E8XNLOS4FrVpeD6OFgOjv14FIArtq7Mlf34yUH4NlBtMuAObwuZMBuJsSQ++DhVORqHWNjUgqnoW8q7ut1mana+1JIugA8q3ldAG5OxdWpyNXq4iYpma/r+GURgNNjAqzqfpetC8B+TT8DfuMQPDgVz47gXKdhvTkoB9TzDFitj0few7E66wLwrOYUgP3TMAKQb6nTWb2DXHOeAdOBsvT0zk7cdQF4PHkYehnwW4MQAUjPfT8GulHpkwyY4qQbFh86iVkOwPOaXgD2+oYCkG84OxNymwPiaQZM9TkCN/3ElgNw0z8q9zNgb6sCkJeNz0Og3cdNPwOWWNzVuW5y6tvddieiezWjXgYcnapXuVoActHhGkcxTBHxPANGoHYRuGxnObJ29eF6xqTU3EYP8hSAVduO8nTVdlfoBCCXDPrD1aSOccazPmBSIjBSYfrXPhy7efd5vm2n/UNweitrnd5vEHUCkBeNuzR28hgVvcrxYyn0DMb9k3/J4LFXc/nO/Qc6FTe9WgAAAAAAgO/05EIbvKFNk/TfbvWz7JomXwfua8r025rzy3rzt9hb3sagyW9IeYvr/c2FTPsfB+Di+NEo/hDbWSn8fJeCTQBeu14EPMShOH2uo7ltmm3VNk36oFscN5v0IY9FTHMYDPI9dnE76ar26Y2B08M7BrdNs6iqUSyKSSS9KHTv+YvtNXGneb6tqmV6jNPDR/V2k2aiPmfKVUzTR0nSBm4PAZi2sUsBGA+dNp+3Emvfpd2OsIzFeaf5cxwiIKRcmH6/qUPYbMc51HJQRERMIsAGXSTlgNqOqmUcth9j8VkApqDZDfKmFg8xG2EyPjxEmqbtpIr0bvzbiMCybJqm21Qfy9NGU4DnR0rdxskhAO+7O8+bKCxj0+nLGNKahwCUAf886RedMkd6l32YTLuqWQ6AcfeFgMN5tTwd9W7zonLPiLJ+AK5yZWcYEZKT2aGu3C/fnE1jkj40ku6c5xf7apuyXzxSt8H+ITgq5l1lWTtiXgD+ufLvMH57EYDjdEyNI1iqyu9Nbh7zQa1pIsTi6Hz4ZFFE1bzEafp23n4AzksiHMzjUHxIcOUh8rTb3rgbekdFWZYnKdvmwmxZQq6pZim0jgE4rPOd5l3loOsNTCYC8A+WO1rx21vHETfS1eRpAHaH3eT20L2KYEur5N9+xEIOwLsu8g5f1psyWs6AeSZXddNS7kInlGnOlKOYyfOT6M2ld0FHRHZv0i8BuEwPEmt0YX5Ye3nXBWDcSwD+eXb5d58yYHdofRKA09zX7+R+WdLkT2nkGIlVUtxUTReAucsY0qS9GIDlMyKHnFaWTdLD5IyY3qAf4ZtjLDqMOVI3Ze30YkmPkA/BqaeYj9yxcJ3HMxGAvZ4Cf4hh0673y9QHbJajxdMMWG0Xw4f4xTf1cNgc0kubg3bc3K2bvNpy3ZQMGOOFh32MmreLUXt3KQA3zXw1icKumQ2XMT0sS8fWFFvjZrbOwdy0eXlscH+3LQE4atbrRVTO5816lkJ5l3YhZb9msm7SIXjcTLuMzh9kNN13VyhW6+o+0lo667JLh970Jc/VeJ9/peN9+r7STs6VYbXuAmO47tZPBuv0RdDVaD8Yx3byt3Tkm+N0te+S4OohZdDDsqQbLh82el92ahzTvCNhsB+le9zeVsMSZ6uyV+thdZ+2Gw+f53nPnl9R+7c2KYzydwDDPzmOIP47j2lMnDpyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPDzfP5w0/n4tdQAXIMvKft9+Pz31y+fovCp1AK8ex9T9vtSZtKcDAhchb9T5+9s2Bvzf5ciwPuVOn83f5WZIkbBT2oA3pvc+fv07JqHBAi8d/8vdf6OZ/56olcoAQLv1/9d7vxlEiDwjn1Onb8Xk5whMPBeff1G5y/TAwTep293/jI9QOAd+sfOXxY9wM+lCPA+DFL6e0Vq0wME3p1/HPsWzgEC782rR7Z6gMB78/m1X3LgHCDw7qQLwB8+f/78MZ0LPPr07IsP9ACBdyi/Byb59PGvL39//frlcyS7yIrn14WdAwSuxV9PU6AeIHA9UgrspTznAIFXmU4mj6X437qfTHal+POlN0ifcp4eIPAqd3X7c/LUqG3vS3Gwnt+W4k/Tz4ASIFypwaRtR6X8Gndt/XMS4O0pAT7U7U/KsifpUyIlA36JAfGgKwJXJfJf235Hf2v2s3JTLwEO9pOf3gPMfcAPn79WXz9G/rv0NanAexf5bPDwPTnt7g0S4BvJfxoz+cdvSwDeo2nbjvN5vbh9nbcYAr+lrwa/cKX2pTs3b9tNrui7Xa265LAb3s3nd/vbPPf8Isg6xtB3vTQyGMXm2rqu023bTmP1Uf0kaw5WsU5aI63UrdNPgJN2VUrryeRihhpNJoe17w/7uRmtY0dn0/Wo92QG98Np2v3p8MluA9dteDz7N6mXz/JMjI7H1Waes9RymfJUSiFPeoCDmG/XZSaZppx2t+p6lIPH4Szm63lb93t30e+MdUal1/m4iqTatpERLyTA2NzFBLg6nbiMEfx489Cl0sl8PlnmPY6lg2HsdTz6cvI/83Sqs67nF7cFXKFIIoc8M1i2k1I8itQ2/p+2vjt1p1L6ODsHuEl5pX+9IqW2Z9cvxqm3d7pT5LTls3U2qdf4wwkwtrjud2EjLSd16lmePEY+3JcycN1izDksxUhA0U0rxYPoAUY/rcwc9RLgeBmJp3/yMNLo8/SXjE4JMK1z8W03Z0Pg+vsS4PMHHceulWLPsO49ZeB67dr2oRSTcV0/SXaR6urn6eI4BI6E1T4ZUsZI9/LFlEiAh+QWPb2zbtnRSwmwfUUCvPCovRV6YkBfSsAVGz/t3d3GiLEUO7MY/pZiT7kIMoz018+fSaSw/tnAntNFkJfX+Tc9wAsJMJ7fheFu7Pbl9AtckU377KTf6Eluih7gMSOd5B5gpJ/26Yg5Xw6+3AGMBHjYVKzzwkeJ/+MEOLiYvuM5XugXAldlsGyfnyJ7coYsEuCFxFLOAe7T+cEnqSmGq8/fTJOdzgFO6/qFdf7jIfDgwvnL/CDf87k/4D3KH4BL79XrSe8YqXvpIb8N5pnjOcDhs7eVvDy+PPUA414vrPNfJ8D6UgKMTCwBwpWL/De9JOpPI8QXeoCnN0KngfCk158bXxx1Jqce4KZuZ13pqcsJcP3CdZUf7AHGEFgChOsWfbsXTsT1l7w0BO514SJptb03wqxfusLR+yRIdBMvr3M5AUbtxTeu/GAP8FYPEK7c9DggfW5y+ljwN88BHuzSewGPFesXPmyx6n0SJDLgxU+39b4PsJcA0w5dStaxFecAge+2/1YvaLCsDyfdXpUAu89XHJNRem/00y923qSPh/S6jZuznNkZx2YvJ8BBZMCnV1vu0+fzfqgH6BwgXLfoO33r0xCRAcvHgl9KgM+uYozTJZVDxtrECjF7tx+uVsOHeZ5Zr86/DCF/gLhtZ2mddawT6vULPcBId+kTvcvZejUaDdd3Kd22k1vnAIHvF32gb38ednx4h+ALCfDSV+Jvdrvb3ambNh6mPJVy3ORhlKpvn/+9j/Eq57JYaTLN6/T/JshZAgyb4SwnvuheTrvvUOh9G4xzgAAAAAAAAAAAAAAAAAC/kcfpsmmaxXJ/4aNff6jBarZ84S8p9awufH/1j7p/8Xurs7tLn6ADfrFx2zST1XgwGK/mTXP5L2X8aTaLpj38ffRvGTaLUvr3bpvmWwlw3jz/Yyf/ZDbxAWP4qfZN03uVDd5HH3DZvK67NWy2pfTv/YQEuGhe+Et3wH9i1TTPv4QluR9O79aHL0bZ3W9iUDmdDnP/cLSf7nt3ul9Pp6tjx3Eweoj1+nl0sLs/dSvTlvJ02Ftrc3/Y3PhYOhis4tHy17ok49iJ7kte0kxaeRePPjzLPLvdfdNM73f33ebH/UcK6Q6rcofnCTDWfojNxT4ftnm2p8lo3duhECuk76aJBNhfK8SCu/3h6JITYDz2sSKJ+fRonfH94RtaH3dRiqexaO6OTwP47y0vdkymTbPcr4bTbdN9g9WimW3b/XC6aBaPi+10uF82TffFUrfbZrm6H92V+V3T/O96tLpblDtm02ZxyBd3uX4c25muhnfbpvtTbvumTpMwbc5Pyk1iR9arfUxi87Hx+m642rfNIieFWHnSzIdpt/q552E2i3vNZrO4y7hu6uH97T5SSV62WzTLmI8nlr+78EkCHMTTmsTDtc269Isf054OV7NtU07wxYL/Xa+GsWK3wUHbbCd5F6IrfUhlyahp2rhnPHJ3ViES4HFnuxx4v20WD6vhPHY2rzE7tllOlvtZPGp6Gt/6lkXg34i+UinFSy3pd1BS5ssvv0gDXQpbNtsu8Q2bJtWcUtc8r1lvLw3a5oeX9jCvHrmh9PNK6aUEONge9+5MWSvSdEkOs6btCsVhQXQFS2Yc5kQ/PKbiWR5dnifA3sNFgksNMWq2pVcWPeVUmh/3b54fctM05VsQN5HY+gnwqIx9I8+VnR1vD4993Ld8z1lv291RyRAYfq66OfwxtRhs7e4nh9dzGAw240nX0Vk0D7kqck65ahC9sUgIg3hVb8bjTfxb5Zdv5In5bckxPW2XWW6bbVpW5pIuNb6UAKfH+p7BYLzu9mJ6THuRQkqpc0g2y2ZWdm+cE3akqzQT/0Z50+cJcH+6JPLYJcD61BzRfTs86yxSX6xx2oW0D88Hq4PNpjylU+qMXmR61HJsSbpTlv0e4P/kqQQIP1cM3Pr5at694kcxOptPh8NVuy0JsLwSHw4v+F3uG0We2K8Our7jOA2PY4B4lgUHizSEjZyRU0TvdX2X08JLCfDYc+xs0vXq6Xo4nB0S4GHllxLgopmXnQuDtAPTMhNi+dMEeMy3kS/T0ykj5ST3z/oXOvJjnJJW6s32e4CPdYyN0852XcX+c4mjxCAdO7oGC/+Te3yXeoCnwxHwEyzP3vnSJcAYOZaOTn3oAT5PgHmV+vIYNWWWswwYCWUXW+n+3MbplV5e4utj/lqeJcAnnapjPij90H9OgL1HyqJHWEqd8wQYO3nIdzFgTenplLUihUcTxCD5sEZ3zaOX9WZnCTD1jbtS6frFFg8tMslbzV3KrKx76k1G3i5TCRB+rkgex7+ltumGwJtt9woct82hB3hMPWc9wHTmq/wJ8/v8BzSWpVfTG012YvS7PCaPSdP9tY1deaVHzywnpvSWxLOMdTzLd5uuE0yaRX6sSDWvTICR8RZdKh9PUo8v0tiy293dMtWfJ8B8cWY43uymTTxEfibLcvEj9jTv4eO2XPyInnPO5jHNJ0UHy+15tm6b/FfwBukyTpqfN9ttvkf0Y/MhZ9CWfbktpx7jmJJbOR6rDIHj6fc3CfwE4+idFO1D94qL13VYRkLsEuDh2sbTHmCkhDzibZo6p5xRpLDk+bWQyFGnzuKmPOKsdIoG3fxyvH/SZaumkVdCt/XbOpUXt6tXJ8BqE6ks32naPdQ4ElKezys8SYCxI8NJ285HqVPW9VajBZLtcUh/2z3DRXctKO5x183vnr4PcBV5LNXvD0Pg+aDbl+Mffyr7sj20S3msyebu0Dm8T9t4cigB/jyH81p/hicn9AD+hd7l0t/XQ7PY7wbV4D56tce/JQzw74yWk8MY8re2m04WzWI5deoNAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADpV9f8BDszv4vpcFnwAAAAASUVORK5CYII=",i._splashImgWidth=r.htmlDivElement.clientWidth*n.value,i._splashImgHeight=1.5*r.htmlDivElement.clientWidth*n.value,i._splashImgX=i._splashImgWidth/2,i._splashImgY=r.htmlDivElement.clientHeight*n.value/2,i}return i(e,t),e.prototype.getConfiguration=function(){return{}},e.prototype.onInitialize=function(){this._splashImg=new PIXI.Sprite(PIXI.Texture.fromImage(this._spalshImgUrl)),this._splashImg.anchor.set(.5,.5),this._splashImg.x=this._splashImgX,this._splashImg.y=this._splashImgY,this._splashImg.width=this._splashImgWidth,this._splashImg.height=this._splashImgHeight,this.display.addChild(this._splashImg)},e.prototype.onResize=function(t,e,n){this._splashImgWidth=t/n,this._splashImgHeight=e/n,this._splashImg.width=this._splashImgWidth,this._splashImg.height=this._splashImgHeight,this.display.scale.set(1/n*this._devicePixelRatio.value)},e.prototype.onLandscape=function(){},e.prototype.onPortrait=function(){},e.prototype.onUpdate=function(t){},e=o([s(0,y.Inject),s(1,y.Inject),s(2,y.Inject),a("design:paramtypes",[Object,b.DevicePixelRatio,P.RootHtml])],e)}(C.SimpleSplashScreenBaseController);e.DefaultSplashScreenController=R},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OrientationFactory=void 0;var r=n(12),i=n(189),o=n(190),a=n(191),s=function(){function t(){}return t.getOrientation=function(t){switch(t){case r.ScreenOrientationEnum.Portrait:return new i.Portrait;case r.ScreenOrientationEnum.Landscape:return new o.Landscape;case r.ScreenOrientationEnum.PortraitAndLandscape:default:return new a.PortraitAndLandscape}},t}();e.OrientationFactory=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Portrait=void 0;var r=n(12),i=function(){function t(){}return t.prototype.run=function(t,e){return r.ScreenOrientationEnum.Portrait},t}();e.Portrait=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Landscape=void 0;var r=n(12),i=function(){function t(){}return t.prototype.run=function(t,e){return r.ScreenOrientationEnum.Landscape},t}();e.Landscape=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PortraitAndLandscape=void 0;var r=n(12),i=function(){function t(){}return t.prototype.run=function(t,e){return t<e?r.ScreenOrientationEnum.Portrait:r.ScreenOrientationEnum.Landscape},t}();e.PortraitAndLandscape=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResourcesList=void 0;var r=n(1),i=function(){function t(){this.items=new r.List}return t.prototype.get=function(t){return this.items.firstOrDefault((function(e){return e.name==t}))},t}();e.ResourcesList=i},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.ModelWatchesList=e.ModelWatchItem=void 0;var o=n(1),a=n(13),s=n(3),l=n(8),u=function(){function t(t,e,n){this._event=t,this._viewName=e,this.disposed=!1;var r=this;this.event=function(t,e,i,o){r.disposed||i==r.name&&this==r.context&&(n.log(r._viewName,"ModelWatchEvent",r.name,e,"=>",t,r.context),r.run(t,e))}}return t.prototype.run=function(t,e){this._event(t,e)},r([l.GamePerformanceMethod("ModelWatchEvent","Model watch"),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],t.prototype,"run",null),t}();e.ModelWatchItem=u;var c=function(){function t(t){this._watchObject=t,this.items=new o.List}return t.prototype.get=function(t){return this[t]},t.prototype.initialize=function(t,e,n,r){var i=this;s._u.each(t,(function(t,o){if(null!=n&&null!=n){var s=a.expandFunc(t,e),l=new u(s,e.locator,r),c=o.split(".");if(l.key=o,l.name=c[c.length-1],l.context=n,c.length>1)for(var h=0;h<c.length-1;h++){if(!l.context[c[h]])return void console.error(i.constructor.name+": 1. error can't find model property '"+c[h]+"' for '"+o+"'",l.context);l.context=l.context[c[h]]}null!=l.context[l.name]&&null!=l.context[l.name]?(i.items.add(l),i[o]=l,i._watchObject.watch(l.context,l.name,l.event)):console.error(i.constructor.name+": 2. error can't find model property '"+l.name+"' for '"+o+"'",l.context)}else console.error(i.constructor.name+": error $model is null for property '"+o+"'")}),this)},t.prototype.dispose=function(){var t=this;this.items.forEach((function(e){e.disposed=!0,t._watchObject.unwatch(e.context,e.name,e.event)})),this._watchObject=null},t}();e.ModelWatchesList=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardItemsList=e.KeyboardItem=void 0;var r=n(1),i=n(3),o=n(13),a=function(t,e,n){this.name=t,this.event=e,this.key=n};e.KeyboardItem=a;var s=function(){function t(t,e){this._keyboardManager=t,this._logger=e,this.items=new r.List}return t.prototype.get=function(t){return this[t]},t.prototype.initialize=function(t,e){var n=this;i._u.each(t,(function(t,r){if("down"==r||"pressed"==r||"released"==r){var a=o.expandFunc(t,n);n._addKeyboardItem((function(t,i,o){void 0===o&&(o=!0),o&&n._logger.log(e.locator,"Keyboard",r,t),a(t,i)}),r)}else i._u.each(t,(function(t,i){if("down"==i||"pressed"==i||"released"==i){var a=o.expandFunc(t,n);n._addKeyboardItem((function(t,o,s){void 0===s&&(s=!0),t==r&&(s&&n._logger.log(e.locator,"Keyboard",i,t),a(t,o))}),i,r)}}),n)}),this)},t.prototype._addKeyboardItem=function(t,e,n){void 0===n&&(n=null);var r=null;("down"==e||"pressed"==e||"released"==e)&&(r=new a(e,t,n),this._keyboardManager.on(e,r.event)),r&&(this.items.add(r),this[e]=r)},t.prototype.dispose=function(){var t=this;this.items.forEach((function(e){t._keyboardManager.off(e.name,e.event)}))},t}();e.KeyboardItemsList=s},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.ModelEventsList=e.ModelEventItem=void 0;var a=n(1),s=n(13),l=n(3),u=n(8),c=function(){function t(t,e,n){this._event=t,this._viewName=e,this.disposed=!1;var r=this;this.event=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.disposed||(n.log.apply(n,o([r._viewName,"ModelEvent",r.name],t)),r.run.apply(r,t))}}return t.prototype.run=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._event.apply(this,t)},r([u.GamePerformanceMethod("ModelEventItem","Model event"),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"run",null),t}();e.ModelEventItem=c;var h=function(){function t(t){this._modelEvents=t,this.items=new a.List}return t.prototype.get=function(t){return this[t]},t.prototype.initialize=function(t,e,n,r){var i=this;l._u.each(t,(function(t,o){if(null!=n&&null!=n){var a=s.expandFunc(t,e),l=new c(a,e.locator,r);l.key=o,l.model=n,i.items.add(l),i[o]=l,i._modelEvents.on(n,l.key,l.event,e)}else console.error(i.constructor.name+": error $model is null for event '"+o+"'")}),this)},t.prototype.dispose=function(){var t=this;this.items.forEach((function(e){e.disposed=!0,t._modelEvents.off(e.model,e.key,e.event)}))},t}();e.ModelEventsList=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ParticlesBaseController=void 0;var o=n(23),a=n(197),s=n(7),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pause=!1,e}return i(e,t),Object.defineProperty(e.prototype,"particlesEmitter",{get:function(){return this._emitter},enumerable:!1,configurable:!0}),e.prototype.configure=function(e){if(t.prototype.configure.call(this,e),this.config.imagePaths)for(var n=0;n<this.config.imagePaths.length;n++)this.$resources.items.add(new s.ResourceItem("Particles_Resources_"+this.name+n,this.config.imagePaths[n],s.ResourceItemType.pixiTexture))},e.prototype.initialize=function(e,n){void 0===n&&(n=null),this.parentContainer=n||e.display;var r=[];if(this.config.imagePaths)for(var i=0;i<this.config.imagePaths.length;i++)r.push(this.$resources.get("Particles_Resources_"+this.name+i).pixiTexture);return this._emitter=new a.Emitter(this.display,r,this.config.particlesConfig),this.parentContainer.addChild(this.display),t.prototype.initialize.call(this,e,n)},e.prototype.pause=function(t){this._pause=t},e.prototype.update=function(e){return!!t.prototype.update.call(this,e)&&(this._pause||this._emitter.update(e),!0)},e.prototype.cleanup=function(){this._emitter.cleanup()},e.prototype.dispose=function(){this.parentContainer.removeChild(this.display),this._emitter.cleanup(),this._emitter.destroy(),this._emitter=null,t.prototype.dispose.call(this)},e}(o._BaseController);e.ParticlesBaseController=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=void 0;var r=n(46),i=n(198),o=n(97),a=n(200),s=new PIXI.Point,l=function(){function t(t,e,n){this._currentImageIndex=-1,this._particleConstructor=i.Particle,this.particleImages=null,this.startAlpha=null,this.startSpeed=null,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=null,this.minimumScaleMultiplier=1,this.startColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.spawnPolygonalChain=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._currentImageIndex=-1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,e&&n&&this.init(e,n),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(t.prototype,"orderedArt",{get:function(){return-1!==this._currentImageIndex},set:function(t){this._currentImageIndex=t?0:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency="number"==typeof t&&t>0?t:1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"particleConstructor",{get:function(){return this._particleConstructor},set:function(t){if(t!=this._particleConstructor){this._particleConstructor=t,this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this.cleanup(),this._parent=t},enumerable:!1,configurable:!0}),t.prototype.init=function(t,e){if(t&&e){this.cleanup(),this._origConfig=e,this._origArt=t,t=Array.isArray(t)?t.slice():[t];var n=this._particleConstructor;this.particleImages=n.parseArt?n.parseArt(t):t,e.alpha?this.startAlpha=o.PropertyNode.createList(e.alpha):this.startAlpha=new o.PropertyNode(1,0),e.speed?(this.startSpeed=o.PropertyNode.createList(e.speed),this.minimumSpeedMultiplier=("minimumSpeedMultiplier"in e?e.minimumSpeedMultiplier:e.speed.minimumSpeedMultiplier)||1):(this.minimumSpeedMultiplier=1,this.startSpeed=new o.PropertyNode(0,0));var i=e.acceleration;i&&(i.x||i.y)?(this.startSpeed.next=null,this.acceleration=new PIXI.Point(i.x,i.y),this.maxSpeed=e.maxSpeed||NaN):this.acceleration=new PIXI.Point,e.scale?(this.startScale=o.PropertyNode.createList(e.scale),this.minimumScaleMultiplier=("minimumScaleMultiplier"in e?e.minimumScaleMultiplier:e.scale.minimumScaleMultiplier)||1):(this.startScale=new o.PropertyNode(1,0),this.minimumScaleMultiplier=1),e.color?this.startColor=o.PropertyNode.createList(e.color):this.startColor=new o.PropertyNode({r:255,g:255,b:255},0),e.startRotation?(this.minStartRotation=e.startRotation.min,this.maxStartRotation=e.startRotation.max):this.minStartRotation=this.maxStartRotation=0,e.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!e.noRotation:this.noRotation=!1,e.rotationSpeed?(this.minRotationSpeed=e.rotationSpeed.min,this.maxRotationSpeed=e.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.rotationAcceleration=e.rotationAcceleration||0,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,this.particleBlendMode=r.ParticleUtils.getBlendMode(e.blendMode),e.ease?this.customEase="function"==typeof e.ease?e.ease:r.ParticleUtils.generateEase(e.ease):this.customEase=null,n.parseData?this.extraData=n.parseData(e.extraData):this.extraData=e.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.particleSpacing=0,this.angleStart=0,this.parseSpawnType(e),this.frequency=e.frequency,this.spawnChance="number"==typeof e.spawnChance&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos=new PIXI.Point,this.spawnPos=new PIXI.Point(e.pos.x,e.pos.y),this.initAdditional(t,e),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===e.emit||!!e.emit,this.autoUpdate=!!e.autoUpdate,this.orderedArt=!!e.orderedArt}},t.prototype.initAdditional=function(t,e){},t.prototype.parseSpawnType=function(t){var e;switch(t.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var n=t.spawnRect;this.spawnRect=new PIXI.Rectangle(n.x,n.y,n.w,n.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,e=t.spawnCircle,this.spawnCircle=new PIXI.Circle(e.x,e.y,e.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,e=t.spawnCircle,this.spawnCircle=new PIXI.Circle(e.x,e.y,e.r),this.spawnCircle.minRadius=e.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particleSpacing=t.particleSpacing,this.angleStart=t.angleStart?t.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;case"polygonalChain":this.spawnType="polygonalChain",this._spawnFunc=this._spawnPolygonalChain,this.spawnPolygonalChain=new a.PolygonalChain(t.spawnPolygon);break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}},t.prototype.recycle=function(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t==this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t==this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount},t.prototype.rotate=function(t){if(this.rotation!=t){var e=t-this.rotation;this.rotation=t,r.ParticleUtils.rotatePoint(e,this.spawnPos),this._posChanged=!0}},t.prototype.updateSpawnPos=function(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e},t.prototype.updateOwnerPos=function(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e},t.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(t.prototype,"emit",{get:function(){return this._emit},set:function(t){this._emit=!!t,this._emitterLife=this.emitterLifetime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){this._autoUpdate&&!t||this._autoUpdate,this._autoUpdate=!!t},enumerable:!1,configurable:!0}),t.prototype.playOnceAndDestroy=function(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t},t.prototype.playOnce=function(t){this.emit=!0,this._completeCallback=t},t.prototype.update=function(t){if(this._autoUpdate&&(t=t/PIXI.settings.TARGET_FPMS/1e3),this._parent){var e,n,r,i,o;for(n=this._activeParticlesFirst;n;n=r)r=n.next,n.update(t);this._prevPosIsValid&&(i=this._prevEmitterPos.x,o=this._prevEmitterPos.y);var a=this.ownerPos.x+this.spawnPos.x,s=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var l=void 0;if(l=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<l){var u=void 0,c=void 0;if(this._prevPosIsValid&&this._posChanged){var h=1+this._spawnTimer/t;u=(a-i)*h+i,c=(s-o)*h+o}else u=a,c=s;e=0;for(var p=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);e<p;++e)if(!(this.spawnChance<1&&Math.random()>=this.spawnChance)){var f=void 0;if(this._poolFirst?(f=this._poolFirst,this._poolFirst=this._poolFirst.next,f.next=null):f=new this.particleConstructor(this),this.particleImages.length>1?-1!==this._currentImageIndex?(f.applyArt(this.particleImages[this._currentImageIndex++]),(this._currentImageIndex<0||this._currentImageIndex>=this.particleImages.length)&&(this._currentImageIndex=0)):f.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):f.applyArt(this.particleImages[0]),f.alphaList.reset(this.startAlpha),1!=this.minimumSpeedMultiplier&&(f.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),f.speedList.reset(this.startSpeed),f.acceleration.x=this.acceleration.x,f.acceleration.y=this.acceleration.y,f.maxSpeed=this.maxSpeed,1!=this.minimumScaleMultiplier&&(f.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier),f.scaleList.reset(this.startScale),f.colorList.reset(this.startColor),this.minRotationSpeed==this.maxRotationSpeed?f.rotationSpeed=this.minRotationSpeed:f.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,f.rotationAcceleration=this.rotationAcceleration,f.noRotation=this.noRotation,f.maxLife=l,f.blendMode=this.particleBlendMode,f.ease=this.customEase,f.extraData=this.extraData,this.applyAdditionalProperties(f),this._spawnFunc(f,u,c,e),f.init(),f.update(-this._spawnTimer),f.parent){var d=this._parent.children;if(d[0]==f)d.shift();else if(d[d.length-1]==f)d.pop();else{var _=d.indexOf(f);d.splice(_,1)}this.addAtBack?d.unshift(f):d.push(f)}else this.addAtBack?this._parent.addChildAt(f,0):this._parent.addChild(f);this._activeParticlesLast?(this._activeParticlesLast.next=f,f.prev=this._activeParticlesLast,this._activeParticlesLast=f):this._activeParticlesLast=this._activeParticlesFirst=f,++this.particleCount}}this._spawnTimer+=this._frequency}}if(this._posChanged&&(this._prevEmitterPos.x=a,this._prevEmitterPos.y=s,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){var y=this._completeCallback;this._completeCallback=null,y()}this._destroyWhenComplete&&this.destroy()}}},t.prototype.applyAdditionalProperties=function(t){},t.prototype._spawnPoint=function(t,e,n){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,t.position.x=e,t.position.y=n},t.prototype._spawnRect=function(t,e,n){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,s.x=Math.random()*this.spawnRect.width+this.spawnRect.x,s.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&r.ParticleUtils.rotatePoint(this.rotation,s),t.position.x=e+s.x,t.position.y=n+s.y},t.prototype._spawnCircle=function(t,e,n){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,s.x=Math.random()*this.spawnCircle.radius,s.y=0,r.ParticleUtils.rotatePoint(360*Math.random(),s),s.x+=this.spawnCircle.x,s.y+=this.spawnCircle.y,0!==this.rotation&&r.ParticleUtils.rotatePoint(this.rotation,s),t.position.x=e+s.x,t.position.y=n+s.y},t.prototype._spawnRing=function(t,e,n){var i=this.spawnCircle;this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,i.minRadius!==i.radius?s.x=Math.random()*(i.radius-i.minRadius)+i.minRadius:s.x=i.radius,s.y=0;var o=360*Math.random();t.rotation+=o,r.ParticleUtils.rotatePoint(o,s),s.x+=this.spawnCircle.x,s.y+=this.spawnCircle.y,0!==this.rotation&&r.ParticleUtils.rotatePoint(this.rotation,s),t.position.x=e+s.x,t.position.y=n+s.y},t.prototype._spawnPolygonalChain=function(t,e,n){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,this.spawnPolygonalChain.getRandomPoint(s),0!==this.rotation&&r.ParticleUtils.rotatePoint(this.rotation,s),t.position.x=e+s.x,t.position.y=n+s.y},t.prototype._spawnBurst=function(t,e,n,r){0===this.particleSpacing?t.rotation=360*Math.random():t.rotation=this.angleStart+this.particleSpacing*r+this.rotation,t.position.x=e,t.position.y=n},t.prototype.cleanup=function(){var t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},t.prototype.destroy=function(){var t;this.autoUpdate=!1,this.cleanup();for(var e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},t}();e.Emitter=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Particle=void 0;var o=n(46),a=n(199),s=function(t){function e(n){var r=t.call(this)||this;return r.emitter=n,r.anchor.x=r.anchor.y=.5,r.velocity=new PIXI.Point,r.rotationSpeed=0,r.rotationAcceleration=0,r.maxLife=0,r.age=0,r.ease=null,r.extraData=null,r.alphaList=new a.PropertyList,r.speedList=new a.PropertyList,r.speedMultiplier=1,r.acceleration=new PIXI.Point,r.maxSpeed=NaN,r.scaleList=new a.PropertyList,r.scaleMultiplier=1,r.colorList=new a.PropertyList(!0),r._doAlpha=!1,r._doScale=!1,r._doSpeed=!1,r._doAcceleration=!1,r._doColor=!1,r._doNormalMovement=!1,r._oneOverLife=0,r.next=null,r.prev=null,r.init=r.init,r.Particle_init=e.prototype.init,r.update=r.update,r.Particle_update=e.prototype.update,r.Sprite_destroy=t.prototype.destroy,r.Particle_destroy=e.prototype.destroy,r.applyArt=r.applyArt,r.kill=r.kill,r}return i(e,t),e.prototype.init=function(){this.age=0,this.velocity.x=this.speedList.current.value*this.speedMultiplier,this.velocity.y=0,o.ParticleUtils.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=o.ParticleUtils.DEG_TO_RADS,this.rotationSpeed*=o.ParticleUtils.DEG_TO_RADS,this.rotationAcceleration*=o.ParticleUtils.DEG_TO_RADS,this.alpha=this.alphaList.current.value,this.scale.x=this.scale.y=this.scaleList.current.value,this._doAlpha=!!this.alphaList.current.next,this._doSpeed=!!this.speedList.current.next,this._doScale=!!this.scaleList.current.next,this._doColor=!!this.colorList.current.next,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.speedList.current.value||this._doAcceleration,this._oneOverLife=1/this.maxLife;var t=this.colorList.current.value;this.tint=o.ParticleUtils.combineRGBComponents(t.r,t.g,t.b),this.visible=!0},e.prototype.applyArt=function(t){this.texture=t||PIXI.Texture.EMPTY},e.prototype.update=function(t){if(this.age+=t,this.age>=this.maxLife||this.age<0)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4==this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(e)),this._doScale){var n=this.scaleList.interpolate(e)*this.scaleMultiplier;this.scale.x=this.scale.y=n}if(this._doNormalMovement){var r=void 0,i=void 0;if(this._doSpeed){var a=this.speedList.interpolate(e)*this.speedMultiplier;o.ParticleUtils.normalize(this.velocity),o.ParticleUtils.scaleBy(this.velocity,a),r=this.velocity.x*t,i=this.velocity.y*t}else if(this._doAcceleration){var s=this.velocity.x,l=this.velocity.y;if(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.maxSpeed){var u=o.ParticleUtils.length(this.velocity);u>this.maxSpeed&&o.ParticleUtils.scaleBy(this.velocity,this.maxSpeed/u)}r=(s+this.velocity.x)/2*t,i=(l+this.velocity.y)/2*t}else r=this.velocity.x*t,i=this.velocity.y*t;this.position.x+=r,this.position.y+=i}if(this._doColor&&(this.tint=this.colorList.interpolate(e)),0!==this.rotationAcceleration){var c=this.rotationSpeed+this.rotationAcceleration*t;this.rotation+=(this.rotationSpeed+c)/2*t,this.rotationSpeed=c}else 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*t:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x));return e},e.prototype.kill=function(){this.emitter.recycle(this)},e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this._texture&&this.Sprite_destroy(),this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=this.next=this.prev=null},e.parseArt=function(t){var e;for(e=t.length;e>=0;--e)"string"==typeof t[e]&&(t[e]=o.GetTextureFromString(t[e]));if(o.ParticleUtils.verbose)for(e=t.length-1;e>0;--e)if(t[e].baseTexture!=t[e-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return t},e.parseData=function(t){return t},e}(PIXI.Sprite);e.Particle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyList=void 0;var r=n(46),i=function(){function t(t){void 0===t&&(t=!1),this.current=null,this.next=null,this.isColor=!!t,this.interpolate=null,this.ease=null}return t.prototype.reset=function(t){this.current=t,this.next=t.next,this.next&&this.next.time>=1?this.interpolate=this.isColor?a:o:t.isStepped?this.interpolate=this.isColor?c:u:this.interpolate=this.isColor?l:s,this.ease=this.current.ease},t}();function o(t){return this.ease&&(t=this.ease(t)),(this.next.value-this.current.value)*t+this.current.value}function a(t){this.ease&&(t=this.ease(t));var e=this.current.value,n=this.next.value,i=(n.r-e.r)*t+e.r,o=(n.g-e.g)*t+e.g,a=(n.b-e.b)*t+e.b;return r.ParticleUtils.combineRGBComponents(i,o,a)}function s(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;return t=(t-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*t+this.current.value}function l(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;t=(t-this.current.time)/(this.next.time-this.current.time);var e=this.current.value,n=this.next.value,i=(n.r-e.r)*t+e.r,o=(n.g-e.g)*t+e.g,a=(n.b-e.b)*t+e.b;return r.ParticleUtils.combineRGBComponents(i,o,a)}function u(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function c(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;var e=this.current.value;return r.ParticleUtils.combineRGBComponents(e.r,e.g,e.b)}e.PropertyList=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonalChain=void 0;var r=function(){function t(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}return t.prototype.init=function(t){if(t&&t.length)if(Array.isArray(t[0]))for(var e=0;e<t.length;++e)for(var n=t[e],r=n[0],i=1;i<n.length;++i){var o=n[i];this.segments.push({p1:r,p2:o,l:0}),r=o}else for(r=t[0],e=1;e<t.length;++e){o=t[e];this.segments.push({p1:r,p2:o,l:0}),r=o}else this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});for(e=0;e<this.segments.length;++e){var a=this.segments[e],s=a.p1,l=a.p2,u=Math.sqrt((l.x-s.x)*(l.x-s.x)+(l.y-s.y)*(l.y-s.y));this.segments[e].l=u,this.totalLength+=u,this.countingLengths.push(this.totalLength)}},t.prototype.getRandomPoint=function(t){var e,n,r=Math.random()*this.totalLength;if(1===this.segments.length)e=this.segments[0],n=r;else for(var i=0;i<this.countingLengths.length;++i)if(r<this.countingLengths[i]){e=this.segments[i],n=0===i?r:r-this.countingLengths[i-1];break}n/=e.l||1;var o=e.p1,a=e.p2;t.x=o.x+n*(a.x-o.x),t.y=o.y+n*(a.y-o.y)},t}();e.PolygonalChain=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.DragonBonesLoadingBaseController=e.DragonBonesBaseController=void 0;var o=n(1),a=n(202),s=n(29),l=n(60),u=n(203),c=n(204),h=n(205),p=n(206),f=n(50),d=function(t){function e(e){var n=t.call(this,e)||this;return n.name=e,n._armature=null,n._armatureDisplay=null,n._armatureName=null,n.$textures=new a.TextureList,n.$sprites=new l.SpriteList,n.$slots=new u.SlotList,n.$boundingBoxes=new c.BoundingBoxList,n.$spritesEvents=new s.SpriteEvents,n.$animations=new h.AnimationsList,n.$animationsEvents=new p.AnimationsEventsList,n}return i(e,t),Object.defineProperty(e.prototype,"display",{get:function(){return this._armatureDisplay||null!=this._armature&&this._armature.display},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"armature",{get:function(){return this._armature},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._armatureDisplay.x},set:function(t){this._armatureDisplay.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._armatureDisplay.y},set:function(t){this._armatureDisplay.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._armatureDisplay.rotation},set:function(t){this._armatureDisplay.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._armatureDisplay.scale.x},set:function(t){this._armatureDisplay.scale.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._armatureDisplay.scale.y},set:function(t){this._armatureDisplay.scale.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"armatureDisplay",{get:function(){return this._armatureDisplay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._armatureDisplay.alpha},set:function(t){this._armatureDisplay.alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._armatureDisplay.visible},set:function(t){null!=this._armatureDisplay&&null!=this._armatureDisplay&&(this._armatureDisplay.visible=t)},enumerable:!1,configurable:!0}),e.prototype.initialize=function(n,r){if(void 0===r&&(r=null),n instanceof e)if(this.parentContainer=n.display,this.config.slot){var i=n.armature.getSlot(this.config.slot);if(i||console.error(this.name+": error can't find slot '"+this.config.slot+"' in armature '"+n.armature.name+"'"),s=i.childArmature)this._armature=s,this._armatureDisplay=this._armature.display;else if(this.config.replace){var a=f.PixiFactory.factory.buildArmatureDisplay(this.config.armatureName);i.replaceDisplay(a),i.displayIndex=0,this._armature=a.armature,this._armatureDisplay=a,this._parentArmature=n.armature}else{a=f.PixiFactory.factory.buildArmatureDisplay(this.config.armatureName);this._armature=a.armature,i.display.addChildController(a),this._armatureDisplay=a,this._parentArmature=n.armature}}else if(this.config.armatureName){var s;if((a=f.PixiFactory.factory.buildArmatureDisplay(this.config.armatureName))||console.error("Armature '"+this.config.armatureName+"' build error"),!(s=a.armature))return void console.error("Armature '"+this.config.armatureName+"' build error");this._armature=s,this._armatureDisplay=this._armature.display,this.container=n.armature.display,this.container.addChild(this._armatureDisplay)}else this._armature=n.armature;else{this.parentContainer=r||n.display,(a=f.PixiFactory.factory.buildArmatureDisplay(this.config.armatureName))||(console.error("Armature '"+this.config.armatureName+"' can't load"),console.error("Controller '"+this.constructor.name+"' can't load"));var l=a.armature;l&&(this._armatureMustDispose=!0,this._armature=l,this._armatureName=this.config.armatureName,this._armatureDisplay=this._armature.display,this._armatureSlots=new o.List(this._armature.getSlots()),this.container=this.parentContainer),this.parentContainer.addChild(this.display)}if(this._armature)return this.$boundingBoxes.initialize(this.config.boundingBoxes,this._armature),this.$sprites.initialize(this.config.sprites,this._armature,this),this.$slots.initialize(this.config.slots,this._armature),this.$spritesEvents.initialize(this.config.events,this.$boundingBoxes,this.$sprites,this,this.logger),this.$animations.initialize(this.config.animations,this._armature,this,this.logger),this.$animationsEvents.initialize(this.config.animationsEvents,this.$animations,this._armature,this,this.logger),t.prototype.initialize.call(this,n,r);console.error("Controller '"+this.constructor.name+"' can't load")},e.prototype.dispose=function(){if(t.prototype.dispose.call(this),this.$animationsEvents.dispose(),this.$spritesEvents.dispose(),this.container)this.container.removeChild(this._armatureDisplay),this._armature.dispose(),this._armature=null,this.container=null;else if(this._parentArmature){this._parentArmature.getSlot(this.config.slot).replaceDisplay(null)}},e.prototype.clear=function(){t.prototype.clear.call(this),this.$textures=new a.TextureList,this.$sprites=new l.SpriteList,this.$slots=new u.SlotList,this.$spritesEvents=new s.SpriteEvents,this.$animations=new h.AnimationsList,this.$animationsEvents=new p.AnimationsEventsList},e}(n(23)._BaseController);e.DragonBonesBaseController=d;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toggleVisible=function(t){this.visible!=t&&(this.visible=t,t?this.onShow():this.onHide())},e}(d);e.DragonBonesLoadingBaseController=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextureList=e.TextureItem=void 0;var r=n(1),i=function(){};e.TextureItem=i;var o=function(){function t(){this.items=new r.List}return t.prototype.get=function(t){return this[t]},t}();e.TextureList=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlotList=e.SlotItem=void 0;var r=n(1),i=function(){};e.SlotItem=i;var o=function(){function t(){this.items=new r.List}return t.prototype.get=function(t){return this[t]},t.prototype.initialize=function(t,e){var n=new r.List(e.getSlots());if(t){var o=function(r){var o=t[r],s=n.firstOrDefault((function(t){return t.name==o.slotName}));if(s){var l=new i;l.slot=s,l.name=r,a.items.add(l),a[r]=s}else console.error(a.constructor.name+": error can't find slot '"+o.slotName+"' in armature '"+e.name+"'")},a=this;for(var s in t)o(s)}},t}();e.SlotList=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BoundingBoxList=e.BoundingBoxItem=void 0;var r=n(1),i=function(){function t(){}return Object.defineProperty(t.prototype,"interactive",{get:function(){return!!this.sprite&&this.sprite.interactive},set:function(t){this.sprite&&(this.sprite.interactive=t)},enumerable:!1,configurable:!0}),t.prototype.containsPoint=function(t,e){return this.boundingBoxData.containsPoint(t,e)},t.prototype.toMask=function(t,e){var n=this.toGraphics();t.addChild(n),e.mask=n},t.prototype.toPolygon=function(){for(var t=[],e=this.boundingBoxData.vertices,n=0;n<e.length;n+=2)t.push(new PIXI.Point(e[n],e[n+1]));return new PIXI.Polygon(t)},t.prototype.toGraphics=function(){for(var t=[],e=this.boundingBoxData.vertices,n=0;n<e.length;n+=2)t.push(new PIXI.Point(e[n],e[n+1]));var r=new PIXI.Graphics;return r.clear(),r.beginFill(15631086,0),r.lineStyle(1,32768,0),r.drawPolygon(t),r.endFill(),r},t}();e.BoundingBoxItem=i;var o=function(){function t(){this.items=new r.List}return t.prototype.get=function(t){return this[t]},t.prototype.initialize=function(t,e){var n=new r.List(e.getSlots());if(t){var o=function(r){var o=t[r],s=n.firstOrDefault((function(t){return t.name==o.slotName&&null!=t.boundingBoxData}));if(s){var l=new i;l.boundingBoxData=s.boundingBoxData,l.name=r,l.slotName=o.slotName,l.slot=s,a.items.add(l),a[r]=l}else console.error(a.constructor.name+": error can't find boundingBox '"+o.slotName+"' in armature '"+e.name+"'")},a=this;for(var s in t)o(s)}},t}();e.BoundingBoxList=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationsList=e.AnimationsItem=void 0;var r=n(1),i=n(3),o=function(){function t(t,e,n,r){this.animationName=t,this._armature=e,this._viewName=n,this._logger=r,this._armatureDisplay=this._armature.display}return t.prototype.checkName=function(t){return this.animationName==t},t.prototype.play=function(t){return void 0===t&&(t=1),this._logger.log(this._viewName,"AnimationsEvent",this.animationName+".play"),this._armatureDisplay.animation.play(this.animationName,t)},t.prototype.seTimeScale=function(t){void 0===t&&(t=1),this._armatureDisplay.animation.animationConfig.timeScale=t},t.prototype.gotoAndStopByProgress=function(t){return this._logger.log(this._viewName,"AnimationsEvent",this.animationName+".gotoAndStopByProgress",t),this._armatureDisplay.animation.gotoAndStopByProgress(this.animationName,t)},t.prototype.stop=function(){return this._logger.log(this._viewName,"AnimationsEvent",this.animationName+".stop"),this._armatureDisplay.animation.stop(this.animationName)},t}();e.AnimationsItem=o;var a=function(){function t(){this.items=new r.List}return t.prototype.get=function(t){return this[t]||console.error("error can't find animation '"+t+"'"),this[t]},t.prototype.initialize=function(t,e,n,r){var a=this;i._u.each(t,(function(t,i){var s=new o(t,e,n.name,r);a.items.add(s),a[i]=s}),this)},t}();e.AnimationsList=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationsEventsList=e.AnimationsEventItem=void 0;var r=n(1),i=n(13),o=n(3),a=function(t,e,n,r,i,o){var a=this;this.eventType=t,this._event=e,this.armature=n,this.animation=r,this._viewName=i,this.hasCalled=!1,this.event=function(n){r.checkName(n.animationState.name)&&(a.hasCalled=!0,o.log(a._viewName,"AnimationsEvent",n.animationState.name+"."+t,n),e(n))},this.armature.display.on(t,this.event,this)};e.AnimationsEventItem=a;var s=function(){function t(){this.items=new r.List}return t.prototype.get=function(t){return this[t]},t.prototype.initialize=function(t,e,n,r,s){var l=this;o._u.each(t,(function(t){var o=e[t.animationName];if(o){var u=i.expandFunc(t.event,r),c=new a(t.type,u,n,o,r.name,s);l.items.add(c)}}),this)},t.prototype.dispose=function(){this.items.forEach((function(t){t.armature.display.off(t.eventType,t.event,t)}))},t}();e.AnimationsEventsList=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateUtils=void 0;var r=function(){function t(){}return t.prototype.getOrdinalSuffix=function(t){if(t%100>10&&t%100<20)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},t.prototype.convertMStoTime=function(t){var e="",n=Math.floor(t/1e3)%60,r=Math.floor(t/6e4)%60;return e+=this.convertZero(r)+":",e+=n>0?this.convertZero(n):"00"},t.prototype.convertZero=function(t){var e=t.toString();return t<10&&(e="0"+e),e},t.prototype.stripDateFromString=function(t){return t.replace(/(\d)?[- /.](\d)?[- /.](\d)?/g,""),t},t.prototype.getCurrentTimeUTCms=function(){return(new Date).getTime()},t.timeFormat=function(t){var e=Math.floor(t/60),n=Math.floor(t%60);return n>9?String(e)+":"+String(n):String(e)+":0"+String(n)},t}();e.DateUtils=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Multiplayer=void 0;var r=n(0),i=n(62),o=n(99),a=n(47),s=n(234),l=function(){function t(){}return t.initPlayerIO=function(t){void 0===t&&(t=!0),r.Container.bind(i.LobbyManager).to(o.LobbyPlayerIOManager).scope(r.Scope.Singleton),r.Container.bind(a.MultiplayerClient).to(s.MultiplayerPlayerIOClient).scope(r.Scope.Singleton),PlayerIO.UseSecureApiRequests=!1,r.Container.get(a.MultiplayerClient).__isCompressingTraffic=t},t}();e.Multiplayer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;var r=n(24),i=function(){function t(t){this.id=t.id,this.createdUtc=t.cu,this.startedUtc=t.su,this.endedUtc=t.endedUtc,this.p=t.p.map((function(t){return r.MultiplayerPlayer.fromObject(t)})),this.cu=t.cu,this.su=t.su}return Object.defineProperty(t.prototype,"players",{get:function(){return this.p},enumerable:!1,configurable:!0}),t.fromObject=function(e){return new t(e)},t}();e.Game=i},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Peers=e.Peer=void 0;var o=n(7),a=n(1),s=n(211),l=n(231),u=function(){function t(t){this.id=t,this._destroyed=!1,this.connecting=!1,this.received=0,this.sent=0,this._queue=new o.Queue}return Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype.create=function(t,e){return void 0===e&&(e=0),r(this,void 0,void 0,(function(){var n=this;return i(this,(function(r){switch(r.label){case 0:return this._initiator=t,this.connecting=!0,this._peer&&this._peer.destroy(),this._peer=new s({initiator:t,channelName:this.id,wrtc:l}),this._peer.on("signal",(function(t){0==n._queue.length?n._queue.push({condition:function(t){return t>1},action:function(e){n.trigger("signal",t)}}):n._queue.push({condition:function(t){return!0},action:function(e){n.trigger("signal",t)}})})),this._peer.on("close",(function(){n.connecting=!1,console.log("PEER close"),n.trigger("close",{})})),this._peer.on("error",(function(t){n.connecting=!1,console.log("error",t),n.destroy(),n.trigger("error",{})})),this._peer.on("data",(function(t){try{n.trigger("data",JSON.parse(t))}catch(e){console.error(e),console.log(t)}})),this._peer.on("connect",(function(){n.connecting=!1,n.trigger("connect",{})})),[4,this.delay(5e3)];case 1:return r.sent(),[4,this._checkConnect(++e)];case 2:return r.sent(),[2]}}))}))},t.prototype._checkConnect=function(t){return void 0===t&&(t=0),r(this,void 0,void 0,(function(){var e=this;return i(this,(function(n){switch(n.label){case 0:return t>2?[2]:this._peer.connected||this._peer.destroyed?[3,3]:this._initiator?[4,this.create(this._initiator,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[3,4];case 3:this._queue.push({condition:function(t){return t>1},action:function(n){return r(e,void 0,void 0,(function(){return i(this,(function(e){return this._checkConnect(++t),[2]}))}))}}),n.label=4;case 4:return[2]}}))}))},t.prototype.signal=function(t){this._destroyed||this._peer.connected||this._peer.signal(t)},t.prototype.destroy=function(){this._peer&&(this._destroyed=!0,this._queue.clear(),this._peer.destroy())},t.prototype.send=function(t){this._peer.connected&&this._peer.send(t)},t.prototype.isConnected=function(){return this._peer.connected||this.connecting},t.prototype.getStats=function(){this._peer&&this._peer.connected},t.prototype.delay=function(t){return r(this,void 0,void 0,(function(){return i(this,(function(e){return[2,new Promise((function(e,n){setTimeout((function(){e()}),t)}))]}))}))},t.prototype.update=function(t){this._queue.update(t)},t.prototype.on=function(t,e,n){this.__$eventListeners_=this.__$eventListeners_||{},this.__$eventListeners_[t]=this.__$eventListeners_[t]||[],this.__$eventListeners_[t].push({callback:e,context:n||this})},t.prototype.off=function(t,e){this.__$eventListeners_=this.__$eventListeners_||{};for(var n=this.__$eventListeners_[t]||[],r=0;r<n.length;r++)if(n[r].callback===e)return void n.splice(r,1)},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.__$eventListeners_=this.__$eventListeners_||{};for(var r=this.__$eventListeners_[t]||[],i=0;i<r.length;i++)r[i].callback.apply(r[i].context,Array.prototype.slice.call(arguments,1))},t}();e.Peer=u;var c=function(){function t(){this._peers=new a.List,this.dataReceivedTotalSize=0,this.dataSentTotalSize=0,this._dataReceivedTotalSize=0,this._dataSentTotalSize=0}return t.prototype.getPeer=function(t){var e=this._peers.firstOrDefault((function(e){return e.id==t}));return e||(e=new u(t),this._peers.add(e)),e},t.prototype.check=function(t){var e=this._peers.firstOrDefault((function(e){return e.id==t}));return(!e||!e.destroyed)&&!!e},t.prototype.server=function(t){this.destroy(t),this.getPeer(t).create(!0)},t.prototype.client=function(t){this.destroy(t),this.getPeer(t).create(!1)},t.prototype.signal=function(t,e){var n=this._peers.firstOrDefault((function(e){return e.id==t}));n&&n.signal(e)},t.prototype.destroy=function(t){var e=this._peers.firstOrDefault((function(e){return e.id==t}));e&&(this._dataReceivedTotalSize+=e.received,this._dataSentTotalSize+=e.sent,e.destroy(),this._peers.remove(e))},t.prototype.destroyAll=function(){for(var t=this._peers.count()-1;t>=0;t--){var e=this._peers.elementAt(t);e&&(this._dataReceivedTotalSize+=e.received,this._dataSentTotalSize+=e.sent,e.destroy(),this._peers.remove(e))}},t.prototype.send=function(t){this._peers.forEach((function(e){e.send(JSON.stringify(t))}))},t.prototype.getStats=function(){var t=0,e=0;this._peers.forEach((function(n){n.getStats(),t+=n.received,e+=n.sent})),this.dataReceivedTotalSize=this._dataReceivedTotalSize+t,this.dataSentTotalSize=this._dataSentTotalSize+e},t.prototype.isConnected=function(t){var e=this._peers.firstOrDefault((function(e){return e.id==t}));return!!e&&e.isConnected()},t.prototype.update=function(t){this._peers.forEach((function(e){e.update(t)}))},t}();e.Peers=c},function(t,e,n){const r=n(212)("simple-peer"),i=n(215),o=n(216),a=n(220),s=n(229),l=n(230),{Buffer:u}=n(26);function c(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}class h extends a.Duplex{constructor(t){if(super(t=Object.assign({allowHalfOpen:!1},t)),this._id=o(4).toString("hex").slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||o(20).toString("hex"):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||h.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},h.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(t=>t),this.streams=t.streams||(t.stream?[t.stream]:[]),this.trickle=void 0===t.trickle||t.trickle,this.allowHalfTrickle=void 0!==t.allowHalfTrickle&&t.allowHalfTrickle,this.iceCompleteTimeout=t.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=t.wrtc&&"object"==typeof t.wrtc?t.wrtc:i(),!this._wrtc)throw"undefined"==typeof window?l(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):l(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void this.destroy(l(t,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=t=>{this._onIceCandidate(t)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(t=>{this.destroy(l(t,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=t=>{this._setupData(t)},this.streams&&this.streams.forEach(t=>{this.addStream(t)}),this._pc.ontrack=t=>{this._onTrack(t)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(t)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(t=>{this._addIceCandidate(t)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(t=>{this.destroy(l(t,"ERR_SET_REMOTE_DESCRIPTION"))}),t.sdp||t.candidate||t.renegotiate||t.transceiverRequest||this.destroy(l(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(t){const e=new this._wrtc.RTCIceCandidate(t);this._pc.addIceCandidate(e).catch(t=>{var n;!e.address||e.address.endsWith(".local")?(n="Ignoring unsupported ICE candidate.",console.warn(n)):this.destroy(l(t,"ERR_ADD_ICE_CANDIDATE"))})}send(t){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(t)}}addTransceiver(t,e){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(t,e),this._needsNegotiation()}catch(t){this.destroy(l(t,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:t,init:e}})}}addStream(t){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),t.getTracks().forEach(e=>{this.addTrack(e,t)})}}addTrack(t,e){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(t)||new Map;let r=n.get(e);if(r)throw r.removed?l(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):l(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(t,e),n.set(e,r),this._senderMap.set(t,n),this._needsNegotiation()}replaceTrack(t,e,n){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(t),i=r?r.get(n):null;if(!i)throw l(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");e&&this._senderMap.set(e,r),null!=i.replaceTrack?i.replaceTrack(e):this.destroy(l(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(t,e){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(t),r=n?n.get(e):null;if(!r)throw l(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(t){"NS_ERROR_UNEXPECTED"===t.name?this._sendersAwaitingStable.push(r):this.destroy(l(t,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(t){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),t.getTracks().forEach(e=>{this.removeTrack(e,t)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,s(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(t){this._destroy(t,()=>{})}_destroy(t,e){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",t&&(t.message||t)),s(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",t&&(t.message||t)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(t){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(t){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,t&&this.emit("error",t),this.emit("close"),e()}))}_setupData(t){if(!t.channel)return this.destroy(l(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=65536),this.channelName=this._channel.label,this._channel.onmessage=t=>{this._onChannelMessage(t)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=t=>{const e=t.error instanceof Error?t.error:new Error(`Datachannel error: ${t.message} ${t.filename}:${t.lineno}:${t.colno}`);this.destroy(l(e,"ERR_DATA_CHANNEL"))};let e=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(e&&this._onChannelClose(),e=!0):e=!1},5e3)}_read(){}_write(t,e,n){if(this.destroyed)return n(l(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(t){return this.destroy(l(t,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=t,this._cb=n}_onFinish(){if(this.destroyed)return;const t=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?t():this.once("connect",t)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(t=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(t.sdp=c(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const e=()=>{if(this.destroyed)return;const e=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:e.type,sdp:e.sdp})};this._pc.setLocalDescription(t).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?e():this.once("_iceComplete",e))}).catch(t=>{this.destroy(l(t,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(t=>{this.destroy(l(t,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(t=>{t.mid||!t.sender.track||t.requested||(t.requested=!0,this.addTransceiver(t.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(t=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(t.sdp=c(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const e=()=>{if(this.destroyed)return;const e=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:e.type,sdp:e.sdp}),this.initiator||this._requestMissingTransceivers()};this._pc.setLocalDescription(t).then(()=>{this.destroyed||(this.trickle||this._iceComplete?e():this.once("_iceComplete",e))}).catch(t=>{this.destroy(l(t,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(t=>{this.destroy(l(t,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(l(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const t=this._pc.iceConnectionState,e=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,e),this.emit("iceStateChange",t,e),"connected"!==t&&"completed"!==t||(this._pcReady=!0,this._maybeReady()),"failed"===t&&this.destroy(l(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===t&&this.destroy(l(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(t){const e=t=>("[object Array]"===Object.prototype.toString.call(t.values)&&t.values.forEach(e=>{Object.assign(t,e)}),t);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const r=[];n.forEach(t=>{r.push(e(t))}),t(null,r)},e=>t(e)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(this.destroyed)return;const r=[];n.result().forEach(t=>{const n={};t.names().forEach(e=>{n[e]=t.stat(e)}),n.id=t.id,n.type=t.type,n.timestamp=t.timestamp,r.push(e(n))}),t(null,r)},e=>t(e)):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const t=()=>{this.destroyed||this.getStats((e,n)=>{if(this.destroyed)return;e&&(n=[]);const r={},i={},o={};let a=!1;n.forEach(t=>{"remotecandidate"!==t.type&&"remote-candidate"!==t.type||(r[t.id]=t),"localcandidate"!==t.type&&"local-candidate"!==t.type||(i[t.id]=t),"candidatepair"!==t.type&&"candidate-pair"!==t.type||(o[t.id]=t)});const s=t=>{a=!0;let e=i[t.localCandidateId];e&&(e.ip||e.address)?(this.localAddress=e.ip||e.address,this.localPort=Number(e.port)):e&&e.ipAddress?(this.localAddress=e.ipAddress,this.localPort=Number(e.portNumber)):"string"==typeof t.googLocalAddress&&(e=t.googLocalAddress.split(":"),this.localAddress=e[0],this.localPort=Number(e[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[t.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=Number(n.port)):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=Number(n.portNumber)):"string"==typeof t.googRemoteAddress&&(n=t.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=Number(n[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(t=>{"transport"===t.type&&t.selectedCandidatePairId&&s(o[t.selectedCandidatePairId]),("googCandidatePair"===t.type&&"true"===t.googActiveConnection||("candidatepair"===t.type||"candidate-pair"===t.type)&&t.selected)&&s(t)}),a||Object.keys(o).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(l(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const t=this._cb;this._cb=null,t(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(t,100)})};t()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>65536||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):t.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(this.destroyed)return;let e=t.data;e instanceof ArrayBuffer&&(e=u.from(e)),this.push(e)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const t=this._cb;this._cb=null,t(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(t){this.destroyed||t.streams.forEach(e=>{this._debug("on track"),this.emit("track",t.track,e),this._remoteTracks.push({track:t.track,stream:e}),this._remoteStreams.some(t=>t.id===e.id)||(this._remoteStreams.push(e),s(()=>{this._debug("on stream"),this.emit("stream",e)}))})}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],r.apply(null,t)}}h.WEBRTC_SUPPORT=!!i(),h.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},h.channelConfig={},t.exports=h},function(t,e,n){(function(r){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(i=r))}),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(213)(e);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(5))},function(t,e,n){t.exports=function(t){function e(t){let n,i=null;function o(...t){if(!o.enabled)return;const r=o,i=Number(new Date),a=i-(n||i);r.diff=a,r.prev=n,r.curr=i,n=i,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return"%";s++;const o=e.formatters[i];if("function"==typeof o){const e=t[s];n=o.call(r,e),t.splice(s,1),s--}return n}),e.formatArgs.call(r,t);(r.log||e.log).apply(r,t)}return o.namespace=t,o.useColors=e.useColors(),o.color=e.selectColor(t),o.extend=r,o.destroy=e.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null===i?e.enabled(t):i,set:t=>{i=t}}),"function"==typeof e.init&&e.init(o),o}function r(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(i),...e.skips.map(i).map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(214),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(n=>{e[n]=t[n]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},function(t,e){var n=1e3,r=6e4,i=60*r,o=24*i;function a(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,e){e=e||{};var s=typeof t;if("string"===s&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===s&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return a(t,e,o,"day");if(e>=i)return a(t,e,i,"hour");if(e>=r)return a(t,e,r,"minute");if(e>=n)return a(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=i)return Math.round(t/i)+"h";if(e>=r)return Math.round(t/r)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e){t.exports=function(){if("undefined"==typeof globalThis)return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null}},function(t,e,n){"use strict";(function(e,r){var i=n(101).Buffer,o=e.crypto||e.msCrypto;o&&o.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(t);if(t>0)if(t>65536)for(var a=0;a<t;a+=65536)o.getRandomValues(n.slice(a,a+65536));else o.getRandomValues(n);if("function"==typeof e)return r.nextTick((function(){e(null,n)}));return n}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(6),n(5))},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=u(t),a=r[0],s=r[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),c=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,l[c++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(c(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+f]=255&a,f+=d,a/=256,u-=8);t[n+f-d]|=128*_}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(e=t.exports=n(102)).Stream=e,e.Readable=e,e.Writable=n(107),e.Duplex=n(18),e.Transform=n(109),e.PassThrough=n(227),e.finished=n(63),e.pipeline=n(228)},function(t,e){},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=n(26).Buffer,s=n(223).inspect,l=s&&s.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,n,u;return e=t,(n=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e,n,r,i=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,n=i,r=s,a.prototype.copy.call(e,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?r+=i:r+=i.slice(0,t),0==(t-=o)){o===i.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,e}},{key:l,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&o(e.prototype,n),u&&o(e,u),t}()},function(t,e){},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(6))},function(t,e,n){"use strict";(function(e){var r;function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(63),a=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function f(t,e){return{value:t,done:e}}function d(t){var e=t[a];if(null!==e){var n=t[p].read();null!==n&&(t[c]=null,t[a]=null,t[s]=null,e(f(n,!1)))}}function _(t){e.nextTick(d,t)}var y=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((i(r={get stream(){return this[p]},next:function(){var t=this,n=this[l];if(null!==n)return Promise.reject(n);if(this[u])return Promise.resolve(f(void 0,!0));if(this[p].destroyed)return new Promise((function(n,r){e.nextTick((function(){t[l]?r(t[l]):n(f(void 0,!0))}))}));var r,i=this[c];if(i)r=new Promise(function(t,e){return function(n,r){t.then((function(){e[u]?n(f(void 0,!0)):e[h](n,r)}),r)}}(i,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(f(o,!1));r=new Promise(this[h])}return this[c]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var t=this;return new Promise((function(e,n){t[p].destroy(null,(function(t){t?n(t):e(f(void 0,!0))}))}))})),r),y);t.exports=function(t){var e,n=Object.create(m,(i(e={},p,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,l,{value:null,writable:!0}),i(e,u,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var r=n[p].read();r?(n[c]=null,n[a]=null,n[s]=null,t(f(r,!1))):(n[a]=t,n[s]=e)},writable:!0}),e));return n[c]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[s];return null!==e&&(n[c]=null,n[a]=null,n[s]=null,e(t)),void(n[l]=t)}var r=n[a];null!==r&&(n[c]=null,n[a]=null,n[s]=null,r(f(void 0,!0))),n[u]=!0})),t.on("readable",_.bind(null,n)),n}}).call(this,n(5))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,n){"use strict";t.exports=i;var r=n(109);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}n(27)(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){"use strict";var r;var i=n(17).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function l(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===r&&(r=n(63)),r(t,{readable:e,writable:i},(function(t){if(t)return o(t);s=!0,o()}));var l=!1;return function(e){if(!s&&!l)return l=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function u(t){t()}function c(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,n){var o=n<e.length-1;return l(t,o,n>0,(function(t){r||(r=t),t&&a.forEach(u),o||(a.forEach(u),i(r))}))}));return e.reduce(c)}},function(t,e,n){(function(e){let n;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:e):t=>(n||(n=Promise.resolve())).then(t).catch(t=>setTimeout(()=>{throw t},0))}).call(this,n(6))},function(t,e,n){"use strict";function r(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}t.exports=function(t,e,n){if(!t||"string"==typeof t)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"==typeof e&&(n=e,e=""),e&&(n.code=e);try{return r(t,n)}catch(e){n.message=t.message,n.stack=t.stack;const i=function(){};i.prototype=Object.create(Object.getPrototypeOf(t));return r(new i,n)}}},function(t,e,n){"use strict";e.MediaStream=window.MediaStream,e.MediaStreamTrack=window.MediaStreamTrack,e.RTCDataChannel=window.RTCDataChannel,e.RTCDataChannelEvent=window.RTCDataChannelEvent,e.RTCDtlsTransport=window.RTCDtlsTransport,e.RTCIceCandidate=window.RTCIceCandidate,e.RTCIceTransport=window.RTCIceTransport,e.RTCPeerConnection=window.RTCPeerConnection,e.RTCPeerConnectionIceEvent=window.RTCPeerConnectionIceEvent,e.RTCRtpReceiver=window.RTCRtpReceiver,e.RTCRtpSender=window.RTCRtpSender,e.RTCRtpTransceiver=window.RTCRtpTransceiver,e.RTCSctpTransport=window.RTCSctpTransport,e.RTCSessionDescription=window.RTCSessionDescription,e.getUserMedia=window.getUserMedia,e.mediaDevices=navigator.mediaDevices},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActionType=void 0,function(t){t[t.updateData=2]="updateData",t[t.sendActions=3]="sendActions",t[t.checkLatency=20]="checkLatency"}(e.ActionType||(e.ActionType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delay=void 0,e.delay=function(t){return new Promise((function(e,n){setTimeout(e,t)}))}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},l=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.MultiplayerPlayerIOClient=void 0;var u=n(47),c=n(100),h=n(235),p=n(236),f=n(237),d=n(238),_=n(7),y=n(111),m=n(70),g=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.create=function(t){return s(this,void 0,void 0,(function(){var e=this;return l(this,(function(n){return this._lobby=t,this._lobby.exit(!1),this._connection=t.connection,this._isConnected=!0,this.enableReconnection=!1,t.enableReconnection=function(){return e.enableReconnection},t.isStandalone=function(){return e.isStandalone},t.onConnectionRestored=function(n){e._connection=t.connection,e._isConnected=!0,e.start(),e._onConnectionRestored(n)},t.onDisconnected=function(){e.disconnect(),e._isConnected=!1,e._onDisconnected(),e.reset()},t.onConnectionLost=function(){e._isConnected=!1,e._onConnectionLost()},t.onConnectionRecovering=function(){e._onConnectionRecovering()},this._gameId=t.matchId,this._playerId=t.playerGuid,this._ready=!0,[2,Promise.resolve(!0)]}))}))},e.prototype.disconnect=function(){this._connection&&(this._lobby&&this._lobby.exit(!0),this._connection.disconnect())},e.prototype.start=function(){return s(this,void 0,void 0,(function(){var t=this;return l(this,(function(e){return this._connection.addMessageCallback("*",(function(e){return s(t,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,_;return l(this,(function(l){switch(l.label){case 0:switch(e.type){case"playerJoin":return[3,1];case"playerLeft":return[3,3];case"playerStateChanged":return[3,5];case"playerSignal":return[3,7];case"gameAction":return[3,9];case"updateGame":return[3,10];case"startMatch":return[3,11];case"playerError":return[3,12]}return[3,13];case 1:return t=JSON.parse(e.getString(0)),n=t.player.id,r=t.player.name,i=t.player.index,this.traceEvents&y.MultiplayerClientTraceEventsEnum.playerJoinReceive&&console.log("->playerJoinReceive",r,n),[4,this._playerJoined(n,r,i)];case 2:return l.sent(),[3,13];case 3:return o=JSON.parse(e.getString(0)),this.traceEvents&y.MultiplayerClientTraceEventsEnum.playerLeftReceive&&console.log("->playerLeftReceive",e.getString(0)),[4,this._playerLeft(d.PlayerLeftGameEvent.fromObject(o))];case 4:return l.sent(),[3,13];case 5:return a=JSON.parse(e.getString(0)),this.traceEvents&y.MultiplayerClientTraceEventsEnum.playerStateChangedReceive&&console.log("->playerStateChangedReceive",e.getString(0)),[4,this._playerStateChanged(h.PlayerStateChangedEvent.fromObject(a))];case 6:return l.sent(),[3,13];case 7:return s=this.isCompressingTraffic?m.unpack(e.getString(0)):JSON.parse(e.getString(0)),this.traceEvents&y.MultiplayerClientTraceEventsEnum.playerSignalReceive&&console.log("->playerSignalReceive",e.getString(0)),[4,this._gameSignal(f.GameSignalEvent.fromObject(s))];case 8:return l.sent(),[3,13];case 9:return u=this.isCompressingTraffic?m.unpack(e.getString(0)):JSON.parse(e.getString(0)),this.traceEvents&y.MultiplayerClientTraceEventsEnum.gameActionReceive&&console.log("->gameActionReceive",JSON.stringify(u)),this._gameAction(p.GameActionEvent.fromObject(u)),[3,13];case 10:return _=JSON.parse(e.getString(0)),this.traceEvents&y.MultiplayerClientTraceEventsEnum.updateGameReceive&&console.log("->updateGameReceive.game",e.getString(0)),e.length>1&&(_.q=this.isCompressingTraffic?m.unpack(e.getString(1)):JSON.parse(e.getString(1)),this.traceEvents&y.MultiplayerClientTraceEventsEnum.updateGameReceive&&console.log("->updateGameReceive.queue",JSON.stringify(_.q))),this._updateGame(c.GameStateChangedEvent.fromObject(_),!1),[3,13];case 11:return[3,13];case 12:return this._playerError(e.getInt(0)),[3,13];case 13:return[2]}}))}))})),[2,Promise.resolve(!0)]}))}))},e.prototype._sendGameActionAsync=function(t){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){return e=this.isCompressingTraffic?m.pack(t):JSON.stringify(t),this.traceEvents&y.MultiplayerClientTraceEventsEnum.gameActionSend&&console.log("<-gameActionSend",JSON.stringify(t)),this._connection.send("gameAction",e),[2,Promise.resolve()]}))}))},e.prototype._updateGameAsync=function(t,e){return s(this,void 0,void 0,(function(){var n;return l(this,(function(r){return this.traceEvents&y.MultiplayerClientTraceEventsEnum.updateGameSend&&console.log("<-updateGameSend",JSON.stringify(t.queue)),n=this.isCompressingTraffic?m.pack(t.queue):JSON.stringify(t.queue),this._connection.send("updateGame",JSON.stringify(t.players),n,JSON.stringify(this.playersPeersConnected),e?1:0),[2,Promise.resolve()]}))}))},e.prototype._sendGameSignalAsync=function(t){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){return this.traceEvents&y.MultiplayerClientTraceEventsEnum.playerSignalSend&&console.log("<-playerSignalSend",JSON.stringify(t)),e=this.isCompressingTraffic?m.pack(t):JSON.stringify(t),this._connection.send("playerSignal",t.playerId,e),[2,Promise.resolve()]}))}))},e.prototype.startMatch=function(){return s(this,void 0,void 0,(function(){return l(this,(function(t){return this._connection.send("startMatch"),[2,Promise.resolve()]}))}))},e.prototype.update=function(e){this._ready&&t.prototype.update.call(this,e)},e=o([_.Singleton,a("design:paramtypes",[])],e)}(u.MultiplayerClient);e.MultiplayerPlayerIOClient=g},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerStateChangedEvent=void 0;var o=n(24),a=n(25),s=function(t){function e(e){var n=t.call(this,e.isoDateTime)||this;return n.gameId=e.gameId,n.player=o.MultiplayerPlayer.fromObject(e.player),n}return i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return e.id},enumerable:!1,configurable:!0}),e.fromObject=function(t){return new e(t)},e.fromPlayerInGame=function(t,n){return new e({id:e.id,isoDateTime:a.EventBase.getIsoDateTime(),gameId:t.id,player:n})},e.id="PlayerStateChangedEvent",e}(a.EventBase);e.PlayerStateChangedEvent=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GameActionEvent=void 0;var o=function(t){function e(e){var n=t.call(this,e.isoDateTime)||this;return n.gameId=e.gameId,n.playerId=e.playerId,n.action=e.action,n.actionType=e.actionType,n.peerOnly=!!e.peerOnly,n}return i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return e.id},enumerable:!1,configurable:!0}),e.fromObject=function(t){return new e(t)},e.id="GameActionEvent",e}(n(25).EventBase);e.GameActionEvent=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GameSignalEvent=void 0;var o=function(t){function e(e){var n=t.call(this,e.isoDateTime)||this;return n.gameId=e.gameId,n.playerId=e.playerId,n.signal=e.signal,n}return i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return e.id},enumerable:!1,configurable:!0}),e.fromObject=function(t){return new e(t)},e.id="GameSignalEvent",e}(n(25).EventBase);e.GameSignalEvent=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerLeftGameEvent=void 0;var o=n(24),a=n(25),s=function(t){function e(e){var n=t.call(this,e.isoDateTime)||this;return n.gameId=e.gameId,n.player=o.MultiplayerPlayer.fromObject(e.player),n}return i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return e.id},enumerable:!1,configurable:!0}),e.fromObject=function(t){return new e(t)},e.fromPlayerInGame=function(t,n){return new e({id:e.id,isoDateTime:a.EventBase.getIsoDateTime(),gameId:t.id,player:n})},e.id="PlayerLeftGameEvent",e}(a.EventBase);e.PlayerLeftGameEvent=s},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.MultiplayerModelConnector=e.MultiplayerModelConnectorServer=e.MultiplayerModelConnectorClient=void 0;var a=n(7),s=n(47),l=n(94),u=n(1),c=n(13),h=n(0),p=n(110),f=function(){function t(t,e,n,r,i,o,s,l,u){this.key=t,this.client=e,this.context=n,this._event=r,this._multiplayerClient=i,this._disableFirstSync=o,this._peerOnly=s,this._getServerValues=l,this._directOnly=u,this._queue=new a.Queue,this.disposed=!1,this.delay=0,this.step=1,this._valueDelay=0,this._actionDelay=0,this._currentValue=null,this._disableAction=!1;var c=t.split(".");if(this.name=c[c.length-1],c.length>1)for(var h=0;h<c.length-1;h++){if(!this.context[c[h]])return void console.error(this.constructor.name+": 1. error can't find model property '"+c[h]+"' for '"+t+"'",this.context);this.context=this.context[c[h]]}if(null!=this.context[this.name]&&null!=this.context[this.name]){var p=this;this.event=function(t,e,n,r){p.disposed||n==p.name&&this==p.context&&p.run(t,e)},this._disableFirstSync||this._actionInit([this.context[this.name]])}else console.error(this.constructor.name+": 2. error can't find model property '"+this.name+"' for '"+t+"'",this.context)}return t.prototype.setValues=function(t){this._disableAction=!0;for(var e=0;e<t.length;e++)this.context[this.name]=t[e];this._disableAction=!1},t.prototype._send=function(t,e){this._currentValue=t,this._actionDelay<=0||this._valueDelay<=0&&(this._action([t]),this._valueDelay=this.delay/this.step)},t.prototype.resync=function(){this._actionInit([this.context[this.name]],!0)},t.prototype._actionInit=function(t,e){if(void 0===e&&(e=!1),this._getServerValues||e){var n={model:this.key,values:[],type:-2,client:this.client};this._multiplayerClient.action(n,!1,!1)}else{n={model:this.key,values:t,type:-3,client:this.client};this._multiplayerClient.action(n,!1,!1)}},t.prototype._action=function(t){var e={model:this.key,values:t,type:-1,client:this.client};this._multiplayerClient.action(e,this._peerOnly,this._directOnly)},t.prototype.run=function(t,e){var n=this;this._disableAction?this._queue.push({condition:function(t){return!0},action:function(r,i){n._event(t,e)}},{newVal:t,oldVal:e}):this._queue.push({condition:function(t){return!0},action:function(r,i){n._event(t,e),n._send(t,e)}},{newVal:t,oldVal:e})},t.prototype.update=function(t){this._queue.update(t),this._actionDelay>0&&(this._actionDelay-=t),this._valueDelay>0&&(this._valueDelay-=t),null!==this._currentValue&&this._actionDelay<=0&&(this._action([this._currentValue]),this._currentValue=null,this._actionDelay=this.delay)},t}(),d=function(){function t(t,e){this._watchObject=t,this._multiplayerClient=e,this.items=new u.List}return t.prototype.get=function(t){return this[t]},t.prototype.add=function(t,e,n,r,i,o,s,l){var u=this;a._u.each(t,(function(t,a){if(null!=n&&null!=n){var h=c.expandFunc(t.callback,e),p=new f(a,r,n,h,u._multiplayerClient,i,o,s,l);p.delay=t.delay||p.delay,p.step=t.step||p.step,u.items.add(p),u[a]=p,u._watchObject.watch(p.context,p.name,p.event)}else console.error(u.constructor.name+": error $model is null for property '"+a+"'")}),this)},t.prototype.dispose=function(){var t=this;this._watchObject&&(this.items.forEach((function(e){e.disposed=!0,t._watchObject.unwatch(e.context,e.name,e.event)})),this._watchObject=null)},t.prototype.updateModel=function(t,e){this.items.forEach((function(n){n.key==t&&n.setValues(e)}))},t.prototype.update=function(t){this.items.forEach((function(e){e.update(t)}))},t.prototype.resync=function(){this.items.forEach((function(t){t.resync()}))},t}(),_=function(){function t(t,e,n){this._config=t,this._multiplayerClient=e,this._random=n,this.disposed=!1,this._resyncTimeOut=5,this._model=t.model,this._name=t.connectionId,this._watchObject=h.Container.get(l.WatchObject),this._$modelWatches=new d(this._watchObject,this._multiplayerClient)}return Object.defineProperty(t.prototype,"_playerId",{get:function(){return this._multiplayerClient.playerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionId",{get:function(){return this._name},enumerable:!1,configurable:!0}),t.prototype._updateGame=function(t,e){switch(t.type){case-1:e!=this._playerId&&t.client==this._name&&this._$modelWatches.updateModel(t.model,t.values);break;case-4:e==this._playerId&&t.client==this._name&&this._$modelWatches.updateModel(t.model,t.values)}},t.prototype._getModelValue=function(t,e){var n=t.split("."),r=n[n.length-1];if(n.length>1)for(var i=0;i<n.length-1;i++){if(!e[n[i]])return;e=e[n[i]]}if(null!=e[r]&&null!=e[r])return e[r]},t.prototype.updateServer=function(t,e){switch(t.type){case-2:if(t.client==this._name){t.type=-4;var n=this._getModelValue(t.model,this._model);null!=n?(t.values=[n],this._multiplayerClient.signal(t,e)):t.values=[]}break;case-3:t.client==this._name&&(t.type=-4,this._multiplayerClient.serverBroadcast(t,e))}},t.prototype.resync=function(){this._$modelWatches.resync()},t.prototype.start=function(){var t=this,e=!1;this._multiplayerClient.players.forEach((function(n,r){n.left||(t._multiplayerClient.playerId==n.id?(t._config.onAddPlayer&&t._config.onAddPlayer(n),e||(t._$modelWatches.add(t._config.modelWatch,t,t._model,t._config.connectionId,!!t._config.disableFirstSync,!!t._config.peerOnly,!!t._config.getServerValues,!!t._config.directOnly),e=!0)):t._config.onAddPlayerOpponent&&t._config.onAddPlayerOpponent(n))})),this._onGameUpdate=function(e){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.actions.length;i++)t._updateGame(r.actions[i].data,r.playerId)},this._multiplayerClient.onGameUpdate(this._onGameUpdate),this._multiplayerClient.isPeerConnectedToServer?this._config.onPeerConnected&&this._config.onPeerConnected():this._config.onPeerClosed&&this._config.onPeerClosed(),this._config.onSetServer&&this._config.onSetServer(this._multiplayerClient.isServer),this._onAddPlayer=function(n){t._config.onAddPlayer&&t._config.onAddPlayer(n),e?setTimeout((function(){t.resync()}),1e3):(e=!0,t._$modelWatches.add(t._config.modelWatch,t,t._model,t._config.connectionId,!!t._config.disableFirstSync,!!t._config.peerOnly,!!t._config.getServerValues,!!t._config.directOnly))},this._multiplayerClient.onAddPlayer(this._onAddPlayer),this._config.onAddPlayerOpponent&&this._multiplayerClient.onAddPlayerOpponent(this._config.onAddPlayerOpponent),this._config.onGameUpdate&&this._multiplayerClient.onGameUpdate(this._config.onGameUpdate),this._config.onPlayerJoin&&this._multiplayerClient.onPlayerJoin(this._config.onPlayerJoin),this._config.onPlayerLeft&&this._multiplayerClient.onPlayerLeft(this._config.onPlayerLeft),this._config.onSetServer&&this._multiplayerClient.onSetServer(this._config.onSetServer),this._config.onStartMatch&&this._multiplayerClient.onStartMatch(this._config.onStartMatch),this._config.onUpdatePlayer&&this._multiplayerClient.onUpdatePlayer(this._config.onUpdatePlayer),this._config.onDisconnected&&this._multiplayerClient.onDisconnected(this._config.onDisconnected),this._config.onConnectionLost&&this._multiplayerClient.onConnectionLost(this._config.onConnectionLost),this._config.onConnectionRecovering&&this._multiplayerClient.onConnectionRecovering(this._config.onConnectionRecovering),this._onConnectionRestored=function(e){t._config.onConnectionRestored&&t._config.onConnectionRestored(e),t._multiplayerClient.isSyncing=!0,t.resync()},this._multiplayerClient.onConnectionRestored(this._onConnectionRestored),this._config.onPeerConnected&&this._multiplayerClient.onPeerConnected(this._config.onPeerConnected),this._config.onPeerClosed&&this._multiplayerClient.onPeerClosed(this._config.onPeerClosed),this._config.onPeerConnecting&&this._multiplayerClient.onPeerConnecting(this._config.onPeerConnecting),this._config.onPeerRecovering&&this._multiplayerClient.onPeerRecovering(this._config.onPeerRecovering),this._onPeerRestored=function(){t._config.onPeerRestored&&t._config.onPeerRestored(),t._multiplayerClient.isSyncing||(t._multiplayerClient.isSyncing=!0,t.resync())},this._multiplayerClient.onPeerRestored(this._onPeerRestored),this._config.onError&&this._multiplayerClient.onError(this._config.onError)},t.prototype.stop=function(){this._$modelWatches.dispose(),this._multiplayerClient.off(p.MultiplayerEventsEnum.updateGame,this._onGameUpdate),this._multiplayerClient.off(p.MultiplayerEventsEnum.addPlayer,this._onAddPlayer),this._config.onAddPlayerOpponent&&this._multiplayerClient.off(p.MultiplayerEventsEnum.addPlayerOpponent,this._config.onAddPlayerOpponent),this._config.onGameUpdate&&this._multiplayerClient.off(p.MultiplayerEventsEnum.updateGame,this._config.onGameUpdate),this._config.onPlayerJoin&&this._multiplayerClient.off(p.MultiplayerEventsEnum.playerJoin,this._config.onPlayerJoin),this._config.onPlayerLeft&&this._multiplayerClient.off(p.MultiplayerEventsEnum.playerLeft,this._config.onPlayerLeft),this._config.onSetServer&&this._multiplayerClient.off(p.MultiplayerEventsEnum.setServer,this._config.onSetServer),this._config.onStartMatch&&this._multiplayerClient.off(p.MultiplayerEventsEnum.startMatch,this._config.onStartMatch),this._config.onUpdatePlayer&&this._multiplayerClient.off(p.MultiplayerEventsEnum.updatePlayer,this._config.onUpdatePlayer),this._config.onDisconnected&&this._multiplayerClient.off(p.MultiplayerEventsEnum.disconnected,this._config.onDisconnected),this._config.onConnectionLost&&this._multiplayerClient.off(p.MultiplayerEventsEnum.connectionLost,this._config.onConnectionLost),this._config.onConnectionRecovering&&this._multiplayerClient.off(p.MultiplayerEventsEnum.connectionRecovering,this._config.onConnectionRecovering),this._multiplayerClient.off(p.MultiplayerEventsEnum.connectionRestored,this._onConnectionRestored),this._config.onPeerConnected&&this._multiplayerClient.off(p.MultiplayerEventsEnum.peerConnected,this._config.onPeerConnected),this._config.onPeerClosed&&this._multiplayerClient.off(p.MultiplayerEventsEnum.peerClosed,this._config.onPeerClosed),this._config.onPeerConnecting&&this._multiplayerClient.off(p.MultiplayerEventsEnum.peerConnecting,this._config.onPeerConnecting),this._config.onPeerRecovering&&this._multiplayerClient.off(p.MultiplayerEventsEnum.peerRecovering,this._config.onPeerRecovering),this._multiplayerClient.off(p.MultiplayerEventsEnum.peerRestored,this._onPeerRestored),this._config.onError&&this._multiplayerClient.off(p.MultiplayerEventsEnum.onError,this._config.onError)},t.prototype.dispose=function(){this.disposed||(this.stop(),this.disposed=!0)},t.prototype.update=function(t){this._$modelWatches.update(t)},t=r([o(0,a.Inject),o(1,a.Inject),o(2,a.Inject),i("design:paramtypes",[Object,s.MultiplayerClient,a.GameRandom])],t)}();e.MultiplayerModelConnectorClient=_;var y=function(){function t(t,e,n){var r=this;this._config=t,this._multiplayerClient=e,this._random=n,this._model=t.model,this._name=t.connectionId,this._multiplayerClient.players.forEach((function(t,e){r._multiplayerClient.playerId==t.id?r._config.onAddPlayer&&r._config.onAddPlayer(t):r._config.onAddPlayerOpponent&&r._config.onAddPlayerOpponent(t)})),this._config.onAddPlayer&&this._multiplayerClient.onAddPlayer(this._config.onAddPlayer),this._config.onAddPlayerOpponent&&this._multiplayerClient.onAddPlayerOpponent(this._config.onAddPlayerOpponent),t.onGameServerUpdate&&this._multiplayerClient.onGameServerUpdate(t.onGameServerUpdate),t.onPlayerJoin&&this._multiplayerClient.onPlayerJoin(t.onPlayerJoin),t.onPlayerLeft&&this._multiplayerClient.onPlayerLeft(t.onPlayerLeft),t.onSetServer&&this._multiplayerClient.onSetServer(t.onSetServer),t.onStartMatch&&this._multiplayerClient.onStartMatch(t.onStartMatch),t.onUpdatePlayer&&this._multiplayerClient.onUpdatePlayer(t.onUpdatePlayer),this._config.onDisconnected&&this._multiplayerClient.onDisconnected(this._config.onDisconnected),this._config.onError&&this._multiplayerClient.onError(this._config.onError)}return t.prototype.updateGame=function(t,e){switch(t.type){case-1:if(t.client==this._name)for(var n=0;n<t.values.length;n++)this._config.modelWatch[t.model].callback(t.values[n]);break;case-4:if(t.client==this._name)for(n=0;n<t.values.length;n++)this._config.modelWatch[t.model].callback(t.values[n])}},t.prototype.dispose=function(){},t.prototype.update=function(t){},t=r([o(0,a.Inject),o(1,a.Inject),o(2,a.Inject),i("design:paramtypes",[Object,s.MultiplayerClient,a.GameRandom])],t)}();e.MultiplayerModelConnectorServer=y;var m=function(){function t(t){var e=this;this._multiplayerClient=t,this._clients=[],this._servers=[],this._multiplayerClient.modelConnectorOnGameServerUpdate=function(t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.actions.length;i++)e.updateConnectionServer(r.actions[i].data,r.playerId,r.po)}}return t.prototype.addConnection=function(t){var e=h.Container.get(_,t||{});return this._clients.push(e),e},t.prototype.addConnectionServer=function(t){var e=h.Container.get(y,t||{});return this._servers.push(e),e},t.prototype.removeConnectionById=function(t){for(var e=this._clients.length-1;e>=0;e--){var n=this._clients[e];n.connectionId==t&&(n.stop(),n.dispose())}},t.prototype.clear=function(){for(var t=this._clients.length-1;t>=0;t--){var e=this._clients[t];e.stop(),e.dispose()}},t.prototype.update=function(t){for(var e=this._clients.length-1;e>=0;e--)this._clients[e].disposed&&this._clients.splice(e,1);for(e=0;e<this._servers.length;e++)this._servers[e].update(t);for(e=0;e<this._clients.length;e++)this._clients[e].update(t)},t.prototype.print=function(){console.log("ModelConnectors:");for(var t=0;t<this._clients.length;t++)console.log("-",this._clients[t]._name)},t.prototype.updateConnectionServer=function(t,e,n){switch(void 0===n&&(n=!1),t.type){case-1:this._multiplayerClient.serverBroadcast(t,e,n);break;case-4:this._multiplayerClient.serverBroadcast(t,e,!1)}for(var r=this._clients.length-1;r>=0;r--)this._clients[r].disposed&&this._clients.splice(r,1);for(r=0;r<this._servers.length;r++)this._servers[r].updateGame(t,e);for(r=0;r<this._clients.length;r++)this._clients[r].updateServer(t,e)},t=r([a.Singleton,o(0,a.Inject),i("design:paramtypes",[s.MultiplayerClient])],t)}();e.MultiplayerModelConnector=m},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GameCenter=e.GameCenterPlayer=e.GameCenterPlayerSighInStatusEnum=void 0;var l=n(0);!function(t){t[t.None=0]="None",t[t.Done=1]="Done",t[t.Error=2]="Error",t[t.AccountRequired=3]="AccountRequired",t[t.NeedSighIn=4]="NeedSighIn"}(e.GameCenterPlayerSighInStatusEnum||(e.GameCenterPlayerSighInStatusEnum={}));var u=function(){};e.GameCenterPlayer=u;var c=function(){function t(t){}return t.prototype.sighIn=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t,e){var n={action:"GameCenter_SighIn",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status?t(e.data.status):t(0)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.getLocalPlayer=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t,e){var n={action:"GameCenter_GetLocalPlayer",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status?t(e.data.player):t(null)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.isPlayerSignedIn=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t,e){var n={action:"GameCenter_IsPlayerSignedIn",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status?t(e.data.result):t(null)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.showAchievements=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t,e){var n={action:"GameCenter_ShowAchievements",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status?t(e.data.result):t(null)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.showLeaderBoard=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){return[2,new Promise((function(e,n){var r={action:"GameCenter_ShowLeaderBoard",data:{identifier:t}},i=JSON.stringify(r);window["__invokeMobileWrappingActionCallback_"+r.action]=function(t){t&&"done"==t.status?e(t.data.result):e(null)};__invokeMobileWrappingAction(i)}))]}))}))},t.prototype.resetAchievement=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t,e){var n={action:"GameCenter_ResetAchievement",data:{}},r=JSON.stringify(n);window["__invokeMobileWrappingActionCallback_"+n.action]=function(e){e&&"done"==e.status?t(e.data.result):t(null)};__invokeMobileWrappingAction(r)}))]}))}))},t.prototype.submitAchievement=function(t,e){return a(this,void 0,void 0,(function(){return s(this,(function(n){return[2,new Promise((function(n,r){var i={action:"GameCenter_SubmitAchievement",data:{identifier:t,percentComplete:e}},o=JSON.stringify(i);window["__invokeMobileWrappingActionCallback_"+i.action]=function(t){t&&"done"==t.status?n(t.data.result):n(null)};__invokeMobileWrappingAction(o)}))]}))}))},t.prototype.submitScore=function(t,e){return a(this,void 0,void 0,(function(){return s(this,(function(n){return[2,new Promise((function(n,r){var i={action:"GameCenter_SubmitScore",data:{score:e,identifier:t}},o=JSON.stringify(i);window["__invokeMobileWrappingActionCallback_"+i.action]=function(t){t&&"done"==t.status?n(t.data.result):n(null)};__invokeMobileWrappingAction(o)}))]}))}))},t=r([l.Singleton,o(0,l.Inject),i("design:paramtypes",[Object])],t)}();e.GameCenter=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Three3DBaseController=void 0;var o=n(242),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},set:function(t){this._camera=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},set:function(t){this._scene=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportWidth",{get:function(){return this._viewportWidth},set:function(t){this._viewportWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportHeight",{get:function(){return this._viewportHeight},set:function(t){this._viewportHeight=t},enumerable:!1,configurable:!0}),e.prototype.configure=function(e){var n=this;t.prototype.configure.call(this,e);var r=new o.Pixi3DSprite(this.renderer.renderer3d,(function(){return{scene:n.scene,camera:n.camera,viewportWidth:n.viewportWidth,viewportHeight:n.viewportHeight}}));this.display.addChild(r),this.screenWidth=368,this.screenHeight=344,this.viewportWidth=this.screenWidth,this.viewportHeight=this.screenHeight,this.setWorld()},e.prototype.setWorld=function(){this._scene=new THREE.Scene,this._camera=new THREE.PerspectiveCamera(20,736/688,.01,2e4),this._camera.position.set(0,0,35);var t=new THREE.AmbientLight("#ffffff",.4);this._scene.add(t);var e=new THREE.DirectionalLight("#ffffff",.5);e.position.x=1e3,e.position.y=1e3,e.position.z=1e3,this._scene.add(e);var n=new THREE.SpotLight(15720405,.4);n.position.y=5,n.position.x=-5,n.position.z=25,n.target.position.set(0,0,0),n.shadow.camera.near=10,n.shadow.camera.far=110,n.shadow.camera.fov=50,n.shadow.mapSize.width=512,n.shadow.mapSize.height=512,n.shadow.bias=.001,this._scene.add(n)},e.prototype.getScreenPosition=function(t,e,n){var r=.5*this.screenWidth,i=.5*this.screenHeight,o=new THREE.Vector3(t,e,n||0).project(this._camera);return o.x=o.x*r,o.y=-o.y*i,{x:o.x,y:o.y}},e.prototype.onPortrait=function(){this.screenWidth=860,this.screenHeight=1240,this.viewportWidth=this.screenWidth,this.viewportHeight=this.screenHeight;var t=this.screenWidth/this.screenHeight;this._camera=new THREE.PerspectiveCamera(20,t,.1,2e3),this._camera.position.set(0,0,50),this._camera.updateMatrix(),this._camera.updateMatrixWorld(!0)},e.prototype.onLandscape=function(){this.screenWidth=1240,this.screenHeight=840,this.viewportWidth=this.screenWidth,this.viewportHeight=this.screenHeight;var t=this.screenWidth/this.screenHeight;this._camera=new THREE.PerspectiveCamera(20,t,.1,2e3),this._camera.position.set(0,0,50),this._camera.updateMatrix(),this._camera.updateMatrixWorld(!0)},e}(n(45).SimpleBaseController);e.Three3DBaseController=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Pixi3DSprite=void 0;var o=function(t){function e(e,n){var r=t.call(this)||this;return r._renderer3d=e,r._cb=n,r._currentProgram=null,r._texture0=null,r._texture1=null,r._activeTexture=null,r._arrayBuffer=null,r._elementArrayBuffer=null,r._frontFace=null,r.interactive=!0,r.gl=null,r.canvas=null,r.texture=null,r.texture=PIXI.RenderTexture.create(2,2),r.x=0,r.y=0,r.anchor.x=0,r.anchor.y=0,r.scale.y=1,r.scale.x=1,r.modelReady=!0,r}return i(e,t),e.prototype.init=function(){},e.prototype._renderWebGL=function(e){if(this.gl||(this.gl=e.gl,this.canvas=e.view,this.init()),this.modelReady){if(this.visible){e.currentRenderer.stop();var n,r=!(!e.createVao||!e.bindVao);r?n=e._activeVao:e.flush();var i,o,a,s,l=e.gl;this._arrayBuffer=l.getParameter(l.ARRAY_BUFFER_BINDING),this._elementArrayBuffer=l.getParameter(l.ELEMENT_ARRAY_BUFFER_BINDING),null==this._currentProgram&&(this._currentProgram=l.getParameter(l.CURRENT_PROGRAM)),r||(this._activeTexture=l.getParameter(l.ACTIVE_TEXTURE)),l.activeTexture(l.TEXTURE0),this._texture0=l.getParameter(l.TEXTURE_BINDING_2D),l.activeTexture(l.TEXTURE1),this._texture1=l.getParameter(l.TEXTURE_BINDING_2D),null==this._frontFace&&(this._frontFace=l.getParameter(l.FRONT_FACE)),r||(i=l.getVertexAttrib(0,l.VERTEX_ATTRIB_ARRAY_ENABLED),o=l.getVertexAttrib(1,l.VERTEX_ATTRIB_ARRAY_ENABLED),a=l.getVertexAttrib(2,l.VERTEX_ATTRIB_ARRAY_ENABLED),s=l.getVertexAttrib(3,l.VERTEX_ATTRIB_ARRAY_ENABLED));var u,c=l.isEnabled(l.SCISSOR_TEST),h=l.isEnabled(l.STENCIL_TEST),p=l.isEnabled(l.DEPTH_TEST),f=l.isEnabled(l.CULL_FACE),d=l.isEnabled(l.BLEND),_=e._activeTexture?e._activeTextureLocation:0,y=e._activeRenderTarget;r&&(u=e.createVao(),e.bindVao(u));var m=this._cb(),g=m.viewportWidth*this.worldTransform.a,v=m.viewportHeight*this.worldTransform.d,A=this.worldTransform.tx-g/2,b=this.worldTransform.ty-v/2;l.enable(l.SCISSOR_TEST),l.scissor(A+1,b+1,g-2,v-2),l.viewport(A,b,g,v),this._renderer3d.state.reset(),this._renderer3d.render(m.scene,m.camera),l.viewport(0,0,l.canvas.width,l.canvas.height),r||(e._activeTextureLocation=_,l.activeTexture(l.TEXTURE0+_)),l.bindTexture(l.TEXTURE_2D,null),l.useProgram(this._currentProgram),e.bindRenderTarget(y),l.bindBuffer(l.ARRAY_BUFFER,this._arrayBuffer),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this._elementArrayBuffer),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,this._texture0),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this._texture1),r||l.activeTexture(this._activeTexture),l.frontFace(this._frontFace),r||(i?l.enableVertexAttribArray(0):l.disableVertexAttribArray(0),o?l.enableVertexAttribArray(1):l.disableVertexAttribArray(1),a?l.enableVertexAttribArray(2):l.disableVertexAttribArray(2),s?l.enableVertexAttribArray(3):l.disableVertexAttribArray(3)),c?l.enable(l.SCISSOR_TEST):l.disable(l.SCISSOR_TEST),h?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),p?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),f?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),d?l.enable(l.BLEND):l.disable(l.BLEND),d&&l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1),r&&(u.unbind(),u.destroy(),e.bindVao(n)),e.currentRenderer.start(),t.prototype._renderWebGL.call(this,e)}}else{var T=e.gl;T.activeTexture(T.TEXTURE0)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e)},e.prototype.containsPoint=function(t){return!1},e}(PIXI.Sprite);e.Pixi3DSprite=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},l=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Analytic=void 0;var u=n(0),c=n(64),h=n(244),p=n(41),f=function(t){function e(e){var n=t.call(this,e)||this;return n.START_BUTTON="Start_Button",n.GAME_END="Game_End",n.ROUND_N="Round{N}",n.ROUND_N_END="Round{N}_End",n.IMPRESSION="Impression",n.CLICK="Click",n.WIN="Win",n.TIME_OUT="Time_Out",n.NEW_GAME="New_Game",n.RESTART="Restart",n.QUIT="Quit",n.LOSE="Lose",n.START="Start",n.FINISHED="Finished",n.NOT_FINISHED="Not_Finished",n.INTRO_SCREEN="IntroScreen",n.GAME_SCREEN="GameScreen",n.GAME_OVER_SCREEN="GameOver",n.QUIT_CONFIRMED="QuitConfirmed",n}return i(e,t),e.prototype.startButtonImpression=function(){return s(this,void 0,void 0,(function(){return l(this,(function(t){return[2,this.sendEvent(this.START_BUTTON,this.IMPRESSION)]}))}))},e.prototype.startButtonClick=function(){return s(this,void 0,void 0,(function(){return l(this,(function(t){return[2,this.sendEvent(this.START_BUTTON,this.CLICK)]}))}))},e.prototype.levelStart=function(t){return s(this,void 0,void 0,(function(){return l(this,(function(e){return[2,this.sendEvent(this.ROUND_N.replace("{N}",t.toString()),this.START)]}))}))},e.prototype.levelEndFinished=function(t,e){return void 0===e&&(e=-1),s(this,void 0,void 0,(function(){return l(this,(function(n){return-1!=e&&this.addProperty({key:c.AnalyticProperty.TIME_SPENT,value:e.toString()}),[2,this.sendEvent(this.ROUND_N_END.replace("{N}",t.toString()),this.FINISHED)]}))}))},e.prototype.levelEndNotFinished=function(t,e){return void 0===e&&(e=-1),s(this,void 0,void 0,(function(){return l(this,(function(n){return-1!=e&&this.addProperty({key:c.AnalyticProperty.TIME_SPENT,value:e.toString()}),[2,this.sendEvent(this.ROUND_N_END.replace("{N}",t.toString()),this.NOT_FINISHED)]}))}))},e.prototype.winGame=function(t,e,n){return void 0===e&&(e=-1),void 0===n&&(n=-1),s(this,void 0,void 0,(function(){return l(this,(function(r){return-1!=e&&this.addProperty({key:c.AnalyticProperty.TIME_SPENT,value:e.toString()}),-1!=n&&this.addProperty({key:c.AnalyticProperty.ROUND,value:n.toString()}),this.addProperty({key:c.AnalyticProperty.SCORE,value:t.toString()}),[2,this.sendEvent(this.GAME_END,this.WIN)]}))}))},e.prototype.gameEndTimeOut=function(t,e,n){return void 0===e&&(e=-1),void 0===n&&(n=-1),s(this,void 0,void 0,(function(){return l(this,(function(r){return-1!=e&&this.addProperty({key:c.AnalyticProperty.TIME_SPENT,value:e.toString()}),-1!=n&&this.addProperty({key:c.AnalyticProperty.ROUND,value:n.toString()}),this.addProperty({key:c.AnalyticProperty.SCORE,value:t.toString()}),[2,this.sendEvent(this.GAME_END,this.TIME_OUT)]}))}))},e.prototype.gameEndNewGame=function(t,e,n){return void 0===e&&(e=-1),void 0===n&&(n=-1),s(this,void 0,void 0,(function(){return l(this,(function(r){return-1!=e&&this.addProperty({key:c.AnalyticProperty.TIME_SPENT,value:e.toString()}),-1!=n&&this.addProperty({key:c.AnalyticProperty.ROUND,value:n.toString()}),this.addProperty({key:c.AnalyticProperty.SCORE,value:t.toString()}),[2,this.sendEvent(this.GAME_END,this.NEW_GAME)]}))}))},e.prototype.gameEndRestart=function(t,e,n){return void 0===e&&(e=-1),void 0===n&&(n=-1),s(this,void 0,void 0,(function(){return l(this,(function(r){return-1!=e&&this.addProperty({key:c.AnalyticProperty.TIME_SPENT,value:e.toString()}),-1!=n&&this.addProperty({key:c.AnalyticProperty.ROUND,value:n.toString()}),this.addProperty({key:c.AnalyticProperty.SCORE,value:t.toString()}),[2,this.sendEvent(this.GAME_END,this.RESTART)]}))}))},e.prototype.gameQuited=function(t,e,n){return void 0===e&&(e=-1),void 0===n&&(n=-1),s(this,void 0,void 0,(function(){return l(this,(function(r){return-1!=e&&this.addProperty({key:c.AnalyticProperty.TIME_SPENT,value:e.toString()}),-1!=n&&this.addProperty({key:c.AnalyticProperty.ROUND,value:n.toString()}),this.addProperty({key:c.AnalyticProperty.SCORE,value:t.toString()}),[2,this.sendEvent(this.GAME_END,this.QUIT)]}))}))},e.prototype.gameLose=function(t,e,n){return void 0===e&&(e=-1),void 0===n&&(n=-1),s(this,void 0,void 0,(function(){return l(this,(function(r){return-1!=e&&this.addProperty({key:c.AnalyticProperty.TIME_SPENT,value:e.toString()}),-1!=n&&this.addProperty({key:c.AnalyticProperty.ROUND,value:n.toString()}),this.addProperty({key:c.AnalyticProperty.SCORE,value:t.toString()}),[2,this.sendEvent(this.GAME_END,this.LOSE)]}))}))},e.prototype.introPanelShowed=function(){this.sendPageController(this.INTRO_SCREEN)},e.prototype.gamePanelShowed=function(){this.sendPageController(this.GAME_SCREEN)},e.prototype.gameOverPanelShowed=function(){this.sendPageController(this.GAME_OVER_SCREEN)},e.prototype.quitGamePanelConfirmed=function(){this.sendPageController(this.QUIT_CONFIRMED)},e.prototype.sendEvent=function(t,e){return s(this,void 0,void 0,(function(){return l(this,(function(n){return[2,this.sendEventInternal(t,e)]}))}))},e.prototype.sendPageController=function(t){this.sendPageControllerInternal(t)},e.prototype.trackException=function(t){this.trackExceptionInternal(t)},e=o([u.Singleton,a("design:paramtypes",[p.AnalyticResources])],e)}(h.BaseAnalytic);e.Analytic=f},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAnalytic=void 0;var o=n(22),a=n(64),s=n(112),l=n(245),u=n(246),c=n(247),h=n(248),p=function(){function t(t){this._analyticProviders=new Array;for(var e=0;e<t.providers.length;e++)this._analyticProviders.push(t.providers[e].provider);this._properties=new Array,this._dimensions=new Array,this._gameVersion=t.gameVersion;var n=this.getAbsoluteDomainUrl();n&&this.addDimension({ai:a.AnalyticProperty.DOMAIN,ga:"",value:n}),t.arenaName&&this.addDimension({ai:a.AnalyticProperty.TRAFFIC_SOURCE,ga:"dimension1",value:t.arenaName}),this._gameVersion&&this.addDimension({ai:a.AnalyticProperty.GAME_VERSION,ga:"dimension2",value:this._gameVersion}),o.Environment.type&&this.addDimension({ai:a.AnalyticProperty.DEVICE_TYPE,ga:"",value:o.EnvironmentTypeEnum[o.Environment.type]}),this.parseTracker(t.providers)}return t.prototype.parseTracker=function(t){if(this._tracker=new u.EmptyAnalytic,null!=t)for(var e=0;e<t.length;e++){var n=t[e];switch(n.provider){case s.AnalyticProviderEnum.GOOGLE:this._tracker=new c.GoogleAnalytics(n,this._tracker);break;case s.AnalyticProviderEnum.CONSOLE:this._tracker=new l.ConsoleAnalytic(this._tracker);break;case s.AnalyticProviderEnum.MOBILE_ANALYTICS:this._tracker=new h.MobileAnalytic(n,this._tracker)}}},t.prototype.trackExceptionInternal=function(t){this._tracker.trackException(t)},t.prototype.addProperty=function(t){this._properties.push(t)},t.prototype.addDimension=function(t){this._dimensions.push(t)},t.prototype.sendPageControllerInternal=function(t){[].concat(this._properties);this._properties=new Array,this._tracker.sendPageController(t,this._properties,this._dimensions)},t.prototype.sendEventInternal=function(t,e){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){return n=[].concat(this._properties),this._properties=new Array,[2,this._tracker.sendEvent(t,e,n,this._dimensions)]}))}))},t.prototype.getAbsoluteDomainUrl=function(){return window&&"location"in window&&"protocol"in window.location&&"host"in window.location?window.location.protocol+"//"+window.location.host:null},t}();e.BaseAnalytic=p},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleAnalytic=void 0;var s=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.trackException=function(e){console.log("exception : ",e),t.prototype.trackException.call(this,e)},e.prototype.sendPageController=function(e,n,r){console.log("sendPageController : "," : pageName = ",e,"properties = ",n," : dimensions = ",r),t.prototype.sendPageController.call(this,e,n,r)},e.prototype.sendEvent=function(e,n,r,i){return o(this,void 0,void 0,(function(){return a(this,(function(o){return console.log("sendEvent : eventCategory = ",e,"properties = ",r," : dimensions = ",i),[2,t.prototype.sendEvent.call(this,e,n,r,i)]}))}))},e}(n(65).AnalyticDecorator);e.ConsoleAnalytic=s},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.EmptyAnalytic=void 0;var o=function(){function t(){}return t.prototype.sendPageController=function(t){},t.prototype.sendEvent=function(t,e){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2,Promise.resolve(!0)]}))}))},t.prototype.trackException=function(t){},t}();e.EmptyAnalytic=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleAnalytics=void 0;var s=function(t){function e(e,n){var r=t.call(this,n)||this;r._initialized=!1;var i,o,a,s,l,u,c=e.appId;return i=window,o=document,a="script",s="_gameGATracker",i.GoogleAnalyticsObject=s,i[s]=i[s]||function(){(i[s].q=i[s].q||[]).push(arguments)},i[s].l=1*new Date,l=o.createElement(a),u=o.getElementsByTagName(a)[0],l.async=1,l.src="//www.google-analytics.com/analytics.js",u.parentNode.insertBefore(l,u),window._gameGATracker&&(window._gameGATracker("create",c,"auto"),r._initialized=!0),r}return i(e,t),e.prototype.sendPageController=function(e,n,r){this._initialized&&window._gameGATracker("send","pageview",e),t.prototype.sendPageController.call(this,e,n,r)},e.prototype.sendEvent=function(e,n,r,i){return o(this,void 0,void 0,(function(){var o=this;return a(this,(function(a){return this._initialized?[2,new Promise((function(t,a){var s=!1,l=setTimeout((function(){s=!0,t(!1)}),1e3),u={eventCategory:e,eventAction:n,eventLabel:o.parseProperties(r),eventValue:0,hitCallback:function(){clearTimeout(l),s||t(!0)},hitCallbackFail:function(){clearTimeout(l),s||a(!1)}};Object.assign(u,o.parseDimensions(i)),window._gameGATracker("send","event",u)}))]:[2,t.prototype.sendEvent.call(this,e,n,r,i)]}))}))},e.prototype.parseProperties=function(t){for(var e="",n=0;n<t.length;n++){var r=t[n];e+=""!=e?"|"+r.value:r.value}return e},e.prototype.parseDimensions=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];r.ga&&(e[r.ga]=r.value)}return e},e}(n(65).AnalyticDecorator);e.GoogleAnalytics=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.MobileAnalytic=void 0;var s=n(64),l=n(65),u=n(0),c=n(58),h=function(t){function e(e,n){var r=t.call(this,n)||this;return r._mobileManager=u.Container.get(c.MobileManager),r}return i(e,t),e.prototype.trackException=function(e){t.prototype.trackException.call(this,e)},e.prototype.sendPageController=function(e,n,r){var i=this.combinePageControllerParameters(n,r);this._mobileManager.appCenterAnalyticTrackEvent(e,i),t.prototype.sendPageController.call(this,e,n,r)},e.prototype.sendEvent=function(e,n,r,i){return o(this,void 0,void 0,(function(){var o;return a(this,(function(a){return o=this.combineEventParameters(n,r,i),this._mobileManager.appCenterAnalyticTrackEvent(e,o),[2,t.prototype.sendEvent.call(this,e,n,r,i)]}))}))},e.prototype.combinePageControllerParameters=function(t,e){for(var n={},r=0;r<t.length;r++){n[(i=t[r]).key]=i.value}for(r=0;r<e.length;r++){var i;(i=e[r]).ai&&(n[i.ai]=i.value)}return n},e.prototype.combineEventParameters=function(t,e,n){var r={};null!=t&&""!=t&&(r[s.AnalyticProperty.ACTION]=t);for(var i=0;i<e.length;i++){r[(o=e[i]).key]=o.value}for(i=0;i<n.length;i++){var o;(o=n[i]).ai&&(r[o.ai]=o.value)}return r},e}(l.AnalyticDecorator);e.MobileAnalytic=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ModuleBaseController=void 0;var o=n(23),a=n(1),s=n(0),l=n(31),u=function(t){function e(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t.call(this,e)||this;return i.name=e,i}return i(e,t),e.prototype.initialize=function(e,n){return void 0===n&&(n=null),this.parentContainer=n||e.display,this.parentContainer.addChild(this.display),t.prototype.initialize.call(this,e,n)},e.prototype.configure=function(e){t.prototype.configure.call(this,e),this.config.moduleName=e.moduleName||this.config.moduleName||e.module.name,this.resourcesLoader=s.Container.get(l.ResourcesLoader),this.resourcesLoader.setGameInstanceBase(this.gameBase),this.resourcesLoader.path="modules/"+this.config.moduleName+"/assets/",this.resourcesLoader.module=this.config.moduleName,this.resourcesLoaderUpdate=!0},e.prototype._applyChildrenSorted=function(){var t=this;if(this.__childrenSorted){var e=new PIXI.Container,n=function(){for(var n=t.display.children.indexOf(e);n<t.display.children.length;n++){var r=t.display.children[n];t.display.swapChildren(e,r)}};this.display.addChild(e);for(var r=0;r<this.__childrenSorted.length;r++){var i=this.__childrenSorted[r];this.display.swapChildren(e,i),n()}this.display.removeChild(e),this.__childrenSorted=null}},e.prototype.sortCurrentChildren=function(t){for(var e=this.display.children,n=null,r=new a.List,i=0;i<e.length;i++)(n=e[i]).zOrder=0,t(n,n.__view)&&r.add(n);this.__childrenSorted=r.orderBy((function(t){return t.zOrder})).toArray()},e.prototype.update=function(e){return this._applyChildrenSorted(),t.prototype.update.call(this,e)},e.prototype.dispose=function(){this.isReady&&(this.parentContainer.removeChild(this.display),this.display.destroy({children:!0}),t.prototype.dispose.call(this))},e}(o._BaseController);e.ModuleBaseController=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameModule=void 0;var r=function(){function t(t){this._options=t}return Object.defineProperty(t.prototype,"name",{get:function(){return this._options.name},enumerable:!1,configurable:!0}),t.prototype.getRootController=function(){return this._options.root},t.prototype.getDefaultOptions=function(){return this._options.defaultOptions},t}();e.GameModule=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionBVHBranch=void 0;var r=[],i=function(){function t(){this._bvh_sort=0,this._bvh_min_x=0,this._bvh_min_y=0,this._bvh_max_x=0,this._bvh_max_y=0,this._bvh_branch=!0,this._bvh_parent=null,this._bvh_branch=!0,this._bvh_left=null,this._bvh_right=null,this._bvh_sort=0,this._bvh_min_x=0,this._bvh_min_y=0,this._bvh_max_x=0,this._bvh_max_y=0}return t.getBranch=function(){return r.length?r.pop():new t},t.releaseBranch=function(t){r.push(t)},t.sortBranches=function(t,e){return t.sort>e.sort?-1:1},t}();e.CollisionBVHBranch=i},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.Collisions=void 0;var o=n(114),a=n(69),s=n(115),l=n(67),u=n(68),c=n(113),h=n(0),p=function(){function t(){this._bvh=new c.CollisionBVH}return t.prototype.createCircle=function(t,e,n,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0);var a=new o.CollisionCircle(t,e,n,r,i);return this._bvh.insert(a),a},t.prototype.createPolygon=function(t,e,n,r,i,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=[[0,0]]),void 0===r&&(r=0),void 0===i&&(i=1),void 0===o&&(o=1),void 0===s&&(s=0);var l=new a.CollisionPolygon(t,e,n,r,i,o,s);return this._bvh.insert(l),l},t.prototype.createPoint=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0);var r=new s.CollisionPoint(t,e,n);return this._bvh.insert(r),r},t.prototype.createResult=function(){return new l.CollisionResult},t.createResult=function(){return new l.CollisionResult},t.prototype.insert=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){var i=r[n];this._bvh.insert(i,!1)}return this},t.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){var i=r[n];this._bvh.remove(i,!1)}return this},t.prototype.update=function(){return this._bvh.update(),this},t.prototype.draw=function(t){return this._bvh.draw(t)},t.prototype.drawBVH=function(t){return this._bvh.drawBVH(t)},t.prototype.potentials=function(t){return this._bvh.potentials(t)},t.prototype.collides=function(t,e,n,r){return void 0===n&&(n=null),void 0===r&&(r=!0),u.CollisionSAT(t,e,n,r)},t=r([h.Singleton,i("design:paramtypes",[])],t)}();e.Collisions=p}])}));

/***/ }),

/***/ "./node_modules/matter-js/build/matter.js":
/*!************************************************!*\
  !*** ./node_modules/matter-js/build/matter.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/*!
 * matter-js 0.17.1 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 22);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

/**
* The `Matter.Common` module contains utility functions that are common to all modules.
*
* @class Common
*/

var Common = {};

module.exports = Common;

(function() {

    Common._nextId = 0;
    Common._seed = 0;
    Common._nowStartTime = +(new Date());
    Common._warnedOnce = {};
    Common._decomp = null;
    
    /**
     * Extends the object in the first argument using the object in the second argument.
     * @method extend
     * @param {} obj
     * @param {boolean} deep
     * @return {} obj extended
     */
    Common.extend = function(obj, deep) {
        var argsStart,
            args,
            deepClone;

        if (typeof deep === 'boolean') {
            argsStart = 2;
            deepClone = deep;
        } else {
            argsStart = 1;
            deepClone = true;
        }

        for (var i = argsStart; i < arguments.length; i++) {
            var source = arguments[i];

            if (source) {
                for (var prop in source) {
                    if (deepClone && source[prop] && source[prop].constructor === Object) {
                        if (!obj[prop] || obj[prop].constructor === Object) {
                            obj[prop] = obj[prop] || {};
                            Common.extend(obj[prop], deepClone, source[prop]);
                        } else {
                            obj[prop] = source[prop];
                        }
                    } else {
                        obj[prop] = source[prop];
                    }
                }
            }
        }
        
        return obj;
    };

    /**
     * Creates a new clone of the object, if deep is true references will also be cloned.
     * @method clone
     * @param {} obj
     * @param {bool} deep
     * @return {} obj cloned
     */
    Common.clone = function(obj, deep) {
        return Common.extend({}, deep, obj);
    };

    /**
     * Returns the list of keys for the given object.
     * @method keys
     * @param {} obj
     * @return {string[]} keys
     */
    Common.keys = function(obj) {
        if (Object.keys)
            return Object.keys(obj);

        // avoid hasOwnProperty for performance
        var keys = [];
        for (var key in obj)
            keys.push(key);
        return keys;
    };

    /**
     * Returns the list of values for the given object.
     * @method values
     * @param {} obj
     * @return {array} Array of the objects property values
     */
    Common.values = function(obj) {
        var values = [];
        
        if (Object.keys) {
            var keys = Object.keys(obj);
            for (var i = 0; i < keys.length; i++) {
                values.push(obj[keys[i]]);
            }
            return values;
        }
        
        // avoid hasOwnProperty for performance
        for (var key in obj)
            values.push(obj[key]);
        return values;
    };

    /**
     * Gets a value from `base` relative to the `path` string.
     * @method get
     * @param {} obj The base object
     * @param {string} path The path relative to `base`, e.g. 'Foo.Bar.baz'
     * @param {number} [begin] Path slice begin
     * @param {number} [end] Path slice end
     * @return {} The object at the given path
     */
    Common.get = function(obj, path, begin, end) {
        path = path.split('.').slice(begin, end);

        for (var i = 0; i < path.length; i += 1) {
            obj = obj[path[i]];
        }

        return obj;
    };

    /**
     * Sets a value on `base` relative to the given `path` string.
     * @method set
     * @param {} obj The base object
     * @param {string} path The path relative to `base`, e.g. 'Foo.Bar.baz'
     * @param {} val The value to set
     * @param {number} [begin] Path slice begin
     * @param {number} [end] Path slice end
     * @return {} Pass through `val` for chaining
     */
    Common.set = function(obj, path, val, begin, end) {
        var parts = path.split('.').slice(begin, end);
        Common.get(obj, path, 0, -1)[parts[parts.length - 1]] = val;
        return val;
    };

    /**
     * Shuffles the given array in-place.
     * The function uses a seeded random generator.
     * @method shuffle
     * @param {array} array
     * @return {array} array shuffled randomly
     */
    Common.shuffle = function(array) {
        for (var i = array.length - 1; i > 0; i--) {
            var j = Math.floor(Common.random() * (i + 1));
            var temp = array[i];
            array[i] = array[j];
            array[j] = temp;
        }
        return array;
    };

    /**
     * Randomly chooses a value from a list with equal probability.
     * The function uses a seeded random generator.
     * @method choose
     * @param {array} choices
     * @return {object} A random choice object from the array
     */
    Common.choose = function(choices) {
        return choices[Math.floor(Common.random() * choices.length)];
    };

    /**
     * Returns true if the object is a HTMLElement, otherwise false.
     * @method isElement
     * @param {object} obj
     * @return {boolean} True if the object is a HTMLElement, otherwise false
     */
    Common.isElement = function(obj) {
        if (typeof HTMLElement !== 'undefined') {
            return obj instanceof HTMLElement;
        }

        return !!(obj && obj.nodeType && obj.nodeName);
    };

    /**
     * Returns true if the object is an array.
     * @method isArray
     * @param {object} obj
     * @return {boolean} True if the object is an array, otherwise false
     */
    Common.isArray = function(obj) {
        return Object.prototype.toString.call(obj) === '[object Array]';
    };

    /**
     * Returns true if the object is a function.
     * @method isFunction
     * @param {object} obj
     * @return {boolean} True if the object is a function, otherwise false
     */
    Common.isFunction = function(obj) {
        return typeof obj === "function";
    };

    /**
     * Returns true if the object is a plain object.
     * @method isPlainObject
     * @param {object} obj
     * @return {boolean} True if the object is a plain object, otherwise false
     */
    Common.isPlainObject = function(obj) {
        return typeof obj === 'object' && obj.constructor === Object;
    };

    /**
     * Returns true if the object is a string.
     * @method isString
     * @param {object} obj
     * @return {boolean} True if the object is a string, otherwise false
     */
    Common.isString = function(obj) {
        return toString.call(obj) === '[object String]';
    };
    
    /**
     * Returns the given value clamped between a minimum and maximum value.
     * @method clamp
     * @param {number} value
     * @param {number} min
     * @param {number} max
     * @return {number} The value clamped between min and max inclusive
     */
    Common.clamp = function(value, min, max) {
        if (value < min)
            return min;
        if (value > max)
            return max;
        return value;
    };
    
    /**
     * Returns the sign of the given value.
     * @method sign
     * @param {number} value
     * @return {number} -1 if negative, +1 if 0 or positive
     */
    Common.sign = function(value) {
        return value < 0 ? -1 : 1;
    };
    
    /**
     * Returns the current timestamp since the time origin (e.g. from page load).
     * The result is in milliseconds and will use high-resolution timing if available.
     * @method now
     * @return {number} the current timestamp in milliseconds
     */
    Common.now = function() {
        if (typeof window !== 'undefined' && window.performance) {
            if (window.performance.now) {
                return window.performance.now();
            } else if (window.performance.webkitNow) {
                return window.performance.webkitNow();
            }
        }

        if (Date.now) {
            return Date.now();
        }

        return (new Date()) - Common._nowStartTime;
    };
    
    /**
     * Returns a random value between a minimum and a maximum value inclusive.
     * The function uses a seeded random generator.
     * @method random
     * @param {number} min
     * @param {number} max
     * @return {number} A random number between min and max inclusive
     */
    Common.random = function(min, max) {
        min = (typeof min !== "undefined") ? min : 0;
        max = (typeof max !== "undefined") ? max : 1;
        return min + _seededRandom() * (max - min);
    };

    var _seededRandom = function() {
        // https://en.wikipedia.org/wiki/Linear_congruential_generator
        Common._seed = (Common._seed * 9301 + 49297) % 233280;
        return Common._seed / 233280;
    };

    /**
     * Converts a CSS hex colour string into an integer.
     * @method colorToNumber
     * @param {string} colorString
     * @return {number} An integer representing the CSS hex string
     */
    Common.colorToNumber = function(colorString) {
        colorString = colorString.replace('#','');

        if (colorString.length == 3) {
            colorString = colorString.charAt(0) + colorString.charAt(0)
                        + colorString.charAt(1) + colorString.charAt(1)
                        + colorString.charAt(2) + colorString.charAt(2);
        }

        return parseInt(colorString, 16);
    };

    /**
     * The console logging level to use, where each level includes all levels above and excludes the levels below.
     * The default level is 'debug' which shows all console messages.  
     *
     * Possible level values are:
     * - 0 = None
     * - 1 = Debug
     * - 2 = Info
     * - 3 = Warn
     * - 4 = Error
     * @property Common.logLevel
     * @type {Number}
     * @default 1
     */
    Common.logLevel = 1;

    /**
     * Shows a `console.log` message only if the current `Common.logLevel` allows it.
     * The message will be prefixed with 'matter-js' to make it easily identifiable.
     * @method log
     * @param ...objs {} The objects to log.
     */
    Common.log = function() {
        if (console && Common.logLevel > 0 && Common.logLevel <= 3) {
            console.log.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));
        }
    };

    /**
     * Shows a `console.info` message only if the current `Common.logLevel` allows it.
     * The message will be prefixed with 'matter-js' to make it easily identifiable.
     * @method info
     * @param ...objs {} The objects to log.
     */
    Common.info = function() {
        if (console && Common.logLevel > 0 && Common.logLevel <= 2) {
            console.info.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));
        }
    };

    /**
     * Shows a `console.warn` message only if the current `Common.logLevel` allows it.
     * The message will be prefixed with 'matter-js' to make it easily identifiable.
     * @method warn
     * @param ...objs {} The objects to log.
     */
    Common.warn = function() {
        if (console && Common.logLevel > 0 && Common.logLevel <= 3) {
            console.warn.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));
        }
    };

    /**
     * Uses `Common.warn` to log the given message one time only.
     * @method warnOnce
     * @param ...objs {} The objects to log.
     */
    Common.warnOnce = function() {
        var message = Array.prototype.slice.call(arguments).join(' ');

        if (!Common._warnedOnce[message]) {
            Common.warn(message);
            Common._warnedOnce[message] = true;
        }
    };

    /**
     * Shows a deprecated console warning when the function on the given object is called.
     * The target function will be replaced with a new function that first shows the warning
     * and then calls the original function.
     * @method deprecated
     * @param {object} obj The object or module
     * @param {string} name The property name of the function on obj
     * @param {string} warning The one-time message to show if the function is called
     */
    Common.deprecated = function(obj, prop, warning) {
        obj[prop] = Common.chain(function() {
            Common.warnOnce('🔅 deprecated 🔅', warning);
        }, obj[prop]);
    };

    /**
     * Returns the next unique sequential ID.
     * @method nextId
     * @return {Number} Unique sequential ID
     */
    Common.nextId = function() {
        return Common._nextId++;
    };

    /**
     * A cross browser compatible indexOf implementation.
     * @method indexOf
     * @param {array} haystack
     * @param {object} needle
     * @return {number} The position of needle in haystack, otherwise -1.
     */
    Common.indexOf = function(haystack, needle) {
        if (haystack.indexOf)
            return haystack.indexOf(needle);

        for (var i = 0; i < haystack.length; i++) {
            if (haystack[i] === needle)
                return i;
        }

        return -1;
    };

    /**
     * A cross browser compatible array map implementation.
     * @method map
     * @param {array} list
     * @param {function} func
     * @return {array} Values from list transformed by func.
     */
    Common.map = function(list, func) {
        if (list.map) {
            return list.map(func);
        }

        var mapped = [];

        for (var i = 0; i < list.length; i += 1) {
            mapped.push(func(list[i]));
        }

        return mapped;
    };

    /**
     * Takes a directed graph and returns the partially ordered set of vertices in topological order.
     * Circular dependencies are allowed.
     * @method topologicalSort
     * @param {object} graph
     * @return {array} Partially ordered set of vertices in topological order.
     */
    Common.topologicalSort = function(graph) {
        // https://github.com/mgechev/javascript-algorithms
        // Copyright (c) Minko Gechev (MIT license)
        // Modifications: tidy formatting and naming
        var result = [],
            visited = [],
            temp = [];

        for (var node in graph) {
            if (!visited[node] && !temp[node]) {
                Common._topologicalSort(node, visited, temp, graph, result);
            }
        }

        return result;
    };

    Common._topologicalSort = function(node, visited, temp, graph, result) {
        var neighbors = graph[node] || [];
        temp[node] = true;

        for (var i = 0; i < neighbors.length; i += 1) {
            var neighbor = neighbors[i];

            if (temp[neighbor]) {
                // skip circular dependencies
                continue;
            }

            if (!visited[neighbor]) {
                Common._topologicalSort(neighbor, visited, temp, graph, result);
            }
        }

        temp[node] = false;
        visited[node] = true;

        result.push(node);
    };

    /**
     * Takes _n_ functions as arguments and returns a new function that calls them in order.
     * The arguments applied when calling the new function will also be applied to every function passed.
     * The value of `this` refers to the last value returned in the chain that was not `undefined`.
     * Therefore if a passed function does not return a value, the previously returned value is maintained.
     * After all passed functions have been called the new function returns the last returned value (if any).
     * If any of the passed functions are a chain, then the chain will be flattened.
     * @method chain
     * @param ...funcs {function} The functions to chain.
     * @return {function} A new function that calls the passed functions in order.
     */
    Common.chain = function() {
        var funcs = [];

        for (var i = 0; i < arguments.length; i += 1) {
            var func = arguments[i];

            if (func._chained) {
                // flatten already chained functions
                funcs.push.apply(funcs, func._chained);
            } else {
                funcs.push(func);
            }
        }

        var chain = function() {
            // https://github.com/GoogleChrome/devtools-docs/issues/53#issuecomment-51941358
            var lastResult,
                args = new Array(arguments.length);

            for (var i = 0, l = arguments.length; i < l; i++) {
                args[i] = arguments[i];
            }

            for (i = 0; i < funcs.length; i += 1) {
                var result = funcs[i].apply(lastResult, args);

                if (typeof result !== 'undefined') {
                    lastResult = result;
                }
            }

            return lastResult;
        };

        chain._chained = funcs;

        return chain;
    };

    /**
     * Chains a function to excute before the original function on the given `path` relative to `base`.
     * See also docs for `Common.chain`.
     * @method chainPathBefore
     * @param {} base The base object
     * @param {string} path The path relative to `base`
     * @param {function} func The function to chain before the original
     * @return {function} The chained function that replaced the original
     */
    Common.chainPathBefore = function(base, path, func) {
        return Common.set(base, path, Common.chain(
            func,
            Common.get(base, path)
        ));
    };

    /**
     * Chains a function to excute after the original function on the given `path` relative to `base`.
     * See also docs for `Common.chain`.
     * @method chainPathAfter
     * @param {} base The base object
     * @param {string} path The path relative to `base`
     * @param {function} func The function to chain after the original
     * @return {function} The chained function that replaced the original
     */
    Common.chainPathAfter = function(base, path, func) {
        return Common.set(base, path, Common.chain(
            Common.get(base, path),
            func
        ));
    };

    /**
     * Provide the [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module to enable
     * concave vertex decomposition support when using `Bodies.fromVertices` e.g. `Common.setDecomp(require('poly-decomp'))`.
     * @method setDecomp
     * @param {} decomp The [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module.
     */
    Common.setDecomp = function(decomp) {
        Common._decomp = decomp;
    };

    /**
     * Returns the [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module provided through `Common.setDecomp`,
     * otherwise returns the global `decomp` if set.
     * @method getDecomp
     * @return {} The [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module if provided.
     */
    Common.getDecomp = function() {
        // get user provided decomp if set
        var decomp = Common._decomp;

        try {
            // otherwise from window global
            if (!decomp && typeof window !== 'undefined') {
                decomp = window.decomp;
            }
    
            // otherwise from node global
            if (!decomp && typeof global !== 'undefined') {
                decomp = global.decomp;
            }
        } catch (e) {
            // decomp not available
            decomp = null;
        }

        return decomp;
    };
})();


/***/ }),
/* 1 */
/***/ (function(module, exports) {

/**
* The `Matter.Bounds` module contains methods for creating and manipulating axis-aligned bounding boxes (AABB).
*
* @class Bounds
*/

var Bounds = {};

module.exports = Bounds;

(function() {

    /**
     * Creates a new axis-aligned bounding box (AABB) for the given vertices.
     * @method create
     * @param {vertices} vertices
     * @return {bounds} A new bounds object
     */
    Bounds.create = function(vertices) {
        var bounds = { 
            min: { x: 0, y: 0 }, 
            max: { x: 0, y: 0 }
        };

        if (vertices)
            Bounds.update(bounds, vertices);
        
        return bounds;
    };

    /**
     * Updates bounds using the given vertices and extends the bounds given a velocity.
     * @method update
     * @param {bounds} bounds
     * @param {vertices} vertices
     * @param {vector} velocity
     */
    Bounds.update = function(bounds, vertices, velocity) {
        bounds.min.x = Infinity;
        bounds.max.x = -Infinity;
        bounds.min.y = Infinity;
        bounds.max.y = -Infinity;

        for (var i = 0; i < vertices.length; i++) {
            var vertex = vertices[i];
            if (vertex.x > bounds.max.x) bounds.max.x = vertex.x;
            if (vertex.x < bounds.min.x) bounds.min.x = vertex.x;
            if (vertex.y > bounds.max.y) bounds.max.y = vertex.y;
            if (vertex.y < bounds.min.y) bounds.min.y = vertex.y;
        }
        
        if (velocity) {
            if (velocity.x > 0) {
                bounds.max.x += velocity.x;
            } else {
                bounds.min.x += velocity.x;
            }
            
            if (velocity.y > 0) {
                bounds.max.y += velocity.y;
            } else {
                bounds.min.y += velocity.y;
            }
        }
    };

    /**
     * Returns true if the bounds contains the given point.
     * @method contains
     * @param {bounds} bounds
     * @param {vector} point
     * @return {boolean} True if the bounds contain the point, otherwise false
     */
    Bounds.contains = function(bounds, point) {
        return point.x >= bounds.min.x && point.x <= bounds.max.x 
               && point.y >= bounds.min.y && point.y <= bounds.max.y;
    };

    /**
     * Returns true if the two bounds intersect.
     * @method overlaps
     * @param {bounds} boundsA
     * @param {bounds} boundsB
     * @return {boolean} True if the bounds overlap, otherwise false
     */
    Bounds.overlaps = function(boundsA, boundsB) {
        return (boundsA.min.x <= boundsB.max.x && boundsA.max.x >= boundsB.min.x
                && boundsA.max.y >= boundsB.min.y && boundsA.min.y <= boundsB.max.y);
    };

    /**
     * Translates the bounds by the given vector.
     * @method translate
     * @param {bounds} bounds
     * @param {vector} vector
     */
    Bounds.translate = function(bounds, vector) {
        bounds.min.x += vector.x;
        bounds.max.x += vector.x;
        bounds.min.y += vector.y;
        bounds.max.y += vector.y;
    };

    /**
     * Shifts the bounds to the given position.
     * @method shift
     * @param {bounds} bounds
     * @param {vector} position
     */
    Bounds.shift = function(bounds, position) {
        var deltaX = bounds.max.x - bounds.min.x,
            deltaY = bounds.max.y - bounds.min.y;
            
        bounds.min.x = position.x;
        bounds.max.x = position.x + deltaX;
        bounds.min.y = position.y;
        bounds.max.y = position.y + deltaY;
    };
    
})();


/***/ }),
/* 2 */
/***/ (function(module, exports) {

/**
* The `Matter.Vector` module contains methods for creating and manipulating vectors.
* Vectors are the basis of all the geometry related operations in the engine.
* A `Matter.Vector` object is of the form `{ x: 0, y: 0 }`.
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Vector
*/

// TODO: consider params for reusing vector objects

var Vector = {};

module.exports = Vector;

(function() {

    /**
     * Creates a new vector.
     * @method create
     * @param {number} x
     * @param {number} y
     * @return {vector} A new vector
     */
    Vector.create = function(x, y) {
        return { x: x || 0, y: y || 0 };
    };

    /**
     * Returns a new vector with `x` and `y` copied from the given `vector`.
     * @method clone
     * @param {vector} vector
     * @return {vector} A new cloned vector
     */
    Vector.clone = function(vector) {
        return { x: vector.x, y: vector.y };
    };

    /**
     * Returns the magnitude (length) of a vector.
     * @method magnitude
     * @param {vector} vector
     * @return {number} The magnitude of the vector
     */
    Vector.magnitude = function(vector) {
        return Math.sqrt((vector.x * vector.x) + (vector.y * vector.y));
    };

    /**
     * Returns the magnitude (length) of a vector (therefore saving a `sqrt` operation).
     * @method magnitudeSquared
     * @param {vector} vector
     * @return {number} The squared magnitude of the vector
     */
    Vector.magnitudeSquared = function(vector) {
        return (vector.x * vector.x) + (vector.y * vector.y);
    };

    /**
     * Rotates the vector about (0, 0) by specified angle.
     * @method rotate
     * @param {vector} vector
     * @param {number} angle
     * @param {vector} [output]
     * @return {vector} The vector rotated about (0, 0)
     */
    Vector.rotate = function(vector, angle, output) {
        var cos = Math.cos(angle), sin = Math.sin(angle);
        if (!output) output = {};
        var x = vector.x * cos - vector.y * sin;
        output.y = vector.x * sin + vector.y * cos;
        output.x = x;
        return output;
    };

    /**
     * Rotates the vector about a specified point by specified angle.
     * @method rotateAbout
     * @param {vector} vector
     * @param {number} angle
     * @param {vector} point
     * @param {vector} [output]
     * @return {vector} A new vector rotated about the point
     */
    Vector.rotateAbout = function(vector, angle, point, output) {
        var cos = Math.cos(angle), sin = Math.sin(angle);
        if (!output) output = {};
        var x = point.x + ((vector.x - point.x) * cos - (vector.y - point.y) * sin);
        output.y = point.y + ((vector.x - point.x) * sin + (vector.y - point.y) * cos);
        output.x = x;
        return output;
    };

    /**
     * Normalises a vector (such that its magnitude is `1`).
     * @method normalise
     * @param {vector} vector
     * @return {vector} A new vector normalised
     */
    Vector.normalise = function(vector) {
        var magnitude = Vector.magnitude(vector);
        if (magnitude === 0)
            return { x: 0, y: 0 };
        return { x: vector.x / magnitude, y: vector.y / magnitude };
    };

    /**
     * Returns the dot-product of two vectors.
     * @method dot
     * @param {vector} vectorA
     * @param {vector} vectorB
     * @return {number} The dot product of the two vectors
     */
    Vector.dot = function(vectorA, vectorB) {
        return (vectorA.x * vectorB.x) + (vectorA.y * vectorB.y);
    };

    /**
     * Returns the cross-product of two vectors.
     * @method cross
     * @param {vector} vectorA
     * @param {vector} vectorB
     * @return {number} The cross product of the two vectors
     */
    Vector.cross = function(vectorA, vectorB) {
        return (vectorA.x * vectorB.y) - (vectorA.y * vectorB.x);
    };

    /**
     * Returns the cross-product of three vectors.
     * @method cross3
     * @param {vector} vectorA
     * @param {vector} vectorB
     * @param {vector} vectorC
     * @return {number} The cross product of the three vectors
     */
    Vector.cross3 = function(vectorA, vectorB, vectorC) {
        return (vectorB.x - vectorA.x) * (vectorC.y - vectorA.y) - (vectorB.y - vectorA.y) * (vectorC.x - vectorA.x);
    };

    /**
     * Adds the two vectors.
     * @method add
     * @param {vector} vectorA
     * @param {vector} vectorB
     * @param {vector} [output]
     * @return {vector} A new vector of vectorA and vectorB added
     */
    Vector.add = function(vectorA, vectorB, output) {
        if (!output) output = {};
        output.x = vectorA.x + vectorB.x;
        output.y = vectorA.y + vectorB.y;
        return output;
    };

    /**
     * Subtracts the two vectors.
     * @method sub
     * @param {vector} vectorA
     * @param {vector} vectorB
     * @param {vector} [output]
     * @return {vector} A new vector of vectorA and vectorB subtracted
     */
    Vector.sub = function(vectorA, vectorB, output) {
        if (!output) output = {};
        output.x = vectorA.x - vectorB.x;
        output.y = vectorA.y - vectorB.y;
        return output;
    };

    /**
     * Multiplies a vector and a scalar.
     * @method mult
     * @param {vector} vector
     * @param {number} scalar
     * @return {vector} A new vector multiplied by scalar
     */
    Vector.mult = function(vector, scalar) {
        return { x: vector.x * scalar, y: vector.y * scalar };
    };

    /**
     * Divides a vector and a scalar.
     * @method div
     * @param {vector} vector
     * @param {number} scalar
     * @return {vector} A new vector divided by scalar
     */
    Vector.div = function(vector, scalar) {
        return { x: vector.x / scalar, y: vector.y / scalar };
    };

    /**
     * Returns the perpendicular vector. Set `negate` to true for the perpendicular in the opposite direction.
     * @method perp
     * @param {vector} vector
     * @param {bool} [negate=false]
     * @return {vector} The perpendicular vector
     */
    Vector.perp = function(vector, negate) {
        negate = negate === true ? -1 : 1;
        return { x: negate * -vector.y, y: negate * vector.x };
    };

    /**
     * Negates both components of a vector such that it points in the opposite direction.
     * @method neg
     * @param {vector} vector
     * @return {vector} The negated vector
     */
    Vector.neg = function(vector) {
        return { x: -vector.x, y: -vector.y };
    };

    /**
     * Returns the angle between the vector `vectorB - vectorA` and the x-axis in radians.
     * @method angle
     * @param {vector} vectorA
     * @param {vector} vectorB
     * @return {number} The angle in radians
     */
    Vector.angle = function(vectorA, vectorB) {
        return Math.atan2(vectorB.y - vectorA.y, vectorB.x - vectorA.x);
    };

    /**
     * Temporary vector pool (not thread-safe).
     * @property _temp
     * @type {vector[]}
     * @private
     */
    Vector._temp = [
        Vector.create(), Vector.create(), 
        Vector.create(), Vector.create(), 
        Vector.create(), Vector.create()
    ];

})();

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Vertices` module contains methods for creating and manipulating sets of vertices.
* A set of vertices is an array of `Matter.Vector` with additional indexing properties inserted by `Vertices.create`.
* A `Matter.Body` maintains a set of vertices to represent the shape of the object (its convex hull).
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Vertices
*/

var Vertices = {};

module.exports = Vertices;

var Vector = __webpack_require__(2);
var Common = __webpack_require__(0);

(function() {

    /**
     * Creates a new set of `Matter.Body` compatible vertices.
     * The `points` argument accepts an array of `Matter.Vector` points orientated around the origin `(0, 0)`, for example:
     *
     *     [{ x: 0, y: 0 }, { x: 25, y: 50 }, { x: 50, y: 0 }]
     *
     * The `Vertices.create` method returns a new array of vertices, which are similar to Matter.Vector objects,
     * but with some additional references required for efficient collision detection routines.
     *
     * Vertices must be specified in clockwise order.
     *
     * Note that the `body` argument is not optional, a `Matter.Body` reference must be provided.
     *
     * @method create
     * @param {vector[]} points
     * @param {body} body
     */
    Vertices.create = function(points, body) {
        var vertices = [];

        for (var i = 0; i < points.length; i++) {
            var point = points[i],
                vertex = {
                    x: point.x,
                    y: point.y,
                    index: i,
                    body: body,
                    isInternal: false
                };

            vertices.push(vertex);
        }

        return vertices;
    };

    /**
     * Parses a string containing ordered x y pairs separated by spaces (and optionally commas), 
     * into a `Matter.Vertices` object for the given `Matter.Body`.
     * For parsing SVG paths, see `Svg.pathToVertices`.
     * @method fromPath
     * @param {string} path
     * @param {body} body
     * @return {vertices} vertices
     */
    Vertices.fromPath = function(path, body) {
        var pathPattern = /L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,
            points = [];

        path.replace(pathPattern, function(match, x, y) {
            points.push({ x: parseFloat(x), y: parseFloat(y) });
        });

        return Vertices.create(points, body);
    };

    /**
     * Returns the centre (centroid) of the set of vertices.
     * @method centre
     * @param {vertices} vertices
     * @return {vector} The centre point
     */
    Vertices.centre = function(vertices) {
        var area = Vertices.area(vertices, true),
            centre = { x: 0, y: 0 },
            cross,
            temp,
            j;

        for (var i = 0; i < vertices.length; i++) {
            j = (i + 1) % vertices.length;
            cross = Vector.cross(vertices[i], vertices[j]);
            temp = Vector.mult(Vector.add(vertices[i], vertices[j]), cross);
            centre = Vector.add(centre, temp);
        }

        return Vector.div(centre, 6 * area);
    };

    /**
     * Returns the average (mean) of the set of vertices.
     * @method mean
     * @param {vertices} vertices
     * @return {vector} The average point
     */
    Vertices.mean = function(vertices) {
        var average = { x: 0, y: 0 };

        for (var i = 0; i < vertices.length; i++) {
            average.x += vertices[i].x;
            average.y += vertices[i].y;
        }

        return Vector.div(average, vertices.length);
    };

    /**
     * Returns the area of the set of vertices.
     * @method area
     * @param {vertices} vertices
     * @param {bool} signed
     * @return {number} The area
     */
    Vertices.area = function(vertices, signed) {
        var area = 0,
            j = vertices.length - 1;

        for (var i = 0; i < vertices.length; i++) {
            area += (vertices[j].x - vertices[i].x) * (vertices[j].y + vertices[i].y);
            j = i;
        }

        if (signed)
            return area / 2;

        return Math.abs(area) / 2;
    };

    /**
     * Returns the moment of inertia (second moment of area) of the set of vertices given the total mass.
     * @method inertia
     * @param {vertices} vertices
     * @param {number} mass
     * @return {number} The polygon's moment of inertia
     */
    Vertices.inertia = function(vertices, mass) {
        var numerator = 0,
            denominator = 0,
            v = vertices,
            cross,
            j;

        // find the polygon's moment of inertia, using second moment of area
        // from equations at http://www.physicsforums.com/showthread.php?t=25293
        for (var n = 0; n < v.length; n++) {
            j = (n + 1) % v.length;
            cross = Math.abs(Vector.cross(v[j], v[n]));
            numerator += cross * (Vector.dot(v[j], v[j]) + Vector.dot(v[j], v[n]) + Vector.dot(v[n], v[n]));
            denominator += cross;
        }

        return (mass / 6) * (numerator / denominator);
    };

    /**
     * Translates the set of vertices in-place.
     * @method translate
     * @param {vertices} vertices
     * @param {vector} vector
     * @param {number} scalar
     */
    Vertices.translate = function(vertices, vector, scalar) {
        var i;
        if (scalar) {
            for (i = 0; i < vertices.length; i++) {
                vertices[i].x += vector.x * scalar;
                vertices[i].y += vector.y * scalar;
            }
        } else {
            for (i = 0; i < vertices.length; i++) {
                vertices[i].x += vector.x;
                vertices[i].y += vector.y;
            }
        }

        return vertices;
    };

    /**
     * Rotates the set of vertices in-place.
     * @method rotate
     * @param {vertices} vertices
     * @param {number} angle
     * @param {vector} point
     */
    Vertices.rotate = function(vertices, angle, point) {
        if (angle === 0)
            return;

        var cos = Math.cos(angle),
            sin = Math.sin(angle);

        for (var i = 0; i < vertices.length; i++) {
            var vertice = vertices[i],
                dx = vertice.x - point.x,
                dy = vertice.y - point.y;
                
            vertice.x = point.x + (dx * cos - dy * sin);
            vertice.y = point.y + (dx * sin + dy * cos);
        }

        return vertices;
    };

    /**
     * Returns `true` if the `point` is inside the set of `vertices`.
     * @method contains
     * @param {vertices} vertices
     * @param {vector} point
     * @return {boolean} True if the vertices contains point, otherwise false
     */
    Vertices.contains = function(vertices, point) {
        for (var i = 0; i < vertices.length; i++) {
            var vertice = vertices[i],
                nextVertice = vertices[(i + 1) % vertices.length];
            if ((point.x - vertice.x) * (nextVertice.y - vertice.y) + (point.y - vertice.y) * (vertice.x - nextVertice.x) > 0) {
                return false;
            }
        }

        return true;
    };

    /**
     * Scales the vertices from a point (default is centre) in-place.
     * @method scale
     * @param {vertices} vertices
     * @param {number} scaleX
     * @param {number} scaleY
     * @param {vector} point
     */
    Vertices.scale = function(vertices, scaleX, scaleY, point) {
        if (scaleX === 1 && scaleY === 1)
            return vertices;

        point = point || Vertices.centre(vertices);

        var vertex,
            delta;

        for (var i = 0; i < vertices.length; i++) {
            vertex = vertices[i];
            delta = Vector.sub(vertex, point);
            vertices[i].x = point.x + delta.x * scaleX;
            vertices[i].y = point.y + delta.y * scaleY;
        }

        return vertices;
    };

    /**
     * Chamfers a set of vertices by giving them rounded corners, returns a new set of vertices.
     * The radius parameter is a single number or an array to specify the radius for each vertex.
     * @method chamfer
     * @param {vertices} vertices
     * @param {number[]} radius
     * @param {number} quality
     * @param {number} qualityMin
     * @param {number} qualityMax
     */
    Vertices.chamfer = function(vertices, radius, quality, qualityMin, qualityMax) {
        if (typeof radius === 'number') {
            radius = [radius];
        } else {
            radius = radius || [8];
        }

        // quality defaults to -1, which is auto
        quality = (typeof quality !== 'undefined') ? quality : -1;
        qualityMin = qualityMin || 2;
        qualityMax = qualityMax || 14;

        var newVertices = [];

        for (var i = 0; i < vertices.length; i++) {
            var prevVertex = vertices[i - 1 >= 0 ? i - 1 : vertices.length - 1],
                vertex = vertices[i],
                nextVertex = vertices[(i + 1) % vertices.length],
                currentRadius = radius[i < radius.length ? i : radius.length - 1];

            if (currentRadius === 0) {
                newVertices.push(vertex);
                continue;
            }

            var prevNormal = Vector.normalise({ 
                x: vertex.y - prevVertex.y, 
                y: prevVertex.x - vertex.x
            });

            var nextNormal = Vector.normalise({ 
                x: nextVertex.y - vertex.y, 
                y: vertex.x - nextVertex.x
            });

            var diagonalRadius = Math.sqrt(2 * Math.pow(currentRadius, 2)),
                radiusVector = Vector.mult(Common.clone(prevNormal), currentRadius),
                midNormal = Vector.normalise(Vector.mult(Vector.add(prevNormal, nextNormal), 0.5)),
                scaledVertex = Vector.sub(vertex, Vector.mult(midNormal, diagonalRadius));

            var precision = quality;

            if (quality === -1) {
                // automatically decide precision
                precision = Math.pow(currentRadius, 0.32) * 1.75;
            }

            precision = Common.clamp(precision, qualityMin, qualityMax);

            // use an even value for precision, more likely to reduce axes by using symmetry
            if (precision % 2 === 1)
                precision += 1;

            var alpha = Math.acos(Vector.dot(prevNormal, nextNormal)),
                theta = alpha / precision;

            for (var j = 0; j < precision; j++) {
                newVertices.push(Vector.add(Vector.rotate(radiusVector, theta * j), scaledVertex));
            }
        }

        return newVertices;
    };

    /**
     * Sorts the input vertices into clockwise order in place.
     * @method clockwiseSort
     * @param {vertices} vertices
     * @return {vertices} vertices
     */
    Vertices.clockwiseSort = function(vertices) {
        var centre = Vertices.mean(vertices);

        vertices.sort(function(vertexA, vertexB) {
            return Vector.angle(centre, vertexA) - Vector.angle(centre, vertexB);
        });

        return vertices;
    };

    /**
     * Returns true if the vertices form a convex shape (vertices must be in clockwise order).
     * @method isConvex
     * @param {vertices} vertices
     * @return {bool} `true` if the `vertices` are convex, `false` if not (or `null` if not computable).
     */
    Vertices.isConvex = function(vertices) {
        // http://paulbourke.net/geometry/polygonmesh/
        // Copyright (c) Paul Bourke (use permitted)

        var flag = 0,
            n = vertices.length,
            i,
            j,
            k,
            z;

        if (n < 3)
            return null;

        for (i = 0; i < n; i++) {
            j = (i + 1) % n;
            k = (i + 2) % n;
            z = (vertices[j].x - vertices[i].x) * (vertices[k].y - vertices[j].y);
            z -= (vertices[j].y - vertices[i].y) * (vertices[k].x - vertices[j].x);

            if (z < 0) {
                flag |= 1;
            } else if (z > 0) {
                flag |= 2;
            }

            if (flag === 3) {
                return false;
            }
        }

        if (flag !== 0){
            return true;
        } else {
            return null;
        }
    };

    /**
     * Returns the convex hull of the input vertices as a new array of points.
     * @method hull
     * @param {vertices} vertices
     * @return [vertex] vertices
     */
    Vertices.hull = function(vertices) {
        // http://geomalgorithms.com/a10-_hull-1.html

        var upper = [],
            lower = [], 
            vertex,
            i;

        // sort vertices on x-axis (y-axis for ties)
        vertices = vertices.slice(0);
        vertices.sort(function(vertexA, vertexB) {
            var dx = vertexA.x - vertexB.x;
            return dx !== 0 ? dx : vertexA.y - vertexB.y;
        });

        // build lower hull
        for (i = 0; i < vertices.length; i += 1) {
            vertex = vertices[i];

            while (lower.length >= 2 
                   && Vector.cross3(lower[lower.length - 2], lower[lower.length - 1], vertex) <= 0) {
                lower.pop();
            }

            lower.push(vertex);
        }

        // build upper hull
        for (i = vertices.length - 1; i >= 0; i -= 1) {
            vertex = vertices[i];

            while (upper.length >= 2 
                   && Vector.cross3(upper[upper.length - 2], upper[upper.length - 1], vertex) <= 0) {
                upper.pop();
            }

            upper.push(vertex);
        }

        // concatenation of the lower and upper hulls gives the convex hull
        // omit last points because they are repeated at the beginning of the other list
        upper.pop();
        lower.pop();

        return upper.concat(lower);
    };

})();


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Events` module contains methods to fire and listen to events on other objects.
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Events
*/

var Events = {};

module.exports = Events;

var Common = __webpack_require__(0);

(function() {

    /**
     * Subscribes a callback function to the given object's `eventName`.
     * @method on
     * @param {} object
     * @param {string} eventNames
     * @param {function} callback
     */
    Events.on = function(object, eventNames, callback) {
        var names = eventNames.split(' '),
            name;

        for (var i = 0; i < names.length; i++) {
            name = names[i];
            object.events = object.events || {};
            object.events[name] = object.events[name] || [];
            object.events[name].push(callback);
        }

        return callback;
    };

    /**
     * Removes the given event callback. If no callback, clears all callbacks in `eventNames`. If no `eventNames`, clears all events.
     * @method off
     * @param {} object
     * @param {string} eventNames
     * @param {function} callback
     */
    Events.off = function(object, eventNames, callback) {
        if (!eventNames) {
            object.events = {};
            return;
        }

        // handle Events.off(object, callback)
        if (typeof eventNames === 'function') {
            callback = eventNames;
            eventNames = Common.keys(object.events).join(' ');
        }

        var names = eventNames.split(' ');

        for (var i = 0; i < names.length; i++) {
            var callbacks = object.events[names[i]],
                newCallbacks = [];

            if (callback && callbacks) {
                for (var j = 0; j < callbacks.length; j++) {
                    if (callbacks[j] !== callback)
                        newCallbacks.push(callbacks[j]);
                }
            }

            object.events[names[i]] = newCallbacks;
        }
    };

    /**
     * Fires all the callbacks subscribed to the given object's `eventName`, in the order they subscribed, if any.
     * @method trigger
     * @param {} object
     * @param {string} eventNames
     * @param {} event
     */
    Events.trigger = function(object, eventNames, event) {
        var names,
            name,
            callbacks,
            eventClone;

        var events = object.events;
        
        if (events && Common.keys(events).length > 0) {
            if (!event)
                event = {};

            names = eventNames.split(' ');

            for (var i = 0; i < names.length; i++) {
                name = names[i];
                callbacks = events[name];

                if (callbacks) {
                    eventClone = Common.clone(event, false);
                    eventClone.name = name;
                    eventClone.source = object;

                    for (var j = 0; j < callbacks.length; j++) {
                        callbacks[j].apply(object, [eventClone]);
                    }
                }
            }
        }
    };

})();


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

/**
* A composite is a collection of `Matter.Body`, `Matter.Constraint` and other `Matter.Composite` objects.
*
* They are a container that can represent complex objects made of multiple parts, even if they are not physically connected.
* A composite could contain anything from a single body all the way up to a whole world.
* 
* When making any changes to composites, use the included functions rather than changing their properties directly.
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Composite
*/

var Composite = {};

module.exports = Composite;

var Events = __webpack_require__(4);
var Common = __webpack_require__(0);
var Bounds = __webpack_require__(1);
var Body = __webpack_require__(6);

(function() {

    /**
     * Creates a new composite. The options parameter is an object that specifies any properties you wish to override the defaults.
     * See the properites section below for detailed information on what you can pass via the `options` object.
     * @method create
     * @param {} [options]
     * @return {composite} A new composite
     */
    Composite.create = function(options) {
        return Common.extend({ 
            id: Common.nextId(),
            type: 'composite',
            parent: null,
            isModified: false,
            bodies: [], 
            constraints: [], 
            composites: [],
            label: 'Composite',
            plugin: {}
        }, options);
    };

    /**
     * Sets the composite's `isModified` flag. 
     * If `updateParents` is true, all parents will be set (default: false).
     * If `updateChildren` is true, all children will be set (default: false).
     * @method setModified
     * @param {composite} composite
     * @param {boolean} isModified
     * @param {boolean} [updateParents=false]
     * @param {boolean} [updateChildren=false]
     */
    Composite.setModified = function(composite, isModified, updateParents, updateChildren) {
        composite.isModified = isModified;

        if (updateParents && composite.parent) {
            Composite.setModified(composite.parent, isModified, updateParents, updateChildren);
        }

        if (updateChildren) {
            for(var i = 0; i < composite.composites.length; i++) {
                var childComposite = composite.composites[i];
                Composite.setModified(childComposite, isModified, updateParents, updateChildren);
            }
        }
    };

    /**
     * Generic single or multi-add function. Adds a single or an array of body(s), constraint(s) or composite(s) to the given composite.
     * Triggers `beforeAdd` and `afterAdd` events on the `composite`.
     * @method add
     * @param {composite} composite
     * @param {object|array} object A single or an array of body(s), constraint(s) or composite(s)
     * @return {composite} The original composite with the objects added
     */
    Composite.add = function(composite, object) {
        var objects = [].concat(object);

        Events.trigger(composite, 'beforeAdd', { object: object });

        for (var i = 0; i < objects.length; i++) {
            var obj = objects[i];

            switch (obj.type) {

            case 'body':
                // skip adding compound parts
                if (obj.parent !== obj) {
                    Common.warn('Composite.add: skipped adding a compound body part (you must add its parent instead)');
                    break;
                }

                Composite.addBody(composite, obj);
                break;
            case 'constraint':
                Composite.addConstraint(composite, obj);
                break;
            case 'composite':
                Composite.addComposite(composite, obj);
                break;
            case 'mouseConstraint':
                Composite.addConstraint(composite, obj.constraint);
                break;

            }
        }

        Events.trigger(composite, 'afterAdd', { object: object });

        return composite;
    };

    /**
     * Generic remove function. Removes one or many body(s), constraint(s) or a composite(s) to the given composite.
     * Optionally searching its children recursively.
     * Triggers `beforeRemove` and `afterRemove` events on the `composite`.
     * @method remove
     * @param {composite} composite
     * @param {object|array} object
     * @param {boolean} [deep=false]
     * @return {composite} The original composite with the objects removed
     */
    Composite.remove = function(composite, object, deep) {
        var objects = [].concat(object);

        Events.trigger(composite, 'beforeRemove', { object: object });

        for (var i = 0; i < objects.length; i++) {
            var obj = objects[i];

            switch (obj.type) {

            case 'body':
                Composite.removeBody(composite, obj, deep);
                break;
            case 'constraint':
                Composite.removeConstraint(composite, obj, deep);
                break;
            case 'composite':
                Composite.removeComposite(composite, obj, deep);
                break;
            case 'mouseConstraint':
                Composite.removeConstraint(composite, obj.constraint);
                break;

            }
        }

        Events.trigger(composite, 'afterRemove', { object: object });

        return composite;
    };

    /**
     * Adds a composite to the given composite.
     * @private
     * @method addComposite
     * @param {composite} compositeA
     * @param {composite} compositeB
     * @return {composite} The original compositeA with the objects from compositeB added
     */
    Composite.addComposite = function(compositeA, compositeB) {
        compositeA.composites.push(compositeB);
        compositeB.parent = compositeA;
        Composite.setModified(compositeA, true, true, false);
        return compositeA;
    };

    /**
     * Removes a composite from the given composite, and optionally searching its children recursively.
     * @private
     * @method removeComposite
     * @param {composite} compositeA
     * @param {composite} compositeB
     * @param {boolean} [deep=false]
     * @return {composite} The original compositeA with the composite removed
     */
    Composite.removeComposite = function(compositeA, compositeB, deep) {
        var position = Common.indexOf(compositeA.composites, compositeB);
        if (position !== -1) {
            Composite.removeCompositeAt(compositeA, position);
            Composite.setModified(compositeA, true, true, false);
        }

        if (deep) {
            for (var i = 0; i < compositeA.composites.length; i++){
                Composite.removeComposite(compositeA.composites[i], compositeB, true);
            }
        }

        return compositeA;
    };

    /**
     * Removes a composite from the given composite.
     * @private
     * @method removeCompositeAt
     * @param {composite} composite
     * @param {number} position
     * @return {composite} The original composite with the composite removed
     */
    Composite.removeCompositeAt = function(composite, position) {
        composite.composites.splice(position, 1);
        Composite.setModified(composite, true, true, false);
        return composite;
    };

    /**
     * Adds a body to the given composite.
     * @private
     * @method addBody
     * @param {composite} composite
     * @param {body} body
     * @return {composite} The original composite with the body added
     */
    Composite.addBody = function(composite, body) {
        composite.bodies.push(body);
        Composite.setModified(composite, true, true, false);
        return composite;
    };

    /**
     * Removes a body from the given composite, and optionally searching its children recursively.
     * @private
     * @method removeBody
     * @param {composite} composite
     * @param {body} body
     * @param {boolean} [deep=false]
     * @return {composite} The original composite with the body removed
     */
    Composite.removeBody = function(composite, body, deep) {
        var position = Common.indexOf(composite.bodies, body);
        if (position !== -1) {
            Composite.removeBodyAt(composite, position);
            Composite.setModified(composite, true, true, false);
        }

        if (deep) {
            for (var i = 0; i < composite.composites.length; i++){
                Composite.removeBody(composite.composites[i], body, true);
            }
        }

        return composite;
    };

    /**
     * Removes a body from the given composite.
     * @private
     * @method removeBodyAt
     * @param {composite} composite
     * @param {number} position
     * @return {composite} The original composite with the body removed
     */
    Composite.removeBodyAt = function(composite, position) {
        composite.bodies.splice(position, 1);
        Composite.setModified(composite, true, true, false);
        return composite;
    };

    /**
     * Adds a constraint to the given composite.
     * @private
     * @method addConstraint
     * @param {composite} composite
     * @param {constraint} constraint
     * @return {composite} The original composite with the constraint added
     */
    Composite.addConstraint = function(composite, constraint) {
        composite.constraints.push(constraint);
        Composite.setModified(composite, true, true, false);
        return composite;
    };

    /**
     * Removes a constraint from the given composite, and optionally searching its children recursively.
     * @private
     * @method removeConstraint
     * @param {composite} composite
     * @param {constraint} constraint
     * @param {boolean} [deep=false]
     * @return {composite} The original composite with the constraint removed
     */
    Composite.removeConstraint = function(composite, constraint, deep) {
        var position = Common.indexOf(composite.constraints, constraint);
        if (position !== -1) {
            Composite.removeConstraintAt(composite, position);
        }

        if (deep) {
            for (var i = 0; i < composite.composites.length; i++){
                Composite.removeConstraint(composite.composites[i], constraint, true);
            }
        }

        return composite;
    };

    /**
     * Removes a body from the given composite.
     * @private
     * @method removeConstraintAt
     * @param {composite} composite
     * @param {number} position
     * @return {composite} The original composite with the constraint removed
     */
    Composite.removeConstraintAt = function(composite, position) {
        composite.constraints.splice(position, 1);
        Composite.setModified(composite, true, true, false);
        return composite;
    };

    /**
     * Removes all bodies, constraints and composites from the given composite.
     * Optionally clearing its children recursively.
     * @method clear
     * @param {composite} composite
     * @param {boolean} keepStatic
     * @param {boolean} [deep=false]
     */
    Composite.clear = function(composite, keepStatic, deep) {
        if (deep) {
            for (var i = 0; i < composite.composites.length; i++){
                Composite.clear(composite.composites[i], keepStatic, true);
            }
        }
        
        if (keepStatic) {
            composite.bodies = composite.bodies.filter(function(body) { return body.isStatic; });
        } else {
            composite.bodies.length = 0;
        }

        composite.constraints.length = 0;
        composite.composites.length = 0;
        Composite.setModified(composite, true, true, false);

        return composite;
    };

    /**
     * Returns all bodies in the given composite, including all bodies in its children, recursively.
     * @method allBodies
     * @param {composite} composite
     * @return {body[]} All the bodies
     */
    Composite.allBodies = function(composite) {
        var bodies = [].concat(composite.bodies);

        for (var i = 0; i < composite.composites.length; i++)
            bodies = bodies.concat(Composite.allBodies(composite.composites[i]));

        return bodies;
    };

    /**
     * Returns all constraints in the given composite, including all constraints in its children, recursively.
     * @method allConstraints
     * @param {composite} composite
     * @return {constraint[]} All the constraints
     */
    Composite.allConstraints = function(composite) {
        var constraints = [].concat(composite.constraints);

        for (var i = 0; i < composite.composites.length; i++)
            constraints = constraints.concat(Composite.allConstraints(composite.composites[i]));

        return constraints;
    };

    /**
     * Returns all composites in the given composite, including all composites in its children, recursively.
     * @method allComposites
     * @param {composite} composite
     * @return {composite[]} All the composites
     */
    Composite.allComposites = function(composite) {
        var composites = [].concat(composite.composites);

        for (var i = 0; i < composite.composites.length; i++)
            composites = composites.concat(Composite.allComposites(composite.composites[i]));

        return composites;
    };

    /**
     * Searches the composite recursively for an object matching the type and id supplied, null if not found.
     * @method get
     * @param {composite} composite
     * @param {number} id
     * @param {string} type
     * @return {object} The requested object, if found
     */
    Composite.get = function(composite, id, type) {
        var objects,
            object;

        switch (type) {
        case 'body':
            objects = Composite.allBodies(composite);
            break;
        case 'constraint':
            objects = Composite.allConstraints(composite);
            break;
        case 'composite':
            objects = Composite.allComposites(composite).concat(composite);
            break;
        }

        if (!objects)
            return null;

        object = objects.filter(function(object) { 
            return object.id.toString() === id.toString(); 
        });

        return object.length === 0 ? null : object[0];
    };

    /**
     * Moves the given object(s) from compositeA to compositeB (equal to a remove followed by an add).
     * @method move
     * @param {compositeA} compositeA
     * @param {object[]} objects
     * @param {compositeB} compositeB
     * @return {composite} Returns compositeA
     */
    Composite.move = function(compositeA, objects, compositeB) {
        Composite.remove(compositeA, objects);
        Composite.add(compositeB, objects);
        return compositeA;
    };

    /**
     * Assigns new ids for all objects in the composite, recursively.
     * @method rebase
     * @param {composite} composite
     * @return {composite} Returns composite
     */
    Composite.rebase = function(composite) {
        var objects = Composite.allBodies(composite)
            .concat(Composite.allConstraints(composite))
            .concat(Composite.allComposites(composite));

        for (var i = 0; i < objects.length; i++) {
            objects[i].id = Common.nextId();
        }

        Composite.setModified(composite, true, true, false);

        return composite;
    };

    /**
     * Translates all children in the composite by a given vector relative to their current positions, 
     * without imparting any velocity.
     * @method translate
     * @param {composite} composite
     * @param {vector} translation
     * @param {bool} [recursive=true]
     */
    Composite.translate = function(composite, translation, recursive) {
        var bodies = recursive ? Composite.allBodies(composite) : composite.bodies;

        for (var i = 0; i < bodies.length; i++) {
            Body.translate(bodies[i], translation);
        }

        Composite.setModified(composite, true, true, false);

        return composite;
    };

    /**
     * Rotates all children in the composite by a given angle about the given point, without imparting any angular velocity.
     * @method rotate
     * @param {composite} composite
     * @param {number} rotation
     * @param {vector} point
     * @param {bool} [recursive=true]
     */
    Composite.rotate = function(composite, rotation, point, recursive) {
        var cos = Math.cos(rotation),
            sin = Math.sin(rotation),
            bodies = recursive ? Composite.allBodies(composite) : composite.bodies;

        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i],
                dx = body.position.x - point.x,
                dy = body.position.y - point.y;
                
            Body.setPosition(body, {
                x: point.x + (dx * cos - dy * sin),
                y: point.y + (dx * sin + dy * cos)
            });

            Body.rotate(body, rotation);
        }

        Composite.setModified(composite, true, true, false);

        return composite;
    };

    /**
     * Scales all children in the composite, including updating physical properties (mass, area, axes, inertia), from a world-space point.
     * @method scale
     * @param {composite} composite
     * @param {number} scaleX
     * @param {number} scaleY
     * @param {vector} point
     * @param {bool} [recursive=true]
     */
    Composite.scale = function(composite, scaleX, scaleY, point, recursive) {
        var bodies = recursive ? Composite.allBodies(composite) : composite.bodies;

        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i],
                dx = body.position.x - point.x,
                dy = body.position.y - point.y;
                
            Body.setPosition(body, {
                x: point.x + dx * scaleX,
                y: point.y + dy * scaleY
            });

            Body.scale(body, scaleX, scaleY);
        }

        Composite.setModified(composite, true, true, false);

        return composite;
    };

    /**
     * Returns the union of the bounds of all of the composite's bodies.
     * @method bounds
     * @param {composite} composite The composite.
     * @returns {bounds} The composite bounds.
     */
    Composite.bounds = function(composite) {
        var bodies = Composite.allBodies(composite),
            vertices = [];

        for (var i = 0; i < bodies.length; i += 1) {
            var body = bodies[i];
            vertices.push(body.bounds.min, body.bounds.max);
        }

        return Bounds.create(vertices);
    };

    /*
    *
    *  Events Documentation
    *
    */

    /**
    * Fired when a call to `Composite.add` is made, before objects have been added.
    *
    * @event beforeAdd
    * @param {} event An event object
    * @param {} event.object The object(s) to be added (may be a single body, constraint, composite or a mixed array of these)
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired when a call to `Composite.add` is made, after objects have been added.
    *
    * @event afterAdd
    * @param {} event An event object
    * @param {} event.object The object(s) that have been added (may be a single body, constraint, composite or a mixed array of these)
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired when a call to `Composite.remove` is made, before objects have been removed.
    *
    * @event beforeRemove
    * @param {} event An event object
    * @param {} event.object The object(s) to be removed (may be a single body, constraint, composite or a mixed array of these)
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired when a call to `Composite.remove` is made, after objects have been removed.
    *
    * @event afterRemove
    * @param {} event An event object
    * @param {} event.object The object(s) that have been removed (may be a single body, constraint, composite or a mixed array of these)
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /*
    *
    *  Properties Documentation
    *
    */

    /**
     * An integer `Number` uniquely identifying number generated in `Composite.create` by `Common.nextId`.
     *
     * @property id
     * @type number
     */

    /**
     * A `String` denoting the type of object.
     *
     * @property type
     * @type string
     * @default "composite"
     * @readOnly
     */

    /**
     * An arbitrary `String` name to help the user identify and manage composites.
     *
     * @property label
     * @type string
     * @default "Composite"
     */

    /**
     * A flag that specifies whether the composite has been modified during the current step.
     * Most `Matter.Composite` methods will automatically set this flag to `true` to inform the engine of changes to be handled.
     * If you need to change it manually, you should use the `Composite.setModified` method.
     *
     * @property isModified
     * @type boolean
     * @default false
     */

    /**
     * The `Composite` that is the parent of this composite. It is automatically managed by the `Matter.Composite` methods.
     *
     * @property parent
     * @type composite
     * @default null
     */

    /**
     * An array of `Body` that are _direct_ children of this composite.
     * To add or remove bodies you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.
     * If you wish to recursively find all descendants, you should use the `Composite.allBodies` method.
     *
     * @property bodies
     * @type body[]
     * @default []
     */

    /**
     * An array of `Constraint` that are _direct_ children of this composite.
     * To add or remove constraints you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.
     * If you wish to recursively find all descendants, you should use the `Composite.allConstraints` method.
     *
     * @property constraints
     * @type constraint[]
     * @default []
     */

    /**
     * An array of `Composite` that are _direct_ children of this composite.
     * To add or remove composites you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.
     * If you wish to recursively find all descendants, you should use the `Composite.allComposites` method.
     *
     * @property composites
     * @type composite[]
     * @default []
     */

    /**
     * An object reserved for storing plugin-specific properties.
     *
     * @property plugin
     * @type {}
     */

})();


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Body` module contains methods for creating and manipulating body models.
* A `Matter.Body` is a rigid body that can be simulated by a `Matter.Engine`.
* Factories for commonly used body configurations (such as rectangles, circles and other polygons) can be found in the module `Matter.Bodies`.
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).

* @class Body
*/

var Body = {};

module.exports = Body;

var Vertices = __webpack_require__(3);
var Vector = __webpack_require__(2);
var Sleeping = __webpack_require__(7);
var Render = __webpack_require__(16);
var Common = __webpack_require__(0);
var Bounds = __webpack_require__(1);
var Axes = __webpack_require__(10);

(function() {

    Body._inertiaScale = 4;
    Body._nextCollidingGroupId = 1;
    Body._nextNonCollidingGroupId = -1;
    Body._nextCategory = 0x0001;

    /**
     * Creates a new rigid body model. The options parameter is an object that specifies any properties you wish to override the defaults.
     * All properties have default values, and many are pre-calculated automatically based on other properties.
     * Vertices must be specified in clockwise order.
     * See the properties section below for detailed information on what you can pass via the `options` object.
     * @method create
     * @param {} options
     * @return {body} body
     */
    Body.create = function(options) {
        var defaults = {
            id: Common.nextId(),
            type: 'body',
            label: 'Body',
            parts: [],
            plugin: {},
            angle: 0,
            vertices: Vertices.fromPath('L 0 0 L 40 0 L 40 40 L 0 40'),
            position: { x: 0, y: 0 },
            force: { x: 0, y: 0 },
            torque: 0,
            positionImpulse: { x: 0, y: 0 },
            constraintImpulse: { x: 0, y: 0, angle: 0 },
            totalContacts: 0,
            speed: 0,
            angularSpeed: 0,
            velocity: { x: 0, y: 0 },
            angularVelocity: 0,
            isSensor: false,
            isStatic: false,
            isSleeping: false,
            motion: 0,
            sleepThreshold: 60,
            density: 0.001,
            restitution: 0,
            friction: 0.1,
            frictionStatic: 0.5,
            frictionAir: 0.01,
            collisionFilter: {
                category: 0x0001,
                mask: 0xFFFFFFFF,
                group: 0
            },
            slop: 0.05,
            timeScale: 1,
            render: {
                visible: true,
                opacity: 1,
                strokeStyle: null,
                fillStyle: null,
                lineWidth: null,
                sprite: {
                    xScale: 1,
                    yScale: 1,
                    xOffset: 0,
                    yOffset: 0
                }
            },
            events: null,
            bounds: null,
            chamfer: null,
            circleRadius: 0,
            positionPrev: null,
            anglePrev: 0,
            parent: null,
            axes: null,
            area: 0,
            mass: 0,
            inertia: 0,
            _original: null
        };

        var body = Common.extend(defaults, options);

        _initProperties(body, options);

        return body;
    };

    /**
     * Returns the next unique group index for which bodies will collide.
     * If `isNonColliding` is `true`, returns the next unique group index for which bodies will _not_ collide.
     * See `body.collisionFilter` for more information.
     * @method nextGroup
     * @param {bool} [isNonColliding=false]
     * @return {Number} Unique group index
     */
    Body.nextGroup = function(isNonColliding) {
        if (isNonColliding)
            return Body._nextNonCollidingGroupId--;

        return Body._nextCollidingGroupId++;
    };

    /**
     * Returns the next unique category bitfield (starting after the initial default category `0x0001`).
     * There are 32 available. See `body.collisionFilter` for more information.
     * @method nextCategory
     * @return {Number} Unique category bitfield
     */
    Body.nextCategory = function() {
        Body._nextCategory = Body._nextCategory << 1;
        return Body._nextCategory;
    };

    /**
     * Initialises body properties.
     * @method _initProperties
     * @private
     * @param {body} body
     * @param {} [options]
     */
    var _initProperties = function(body, options) {
        options = options || {};

        // init required properties (order is important)
        Body.set(body, {
            bounds: body.bounds || Bounds.create(body.vertices),
            positionPrev: body.positionPrev || Vector.clone(body.position),
            anglePrev: body.anglePrev || body.angle,
            vertices: body.vertices,
            parts: body.parts || [body],
            isStatic: body.isStatic,
            isSleeping: body.isSleeping,
            parent: body.parent || body
        });

        Vertices.rotate(body.vertices, body.angle, body.position);
        Axes.rotate(body.axes, body.angle);
        Bounds.update(body.bounds, body.vertices, body.velocity);

        // allow options to override the automatically calculated properties
        Body.set(body, {
            axes: options.axes || body.axes,
            area: options.area || body.area,
            mass: options.mass || body.mass,
            inertia: options.inertia || body.inertia
        });

        // render properties
        var defaultFillStyle = (body.isStatic ? '#14151f' : Common.choose(['#f19648', '#f5d259', '#f55a3c', '#063e7b', '#ececd1'])),
            defaultStrokeStyle = body.isStatic ? '#555' : '#ccc',
            defaultLineWidth = body.isStatic && body.render.fillStyle === null ? 1 : 0;
        body.render.fillStyle = body.render.fillStyle || defaultFillStyle;
        body.render.strokeStyle = body.render.strokeStyle || defaultStrokeStyle;
        body.render.lineWidth = body.render.lineWidth || defaultLineWidth;
        body.render.sprite.xOffset += -(body.bounds.min.x - body.position.x) / (body.bounds.max.x - body.bounds.min.x);
        body.render.sprite.yOffset += -(body.bounds.min.y - body.position.y) / (body.bounds.max.y - body.bounds.min.y);
    };

    /**
     * Given a property and a value (or map of), sets the property(s) on the body, using the appropriate setter functions if they exist.
     * Prefer to use the actual setter functions in performance critical situations.
     * @method set
     * @param {body} body
     * @param {} settings A property name (or map of properties and values) to set on the body.
     * @param {} value The value to set if `settings` is a single property name.
     */
    Body.set = function(body, settings, value) {
        var property;

        if (typeof settings === 'string') {
            property = settings;
            settings = {};
            settings[property] = value;
        }

        for (property in settings) {
            if (!Object.prototype.hasOwnProperty.call(settings, property))
                continue;

            value = settings[property];
            switch (property) {

            case 'isStatic':
                Body.setStatic(body, value);
                break;
            case 'isSleeping':
                Sleeping.set(body, value);
                break;
            case 'mass':
                Body.setMass(body, value);
                break;
            case 'density':
                Body.setDensity(body, value);
                break;
            case 'inertia':
                Body.setInertia(body, value);
                break;
            case 'vertices':
                Body.setVertices(body, value);
                break;
            case 'position':
                Body.setPosition(body, value);
                break;
            case 'angle':
                Body.setAngle(body, value);
                break;
            case 'velocity':
                Body.setVelocity(body, value);
                break;
            case 'angularVelocity':
                Body.setAngularVelocity(body, value);
                break;
            case 'parts':
                Body.setParts(body, value);
                break;
            case 'centre':
                Body.setCentre(body, value);
                break;
            default:
                body[property] = value;

            }
        }
    };

    /**
     * Sets the body as static, including isStatic flag and setting mass and inertia to Infinity.
     * @method setStatic
     * @param {body} body
     * @param {bool} isStatic
     */
    Body.setStatic = function(body, isStatic) {
        for (var i = 0; i < body.parts.length; i++) {
            var part = body.parts[i];
            part.isStatic = isStatic;

            if (isStatic) {
                part._original = {
                    restitution: part.restitution,
                    friction: part.friction,
                    mass: part.mass,
                    inertia: part.inertia,
                    density: part.density,
                    inverseMass: part.inverseMass,
                    inverseInertia: part.inverseInertia
                };

                part.restitution = 0;
                part.friction = 1;
                part.mass = part.inertia = part.density = Infinity;
                part.inverseMass = part.inverseInertia = 0;

                part.positionPrev.x = part.position.x;
                part.positionPrev.y = part.position.y;
                part.anglePrev = part.angle;
                part.angularVelocity = 0;
                part.speed = 0;
                part.angularSpeed = 0;
                part.motion = 0;
            } else if (part._original) {
                part.restitution = part._original.restitution;
                part.friction = part._original.friction;
                part.mass = part._original.mass;
                part.inertia = part._original.inertia;
                part.density = part._original.density;
                part.inverseMass = part._original.inverseMass;
                part.inverseInertia = part._original.inverseInertia;

                part._original = null;
            }
        }
    };

    /**
     * Sets the mass of the body. Inverse mass, density and inertia are automatically updated to reflect the change.
     * @method setMass
     * @param {body} body
     * @param {number} mass
     */
    Body.setMass = function(body, mass) {
        var moment = body.inertia / (body.mass / 6);
        body.inertia = moment * (mass / 6);
        body.inverseInertia = 1 / body.inertia;

        body.mass = mass;
        body.inverseMass = 1 / body.mass;
        body.density = body.mass / body.area;
    };

    /**
     * Sets the density of the body. Mass and inertia are automatically updated to reflect the change.
     * @method setDensity
     * @param {body} body
     * @param {number} density
     */
    Body.setDensity = function(body, density) {
        Body.setMass(body, density * body.area);
        body.density = density;
    };

    /**
     * Sets the moment of inertia (i.e. second moment of area) of the body. 
     * Inverse inertia is automatically updated to reflect the change. Mass is not changed.
     * @method setInertia
     * @param {body} body
     * @param {number} inertia
     */
    Body.setInertia = function(body, inertia) {
        body.inertia = inertia;
        body.inverseInertia = 1 / body.inertia;
    };

    /**
     * Sets the body's vertices and updates body properties accordingly, including inertia, area and mass (with respect to `body.density`).
     * Vertices will be automatically transformed to be orientated around their centre of mass as the origin.
     * They are then automatically translated to world space based on `body.position`.
     *
     * The `vertices` argument should be passed as an array of `Matter.Vector` points (or a `Matter.Vertices` array).
     * Vertices must form a convex hull, concave hulls are not supported.
     *
     * @method setVertices
     * @param {body} body
     * @param {vector[]} vertices
     */
    Body.setVertices = function(body, vertices) {
        // change vertices
        if (vertices[0].body === body) {
            body.vertices = vertices;
        } else {
            body.vertices = Vertices.create(vertices, body);
        }

        // update properties
        body.axes = Axes.fromVertices(body.vertices);
        body.area = Vertices.area(body.vertices);
        Body.setMass(body, body.density * body.area);

        // orient vertices around the centre of mass at origin (0, 0)
        var centre = Vertices.centre(body.vertices);
        Vertices.translate(body.vertices, centre, -1);

        // update inertia while vertices are at origin (0, 0)
        Body.setInertia(body, Body._inertiaScale * Vertices.inertia(body.vertices, body.mass));

        // update geometry
        Vertices.translate(body.vertices, body.position);
        Bounds.update(body.bounds, body.vertices, body.velocity);
    };

    /**
     * Sets the parts of the `body` and updates mass, inertia and centroid.
     * Each part will have its parent set to `body`.
     * By default the convex hull will be automatically computed and set on `body`, unless `autoHull` is set to `false.`
     * Note that this method will ensure that the first part in `body.parts` will always be the `body`.
     * @method setParts
     * @param {body} body
     * @param [body] parts
     * @param {bool} [autoHull=true]
     */
    Body.setParts = function(body, parts, autoHull) {
        var i;

        // add all the parts, ensuring that the first part is always the parent body
        parts = parts.slice(0);
        body.parts.length = 0;
        body.parts.push(body);
        body.parent = body;

        for (i = 0; i < parts.length; i++) {
            var part = parts[i];
            if (part !== body) {
                part.parent = body;
                body.parts.push(part);
            }
        }

        if (body.parts.length === 1)
            return;

        autoHull = typeof autoHull !== 'undefined' ? autoHull : true;

        // find the convex hull of all parts to set on the parent body
        if (autoHull) {
            var vertices = [];
            for (i = 0; i < parts.length; i++) {
                vertices = vertices.concat(parts[i].vertices);
            }

            Vertices.clockwiseSort(vertices);

            var hull = Vertices.hull(vertices),
                hullCentre = Vertices.centre(hull);

            Body.setVertices(body, hull);
            Vertices.translate(body.vertices, hullCentre);
        }

        // sum the properties of all compound parts of the parent body
        var total = Body._totalProperties(body);

        body.area = total.area;
        body.parent = body;
        body.position.x = total.centre.x;
        body.position.y = total.centre.y;
        body.positionPrev.x = total.centre.x;
        body.positionPrev.y = total.centre.y;

        Body.setMass(body, total.mass);
        Body.setInertia(body, total.inertia);
        Body.setPosition(body, total.centre);
    };

    /**
     * Set the centre of mass of the body. 
     * The `centre` is a vector in world-space unless `relative` is set, in which case it is a translation.
     * The centre of mass is the point the body rotates about and can be used to simulate non-uniform density.
     * This is equal to moving `body.position` but not the `body.vertices`.
     * Invalid if the `centre` falls outside the body's convex hull.
     * @method setCentre
     * @param {body} body
     * @param {vector} centre
     * @param {bool} relative
     */
    Body.setCentre = function(body, centre, relative) {
        if (!relative) {
            body.positionPrev.x = centre.x - (body.position.x - body.positionPrev.x);
            body.positionPrev.y = centre.y - (body.position.y - body.positionPrev.y);
            body.position.x = centre.x;
            body.position.y = centre.y;
        } else {
            body.positionPrev.x += centre.x;
            body.positionPrev.y += centre.y;
            body.position.x += centre.x;
            body.position.y += centre.y;
        }
    };

    /**
     * Sets the position of the body instantly. Velocity, angle, force etc. are unchanged.
     * @method setPosition
     * @param {body} body
     * @param {vector} position
     */
    Body.setPosition = function(body, position) {
        var delta = Vector.sub(position, body.position);
        body.positionPrev.x += delta.x;
        body.positionPrev.y += delta.y;

        for (var i = 0; i < body.parts.length; i++) {
            var part = body.parts[i];
            part.position.x += delta.x;
            part.position.y += delta.y;
            Vertices.translate(part.vertices, delta);
            Bounds.update(part.bounds, part.vertices, body.velocity);
        }
    };

    /**
     * Sets the angle of the body instantly. Angular velocity, position, force etc. are unchanged.
     * @method setAngle
     * @param {body} body
     * @param {number} angle
     */
    Body.setAngle = function(body, angle) {
        var delta = angle - body.angle;
        body.anglePrev += delta;

        for (var i = 0; i < body.parts.length; i++) {
            var part = body.parts[i];
            part.angle += delta;
            Vertices.rotate(part.vertices, delta, body.position);
            Axes.rotate(part.axes, delta);
            Bounds.update(part.bounds, part.vertices, body.velocity);
            if (i > 0) {
                Vector.rotateAbout(part.position, delta, body.position, part.position);
            }
        }
    };

    /**
     * Sets the linear velocity of the body instantly. Position, angle, force etc. are unchanged. See also `Body.applyForce`.
     * @method setVelocity
     * @param {body} body
     * @param {vector} velocity
     */
    Body.setVelocity = function(body, velocity) {
        body.positionPrev.x = body.position.x - velocity.x;
        body.positionPrev.y = body.position.y - velocity.y;
        body.velocity.x = velocity.x;
        body.velocity.y = velocity.y;
        body.speed = Vector.magnitude(body.velocity);
    };

    /**
     * Sets the angular velocity of the body instantly. Position, angle, force etc. are unchanged. See also `Body.applyForce`.
     * @method setAngularVelocity
     * @param {body} body
     * @param {number} velocity
     */
    Body.setAngularVelocity = function(body, velocity) {
        body.anglePrev = body.angle - velocity;
        body.angularVelocity = velocity;
        body.angularSpeed = Math.abs(body.angularVelocity);
    };

    /**
     * Moves a body by a given vector relative to its current position, without imparting any velocity.
     * @method translate
     * @param {body} body
     * @param {vector} translation
     */
    Body.translate = function(body, translation) {
        Body.setPosition(body, Vector.add(body.position, translation));
    };

    /**
     * Rotates a body by a given angle relative to its current angle, without imparting any angular velocity.
     * @method rotate
     * @param {body} body
     * @param {number} rotation
     * @param {vector} [point]
     */
    Body.rotate = function(body, rotation, point) {
        if (!point) {
            Body.setAngle(body, body.angle + rotation);
        } else {
            var cos = Math.cos(rotation),
                sin = Math.sin(rotation),
                dx = body.position.x - point.x,
                dy = body.position.y - point.y;
                
            Body.setPosition(body, {
                x: point.x + (dx * cos - dy * sin),
                y: point.y + (dx * sin + dy * cos)
            });

            Body.setAngle(body, body.angle + rotation);
        }
    };

    /**
     * Scales the body, including updating physical properties (mass, area, axes, inertia), from a world-space point (default is body centre).
     * @method scale
     * @param {body} body
     * @param {number} scaleX
     * @param {number} scaleY
     * @param {vector} [point]
     */
    Body.scale = function(body, scaleX, scaleY, point) {
        var totalArea = 0,
            totalInertia = 0;

        point = point || body.position;

        for (var i = 0; i < body.parts.length; i++) {
            var part = body.parts[i];

            // scale vertices
            Vertices.scale(part.vertices, scaleX, scaleY, point);

            // update properties
            part.axes = Axes.fromVertices(part.vertices);
            part.area = Vertices.area(part.vertices);
            Body.setMass(part, body.density * part.area);

            // update inertia (requires vertices to be at origin)
            Vertices.translate(part.vertices, { x: -part.position.x, y: -part.position.y });
            Body.setInertia(part, Body._inertiaScale * Vertices.inertia(part.vertices, part.mass));
            Vertices.translate(part.vertices, { x: part.position.x, y: part.position.y });

            if (i > 0) {
                totalArea += part.area;
                totalInertia += part.inertia;
            }

            // scale position
            part.position.x = point.x + (part.position.x - point.x) * scaleX;
            part.position.y = point.y + (part.position.y - point.y) * scaleY;

            // update bounds
            Bounds.update(part.bounds, part.vertices, body.velocity);
        }

        // handle parent body
        if (body.parts.length > 1) {
            body.area = totalArea;

            if (!body.isStatic) {
                Body.setMass(body, body.density * totalArea);
                Body.setInertia(body, totalInertia);
            }
        }

        // handle circles
        if (body.circleRadius) { 
            if (scaleX === scaleY) {
                body.circleRadius *= scaleX;
            } else {
                // body is no longer a circle
                body.circleRadius = null;
            }
        }
    };

    /**
     * Performs a simulation step for the given `body`, including updating position and angle using Verlet integration.
     * @method update
     * @param {body} body
     * @param {number} deltaTime
     * @param {number} timeScale
     * @param {number} correction
     */
    Body.update = function(body, deltaTime, timeScale, correction) {
        var deltaTimeSquared = Math.pow(deltaTime * timeScale * body.timeScale, 2);

        // from the previous step
        var frictionAir = 1 - body.frictionAir * timeScale * body.timeScale,
            velocityPrevX = body.position.x - body.positionPrev.x,
            velocityPrevY = body.position.y - body.positionPrev.y;

        // update velocity with Verlet integration
        body.velocity.x = (velocityPrevX * frictionAir * correction) + (body.force.x / body.mass) * deltaTimeSquared;
        body.velocity.y = (velocityPrevY * frictionAir * correction) + (body.force.y / body.mass) * deltaTimeSquared;

        body.positionPrev.x = body.position.x;
        body.positionPrev.y = body.position.y;
        body.position.x += body.velocity.x;
        body.position.y += body.velocity.y;

        // update angular velocity with Verlet integration
        body.angularVelocity = ((body.angle - body.anglePrev) * frictionAir * correction) + (body.torque / body.inertia) * deltaTimeSquared;
        body.anglePrev = body.angle;
        body.angle += body.angularVelocity;

        // track speed and acceleration
        body.speed = Vector.magnitude(body.velocity);
        body.angularSpeed = Math.abs(body.angularVelocity);

        // transform the body geometry
        for (var i = 0; i < body.parts.length; i++) {
            var part = body.parts[i];

            Vertices.translate(part.vertices, body.velocity);
            
            if (i > 0) {
                part.position.x += body.velocity.x;
                part.position.y += body.velocity.y;
            }

            if (body.angularVelocity !== 0) {
                Vertices.rotate(part.vertices, body.angularVelocity, body.position);
                Axes.rotate(part.axes, body.angularVelocity);
                if (i > 0) {
                    Vector.rotateAbout(part.position, body.angularVelocity, body.position, part.position);
                }
            }

            Bounds.update(part.bounds, part.vertices, body.velocity);
        }
    };

    /**
     * Applies a force to a body from a given world-space position, including resulting torque.
     * @method applyForce
     * @param {body} body
     * @param {vector} position
     * @param {vector} force
     */
    Body.applyForce = function(body, position, force) {
        body.force.x += force.x;
        body.force.y += force.y;
        var offset = { x: position.x - body.position.x, y: position.y - body.position.y };
        body.torque += offset.x * force.y - offset.y * force.x;
    };

    /**
     * Returns the sums of the properties of all compound parts of the parent body.
     * @method _totalProperties
     * @private
     * @param {body} body
     * @return {}
     */
    Body._totalProperties = function(body) {
        // from equations at:
        // https://ecourses.ou.edu/cgi-bin/ebook.cgi?doc=&topic=st&chap_sec=07.2&page=theory
        // http://output.to/sideway/default.asp?qno=121100087

        var properties = {
            mass: 0,
            area: 0,
            inertia: 0,
            centre: { x: 0, y: 0 }
        };

        // sum the properties of all compound parts of the parent body
        for (var i = body.parts.length === 1 ? 0 : 1; i < body.parts.length; i++) {
            var part = body.parts[i],
                mass = part.mass !== Infinity ? part.mass : 1;

            properties.mass += mass;
            properties.area += part.area;
            properties.inertia += part.inertia;
            properties.centre = Vector.add(properties.centre, Vector.mult(part.position, mass));
        }

        properties.centre = Vector.div(properties.centre, properties.mass);

        return properties;
    };

    /*
    *
    *  Events Documentation
    *
    */

    /**
    * Fired when a body starts sleeping (where `this` is the body).
    *
    * @event sleepStart
    * @this {body} The body that has started sleeping
    * @param {} event An event object
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired when a body ends sleeping (where `this` is the body).
    *
    * @event sleepEnd
    * @this {body} The body that has ended sleeping
    * @param {} event An event object
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /*
    *
    *  Properties Documentation
    *
    */

    /**
     * An integer `Number` uniquely identifying number generated in `Body.create` by `Common.nextId`.
     *
     * @property id
     * @type number
     */

    /**
     * A `String` denoting the type of object.
     *
     * @property type
     * @type string
     * @default "body"
     * @readOnly
     */

    /**
     * An arbitrary `String` name to help the user identify and manage bodies.
     *
     * @property label
     * @type string
     * @default "Body"
     */

    /**
     * An array of bodies that make up this body. 
     * The first body in the array must always be a self reference to the current body instance.
     * All bodies in the `parts` array together form a single rigid compound body.
     * Parts are allowed to overlap, have gaps or holes or even form concave bodies.
     * Parts themselves should never be added to a `World`, only the parent body should be.
     * Use `Body.setParts` when setting parts to ensure correct updates of all properties.
     *
     * @property parts
     * @type body[]
     */

    /**
     * An object reserved for storing plugin-specific properties.
     *
     * @property plugin
     * @type {}
     */

    /**
     * A self reference if the body is _not_ a part of another body.
     * Otherwise this is a reference to the body that this is a part of.
     * See `body.parts`.
     *
     * @property parent
     * @type body
     */

    /**
     * A `Number` specifying the angle of the body, in radians.
     *
     * @property angle
     * @type number
     * @default 0
     */

    /**
     * An array of `Vector` objects that specify the convex hull of the rigid body.
     * These should be provided about the origin `(0, 0)`. E.g.
     *
     *     [{ x: 0, y: 0 }, { x: 25, y: 50 }, { x: 50, y: 0 }]
     *
     * When passed via `Body.create`, the vertices are translated relative to `body.position` (i.e. world-space, and constantly updated by `Body.update` during simulation).
     * The `Vector` objects are also augmented with additional properties required for efficient collision detection. 
     *
     * Other properties such as `inertia` and `bounds` are automatically calculated from the passed vertices (unless provided via `options`).
     * Concave hulls are not currently supported. The module `Matter.Vertices` contains useful methods for working with vertices.
     *
     * @property vertices
     * @type vector[]
     */

    /**
     * A `Vector` that specifies the current world-space position of the body.
     *
     * @property position
     * @type vector
     * @default { x: 0, y: 0 }
     */

    /**
     * A `Vector` that specifies the force to apply in the current step. It is zeroed after every `Body.update`. See also `Body.applyForce`.
     *
     * @property force
     * @type vector
     * @default { x: 0, y: 0 }
     */

    /**
     * A `Number` that specifies the torque (turning force) to apply in the current step. It is zeroed after every `Body.update`.
     *
     * @property torque
     * @type number
     * @default 0
     */

    /**
     * A `Number` that _measures_ the current speed of the body after the last `Body.update`. It is read-only and always positive (it's the magnitude of `body.velocity`).
     *
     * @readOnly
     * @property speed
     * @type number
     * @default 0
     */

    /**
     * A `Number` that _measures_ the current angular speed of the body after the last `Body.update`. It is read-only and always positive (it's the magnitude of `body.angularVelocity`).
     *
     * @readOnly
     * @property angularSpeed
     * @type number
     * @default 0
     */

    /**
     * A `Vector` that _measures_ the current velocity of the body after the last `Body.update`. It is read-only. 
     * If you need to modify a body's velocity directly, you should either apply a force or simply change the body's `position` (as the engine uses position-Verlet integration).
     *
     * @readOnly
     * @property velocity
     * @type vector
     * @default { x: 0, y: 0 }
     */

    /**
     * A `Number` that _measures_ the current angular velocity of the body after the last `Body.update`. It is read-only. 
     * If you need to modify a body's angular velocity directly, you should apply a torque or simply change the body's `angle` (as the engine uses position-Verlet integration).
     *
     * @readOnly
     * @property angularVelocity
     * @type number
     * @default 0
     */

    /**
     * A flag that indicates whether a body is considered static. A static body can never change position or angle and is completely fixed.
     * If you need to set a body as static after its creation, you should use `Body.setStatic` as this requires more than just setting this flag.
     *
     * @property isStatic
     * @type boolean
     * @default false
     */

    /**
     * A flag that indicates whether a body is a sensor. Sensor triggers collision events, but doesn't react with colliding body physically.
     *
     * @property isSensor
     * @type boolean
     * @default false
     */

    /**
     * A flag that indicates whether the body is considered sleeping. A sleeping body acts similar to a static body, except it is only temporary and can be awoken.
     * If you need to set a body as sleeping, you should use `Sleeping.set` as this requires more than just setting this flag.
     *
     * @property isSleeping
     * @type boolean
     * @default false
     */

    /**
     * A `Number` that _measures_ the amount of movement a body currently has (a combination of `speed` and `angularSpeed`). It is read-only and always positive.
     * It is used and updated by the `Matter.Sleeping` module during simulation to decide if a body has come to rest.
     *
     * @readOnly
     * @property motion
     * @type number
     * @default 0
     */

    /**
     * A `Number` that defines the number of updates in which this body must have near-zero velocity before it is set as sleeping by the `Matter.Sleeping` module (if sleeping is enabled by the engine).
     *
     * @property sleepThreshold
     * @type number
     * @default 60
     */

    /**
     * A `Number` that defines the density of the body, that is its mass per unit area.
     * If you pass the density via `Body.create` the `mass` property is automatically calculated for you based on the size (area) of the object.
     * This is generally preferable to simply setting mass and allows for more intuitive definition of materials (e.g. rock has a higher density than wood).
     *
     * @property density
     * @type number
     * @default 0.001
     */

    /**
     * A `Number` that defines the mass of the body, although it may be more appropriate to specify the `density` property instead.
     * If you modify this value, you must also modify the `body.inverseMass` property (`1 / mass`).
     *
     * @property mass
     * @type number
     */

    /**
     * A `Number` that defines the inverse mass of the body (`1 / mass`).
     * If you modify this value, you must also modify the `body.mass` property.
     *
     * @property inverseMass
     * @type number
     */

    /**
     * A `Number` that defines the moment of inertia (i.e. second moment of area) of the body.
     * It is automatically calculated from the given convex hull (`vertices` array) and density in `Body.create`.
     * If you modify this value, you must also modify the `body.inverseInertia` property (`1 / inertia`).
     *
     * @property inertia
     * @type number
     */

    /**
     * A `Number` that defines the inverse moment of inertia of the body (`1 / inertia`).
     * If you modify this value, you must also modify the `body.inertia` property.
     *
     * @property inverseInertia
     * @type number
     */

    /**
     * A `Number` that defines the restitution (elasticity) of the body. The value is always positive and is in the range `(0, 1)`.
     * A value of `0` means collisions may be perfectly inelastic and no bouncing may occur. 
     * A value of `0.8` means the body may bounce back with approximately 80% of its kinetic energy.
     * Note that collision response is based on _pairs_ of bodies, and that `restitution` values are _combined_ with the following formula:
     *
     *     Math.max(bodyA.restitution, bodyB.restitution)
     *
     * @property restitution
     * @type number
     * @default 0
     */

    /**
     * A `Number` that defines the friction of the body. The value is always positive and is in the range `(0, 1)`.
     * A value of `0` means that the body may slide indefinitely.
     * A value of `1` means the body may come to a stop almost instantly after a force is applied.
     *
     * The effects of the value may be non-linear. 
     * High values may be unstable depending on the body.
     * The engine uses a Coulomb friction model including static and kinetic friction.
     * Note that collision response is based on _pairs_ of bodies, and that `friction` values are _combined_ with the following formula:
     *
     *     Math.min(bodyA.friction, bodyB.friction)
     *
     * @property friction
     * @type number
     * @default 0.1
     */

    /**
     * A `Number` that defines the static friction of the body (in the Coulomb friction model). 
     * A value of `0` means the body will never 'stick' when it is nearly stationary and only dynamic `friction` is used.
     * The higher the value (e.g. `10`), the more force it will take to initially get the body moving when nearly stationary.
     * This value is multiplied with the `friction` property to make it easier to change `friction` and maintain an appropriate amount of static friction.
     *
     * @property frictionStatic
     * @type number
     * @default 0.5
     */

    /**
     * A `Number` that defines the air friction of the body (air resistance). 
     * A value of `0` means the body will never slow as it moves through space.
     * The higher the value, the faster a body slows when moving through space.
     * The effects of the value are non-linear. 
     *
     * @property frictionAir
     * @type number
     * @default 0.01
     */

    /**
     * An `Object` that specifies the collision filtering properties of this body.
     *
     * Collisions between two bodies will obey the following rules:
     * - If the two bodies have the same non-zero value of `collisionFilter.group`,
     *   they will always collide if the value is positive, and they will never collide
     *   if the value is negative.
     * - If the two bodies have different values of `collisionFilter.group` or if one
     *   (or both) of the bodies has a value of 0, then the category/mask rules apply as follows:
     *
     * Each body belongs to a collision category, given by `collisionFilter.category`. This
     * value is used as a bit field and the category should have only one bit set, meaning that
     * the value of this property is a power of two in the range [1, 2^31]. Thus, there are 32
     * different collision categories available.
     *
     * Each body also defines a collision bitmask, given by `collisionFilter.mask` which specifies
     * the categories it collides with (the value is the bitwise AND value of all these categories).
     *
     * Using the category/mask rules, two bodies `A` and `B` collide if each includes the other's
     * category in its mask, i.e. `(categoryA & maskB) !== 0` and `(categoryB & maskA) !== 0`
     * are both true.
     *
     * @property collisionFilter
     * @type object
     */

    /**
     * An Integer `Number`, that specifies the collision group this body belongs to.
     * See `body.collisionFilter` for more information.
     *
     * @property collisionFilter.group
     * @type object
     * @default 0
     */

    /**
     * A bit field that specifies the collision category this body belongs to.
     * The category value should have only one bit set, for example `0x0001`.
     * This means there are up to 32 unique collision categories available.
     * See `body.collisionFilter` for more information.
     *
     * @property collisionFilter.category
     * @type object
     * @default 1
     */

    /**
     * A bit mask that specifies the collision categories this body may collide with.
     * See `body.collisionFilter` for more information.
     *
     * @property collisionFilter.mask
     * @type object
     * @default -1
     */

    /**
     * A `Number` that specifies a tolerance on how far a body is allowed to 'sink' or rotate into other bodies.
     * Avoid changing this value unless you understand the purpose of `slop` in physics engines.
     * The default should generally suffice, although very large bodies may require larger values for stable stacking.
     *
     * @property slop
     * @type number
     * @default 0.05
     */

    /**
     * A `Number` that allows per-body time scaling, e.g. a force-field where bodies inside are in slow-motion, while others are at full speed.
     *
     * @property timeScale
     * @type number
     * @default 1
     */

    /**
     * An `Object` that defines the rendering properties to be consumed by the module `Matter.Render`.
     *
     * @property render
     * @type object
     */

    /**
     * A flag that indicates if the body should be rendered.
     *
     * @property render.visible
     * @type boolean
     * @default true
     */

    /**
     * Sets the opacity to use when rendering.
     *
     * @property render.opacity
     * @type number
     * @default 1
    */

    /**
     * An `Object` that defines the sprite properties to use when rendering, if any.
     *
     * @property render.sprite
     * @type object
     */

    /**
     * An `String` that defines the path to the image to use as the sprite texture, if any.
     *
     * @property render.sprite.texture
     * @type string
     */
     
    /**
     * A `Number` that defines the scaling in the x-axis for the sprite, if any.
     *
     * @property render.sprite.xScale
     * @type number
     * @default 1
     */

    /**
     * A `Number` that defines the scaling in the y-axis for the sprite, if any.
     *
     * @property render.sprite.yScale
     * @type number
     * @default 1
     */

    /**
      * A `Number` that defines the offset in the x-axis for the sprite (normalised by texture width).
      *
      * @property render.sprite.xOffset
      * @type number
      * @default 0
      */

    /**
      * A `Number` that defines the offset in the y-axis for the sprite (normalised by texture height).
      *
      * @property render.sprite.yOffset
      * @type number
      * @default 0
      */

    /**
     * A `Number` that defines the line width to use when rendering the body outline (if a sprite is not defined).
     * A value of `0` means no outline will be rendered.
     *
     * @property render.lineWidth
     * @type number
     * @default 0
     */

    /**
     * A `String` that defines the fill style to use when rendering the body (if a sprite is not defined).
     * It is the same as when using a canvas, so it accepts CSS style property values.
     *
     * @property render.fillStyle
     * @type string
     * @default a random colour
     */

    /**
     * A `String` that defines the stroke style to use when rendering the body outline (if a sprite is not defined).
     * It is the same as when using a canvas, so it accepts CSS style property values.
     *
     * @property render.strokeStyle
     * @type string
     * @default a random colour
     */

    /**
     * An array of unique axis vectors (edge normals) used for collision detection.
     * These are automatically calculated from the given convex hull (`vertices` array) in `Body.create`.
     * They are constantly updated by `Body.update` during the simulation.
     *
     * @property axes
     * @type vector[]
     */
     
    /**
     * A `Number` that _measures_ the area of the body's convex hull, calculated at creation by `Body.create`.
     *
     * @property area
     * @type string
     * @default 
     */

    /**
     * A `Bounds` object that defines the AABB region for the body.
     * It is automatically calculated from the given convex hull (`vertices` array) in `Body.create` and constantly updated by `Body.update` during simulation.
     *
     * @property bounds
     * @type bounds
     */

})();


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Sleeping` module contains methods to manage the sleeping state of bodies.
*
* @class Sleeping
*/

var Sleeping = {};

module.exports = Sleeping;

var Events = __webpack_require__(4);

(function() {

    Sleeping._motionWakeThreshold = 0.18;
    Sleeping._motionSleepThreshold = 0.08;
    Sleeping._minBias = 0.9;

    /**
     * Puts bodies to sleep or wakes them up depending on their motion.
     * @method update
     * @param {body[]} bodies
     * @param {number} timeScale
     */
    Sleeping.update = function(bodies, timeScale) {
        var timeFactor = timeScale * timeScale * timeScale;

        // update bodies sleeping status
        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i],
                motion = body.speed * body.speed + body.angularSpeed * body.angularSpeed;

            // wake up bodies if they have a force applied
            if (body.force.x !== 0 || body.force.y !== 0) {
                Sleeping.set(body, false);
                continue;
            }

            var minMotion = Math.min(body.motion, motion),
                maxMotion = Math.max(body.motion, motion);
        
            // biased average motion estimation between frames
            body.motion = Sleeping._minBias * minMotion + (1 - Sleeping._minBias) * maxMotion;
            
            if (body.sleepThreshold > 0 && body.motion < Sleeping._motionSleepThreshold * timeFactor) {
                body.sleepCounter += 1;
                
                if (body.sleepCounter >= body.sleepThreshold)
                    Sleeping.set(body, true);
            } else if (body.sleepCounter > 0) {
                body.sleepCounter -= 1;
            }
        }
    };

    /**
     * Given a set of colliding pairs, wakes the sleeping bodies involved.
     * @method afterCollisions
     * @param {pair[]} pairs
     * @param {number} timeScale
     */
    Sleeping.afterCollisions = function(pairs, timeScale) {
        var timeFactor = timeScale * timeScale * timeScale;

        // wake up bodies involved in collisions
        for (var i = 0; i < pairs.length; i++) {
            var pair = pairs[i];
            
            // don't wake inactive pairs
            if (!pair.isActive)
                continue;

            var collision = pair.collision,
                bodyA = collision.bodyA.parent, 
                bodyB = collision.bodyB.parent;
        
            // don't wake if at least one body is static
            if ((bodyA.isSleeping && bodyB.isSleeping) || bodyA.isStatic || bodyB.isStatic)
                continue;
        
            if (bodyA.isSleeping || bodyB.isSleeping) {
                var sleepingBody = (bodyA.isSleeping && !bodyA.isStatic) ? bodyA : bodyB,
                    movingBody = sleepingBody === bodyA ? bodyB : bodyA;

                if (!sleepingBody.isStatic && movingBody.motion > Sleeping._motionWakeThreshold * timeFactor) {
                    Sleeping.set(sleepingBody, false);
                }
            }
        }
    };
  
    /**
     * Set a body as sleeping or awake.
     * @method set
     * @param {body} body
     * @param {boolean} isSleeping
     */
    Sleeping.set = function(body, isSleeping) {
        var wasSleeping = body.isSleeping;

        if (isSleeping) {
            body.isSleeping = true;
            body.sleepCounter = body.sleepThreshold;

            body.positionImpulse.x = 0;
            body.positionImpulse.y = 0;

            body.positionPrev.x = body.position.x;
            body.positionPrev.y = body.position.y;

            body.anglePrev = body.angle;
            body.speed = 0;
            body.angularSpeed = 0;
            body.motion = 0;

            if (!wasSleeping) {
                Events.trigger(body, 'sleepStart');
            }
        } else {
            body.isSleeping = false;
            body.sleepCounter = 0;

            if (wasSleeping) {
                Events.trigger(body, 'sleepEnd');
            }
        }
    };

})();


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Constraint` module contains methods for creating and manipulating constraints.
* Constraints are used for specifying that a fixed distance must be maintained between two bodies (or a body and a fixed world-space position).
* The stiffness of constraints can be modified to create springs or elastic.
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Constraint
*/

var Constraint = {};

module.exports = Constraint;

var Vertices = __webpack_require__(3);
var Vector = __webpack_require__(2);
var Sleeping = __webpack_require__(7);
var Bounds = __webpack_require__(1);
var Axes = __webpack_require__(10);
var Common = __webpack_require__(0);

(function() {

    Constraint._warming = 0.4;
    Constraint._torqueDampen = 1;
    Constraint._minLength = 0.000001;

    /**
     * Creates a new constraint.
     * All properties have default values, and many are pre-calculated automatically based on other properties.
     * To simulate a revolute constraint (or pin joint) set `length: 0` and a high `stiffness` value (e.g. `0.7` or above).
     * If the constraint is unstable, try lowering the `stiffness` value and / or increasing `engine.constraintIterations`.
     * For compound bodies, constraints must be applied to the parent body (not one of its parts).
     * See the properties section below for detailed information on what you can pass via the `options` object.
     * @method create
     * @param {} options
     * @return {constraint} constraint
     */
    Constraint.create = function(options) {
        var constraint = options;

        // if bodies defined but no points, use body centre
        if (constraint.bodyA && !constraint.pointA)
            constraint.pointA = { x: 0, y: 0 };
        if (constraint.bodyB && !constraint.pointB)
            constraint.pointB = { x: 0, y: 0 };

        // calculate static length using initial world space points
        var initialPointA = constraint.bodyA ? Vector.add(constraint.bodyA.position, constraint.pointA) : constraint.pointA,
            initialPointB = constraint.bodyB ? Vector.add(constraint.bodyB.position, constraint.pointB) : constraint.pointB,
            length = Vector.magnitude(Vector.sub(initialPointA, initialPointB));
    
        constraint.length = typeof constraint.length !== 'undefined' ? constraint.length : length;

        // option defaults
        constraint.id = constraint.id || Common.nextId();
        constraint.label = constraint.label || 'Constraint';
        constraint.type = 'constraint';
        constraint.stiffness = constraint.stiffness || (constraint.length > 0 ? 1 : 0.7);
        constraint.damping = constraint.damping || 0;
        constraint.angularStiffness = constraint.angularStiffness || 0;
        constraint.angleA = constraint.bodyA ? constraint.bodyA.angle : constraint.angleA;
        constraint.angleB = constraint.bodyB ? constraint.bodyB.angle : constraint.angleB;
        constraint.plugin = {};

        // render
        var render = {
            visible: true,
            lineWidth: 2,
            strokeStyle: '#ffffff',
            type: 'line',
            anchors: true
        };

        if (constraint.length === 0 && constraint.stiffness > 0.1) {
            render.type = 'pin';
            render.anchors = false;
        } else if (constraint.stiffness < 0.9) {
            render.type = 'spring';
        }

        constraint.render = Common.extend(render, constraint.render);

        return constraint;
    };

    /**
     * Prepares for solving by constraint warming.
     * @private
     * @method preSolveAll
     * @param {body[]} bodies
     */
    Constraint.preSolveAll = function(bodies) {
        for (var i = 0; i < bodies.length; i += 1) {
            var body = bodies[i],
                impulse = body.constraintImpulse;

            if (body.isStatic || (impulse.x === 0 && impulse.y === 0 && impulse.angle === 0)) {
                continue;
            }

            body.position.x += impulse.x;
            body.position.y += impulse.y;
            body.angle += impulse.angle;
        }
    };

    /**
     * Solves all constraints in a list of collisions.
     * @private
     * @method solveAll
     * @param {constraint[]} constraints
     * @param {number} timeScale
     */
    Constraint.solveAll = function(constraints, timeScale) {
        // Solve fixed constraints first.
        for (var i = 0; i < constraints.length; i += 1) {
            var constraint = constraints[i],
                fixedA = !constraint.bodyA || (constraint.bodyA && constraint.bodyA.isStatic),
                fixedB = !constraint.bodyB || (constraint.bodyB && constraint.bodyB.isStatic);

            if (fixedA || fixedB) {
                Constraint.solve(constraints[i], timeScale);
            }
        }

        // Solve free constraints last.
        for (i = 0; i < constraints.length; i += 1) {
            constraint = constraints[i];
            fixedA = !constraint.bodyA || (constraint.bodyA && constraint.bodyA.isStatic);
            fixedB = !constraint.bodyB || (constraint.bodyB && constraint.bodyB.isStatic);

            if (!fixedA && !fixedB) {
                Constraint.solve(constraints[i], timeScale);
            }
        }
    };

    /**
     * Solves a distance constraint with Gauss-Siedel method.
     * @private
     * @method solve
     * @param {constraint} constraint
     * @param {number} timeScale
     */
    Constraint.solve = function(constraint, timeScale) {
        var bodyA = constraint.bodyA,
            bodyB = constraint.bodyB,
            pointA = constraint.pointA,
            pointB = constraint.pointB;

        if (!bodyA && !bodyB)
            return;

        // update reference angle
        if (bodyA && !bodyA.isStatic) {
            Vector.rotate(pointA, bodyA.angle - constraint.angleA, pointA);
            constraint.angleA = bodyA.angle;
        }
        
        // update reference angle
        if (bodyB && !bodyB.isStatic) {
            Vector.rotate(pointB, bodyB.angle - constraint.angleB, pointB);
            constraint.angleB = bodyB.angle;
        }

        var pointAWorld = pointA,
            pointBWorld = pointB;

        if (bodyA) pointAWorld = Vector.add(bodyA.position, pointA);
        if (bodyB) pointBWorld = Vector.add(bodyB.position, pointB);

        if (!pointAWorld || !pointBWorld)
            return;

        var delta = Vector.sub(pointAWorld, pointBWorld),
            currentLength = Vector.magnitude(delta);

        // prevent singularity
        if (currentLength < Constraint._minLength) {
            currentLength = Constraint._minLength;
        }

        // solve distance constraint with Gauss-Siedel method
        var difference = (currentLength - constraint.length) / currentLength,
            stiffness = constraint.stiffness < 1 ? constraint.stiffness * timeScale : constraint.stiffness,
            force = Vector.mult(delta, difference * stiffness),
            massTotal = (bodyA ? bodyA.inverseMass : 0) + (bodyB ? bodyB.inverseMass : 0),
            inertiaTotal = (bodyA ? bodyA.inverseInertia : 0) + (bodyB ? bodyB.inverseInertia : 0),
            resistanceTotal = massTotal + inertiaTotal,
            torque,
            share,
            normal,
            normalVelocity,
            relativeVelocity;

        if (constraint.damping) {
            var zero = Vector.create();
            normal = Vector.div(delta, currentLength);

            relativeVelocity = Vector.sub(
                bodyB && Vector.sub(bodyB.position, bodyB.positionPrev) || zero,
                bodyA && Vector.sub(bodyA.position, bodyA.positionPrev) || zero
            );

            normalVelocity = Vector.dot(normal, relativeVelocity);
        }

        if (bodyA && !bodyA.isStatic) {
            share = bodyA.inverseMass / massTotal;

            // keep track of applied impulses for post solving
            bodyA.constraintImpulse.x -= force.x * share;
            bodyA.constraintImpulse.y -= force.y * share;

            // apply forces
            bodyA.position.x -= force.x * share;
            bodyA.position.y -= force.y * share;

            // apply damping
            if (constraint.damping) {
                bodyA.positionPrev.x -= constraint.damping * normal.x * normalVelocity * share;
                bodyA.positionPrev.y -= constraint.damping * normal.y * normalVelocity * share;
            }

            // apply torque
            torque = (Vector.cross(pointA, force) / resistanceTotal) * Constraint._torqueDampen * bodyA.inverseInertia * (1 - constraint.angularStiffness);
            bodyA.constraintImpulse.angle -= torque;
            bodyA.angle -= torque;
        }

        if (bodyB && !bodyB.isStatic) {
            share = bodyB.inverseMass / massTotal;

            // keep track of applied impulses for post solving
            bodyB.constraintImpulse.x += force.x * share;
            bodyB.constraintImpulse.y += force.y * share;
            
            // apply forces
            bodyB.position.x += force.x * share;
            bodyB.position.y += force.y * share;

            // apply damping
            if (constraint.damping) {
                bodyB.positionPrev.x += constraint.damping * normal.x * normalVelocity * share;
                bodyB.positionPrev.y += constraint.damping * normal.y * normalVelocity * share;
            }

            // apply torque
            torque = (Vector.cross(pointB, force) / resistanceTotal) * Constraint._torqueDampen * bodyB.inverseInertia * (1 - constraint.angularStiffness);
            bodyB.constraintImpulse.angle += torque;
            bodyB.angle += torque;
        }

    };

    /**
     * Performs body updates required after solving constraints.
     * @private
     * @method postSolveAll
     * @param {body[]} bodies
     */
    Constraint.postSolveAll = function(bodies) {
        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i],
                impulse = body.constraintImpulse;

            if (body.isStatic || (impulse.x === 0 && impulse.y === 0 && impulse.angle === 0)) {
                continue;
            }

            Sleeping.set(body, false);

            // update geometry and reset
            for (var j = 0; j < body.parts.length; j++) {
                var part = body.parts[j];
                
                Vertices.translate(part.vertices, impulse);

                if (j > 0) {
                    part.position.x += impulse.x;
                    part.position.y += impulse.y;
                }

                if (impulse.angle !== 0) {
                    Vertices.rotate(part.vertices, impulse.angle, body.position);
                    Axes.rotate(part.axes, impulse.angle);
                    if (j > 0) {
                        Vector.rotateAbout(part.position, impulse.angle, body.position, part.position);
                    }
                }

                Bounds.update(part.bounds, part.vertices, body.velocity);
            }

            // dampen the cached impulse for warming next step
            impulse.angle *= Constraint._warming;
            impulse.x *= Constraint._warming;
            impulse.y *= Constraint._warming;
        }
    };

    /**
     * Returns the world-space position of `constraint.pointA`, accounting for `constraint.bodyA`.
     * @method pointAWorld
     * @param {constraint} constraint
     * @returns {vector} the world-space position
     */
    Constraint.pointAWorld = function(constraint) {
        return {
            x: (constraint.bodyA ? constraint.bodyA.position.x : 0) + constraint.pointA.x,
            y: (constraint.bodyA ? constraint.bodyA.position.y : 0) + constraint.pointA.y
        };
    };

    /**
     * Returns the world-space position of `constraint.pointB`, accounting for `constraint.bodyB`.
     * @method pointBWorld
     * @param {constraint} constraint
     * @returns {vector} the world-space position
     */
    Constraint.pointBWorld = function(constraint) {
        return {
            x: (constraint.bodyB ? constraint.bodyB.position.x : 0) + constraint.pointB.x,
            y: (constraint.bodyB ? constraint.bodyB.position.y : 0) + constraint.pointB.y
        };
    };

    /*
    *
    *  Properties Documentation
    *
    */

    /**
     * An integer `Number` uniquely identifying number generated in `Composite.create` by `Common.nextId`.
     *
     * @property id
     * @type number
     */

    /**
     * A `String` denoting the type of object.
     *
     * @property type
     * @type string
     * @default "constraint"
     * @readOnly
     */

    /**
     * An arbitrary `String` name to help the user identify and manage bodies.
     *
     * @property label
     * @type string
     * @default "Constraint"
     */

    /**
     * An `Object` that defines the rendering properties to be consumed by the module `Matter.Render`.
     *
     * @property render
     * @type object
     */

    /**
     * A flag that indicates if the constraint should be rendered.
     *
     * @property render.visible
     * @type boolean
     * @default true
     */

    /**
     * A `Number` that defines the line width to use when rendering the constraint outline.
     * A value of `0` means no outline will be rendered.
     *
     * @property render.lineWidth
     * @type number
     * @default 2
     */

    /**
     * A `String` that defines the stroke style to use when rendering the constraint outline.
     * It is the same as when using a canvas, so it accepts CSS style property values.
     *
     * @property render.strokeStyle
     * @type string
     * @default a random colour
     */

    /**
     * A `String` that defines the constraint rendering type. 
     * The possible values are 'line', 'pin', 'spring'.
     * An appropriate render type will be automatically chosen unless one is given in options.
     *
     * @property render.type
     * @type string
     * @default 'line'
     */

    /**
     * A `Boolean` that defines if the constraint's anchor points should be rendered.
     *
     * @property render.anchors
     * @type boolean
     * @default true
     */

    /**
     * The first possible `Body` that this constraint is attached to.
     *
     * @property bodyA
     * @type body
     * @default null
     */

    /**
     * The second possible `Body` that this constraint is attached to.
     *
     * @property bodyB
     * @type body
     * @default null
     */

    /**
     * A `Vector` that specifies the offset of the constraint from center of the `constraint.bodyA` if defined, otherwise a world-space position.
     *
     * @property pointA
     * @type vector
     * @default { x: 0, y: 0 }
     */

    /**
     * A `Vector` that specifies the offset of the constraint from center of the `constraint.bodyB` if defined, otherwise a world-space position.
     *
     * @property pointB
     * @type vector
     * @default { x: 0, y: 0 }
     */

    /**
     * A `Number` that specifies the stiffness of the constraint, i.e. the rate at which it returns to its resting `constraint.length`.
     * A value of `1` means the constraint should be very stiff.
     * A value of `0.2` means the constraint acts like a soft spring.
     *
     * @property stiffness
     * @type number
     * @default 1
     */

    /**
     * A `Number` that specifies the damping of the constraint, 
     * i.e. the amount of resistance applied to each body based on their velocities to limit the amount of oscillation.
     * Damping will only be apparent when the constraint also has a very low `stiffness`.
     * A value of `0.1` means the constraint will apply heavy damping, resulting in little to no oscillation.
     * A value of `0` means the constraint will apply no damping.
     *
     * @property damping
     * @type number
     * @default 0
     */

    /**
     * A `Number` that specifies the target resting length of the constraint. 
     * It is calculated automatically in `Constraint.create` from initial positions of the `constraint.bodyA` and `constraint.bodyB`.
     *
     * @property length
     * @type number
     */

    /**
     * An object reserved for storing plugin-specific properties.
     *
     * @property plugin
     * @type {}
     */

})();


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Pair` module contains methods for creating and manipulating collision pairs.
*
* @class Pair
*/

var Pair = {};

module.exports = Pair;

var Contact = __webpack_require__(17);

(function() {
    
    /**
     * Creates a pair.
     * @method create
     * @param {collision} collision
     * @param {number} timestamp
     * @return {pair} A new pair
     */
    Pair.create = function(collision, timestamp) {
        var bodyA = collision.bodyA,
            bodyB = collision.bodyB,
            parentA = collision.parentA,
            parentB = collision.parentB;

        var pair = {
            id: Pair.id(bodyA, bodyB),
            bodyA: bodyA,
            bodyB: bodyB,
            contacts: {},
            activeContacts: [],
            separation: 0,
            isActive: true,
            confirmedActive: true,
            isSensor: bodyA.isSensor || bodyB.isSensor,
            timeCreated: timestamp,
            timeUpdated: timestamp,
            inverseMass: parentA.inverseMass + parentB.inverseMass,
            friction: Math.min(parentA.friction, parentB.friction),
            frictionStatic: Math.max(parentA.frictionStatic, parentB.frictionStatic),
            restitution: Math.max(parentA.restitution, parentB.restitution),
            slop: Math.max(parentA.slop, parentB.slop)
        };

        Pair.update(pair, collision, timestamp);

        return pair;
    };

    /**
     * Updates a pair given a collision.
     * @method update
     * @param {pair} pair
     * @param {collision} collision
     * @param {number} timestamp
     */
    Pair.update = function(pair, collision, timestamp) {
        var contacts = pair.contacts,
            supports = collision.supports,
            activeContacts = pair.activeContacts,
            parentA = collision.parentA,
            parentB = collision.parentB;
        
        pair.collision = collision;
        pair.inverseMass = parentA.inverseMass + parentB.inverseMass;
        pair.friction = Math.min(parentA.friction, parentB.friction);
        pair.frictionStatic = Math.max(parentA.frictionStatic, parentB.frictionStatic);
        pair.restitution = Math.max(parentA.restitution, parentB.restitution);
        pair.slop = Math.max(parentA.slop, parentB.slop);
        activeContacts.length = 0;
        
        if (collision.collided) {
            for (var i = 0; i < supports.length; i++) {
                var support = supports[i],
                    contactId = Contact.id(support),
                    contact = contacts[contactId];

                if (contact) {
                    activeContacts.push(contact);
                } else {
                    activeContacts.push(contacts[contactId] = Contact.create(support));
                }
            }

            pair.separation = collision.depth;
            Pair.setActive(pair, true, timestamp);
        } else {
            if (pair.isActive === true)
                Pair.setActive(pair, false, timestamp);
        }
    };
    
    /**
     * Set a pair as active or inactive.
     * @method setActive
     * @param {pair} pair
     * @param {bool} isActive
     * @param {number} timestamp
     */
    Pair.setActive = function(pair, isActive, timestamp) {
        if (isActive) {
            pair.isActive = true;
            pair.timeUpdated = timestamp;
        } else {
            pair.isActive = false;
            pair.activeContacts.length = 0;
        }
    };

    /**
     * Get the id for the given pair.
     * @method id
     * @param {body} bodyA
     * @param {body} bodyB
     * @return {string} Unique pairId
     */
    Pair.id = function(bodyA, bodyB) {
        if (bodyA.id < bodyB.id) {
            return 'A' + bodyA.id + 'B' + bodyB.id;
        } else {
            return 'A' + bodyB.id + 'B' + bodyA.id;
        }
    };

})();


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Axes` module contains methods for creating and manipulating sets of axes.
*
* @class Axes
*/

var Axes = {};

module.exports = Axes;

var Vector = __webpack_require__(2);
var Common = __webpack_require__(0);

(function() {

    /**
     * Creates a new set of axes from the given vertices.
     * @method fromVertices
     * @param {vertices} vertices
     * @return {axes} A new axes from the given vertices
     */
    Axes.fromVertices = function(vertices) {
        var axes = {};

        // find the unique axes, using edge normal gradients
        for (var i = 0; i < vertices.length; i++) {
            var j = (i + 1) % vertices.length, 
                normal = Vector.normalise({ 
                    x: vertices[j].y - vertices[i].y, 
                    y: vertices[i].x - vertices[j].x
                }),
                gradient = (normal.y === 0) ? Infinity : (normal.x / normal.y);
            
            // limit precision
            gradient = gradient.toFixed(3).toString();
            axes[gradient] = normal;
        }

        return Common.values(axes);
    };

    /**
     * Rotates a set of axes by the given angle.
     * @method rotate
     * @param {axes} axes
     * @param {number} angle
     */
    Axes.rotate = function(axes, angle) {
        if (angle === 0)
            return;
        
        var cos = Math.cos(angle),
            sin = Math.sin(angle);

        for (var i = 0; i < axes.length; i++) {
            var axis = axes[i],
                xx;
            xx = axis.x * cos - axis.y * sin;
            axis.y = axis.x * sin + axis.y * cos;
            axis.x = xx;
        }
    };

})();


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Bodies` module contains factory methods for creating rigid body models 
* with commonly used body configurations (such as rectangles, circles and other polygons).
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Bodies
*/

// TODO: true circle bodies

var Bodies = {};

module.exports = Bodies;

var Vertices = __webpack_require__(3);
var Common = __webpack_require__(0);
var Body = __webpack_require__(6);
var Bounds = __webpack_require__(1);
var Vector = __webpack_require__(2);

(function() {

    /**
     * Creates a new rigid body model with a rectangle hull. 
     * The options parameter is an object that specifies any properties you wish to override the defaults.
     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.
     * @method rectangle
     * @param {number} x
     * @param {number} y
     * @param {number} width
     * @param {number} height
     * @param {object} [options]
     * @return {body} A new rectangle body
     */
    Bodies.rectangle = function(x, y, width, height, options) {
        options = options || {};

        var rectangle = { 
            label: 'Rectangle Body',
            position: { x: x, y: y },
            vertices: Vertices.fromPath('L 0 0 L ' + width + ' 0 L ' + width + ' ' + height + ' L 0 ' + height)
        };

        if (options.chamfer) {
            var chamfer = options.chamfer;
            rectangle.vertices = Vertices.chamfer(rectangle.vertices, chamfer.radius, 
                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);
            delete options.chamfer;
        }

        return Body.create(Common.extend({}, rectangle, options));
    };
    
    /**
     * Creates a new rigid body model with a trapezoid hull. 
     * The options parameter is an object that specifies any properties you wish to override the defaults.
     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.
     * @method trapezoid
     * @param {number} x
     * @param {number} y
     * @param {number} width
     * @param {number} height
     * @param {number} slope
     * @param {object} [options]
     * @return {body} A new trapezoid body
     */
    Bodies.trapezoid = function(x, y, width, height, slope, options) {
        options = options || {};

        slope *= 0.5;
        var roof = (1 - (slope * 2)) * width;
        
        var x1 = width * slope,
            x2 = x1 + roof,
            x3 = x2 + x1,
            verticesPath;

        if (slope < 0.5) {
            verticesPath = 'L 0 0 L ' + x1 + ' ' + (-height) + ' L ' + x2 + ' ' + (-height) + ' L ' + x3 + ' 0';
        } else {
            verticesPath = 'L 0 0 L ' + x2 + ' ' + (-height) + ' L ' + x3 + ' 0';
        }

        var trapezoid = { 
            label: 'Trapezoid Body',
            position: { x: x, y: y },
            vertices: Vertices.fromPath(verticesPath)
        };

        if (options.chamfer) {
            var chamfer = options.chamfer;
            trapezoid.vertices = Vertices.chamfer(trapezoid.vertices, chamfer.radius, 
                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);
            delete options.chamfer;
        }

        return Body.create(Common.extend({}, trapezoid, options));
    };

    /**
     * Creates a new rigid body model with a circle hull. 
     * The options parameter is an object that specifies any properties you wish to override the defaults.
     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.
     * @method circle
     * @param {number} x
     * @param {number} y
     * @param {number} radius
     * @param {object} [options]
     * @param {number} [maxSides]
     * @return {body} A new circle body
     */
    Bodies.circle = function(x, y, radius, options, maxSides) {
        options = options || {};

        var circle = {
            label: 'Circle Body',
            circleRadius: radius
        };
        
        // approximate circles with polygons until true circles implemented in SAT
        maxSides = maxSides || 25;
        var sides = Math.ceil(Math.max(10, Math.min(maxSides, radius)));

        // optimisation: always use even number of sides (half the number of unique axes)
        if (sides % 2 === 1)
            sides += 1;

        return Bodies.polygon(x, y, sides, radius, Common.extend({}, circle, options));
    };

    /**
     * Creates a new rigid body model with a regular polygon hull with the given number of sides. 
     * The options parameter is an object that specifies any properties you wish to override the defaults.
     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.
     * @method polygon
     * @param {number} x
     * @param {number} y
     * @param {number} sides
     * @param {number} radius
     * @param {object} [options]
     * @return {body} A new regular polygon body
     */
    Bodies.polygon = function(x, y, sides, radius, options) {
        options = options || {};

        if (sides < 3)
            return Bodies.circle(x, y, radius, options);

        var theta = 2 * Math.PI / sides,
            path = '',
            offset = theta * 0.5;

        for (var i = 0; i < sides; i += 1) {
            var angle = offset + (i * theta),
                xx = Math.cos(angle) * radius,
                yy = Math.sin(angle) * radius;

            path += 'L ' + xx.toFixed(3) + ' ' + yy.toFixed(3) + ' ';
        }

        var polygon = { 
            label: 'Polygon Body',
            position: { x: x, y: y },
            vertices: Vertices.fromPath(path)
        };

        if (options.chamfer) {
            var chamfer = options.chamfer;
            polygon.vertices = Vertices.chamfer(polygon.vertices, chamfer.radius, 
                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);
            delete options.chamfer;
        }

        return Body.create(Common.extend({}, polygon, options));
    };

    /**
     * Utility to create a compound body based on set(s) of vertices.
     * 
     * _Note:_ To optionally enable automatic concave vertices decomposition the [poly-decomp](https://github.com/schteppe/poly-decomp.js) 
     * package must be first installed and provided see `Common.setDecomp`, otherwise the convex hull of each vertex set will be used.
     * 
     * The resulting vertices are reorientated about their centre of mass,
     * and offset such that `body.position` corresponds to this point.
     * 
     * The resulting offset may be found if needed by subtracting `body.bounds` from the original input bounds.
     * To later move the centre of mass see `Body.setCentre`.
     * 
     * Note that automatic conconcave decomposition results are not always optimal. 
     * For best results, simplify the input vertices as much as possible first.
     * By default this function applies some addtional simplification to help.
     * 
     * Some outputs may also require further manual processing afterwards to be robust.
     * In particular some parts may need to be overlapped to avoid collision gaps.
     * Thin parts and sharp points should be avoided or removed where possible.
     *
     * The options parameter object specifies any `Matter.Body` properties you wish to override the defaults.
     * 
     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.
     * @method fromVertices
     * @param {number} x
     * @param {number} y
     * @param {array} vertexSets One or more arrays of vertex points e.g. `[[{ x: 0, y: 0 }...], ...]`.
     * @param {object} [options] The body options.
     * @param {bool} [flagInternal=false] Optionally marks internal edges with `isInternal`.
     * @param {number} [removeCollinear=0.01] Threshold when simplifying vertices along the same edge.
     * @param {number} [minimumArea=10] Threshold when removing small parts.
     * @param {number} [removeDuplicatePoints=0.01] Threshold when simplifying nearby vertices.
     * @return {body}
     */
    Bodies.fromVertices = function(x, y, vertexSets, options, flagInternal, removeCollinear, minimumArea, removeDuplicatePoints) {
        var decomp = Common.getDecomp(),
            canDecomp,
            body,
            parts,
            isConvex,
            isConcave,
            vertices,
            i,
            j,
            k,
            v,
            z;

        // check decomp is as expected
        canDecomp = Boolean(decomp && decomp.quickDecomp);

        options = options || {};
        parts = [];

        flagInternal = typeof flagInternal !== 'undefined' ? flagInternal : false;
        removeCollinear = typeof removeCollinear !== 'undefined' ? removeCollinear : 0.01;
        minimumArea = typeof minimumArea !== 'undefined' ? minimumArea : 10;
        removeDuplicatePoints = typeof removeDuplicatePoints !== 'undefined' ? removeDuplicatePoints : 0.01;

        // ensure vertexSets is an array of arrays
        if (!Common.isArray(vertexSets[0])) {
            vertexSets = [vertexSets];
        }

        for (v = 0; v < vertexSets.length; v += 1) {
            vertices = vertexSets[v];
            isConvex = Vertices.isConvex(vertices);
            isConcave = !isConvex;

            if (isConcave && !canDecomp) {
                Common.warnOnce(
                    'Bodies.fromVertices: Install the \'poly-decomp\' library and use Common.setDecomp or provide \'decomp\' as a global to decompose concave vertices.'
                );
            }

            if (isConvex || !canDecomp) {
                if (isConvex) {
                    vertices = Vertices.clockwiseSort(vertices);
                } else {
                    // fallback to convex hull when decomposition is not possible
                    vertices = Vertices.hull(vertices);
                }

                parts.push({
                    position: { x: x, y: y },
                    vertices: vertices
                });
            } else {
                // initialise a decomposition
                var concave = vertices.map(function(vertex) {
                    return [vertex.x, vertex.y];
                });

                // vertices are concave and simple, we can decompose into parts
                decomp.makeCCW(concave);
                if (removeCollinear !== false)
                    decomp.removeCollinearPoints(concave, removeCollinear);
                if (removeDuplicatePoints !== false && decomp.removeDuplicatePoints)
                    decomp.removeDuplicatePoints(concave, removeDuplicatePoints);

                // use the quick decomposition algorithm (Bayazit)
                var decomposed = decomp.quickDecomp(concave);

                // for each decomposed chunk
                for (i = 0; i < decomposed.length; i++) {
                    var chunk = decomposed[i];

                    // convert vertices into the correct structure
                    var chunkVertices = chunk.map(function(vertices) {
                        return {
                            x: vertices[0],
                            y: vertices[1]
                        };
                    });

                    // skip small chunks
                    if (minimumArea > 0 && Vertices.area(chunkVertices) < minimumArea)
                        continue;

                    // create a compound part
                    parts.push({
                        position: Vertices.centre(chunkVertices),
                        vertices: chunkVertices
                    });
                }
            }
        }

        // create body parts
        for (i = 0; i < parts.length; i++) {
            parts[i] = Body.create(Common.extend(parts[i], options));
        }

        // flag internal edges (coincident part edges)
        if (flagInternal) {
            var coincident_max_dist = 5;

            for (i = 0; i < parts.length; i++) {
                var partA = parts[i];

                for (j = i + 1; j < parts.length; j++) {
                    var partB = parts[j];

                    if (Bounds.overlaps(partA.bounds, partB.bounds)) {
                        var pav = partA.vertices,
                            pbv = partB.vertices;

                        // iterate vertices of both parts
                        for (k = 0; k < partA.vertices.length; k++) {
                            for (z = 0; z < partB.vertices.length; z++) {
                                // find distances between the vertices
                                var da = Vector.magnitudeSquared(Vector.sub(pav[(k + 1) % pav.length], pbv[z])),
                                    db = Vector.magnitudeSquared(Vector.sub(pav[k], pbv[(z + 1) % pbv.length]));

                                // if both vertices are very close, consider the edge concident (internal)
                                if (da < coincident_max_dist && db < coincident_max_dist) {
                                    pav[k].isInternal = true;
                                    pbv[z].isInternal = true;
                                }
                            }
                        }

                    }
                }
            }
        }

        if (parts.length > 1) {
            // create the parent body to be returned, that contains generated compound parts
            body = Body.create(Common.extend({ parts: parts.slice(0) }, options));

            // offset such that body.position is at the centre off mass
            Body.setPosition(body, { x: x, y: y });

            return body;
        } else {
            return parts[0];
        }
    };

})();


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Mouse` module contains methods for creating and manipulating mouse inputs.
*
* @class Mouse
*/

var Mouse = {};

module.exports = Mouse;

var Common = __webpack_require__(0);

(function() {

    /**
     * Creates a mouse input.
     * @method create
     * @param {HTMLElement} element
     * @return {mouse} A new mouse
     */
    Mouse.create = function(element) {
        var mouse = {};

        if (!element) {
            Common.log('Mouse.create: element was undefined, defaulting to document.body', 'warn');
        }
        
        mouse.element = element || document.body;
        mouse.absolute = { x: 0, y: 0 };
        mouse.position = { x: 0, y: 0 };
        mouse.mousedownPosition = { x: 0, y: 0 };
        mouse.mouseupPosition = { x: 0, y: 0 };
        mouse.offset = { x: 0, y: 0 };
        mouse.scale = { x: 1, y: 1 };
        mouse.wheelDelta = 0;
        mouse.button = -1;
        mouse.pixelRatio = parseInt(mouse.element.getAttribute('data-pixel-ratio'), 10) || 1;

        mouse.sourceEvents = {
            mousemove: null,
            mousedown: null,
            mouseup: null,
            mousewheel: null
        };
        
        mouse.mousemove = function(event) { 
            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),
                touches = event.changedTouches;

            if (touches) {
                mouse.button = 0;
                event.preventDefault();
            }

            mouse.absolute.x = position.x;
            mouse.absolute.y = position.y;
            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;
            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;
            mouse.sourceEvents.mousemove = event;
        };
        
        mouse.mousedown = function(event) {
            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),
                touches = event.changedTouches;

            if (touches) {
                mouse.button = 0;
                event.preventDefault();
            } else {
                mouse.button = event.button;
            }

            mouse.absolute.x = position.x;
            mouse.absolute.y = position.y;
            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;
            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;
            mouse.mousedownPosition.x = mouse.position.x;
            mouse.mousedownPosition.y = mouse.position.y;
            mouse.sourceEvents.mousedown = event;
        };
        
        mouse.mouseup = function(event) {
            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),
                touches = event.changedTouches;

            if (touches) {
                event.preventDefault();
            }
            
            mouse.button = -1;
            mouse.absolute.x = position.x;
            mouse.absolute.y = position.y;
            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;
            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;
            mouse.mouseupPosition.x = mouse.position.x;
            mouse.mouseupPosition.y = mouse.position.y;
            mouse.sourceEvents.mouseup = event;
        };

        mouse.mousewheel = function(event) {
            mouse.wheelDelta = Math.max(-1, Math.min(1, event.wheelDelta || -event.detail));
            event.preventDefault();
        };

        Mouse.setElement(mouse, mouse.element);

        return mouse;
    };

    /**
     * Sets the element the mouse is bound to (and relative to).
     * @method setElement
     * @param {mouse} mouse
     * @param {HTMLElement} element
     */
    Mouse.setElement = function(mouse, element) {
        mouse.element = element;

        element.addEventListener('mousemove', mouse.mousemove);
        element.addEventListener('mousedown', mouse.mousedown);
        element.addEventListener('mouseup', mouse.mouseup);
        
        element.addEventListener('mousewheel', mouse.mousewheel);
        element.addEventListener('DOMMouseScroll', mouse.mousewheel);

        element.addEventListener('touchmove', mouse.mousemove);
        element.addEventListener('touchstart', mouse.mousedown);
        element.addEventListener('touchend', mouse.mouseup);
    };

    /**
     * Clears all captured source events.
     * @method clearSourceEvents
     * @param {mouse} mouse
     */
    Mouse.clearSourceEvents = function(mouse) {
        mouse.sourceEvents.mousemove = null;
        mouse.sourceEvents.mousedown = null;
        mouse.sourceEvents.mouseup = null;
        mouse.sourceEvents.mousewheel = null;
        mouse.wheelDelta = 0;
    };

    /**
     * Sets the mouse position offset.
     * @method setOffset
     * @param {mouse} mouse
     * @param {vector} offset
     */
    Mouse.setOffset = function(mouse, offset) {
        mouse.offset.x = offset.x;
        mouse.offset.y = offset.y;
        mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;
        mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;
    };

    /**
     * Sets the mouse position scale.
     * @method setScale
     * @param {mouse} mouse
     * @param {vector} scale
     */
    Mouse.setScale = function(mouse, scale) {
        mouse.scale.x = scale.x;
        mouse.scale.y = scale.y;
        mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;
        mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;
    };
    
    /**
     * Gets the mouse position relative to an element given a screen pixel ratio.
     * @method _getRelativeMousePosition
     * @private
     * @param {} event
     * @param {} element
     * @param {number} pixelRatio
     * @return {}
     */
    Mouse._getRelativeMousePosition = function(event, element, pixelRatio) {
        var elementBounds = element.getBoundingClientRect(),
            rootNode = (document.documentElement || document.body.parentNode || document.body),
            scrollX = (window.pageXOffset !== undefined) ? window.pageXOffset : rootNode.scrollLeft,
            scrollY = (window.pageYOffset !== undefined) ? window.pageYOffset : rootNode.scrollTop,
            touches = event.changedTouches,
            x, y;
        
        if (touches) {
            x = touches[0].pageX - elementBounds.left - scrollX;
            y = touches[0].pageY - elementBounds.top - scrollY;
        } else {
            x = event.pageX - elementBounds.left - scrollX;
            y = event.pageY - elementBounds.top - scrollY;
        }

        return { 
            x: x / (element.clientWidth / (element.width || element.clientWidth) * pixelRatio),
            y: y / (element.clientHeight / (element.height || element.clientHeight) * pixelRatio)
        };
    };

})();


/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Detector` module contains methods for detecting collisions given a set of pairs.
*
* @class Detector
*/

// TODO: speculative contacts

var Detector = {};

module.exports = Detector;

var SAT = __webpack_require__(14);
var Pair = __webpack_require__(9);
var Bounds = __webpack_require__(1);

(function() {

    /**
     * Finds all collisions given a list of pairs.
     * @method collisions
     * @param {pair[]} broadphasePairs
     * @param {engine} engine
     * @return {array} collisions
     */
    Detector.collisions = function(broadphasePairs, engine) {
        var collisions = [],
            pairsTable = engine.pairs.table;

        for (var i = 0; i < broadphasePairs.length; i++) {
            var bodyA = broadphasePairs[i][0], 
                bodyB = broadphasePairs[i][1];

            if ((bodyA.isStatic || bodyA.isSleeping) && (bodyB.isStatic || bodyB.isSleeping))
                continue;
            
            if (!Detector.canCollide(bodyA.collisionFilter, bodyB.collisionFilter))
                continue;

            // mid phase
            if (Bounds.overlaps(bodyA.bounds, bodyB.bounds)) {
                for (var j = bodyA.parts.length > 1 ? 1 : 0; j < bodyA.parts.length; j++) {
                    var partA = bodyA.parts[j];

                    for (var k = bodyB.parts.length > 1 ? 1 : 0; k < bodyB.parts.length; k++) {
                        var partB = bodyB.parts[k];

                        if ((partA === bodyA && partB === bodyB) || Bounds.overlaps(partA.bounds, partB.bounds)) {
                            // find a previous collision we could reuse
                            var pairId = Pair.id(partA, partB),
                                pair = pairsTable[pairId],
                                previousCollision;

                            if (pair && pair.isActive) {
                                previousCollision = pair.collision;
                            } else {
                                previousCollision = null;
                            }

                            // narrow phase
                            var collision = SAT.collides(partA, partB, previousCollision);

                            if (collision.collided) {
                                collisions.push(collision);
                            }
                        }
                    }
                }
            }
        }

        return collisions;
    };

    /**
     * Returns `true` if both supplied collision filters will allow a collision to occur.
     * See `body.collisionFilter` for more information.
     * @method canCollide
     * @param {} filterA
     * @param {} filterB
     * @return {bool} `true` if collision can occur
     */
    Detector.canCollide = function(filterA, filterB) {
        if (filterA.group === filterB.group && filterA.group !== 0)
            return filterA.group > 0;

        return (filterA.mask & filterB.category) !== 0 && (filterB.mask & filterA.category) !== 0;
    };

})();


/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.SAT` module contains methods for detecting collisions using the Separating Axis Theorem.
*
* @class SAT
*/

// TODO: true circles and curves

var SAT = {};

module.exports = SAT;

var Vertices = __webpack_require__(3);
var Vector = __webpack_require__(2);

(function() {

    /**
     * Detect collision between two bodies using the Separating Axis Theorem.
     * @method collides
     * @param {body} bodyA
     * @param {body} bodyB
     * @param {collision} previousCollision
     * @return {collision} collision
     */
    SAT.collides = function(bodyA, bodyB, previousCollision) {
        var overlapAB,
            overlapBA, 
            minOverlap,
            collision,
            canReusePrevCol = false;

        if (previousCollision) {
            // estimate total motion
            var parentA = bodyA.parent,
                parentB = bodyB.parent,
                motion = parentA.speed * parentA.speed + parentA.angularSpeed * parentA.angularSpeed
                       + parentB.speed * parentB.speed + parentB.angularSpeed * parentB.angularSpeed;

            // we may be able to (partially) reuse collision result 
            // but only safe if collision was resting
            canReusePrevCol = previousCollision && previousCollision.collided && motion < 0.2;

            // reuse collision object
            collision = previousCollision;
        } else {
            collision = { collided: false, bodyA: bodyA, bodyB: bodyB };
        }

        if (previousCollision && canReusePrevCol) {
            // if we can reuse the collision result
            // we only need to test the previously found axis
            var axisBodyA = collision.axisBody,
                axisBodyB = axisBodyA === bodyA ? bodyB : bodyA,
                axes = [axisBodyA.axes[previousCollision.axisNumber]];

            minOverlap = SAT._overlapAxes(axisBodyA.vertices, axisBodyB.vertices, axes);
            collision.reused = true;

            if (minOverlap.overlap <= 0) {
                collision.collided = false;
                return collision;
            }
        } else {
            // if we can't reuse a result, perform a full SAT test

            overlapAB = SAT._overlapAxes(bodyA.vertices, bodyB.vertices, bodyA.axes);

            if (overlapAB.overlap <= 0) {
                collision.collided = false;
                return collision;
            }

            overlapBA = SAT._overlapAxes(bodyB.vertices, bodyA.vertices, bodyB.axes);

            if (overlapBA.overlap <= 0) {
                collision.collided = false;
                return collision;
            }

            if (overlapAB.overlap < overlapBA.overlap) {
                minOverlap = overlapAB;
                collision.axisBody = bodyA;
            } else {
                minOverlap = overlapBA;
                collision.axisBody = bodyB;
            }

            // important for reuse later
            collision.axisNumber = minOverlap.axisNumber;
        }

        collision.bodyA = bodyA.id < bodyB.id ? bodyA : bodyB;
        collision.bodyB = bodyA.id < bodyB.id ? bodyB : bodyA;
        collision.collided = true;
        collision.depth = minOverlap.overlap;
        collision.parentA = collision.bodyA.parent;
        collision.parentB = collision.bodyB.parent;
        
        bodyA = collision.bodyA;
        bodyB = collision.bodyB;

        // ensure normal is facing away from bodyA
        if (Vector.dot(minOverlap.axis, Vector.sub(bodyB.position, bodyA.position)) < 0) {
            collision.normal = {
                x: minOverlap.axis.x,
                y: minOverlap.axis.y
            };
        } else {
            collision.normal = {
                x: -minOverlap.axis.x,
                y: -minOverlap.axis.y
            };
        }

        collision.tangent = Vector.perp(collision.normal);

        collision.penetration = collision.penetration || {};
        collision.penetration.x = collision.normal.x * collision.depth;
        collision.penetration.y = collision.normal.y * collision.depth; 

        // find support points, there is always either exactly one or two
        var verticesB = SAT._findSupports(bodyA, bodyB, collision.normal),
            supports = [];

        // find the supports from bodyB that are inside bodyA
        if (Vertices.contains(bodyA.vertices, verticesB[0]))
            supports.push(verticesB[0]);

        if (Vertices.contains(bodyA.vertices, verticesB[1]))
            supports.push(verticesB[1]);

        // find the supports from bodyA that are inside bodyB
        if (supports.length < 2) {
            var verticesA = SAT._findSupports(bodyB, bodyA, Vector.neg(collision.normal));
                
            if (Vertices.contains(bodyB.vertices, verticesA[0]))
                supports.push(verticesA[0]);

            if (supports.length < 2 && Vertices.contains(bodyB.vertices, verticesA[1]))
                supports.push(verticesA[1]);
        }

        // account for the edge case of overlapping but no vertex containment
        if (supports.length < 1)
            supports = [verticesB[0]];
        
        collision.supports = supports;

        return collision;
    };

    /**
     * Find the overlap between two sets of vertices.
     * @method _overlapAxes
     * @private
     * @param {} verticesA
     * @param {} verticesB
     * @param {} axes
     * @return result
     */
    SAT._overlapAxes = function(verticesA, verticesB, axes) {
        var projectionA = Vector._temp[0], 
            projectionB = Vector._temp[1],
            result = { overlap: Number.MAX_VALUE },
            overlap,
            axis;

        for (var i = 0; i < axes.length; i++) {
            axis = axes[i];

            SAT._projectToAxis(projectionA, verticesA, axis);
            SAT._projectToAxis(projectionB, verticesB, axis);

            overlap = Math.min(projectionA.max - projectionB.min, projectionB.max - projectionA.min);

            if (overlap <= 0) {
                result.overlap = overlap;
                return result;
            }

            if (overlap < result.overlap) {
                result.overlap = overlap;
                result.axis = axis;
                result.axisNumber = i;
            }
        }

        return result;
    };

    /**
     * Projects vertices on an axis and returns an interval.
     * @method _projectToAxis
     * @private
     * @param {} projection
     * @param {} vertices
     * @param {} axis
     */
    SAT._projectToAxis = function(projection, vertices, axis) {
        var min = Vector.dot(vertices[0], axis),
            max = min;

        for (var i = 1; i < vertices.length; i += 1) {
            var dot = Vector.dot(vertices[i], axis);

            if (dot > max) { 
                max = dot; 
            } else if (dot < min) { 
                min = dot; 
            }
        }

        projection.min = min;
        projection.max = max;
    };
    
    /**
     * Finds supporting vertices given two bodies along a given direction using hill-climbing.
     * @method _findSupports
     * @private
     * @param {} bodyA
     * @param {} bodyB
     * @param {} normal
     * @return [vector]
     */
    SAT._findSupports = function(bodyA, bodyB, normal) {
        var nearestDistance = Number.MAX_VALUE,
            vertexToBody = Vector._temp[0],
            vertices = bodyB.vertices,
            bodyAPosition = bodyA.position,
            distance,
            vertex,
            vertexA,
            vertexB;

        // find closest vertex on bodyB
        for (var i = 0; i < vertices.length; i++) {
            vertex = vertices[i];
            vertexToBody.x = vertex.x - bodyAPosition.x;
            vertexToBody.y = vertex.y - bodyAPosition.y;
            distance = -Vector.dot(normal, vertexToBody);

            if (distance < nearestDistance) {
                nearestDistance = distance;
                vertexA = vertex;
            }
        }

        // find next closest vertex using the two connected to it
        var prevIndex = vertexA.index - 1 >= 0 ? vertexA.index - 1 : vertices.length - 1;
        vertex = vertices[prevIndex];
        vertexToBody.x = vertex.x - bodyAPosition.x;
        vertexToBody.y = vertex.y - bodyAPosition.y;
        nearestDistance = -Vector.dot(normal, vertexToBody);
        vertexB = vertex;

        var nextIndex = (vertexA.index + 1) % vertices.length;
        vertex = vertices[nextIndex];
        vertexToBody.x = vertex.x - bodyAPosition.x;
        vertexToBody.y = vertex.y - bodyAPosition.y;
        distance = -Vector.dot(normal, vertexToBody);
        if (distance < nearestDistance) {
            vertexB = vertex;
        }

        return [vertexA, vertexB];
    };

})();


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Plugin` module contains functions for registering and installing plugins on modules.
*
* @class Plugin
*/

var Plugin = {};

module.exports = Plugin;

var Common = __webpack_require__(0);

(function() {

    Plugin._registry = {};

    /**
     * Registers a plugin object so it can be resolved later by name.
     * @method register
     * @param plugin {} The plugin to register.
     * @return {object} The plugin.
     */
    Plugin.register = function(plugin) {
        if (!Plugin.isPlugin(plugin)) {
            Common.warn('Plugin.register:', Plugin.toString(plugin), 'does not implement all required fields.');
        }

        if (plugin.name in Plugin._registry) {
            var registered = Plugin._registry[plugin.name],
                pluginVersion = Plugin.versionParse(plugin.version).number,
                registeredVersion = Plugin.versionParse(registered.version).number;

            if (pluginVersion > registeredVersion) {
                Common.warn('Plugin.register:', Plugin.toString(registered), 'was upgraded to', Plugin.toString(plugin));
                Plugin._registry[plugin.name] = plugin;
            } else if (pluginVersion < registeredVersion) {
                Common.warn('Plugin.register:', Plugin.toString(registered), 'can not be downgraded to', Plugin.toString(plugin));
            } else if (plugin !== registered) {
                Common.warn('Plugin.register:', Plugin.toString(plugin), 'is already registered to different plugin object');
            }
        } else {
            Plugin._registry[plugin.name] = plugin;
        }

        return plugin;
    };

    /**
     * Resolves a dependency to a plugin object from the registry if it exists. 
     * The `dependency` may contain a version, but only the name matters when resolving.
     * @method resolve
     * @param dependency {string} The dependency.
     * @return {object} The plugin if resolved, otherwise `undefined`.
     */
    Plugin.resolve = function(dependency) {
        return Plugin._registry[Plugin.dependencyParse(dependency).name];
    };

    /**
     * Returns a pretty printed plugin name and version.
     * @method toString
     * @param plugin {} The plugin.
     * @return {string} Pretty printed plugin name and version.
     */
    Plugin.toString = function(plugin) {
        return typeof plugin === 'string' ? plugin : (plugin.name || 'anonymous') + '@' + (plugin.version || plugin.range || '0.0.0');
    };

    /**
     * Returns `true` if the object meets the minimum standard to be considered a plugin.
     * This means it must define the following properties:
     * - `name`
     * - `version`
     * - `install`
     * @method isPlugin
     * @param obj {} The obj to test.
     * @return {boolean} `true` if the object can be considered a plugin otherwise `false`.
     */
    Plugin.isPlugin = function(obj) {
        return obj && obj.name && obj.version && obj.install;
    };

    /**
     * Returns `true` if a plugin with the given `name` been installed on `module`.
     * @method isUsed
     * @param module {} The module.
     * @param name {string} The plugin name.
     * @return {boolean} `true` if a plugin with the given `name` been installed on `module`, otherwise `false`.
     */
    Plugin.isUsed = function(module, name) {
        return module.used.indexOf(name) > -1;
    };

    /**
     * Returns `true` if `plugin.for` is applicable to `module` by comparing against `module.name` and `module.version`.
     * If `plugin.for` is not specified then it is assumed to be applicable.
     * The value of `plugin.for` is a string of the format `'module-name'` or `'module-name@version'`.
     * @method isFor
     * @param plugin {} The plugin.
     * @param module {} The module.
     * @return {boolean} `true` if `plugin.for` is applicable to `module`, otherwise `false`.
     */
    Plugin.isFor = function(plugin, module) {
        var parsed = plugin.for && Plugin.dependencyParse(plugin.for);
        return !plugin.for || (module.name === parsed.name && Plugin.versionSatisfies(module.version, parsed.range));
    };

    /**
     * Installs the plugins by calling `plugin.install` on each plugin specified in `plugins` if passed, otherwise `module.uses`.
     * For installing plugins on `Matter` see the convenience function `Matter.use`.
     * Plugins may be specified either by their name or a reference to the plugin object.
     * Plugins themselves may specify further dependencies, but each plugin is installed only once.
     * Order is important, a topological sort is performed to find the best resulting order of installation.
     * This sorting attempts to satisfy every dependency's requested ordering, but may not be exact in all cases.
     * This function logs the resulting status of each dependency in the console, along with any warnings.
     * - A green tick ✅ indicates a dependency was resolved and installed.
     * - An orange diamond 🔶 indicates a dependency was resolved but a warning was thrown for it or one if its dependencies.
     * - A red cross ❌ indicates a dependency could not be resolved.
     * Avoid calling this function multiple times on the same module unless you intend to manually control installation order.
     * @method use
     * @param module {} The module install plugins on.
     * @param [plugins=module.uses] {} The plugins to install on module (optional, defaults to `module.uses`).
     */
    Plugin.use = function(module, plugins) {
        module.uses = (module.uses || []).concat(plugins || []);

        if (module.uses.length === 0) {
            Common.warn('Plugin.use:', Plugin.toString(module), 'does not specify any dependencies to install.');
            return;
        }

        var dependencies = Plugin.dependencies(module),
            sortedDependencies = Common.topologicalSort(dependencies),
            status = [];

        for (var i = 0; i < sortedDependencies.length; i += 1) {
            if (sortedDependencies[i] === module.name) {
                continue;
            }

            var plugin = Plugin.resolve(sortedDependencies[i]);

            if (!plugin) {
                status.push('❌ ' + sortedDependencies[i]);
                continue;
            }

            if (Plugin.isUsed(module, plugin.name)) {
                continue;
            }

            if (!Plugin.isFor(plugin, module)) {
                Common.warn('Plugin.use:', Plugin.toString(plugin), 'is for', plugin.for, 'but installed on', Plugin.toString(module) + '.');
                plugin._warned = true;
            }

            if (plugin.install) {
                plugin.install(module);
            } else {
                Common.warn('Plugin.use:', Plugin.toString(plugin), 'does not specify an install function.');
                plugin._warned = true;
            }

            if (plugin._warned) {
                status.push('🔶 ' + Plugin.toString(plugin));
                delete plugin._warned;
            } else {
                status.push('✅ ' + Plugin.toString(plugin));
            }

            module.used.push(plugin.name);
        }

        if (status.length > 0) {
            Common.info(status.join('  '));
        }
    };

    /**
     * Recursively finds all of a module's dependencies and returns a flat dependency graph.
     * @method dependencies
     * @param module {} The module.
     * @return {object} A dependency graph.
     */
    Plugin.dependencies = function(module, tracked) {
        var parsedBase = Plugin.dependencyParse(module),
            name = parsedBase.name;

        tracked = tracked || {};

        if (name in tracked) {
            return;
        }

        module = Plugin.resolve(module) || module;

        tracked[name] = Common.map(module.uses || [], function(dependency) {
            if (Plugin.isPlugin(dependency)) {
                Plugin.register(dependency);
            }

            var parsed = Plugin.dependencyParse(dependency),
                resolved = Plugin.resolve(dependency);

            if (resolved && !Plugin.versionSatisfies(resolved.version, parsed.range)) {
                Common.warn(
                    'Plugin.dependencies:', Plugin.toString(resolved), 'does not satisfy',
                    Plugin.toString(parsed), 'used by', Plugin.toString(parsedBase) + '.'
                );

                resolved._warned = true;
                module._warned = true;
            } else if (!resolved) {
                Common.warn(
                    'Plugin.dependencies:', Plugin.toString(dependency), 'used by',
                    Plugin.toString(parsedBase), 'could not be resolved.'
                );

                module._warned = true;
            }

            return parsed.name;
        });

        for (var i = 0; i < tracked[name].length; i += 1) {
            Plugin.dependencies(tracked[name][i], tracked);
        }

        return tracked;
    };

    /**
     * Parses a dependency string into its components.
     * The `dependency` is a string of the format `'module-name'` or `'module-name@version'`.
     * See documentation for `Plugin.versionParse` for a description of the format.
     * This function can also handle dependencies that are already resolved (e.g. a module object).
     * @method dependencyParse
     * @param dependency {string} The dependency of the format `'module-name'` or `'module-name@version'`.
     * @return {object} The dependency parsed into its components.
     */
    Plugin.dependencyParse = function(dependency) {
        if (Common.isString(dependency)) {
            var pattern = /^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;

            if (!pattern.test(dependency)) {
                Common.warn('Plugin.dependencyParse:', dependency, 'is not a valid dependency string.');
            }

            return {
                name: dependency.split('@')[0],
                range: dependency.split('@')[1] || '*'
            };
        }

        return {
            name: dependency.name,
            range: dependency.range || dependency.version
        };
    };

    /**
     * Parses a version string into its components.  
     * Versions are strictly of the format `x.y.z` (as in [semver](http://semver.org/)).
     * Versions may optionally have a prerelease tag in the format `x.y.z-alpha`.
     * Ranges are a strict subset of [npm ranges](https://docs.npmjs.com/misc/semver#advanced-range-syntax).
     * Only the following range types are supported:
     * - Tilde ranges e.g. `~1.2.3`
     * - Caret ranges e.g. `^1.2.3`
     * - Greater than ranges e.g. `>1.2.3`
     * - Greater than or equal ranges e.g. `>=1.2.3`
     * - Exact version e.g. `1.2.3`
     * - Any version `*`
     * @method versionParse
     * @param range {string} The version string.
     * @return {object} The version range parsed into its components.
     */
    Plugin.versionParse = function(range) {
        var pattern = /^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-]+)?$/;

        if (!pattern.test(range)) {
            Common.warn('Plugin.versionParse:', range, 'is not a valid version or range.');
        }

        var parts = pattern.exec(range);
        var major = Number(parts[4]);
        var minor = Number(parts[5]);
        var patch = Number(parts[6]);

        return {
            isRange: Boolean(parts[1] || parts[2]),
            version: parts[3],
            range: range,
            operator: parts[1] || parts[2] || '',
            major: major,
            minor: minor,
            patch: patch,
            parts: [major, minor, patch],
            prerelease: parts[7],
            number: major * 1e8 + minor * 1e4 + patch
        };
    };

    /**
     * Returns `true` if `version` satisfies the given `range`.
     * See documentation for `Plugin.versionParse` for a description of the format.
     * If a version or range is not specified, then any version (`*`) is assumed to satisfy.
     * @method versionSatisfies
     * @param version {string} The version string.
     * @param range {string} The range string.
     * @return {boolean} `true` if `version` satisfies `range`, otherwise `false`.
     */
    Plugin.versionSatisfies = function(version, range) {
        range = range || '*';

        var r = Plugin.versionParse(range),
            v = Plugin.versionParse(version);

        if (r.isRange) {
            if (r.operator === '*' || version === '*') {
                return true;
            }

            if (r.operator === '>') {
                return v.number > r.number;
            }

            if (r.operator === '>=') {
                return v.number >= r.number;
            }

            if (r.operator === '~') {
                return v.major === r.major && v.minor === r.minor && v.patch >= r.patch;
            }

            if (r.operator === '^') {
                if (r.major > 0) {
                    return v.major === r.major && v.number >= r.number;
                }

                if (r.minor > 0) {
                    return v.minor === r.minor && v.patch >= r.patch;
                }

                return v.patch === r.patch;
            }
        }

        return version === range || version === '*';
    };

})();


/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Render` module is a simple canvas based renderer for visualising instances of `Matter.Engine`.
* It is intended for development and debugging purposes, but may also be suitable for simple games.
* It includes a number of drawing options including wireframe, vector with support for sprites and viewports.
*
* @class Render
*/

var Render = {};

module.exports = Render;

var Common = __webpack_require__(0);
var Composite = __webpack_require__(5);
var Bounds = __webpack_require__(1);
var Events = __webpack_require__(4);
var Vector = __webpack_require__(2);
var Mouse = __webpack_require__(12);

(function() {

    var _requestAnimationFrame,
        _cancelAnimationFrame;

    if (typeof window !== 'undefined') {
        _requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame
                                      || window.mozRequestAnimationFrame || window.msRequestAnimationFrame
                                      || function(callback){ window.setTimeout(function() { callback(Common.now()); }, 1000 / 60); };

        _cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame
                                      || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;
    }

    Render._goodFps = 30;
    Render._goodDelta = 1000 / 60;

    /**
     * Creates a new renderer. The options parameter is an object that specifies any properties you wish to override the defaults.
     * All properties have default values, and many are pre-calculated automatically based on other properties.
     * See the properties section below for detailed information on what you can pass via the `options` object.
     * @method create
     * @param {object} [options]
     * @return {render} A new renderer
     */
    Render.create = function(options) {
        var defaults = {
            controller: Render,
            engine: null,
            element: null,
            canvas: null,
            mouse: null,
            frameRequestId: null,
            timing: {
                historySize: 60,
                delta: 0,
                deltaHistory: [],
                lastTime: 0,
                lastTimestamp: 0,
                lastElapsed: 0,
                timestampElapsed: 0,
                timestampElapsedHistory: [],
                engineDeltaHistory: [],
                engineElapsedHistory: [],
                elapsedHistory: []
            },
            options: {
                width: 800,
                height: 600,
                pixelRatio: 1,
                background: '#14151f',
                wireframeBackground: '#14151f',
                hasBounds: !!options.bounds,
                enabled: true,
                wireframes: true,
                showSleeping: true,
                showDebug: false,
                showStats: false,
                showPerformance: false,
                showBroadphase: false,
                showBounds: false,
                showVelocity: false,
                showCollisions: false,
                showSeparations: false,
                showAxes: false,
                showPositions: false,
                showAngleIndicator: false,
                showIds: false,
                showVertexNumbers: false,
                showConvexHulls: false,
                showInternalEdges: false,
                showMousePosition: false
            }
        };

        var render = Common.extend(defaults, options);

        if (render.canvas) {
            render.canvas.width = render.options.width || render.canvas.width;
            render.canvas.height = render.options.height || render.canvas.height;
        }

        render.mouse = options.mouse;
        render.engine = options.engine;
        render.canvas = render.canvas || _createCanvas(render.options.width, render.options.height);
        render.context = render.canvas.getContext('2d');
        render.textures = {};

        render.bounds = render.bounds || {
            min: {
                x: 0,
                y: 0
            },
            max: {
                x: render.canvas.width,
                y: render.canvas.height
            }
        };

        if (render.options.pixelRatio !== 1) {
            Render.setPixelRatio(render, render.options.pixelRatio);
        }

        if (Common.isElement(render.element)) {
            render.element.appendChild(render.canvas);
        } else if (!render.canvas.parentNode) {
            Common.log('Render.create: options.element was undefined, render.canvas was created but not appended', 'warn');
        }

        return render;
    };

    /**
     * Continuously updates the render canvas on the `requestAnimationFrame` event.
     * @method run
     * @param {render} render
     */
    Render.run = function(render) {
        (function loop(time){
            render.frameRequestId = _requestAnimationFrame(loop);
            
            _updateTiming(render, time);

            Render.world(render, time);

            if (render.options.showStats || render.options.showDebug) {
                Render.stats(render, render.context, time);
            }

            if (render.options.showPerformance || render.options.showDebug) {
                Render.performance(render, render.context, time);
            }
        })();
    };

    /**
     * Ends execution of `Render.run` on the given `render`, by canceling the animation frame request event loop.
     * @method stop
     * @param {render} render
     */
    Render.stop = function(render) {
        _cancelAnimationFrame(render.frameRequestId);
    };

    /**
     * Sets the pixel ratio of the renderer and updates the canvas.
     * To automatically detect the correct ratio, pass the string `'auto'` for `pixelRatio`.
     * @method setPixelRatio
     * @param {render} render
     * @param {number} pixelRatio
     */
    Render.setPixelRatio = function(render, pixelRatio) {
        var options = render.options,
            canvas = render.canvas;

        if (pixelRatio === 'auto') {
            pixelRatio = _getPixelRatio(canvas);
        }

        options.pixelRatio = pixelRatio;
        canvas.setAttribute('data-pixel-ratio', pixelRatio);
        canvas.width = options.width * pixelRatio;
        canvas.height = options.height * pixelRatio;
        canvas.style.width = options.width + 'px';
        canvas.style.height = options.height + 'px';
    };

    /**
     * Positions and sizes the viewport around the given object bounds.
     * Objects must have at least one of the following properties:
     * - `object.bounds`
     * - `object.position`
     * - `object.min` and `object.max`
     * - `object.x` and `object.y`
     * @method lookAt
     * @param {render} render
     * @param {object[]} objects
     * @param {vector} [padding]
     * @param {bool} [center=true]
     */
    Render.lookAt = function(render, objects, padding, center) {
        center = typeof center !== 'undefined' ? center : true;
        objects = Common.isArray(objects) ? objects : [objects];
        padding = padding || {
            x: 0,
            y: 0
        };

        // find bounds of all objects
        var bounds = {
            min: { x: Infinity, y: Infinity },
            max: { x: -Infinity, y: -Infinity }
        };

        for (var i = 0; i < objects.length; i += 1) {
            var object = objects[i],
                min = object.bounds ? object.bounds.min : (object.min || object.position || object),
                max = object.bounds ? object.bounds.max : (object.max || object.position || object);

            if (min && max) {
                if (min.x < bounds.min.x)
                    bounds.min.x = min.x;

                if (max.x > bounds.max.x)
                    bounds.max.x = max.x;

                if (min.y < bounds.min.y)
                    bounds.min.y = min.y;

                if (max.y > bounds.max.y)
                    bounds.max.y = max.y;
            }
        }

        // find ratios
        var width = (bounds.max.x - bounds.min.x) + 2 * padding.x,
            height = (bounds.max.y - bounds.min.y) + 2 * padding.y,
            viewHeight = render.canvas.height,
            viewWidth = render.canvas.width,
            outerRatio = viewWidth / viewHeight,
            innerRatio = width / height,
            scaleX = 1,
            scaleY = 1;

        // find scale factor
        if (innerRatio > outerRatio) {
            scaleY = innerRatio / outerRatio;
        } else {
            scaleX = outerRatio / innerRatio;
        }

        // enable bounds
        render.options.hasBounds = true;

        // position and size
        render.bounds.min.x = bounds.min.x;
        render.bounds.max.x = bounds.min.x + width * scaleX;
        render.bounds.min.y = bounds.min.y;
        render.bounds.max.y = bounds.min.y + height * scaleY;

        // center
        if (center) {
            render.bounds.min.x += width * 0.5 - (width * scaleX) * 0.5;
            render.bounds.max.x += width * 0.5 - (width * scaleX) * 0.5;
            render.bounds.min.y += height * 0.5 - (height * scaleY) * 0.5;
            render.bounds.max.y += height * 0.5 - (height * scaleY) * 0.5;
        }

        // padding
        render.bounds.min.x -= padding.x;
        render.bounds.max.x -= padding.x;
        render.bounds.min.y -= padding.y;
        render.bounds.max.y -= padding.y;

        // update mouse
        if (render.mouse) {
            Mouse.setScale(render.mouse, {
                x: (render.bounds.max.x - render.bounds.min.x) / render.canvas.width,
                y: (render.bounds.max.y - render.bounds.min.y) / render.canvas.height
            });

            Mouse.setOffset(render.mouse, render.bounds.min);
        }
    };

    /**
     * Applies viewport transforms based on `render.bounds` to a render context.
     * @method startViewTransform
     * @param {render} render
     */
    Render.startViewTransform = function(render) {
        var boundsWidth = render.bounds.max.x - render.bounds.min.x,
            boundsHeight = render.bounds.max.y - render.bounds.min.y,
            boundsScaleX = boundsWidth / render.options.width,
            boundsScaleY = boundsHeight / render.options.height;

        render.context.setTransform(
            render.options.pixelRatio / boundsScaleX, 0, 0, 
            render.options.pixelRatio / boundsScaleY, 0, 0
        );
        
        render.context.translate(-render.bounds.min.x, -render.bounds.min.y);
    };

    /**
     * Resets all transforms on the render context.
     * @method endViewTransform
     * @param {render} render
     */
    Render.endViewTransform = function(render) {
        render.context.setTransform(render.options.pixelRatio, 0, 0, render.options.pixelRatio, 0, 0);
    };

    /**
     * Renders the given `engine`'s `Matter.World` object.
     * This is the entry point for all rendering and should be called every time the scene changes.
     * @method world
     * @param {render} render
     */
    Render.world = function(render, time) {
        var startTime = Common.now(),
            engine = render.engine,
            world = engine.world,
            canvas = render.canvas,
            context = render.context,
            options = render.options,
            timing = render.timing;

        var allBodies = Composite.allBodies(world),
            allConstraints = Composite.allConstraints(world),
            background = options.wireframes ? options.wireframeBackground : options.background,
            bodies = [],
            constraints = [],
            i;

        var event = {
            timestamp: engine.timing.timestamp
        };

        Events.trigger(render, 'beforeRender', event);

        // apply background if it has changed
        if (render.currentBackground !== background)
            _applyBackground(render, background);

        // clear the canvas with a transparent fill, to allow the canvas background to show
        context.globalCompositeOperation = 'source-in';
        context.fillStyle = "transparent";
        context.fillRect(0, 0, canvas.width, canvas.height);
        context.globalCompositeOperation = 'source-over';

        // handle bounds
        if (options.hasBounds) {
            // filter out bodies that are not in view
            for (i = 0; i < allBodies.length; i++) {
                var body = allBodies[i];
                if (Bounds.overlaps(body.bounds, render.bounds))
                    bodies.push(body);
            }

            // filter out constraints that are not in view
            for (i = 0; i < allConstraints.length; i++) {
                var constraint = allConstraints[i],
                    bodyA = constraint.bodyA,
                    bodyB = constraint.bodyB,
                    pointAWorld = constraint.pointA,
                    pointBWorld = constraint.pointB;

                if (bodyA) pointAWorld = Vector.add(bodyA.position, constraint.pointA);
                if (bodyB) pointBWorld = Vector.add(bodyB.position, constraint.pointB);

                if (!pointAWorld || !pointBWorld)
                    continue;

                if (Bounds.contains(render.bounds, pointAWorld) || Bounds.contains(render.bounds, pointBWorld))
                    constraints.push(constraint);
            }

            // transform the view
            Render.startViewTransform(render);

            // update mouse
            if (render.mouse) {
                Mouse.setScale(render.mouse, {
                    x: (render.bounds.max.x - render.bounds.min.x) / render.options.width,
                    y: (render.bounds.max.y - render.bounds.min.y) / render.options.height
                });

                Mouse.setOffset(render.mouse, render.bounds.min);
            }
        } else {
            constraints = allConstraints;
            bodies = allBodies;

            if (render.options.pixelRatio !== 1) {
                render.context.setTransform(render.options.pixelRatio, 0, 0, render.options.pixelRatio, 0, 0);
            }
        }

        if (!options.wireframes || (engine.enableSleeping && options.showSleeping)) {
            // fully featured rendering of bodies
            Render.bodies(render, bodies, context);
        } else {
            if (options.showConvexHulls)
                Render.bodyConvexHulls(render, bodies, context);

            // optimised method for wireframes only
            Render.bodyWireframes(render, bodies, context);
        }

        if (options.showBounds)
            Render.bodyBounds(render, bodies, context);

        if (options.showAxes || options.showAngleIndicator)
            Render.bodyAxes(render, bodies, context);

        if (options.showPositions)
            Render.bodyPositions(render, bodies, context);

        if (options.showVelocity)
            Render.bodyVelocity(render, bodies, context);

        if (options.showIds)
            Render.bodyIds(render, bodies, context);

        if (options.showSeparations)
            Render.separations(render, engine.pairs.list, context);

        if (options.showCollisions)
            Render.collisions(render, engine.pairs.list, context);

        if (options.showVertexNumbers)
            Render.vertexNumbers(render, bodies, context);

        if (options.showMousePosition)
            Render.mousePosition(render, render.mouse, context);

        Render.constraints(constraints, context);

        if (options.showBroadphase)
            Render.grid(render, engine.grid, context);

        if (options.hasBounds) {
            // revert view transforms
            Render.endViewTransform(render);
        }

        Events.trigger(render, 'afterRender', event);

        // log the time elapsed computing this update
        timing.lastElapsed = Common.now() - startTime;
    };

    /**
     * Renders statistics about the engine and world useful for debugging.
     * @private
     * @method stats
     * @param {render} render
     * @param {RenderingContext} context
     * @param {Number} time
     */
    Render.stats = function(render, context, time) {
        var engine = render.engine,
            world = engine.world,
            bodies = Composite.allBodies(world),
            parts = 0,
            width = 55,
            height = 44,
            x = 0,
            y = 0;
        
        // count parts
        for (var i = 0; i < bodies.length; i += 1) {
            parts += bodies[i].parts.length;
        }

        // sections
        var sections = {
            'Part': parts,
            'Body': bodies.length,
            'Cons': Composite.allConstraints(world).length,
            'Comp': Composite.allComposites(world).length,
            'Pair': engine.pairs.list.length
        };

        // background
        context.fillStyle = '#0e0f19';
        context.fillRect(x, y, width * 5.5, height);

        context.font = '12px Arial';
        context.textBaseline = 'top';
        context.textAlign = 'right';

        // sections
        for (var key in sections) {
            var section = sections[key];
            // label
            context.fillStyle = '#aaa';
            context.fillText(key, x + width, y + 8);

            // value
            context.fillStyle = '#eee';
            context.fillText(section, x + width, y + 26);

            x += width;
        }
    };

    /**
     * Renders engine and render performance information.
     * @private
     * @method performance
     * @param {render} render
     * @param {RenderingContext} context
     */
    Render.performance = function(render, context) {
        var engine = render.engine,
            timing = render.timing,
            deltaHistory = timing.deltaHistory,
            elapsedHistory = timing.elapsedHistory,
            timestampElapsedHistory = timing.timestampElapsedHistory,
            engineDeltaHistory = timing.engineDeltaHistory,
            engineElapsedHistory = timing.engineElapsedHistory,
            lastEngineDelta = engine.timing.lastDelta;
        
        var deltaMean = _mean(deltaHistory),
            elapsedMean = _mean(elapsedHistory),
            engineDeltaMean = _mean(engineDeltaHistory),
            engineElapsedMean = _mean(engineElapsedHistory),
            timestampElapsedMean = _mean(timestampElapsedHistory),
            rateMean = (timestampElapsedMean / deltaMean) || 0,
            fps = (1000 / deltaMean) || 0;

        var graphHeight = 4,
            gap = 12,
            width = 60,
            height = 34,
            x = 10,
            y = 69;

        // background
        context.fillStyle = '#0e0f19';
        context.fillRect(0, 50, gap * 4 + width * 5 + 22, height);

        // show FPS
        Render.status(
            context, x, y, width, graphHeight, deltaHistory.length, 
            Math.round(fps) + ' fps', 
            fps / Render._goodFps,
            function(i) { return (deltaHistory[i] / deltaMean) - 1; }
        );

        // show engine delta
        Render.status(
            context, x + gap + width, y, width, graphHeight, engineDeltaHistory.length,
            lastEngineDelta.toFixed(2) + ' dt', 
            Render._goodDelta / lastEngineDelta,
            function(i) { return (engineDeltaHistory[i] / engineDeltaMean) - 1; }
        );

        // show engine update time
        Render.status(
            context, x + (gap + width) * 2, y, width, graphHeight, engineElapsedHistory.length,
            engineElapsedMean.toFixed(2) + ' ut', 
            1 - (engineElapsedMean / Render._goodFps),
            function(i) { return (engineElapsedHistory[i] / engineElapsedMean) - 1; }
        );

        // show render time
        Render.status(
            context, x + (gap + width) * 3, y, width, graphHeight, elapsedHistory.length,
            elapsedMean.toFixed(2) + ' rt', 
            1 - (elapsedMean / Render._goodFps),
            function(i) { return (elapsedHistory[i] / elapsedMean) - 1; }
        );

        // show effective speed
        Render.status(
            context, x + (gap + width) * 4, y, width, graphHeight, timestampElapsedHistory.length, 
            rateMean.toFixed(2) + ' x', 
            rateMean * rateMean * rateMean,
            function(i) { return (((timestampElapsedHistory[i] / deltaHistory[i]) / rateMean) || 0) - 1; }
        );
    };

    /**
     * Renders a label, indicator and a chart.
     * @private
     * @method status
     * @param {RenderingContext} context
     * @param {number} x
     * @param {number} y
     * @param {number} width
     * @param {number} height
     * @param {number} count
     * @param {string} label
     * @param {string} indicator
     * @param {function} plotY
     */
    Render.status = function(context, x, y, width, height, count, label, indicator, plotY) {
        // background
        context.strokeStyle = '#888';
        context.fillStyle = '#444';
        context.lineWidth = 1;
        context.fillRect(x, y + 7, width, 1);

        // chart
        context.beginPath();
        context.moveTo(x, y + 7 - height * Common.clamp(0.4 * plotY(0), -2, 2));
        for (var i = 0; i < width; i += 1) {
            context.lineTo(x + i, y + 7 - (i < count ? height * Common.clamp(0.4 * plotY(i), -2, 2) : 0));
        }
        context.stroke();

        // indicator
        context.fillStyle = 'hsl(' + Common.clamp(25 + 95 * indicator, 0, 120) + ',100%,60%)';
        context.fillRect(x, y - 7, 4, 4);

        // label
        context.font = '12px Arial';
        context.textBaseline = 'middle';
        context.textAlign = 'right';
        context.fillStyle = '#eee';
        context.fillText(label, x + width, y - 5);
    };

    /**
     * Description
     * @private
     * @method constraints
     * @param {constraint[]} constraints
     * @param {RenderingContext} context
     */
    Render.constraints = function(constraints, context) {
        var c = context;

        for (var i = 0; i < constraints.length; i++) {
            var constraint = constraints[i];

            if (!constraint.render.visible || !constraint.pointA || !constraint.pointB)
                continue;

            var bodyA = constraint.bodyA,
                bodyB = constraint.bodyB,
                start,
                end;

            if (bodyA) {
                start = Vector.add(bodyA.position, constraint.pointA);
            } else {
                start = constraint.pointA;
            }

            if (constraint.render.type === 'pin') {
                c.beginPath();
                c.arc(start.x, start.y, 3, 0, 2 * Math.PI);
                c.closePath();
            } else {
                if (bodyB) {
                    end = Vector.add(bodyB.position, constraint.pointB);
                } else {
                    end = constraint.pointB;
                }

                c.beginPath();
                c.moveTo(start.x, start.y);

                if (constraint.render.type === 'spring') {
                    var delta = Vector.sub(end, start),
                        normal = Vector.perp(Vector.normalise(delta)),
                        coils = Math.ceil(Common.clamp(constraint.length / 5, 12, 20)),
                        offset;

                    for (var j = 1; j < coils; j += 1) {
                        offset = j % 2 === 0 ? 1 : -1;

                        c.lineTo(
                            start.x + delta.x * (j / coils) + normal.x * offset * 4,
                            start.y + delta.y * (j / coils) + normal.y * offset * 4
                        );
                    }
                }

                c.lineTo(end.x, end.y);
            }

            if (constraint.render.lineWidth) {
                c.lineWidth = constraint.render.lineWidth;
                c.strokeStyle = constraint.render.strokeStyle;
                c.stroke();
            }

            if (constraint.render.anchors) {
                c.fillStyle = constraint.render.strokeStyle;
                c.beginPath();
                c.arc(start.x, start.y, 3, 0, 2 * Math.PI);
                c.arc(end.x, end.y, 3, 0, 2 * Math.PI);
                c.closePath();
                c.fill();
            }
        }
    };

    /**
     * Description
     * @private
     * @method bodies
     * @param {render} render
     * @param {body[]} bodies
     * @param {RenderingContext} context
     */
    Render.bodies = function(render, bodies, context) {
        var c = context,
            engine = render.engine,
            options = render.options,
            showInternalEdges = options.showInternalEdges || !options.wireframes,
            body,
            part,
            i,
            k;

        for (i = 0; i < bodies.length; i++) {
            body = bodies[i];

            if (!body.render.visible)
                continue;

            // handle compound parts
            for (k = body.parts.length > 1 ? 1 : 0; k < body.parts.length; k++) {
                part = body.parts[k];

                if (!part.render.visible)
                    continue;

                if (options.showSleeping && body.isSleeping) {
                    c.globalAlpha = 0.5 * part.render.opacity;
                } else if (part.render.opacity !== 1) {
                    c.globalAlpha = part.render.opacity;
                }

                if (part.render.sprite && part.render.sprite.texture && !options.wireframes) {
                    // part sprite
                    var sprite = part.render.sprite,
                        texture = _getTexture(render, sprite.texture);

                    c.translate(part.position.x, part.position.y);
                    c.rotate(part.angle);

                    c.drawImage(
                        texture,
                        texture.width * -sprite.xOffset * sprite.xScale,
                        texture.height * -sprite.yOffset * sprite.yScale,
                        texture.width * sprite.xScale,
                        texture.height * sprite.yScale
                    );

                    // revert translation, hopefully faster than save / restore
                    c.rotate(-part.angle);
                    c.translate(-part.position.x, -part.position.y);
                } else {
                    // part polygon
                    if (part.circleRadius) {
                        c.beginPath();
                        c.arc(part.position.x, part.position.y, part.circleRadius, 0, 2 * Math.PI);
                    } else {
                        c.beginPath();
                        c.moveTo(part.vertices[0].x, part.vertices[0].y);

                        for (var j = 1; j < part.vertices.length; j++) {
                            if (!part.vertices[j - 1].isInternal || showInternalEdges) {
                                c.lineTo(part.vertices[j].x, part.vertices[j].y);
                            } else {
                                c.moveTo(part.vertices[j].x, part.vertices[j].y);
                            }

                            if (part.vertices[j].isInternal && !showInternalEdges) {
                                c.moveTo(part.vertices[(j + 1) % part.vertices.length].x, part.vertices[(j + 1) % part.vertices.length].y);
                            }
                        }

                        c.lineTo(part.vertices[0].x, part.vertices[0].y);
                        c.closePath();
                    }

                    if (!options.wireframes) {
                        c.fillStyle = part.render.fillStyle;

                        if (part.render.lineWidth) {
                            c.lineWidth = part.render.lineWidth;
                            c.strokeStyle = part.render.strokeStyle;
                            c.stroke();
                        }

                        c.fill();
                    } else {
                        c.lineWidth = 1;
                        c.strokeStyle = '#bbb';
                        c.stroke();
                    }
                }

                c.globalAlpha = 1;
            }
        }
    };

    /**
     * Optimised method for drawing body wireframes in one pass
     * @private
     * @method bodyWireframes
     * @param {render} render
     * @param {body[]} bodies
     * @param {RenderingContext} context
     */
    Render.bodyWireframes = function(render, bodies, context) {
        var c = context,
            showInternalEdges = render.options.showInternalEdges,
            body,
            part,
            i,
            j,
            k;

        c.beginPath();

        // render all bodies
        for (i = 0; i < bodies.length; i++) {
            body = bodies[i];

            if (!body.render.visible)
                continue;

            // handle compound parts
            for (k = body.parts.length > 1 ? 1 : 0; k < body.parts.length; k++) {
                part = body.parts[k];

                c.moveTo(part.vertices[0].x, part.vertices[0].y);

                for (j = 1; j < part.vertices.length; j++) {
                    if (!part.vertices[j - 1].isInternal || showInternalEdges) {
                        c.lineTo(part.vertices[j].x, part.vertices[j].y);
                    } else {
                        c.moveTo(part.vertices[j].x, part.vertices[j].y);
                    }

                    if (part.vertices[j].isInternal && !showInternalEdges) {
                        c.moveTo(part.vertices[(j + 1) % part.vertices.length].x, part.vertices[(j + 1) % part.vertices.length].y);
                    }
                }

                c.lineTo(part.vertices[0].x, part.vertices[0].y);
            }
        }

        c.lineWidth = 1;
        c.strokeStyle = '#bbb';
        c.stroke();
    };

    /**
     * Optimised method for drawing body convex hull wireframes in one pass
     * @private
     * @method bodyConvexHulls
     * @param {render} render
     * @param {body[]} bodies
     * @param {RenderingContext} context
     */
    Render.bodyConvexHulls = function(render, bodies, context) {
        var c = context,
            body,
            part,
            i,
            j,
            k;

        c.beginPath();

        // render convex hulls
        for (i = 0; i < bodies.length; i++) {
            body = bodies[i];

            if (!body.render.visible || body.parts.length === 1)
                continue;

            c.moveTo(body.vertices[0].x, body.vertices[0].y);

            for (j = 1; j < body.vertices.length; j++) {
                c.lineTo(body.vertices[j].x, body.vertices[j].y);
            }

            c.lineTo(body.vertices[0].x, body.vertices[0].y);
        }

        c.lineWidth = 1;
        c.strokeStyle = 'rgba(255,255,255,0.2)';
        c.stroke();
    };

    /**
     * Renders body vertex numbers.
     * @private
     * @method vertexNumbers
     * @param {render} render
     * @param {body[]} bodies
     * @param {RenderingContext} context
     */
    Render.vertexNumbers = function(render, bodies, context) {
        var c = context,
            i,
            j,
            k;

        for (i = 0; i < bodies.length; i++) {
            var parts = bodies[i].parts;
            for (k = parts.length > 1 ? 1 : 0; k < parts.length; k++) {
                var part = parts[k];
                for (j = 0; j < part.vertices.length; j++) {
                    c.fillStyle = 'rgba(255,255,255,0.2)';
                    c.fillText(i + '_' + j, part.position.x + (part.vertices[j].x - part.position.x) * 0.8, part.position.y + (part.vertices[j].y - part.position.y) * 0.8);
                }
            }
        }
    };

    /**
     * Renders mouse position.
     * @private
     * @method mousePosition
     * @param {render} render
     * @param {mouse} mouse
     * @param {RenderingContext} context
     */
    Render.mousePosition = function(render, mouse, context) {
        var c = context;
        c.fillStyle = 'rgba(255,255,255,0.8)';
        c.fillText(mouse.position.x + '  ' + mouse.position.y, mouse.position.x + 5, mouse.position.y - 5);
    };

    /**
     * Draws body bounds
     * @private
     * @method bodyBounds
     * @param {render} render
     * @param {body[]} bodies
     * @param {RenderingContext} context
     */
    Render.bodyBounds = function(render, bodies, context) {
        var c = context,
            engine = render.engine,
            options = render.options;

        c.beginPath();

        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i];

            if (body.render.visible) {
                var parts = bodies[i].parts;
                for (var j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {
                    var part = parts[j];
                    c.rect(part.bounds.min.x, part.bounds.min.y, part.bounds.max.x - part.bounds.min.x, part.bounds.max.y - part.bounds.min.y);
                }
            }
        }

        if (options.wireframes) {
            c.strokeStyle = 'rgba(255,255,255,0.08)';
        } else {
            c.strokeStyle = 'rgba(0,0,0,0.1)';
        }

        c.lineWidth = 1;
        c.stroke();
    };

    /**
     * Draws body angle indicators and axes
     * @private
     * @method bodyAxes
     * @param {render} render
     * @param {body[]} bodies
     * @param {RenderingContext} context
     */
    Render.bodyAxes = function(render, bodies, context) {
        var c = context,
            engine = render.engine,
            options = render.options,
            part,
            i,
            j,
            k;

        c.beginPath();

        for (i = 0; i < bodies.length; i++) {
            var body = bodies[i],
                parts = body.parts;

            if (!body.render.visible)
                continue;

            if (options.showAxes) {
                // render all axes
                for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {
                    part = parts[j];
                    for (k = 0; k < part.axes.length; k++) {
                        var axis = part.axes[k];
                        c.moveTo(part.position.x, part.position.y);
                        c.lineTo(part.position.x + axis.x * 20, part.position.y + axis.y * 20);
                    }
                }
            } else {
                for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {
                    part = parts[j];
                    for (k = 0; k < part.axes.length; k++) {
                        // render a single axis indicator
                        c.moveTo(part.position.x, part.position.y);
                        c.lineTo((part.vertices[0].x + part.vertices[part.vertices.length-1].x) / 2,
                            (part.vertices[0].y + part.vertices[part.vertices.length-1].y) / 2);
                    }
                }
            }
        }

        if (options.wireframes) {
            c.strokeStyle = 'indianred';
            c.lineWidth = 1;
        } else {
            c.strokeStyle = 'rgba(255, 255, 255, 0.4)';
            c.globalCompositeOperation = 'overlay';
            c.lineWidth = 2;
        }

        c.stroke();
        c.globalCompositeOperation = 'source-over';
    };

    /**
     * Draws body positions
     * @private
     * @method bodyPositions
     * @param {render} render
     * @param {body[]} bodies
     * @param {RenderingContext} context
     */
    Render.bodyPositions = function(render, bodies, context) {
        var c = context,
            engine = render.engine,
            options = render.options,
            body,
            part,
            i,
            k;

        c.beginPath();

        // render current positions
        for (i = 0; i < bodies.length; i++) {
            body = bodies[i];

            if (!body.render.visible)
                continue;

            // handle compound parts
            for (k = 0; k < body.parts.length; k++) {
                part = body.parts[k];
                c.arc(part.position.x, part.position.y, 3, 0, 2 * Math.PI, false);
                c.closePath();
            }
        }

        if (options.wireframes) {
            c.fillStyle = 'indianred';
        } else {
            c.fillStyle = 'rgba(0,0,0,0.5)';
        }
        c.fill();

        c.beginPath();

        // render previous positions
        for (i = 0; i < bodies.length; i++) {
            body = bodies[i];
            if (body.render.visible) {
                c.arc(body.positionPrev.x, body.positionPrev.y, 2, 0, 2 * Math.PI, false);
                c.closePath();
            }
        }

        c.fillStyle = 'rgba(255,165,0,0.8)';
        c.fill();
    };

    /**
     * Draws body velocity
     * @private
     * @method bodyVelocity
     * @param {render} render
     * @param {body[]} bodies
     * @param {RenderingContext} context
     */
    Render.bodyVelocity = function(render, bodies, context) {
        var c = context;

        c.beginPath();

        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i];

            if (!body.render.visible)
                continue;

            c.moveTo(body.position.x, body.position.y);
            c.lineTo(body.position.x + (body.position.x - body.positionPrev.x) * 2, body.position.y + (body.position.y - body.positionPrev.y) * 2);
        }

        c.lineWidth = 3;
        c.strokeStyle = 'cornflowerblue';
        c.stroke();
    };

    /**
     * Draws body ids
     * @private
     * @method bodyIds
     * @param {render} render
     * @param {body[]} bodies
     * @param {RenderingContext} context
     */
    Render.bodyIds = function(render, bodies, context) {
        var c = context,
            i,
            j;

        for (i = 0; i < bodies.length; i++) {
            if (!bodies[i].render.visible)
                continue;

            var parts = bodies[i].parts;
            for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {
                var part = parts[j];
                c.font = "12px Arial";
                c.fillStyle = 'rgba(255,255,255,0.5)';
                c.fillText(part.id, part.position.x + 10, part.position.y - 10);
            }
        }
    };

    /**
     * Description
     * @private
     * @method collisions
     * @param {render} render
     * @param {pair[]} pairs
     * @param {RenderingContext} context
     */
    Render.collisions = function(render, pairs, context) {
        var c = context,
            options = render.options,
            pair,
            collision,
            corrected,
            bodyA,
            bodyB,
            i,
            j;

        c.beginPath();

        // render collision positions
        for (i = 0; i < pairs.length; i++) {
            pair = pairs[i];

            if (!pair.isActive)
                continue;

            collision = pair.collision;
            for (j = 0; j < pair.activeContacts.length; j++) {
                var contact = pair.activeContacts[j],
                    vertex = contact.vertex;
                c.rect(vertex.x - 1.5, vertex.y - 1.5, 3.5, 3.5);
            }
        }

        if (options.wireframes) {
            c.fillStyle = 'rgba(255,255,255,0.7)';
        } else {
            c.fillStyle = 'orange';
        }
        c.fill();

        c.beginPath();

        // render collision normals
        for (i = 0; i < pairs.length; i++) {
            pair = pairs[i];

            if (!pair.isActive)
                continue;

            collision = pair.collision;

            if (pair.activeContacts.length > 0) {
                var normalPosX = pair.activeContacts[0].vertex.x,
                    normalPosY = pair.activeContacts[0].vertex.y;

                if (pair.activeContacts.length === 2) {
                    normalPosX = (pair.activeContacts[0].vertex.x + pair.activeContacts[1].vertex.x) / 2;
                    normalPosY = (pair.activeContacts[0].vertex.y + pair.activeContacts[1].vertex.y) / 2;
                }

                if (collision.bodyB === collision.supports[0].body || collision.bodyA.isStatic === true) {
                    c.moveTo(normalPosX - collision.normal.x * 8, normalPosY - collision.normal.y * 8);
                } else {
                    c.moveTo(normalPosX + collision.normal.x * 8, normalPosY + collision.normal.y * 8);
                }

                c.lineTo(normalPosX, normalPosY);
            }
        }

        if (options.wireframes) {
            c.strokeStyle = 'rgba(255,165,0,0.7)';
        } else {
            c.strokeStyle = 'orange';
        }

        c.lineWidth = 1;
        c.stroke();
    };

    /**
     * Description
     * @private
     * @method separations
     * @param {render} render
     * @param {pair[]} pairs
     * @param {RenderingContext} context
     */
    Render.separations = function(render, pairs, context) {
        var c = context,
            options = render.options,
            pair,
            collision,
            corrected,
            bodyA,
            bodyB,
            i,
            j;

        c.beginPath();

        // render separations
        for (i = 0; i < pairs.length; i++) {
            pair = pairs[i];

            if (!pair.isActive)
                continue;

            collision = pair.collision;
            bodyA = collision.bodyA;
            bodyB = collision.bodyB;

            var k = 1;

            if (!bodyB.isStatic && !bodyA.isStatic) k = 0.5;
            if (bodyB.isStatic) k = 0;

            c.moveTo(bodyB.position.x, bodyB.position.y);
            c.lineTo(bodyB.position.x - collision.penetration.x * k, bodyB.position.y - collision.penetration.y * k);

            k = 1;

            if (!bodyB.isStatic && !bodyA.isStatic) k = 0.5;
            if (bodyA.isStatic) k = 0;

            c.moveTo(bodyA.position.x, bodyA.position.y);
            c.lineTo(bodyA.position.x + collision.penetration.x * k, bodyA.position.y + collision.penetration.y * k);
        }

        if (options.wireframes) {
            c.strokeStyle = 'rgba(255,165,0,0.5)';
        } else {
            c.strokeStyle = 'orange';
        }
        c.stroke();
    };

    /**
     * Description
     * @private
     * @method grid
     * @param {render} render
     * @param {grid} grid
     * @param {RenderingContext} context
     */
    Render.grid = function(render, grid, context) {
        var c = context,
            options = render.options;

        if (options.wireframes) {
            c.strokeStyle = 'rgba(255,180,0,0.1)';
        } else {
            c.strokeStyle = 'rgba(255,180,0,0.5)';
        }

        c.beginPath();

        var bucketKeys = Common.keys(grid.buckets);

        for (var i = 0; i < bucketKeys.length; i++) {
            var bucketId = bucketKeys[i];

            if (grid.buckets[bucketId].length < 2)
                continue;

            var region = bucketId.split(/C|R/);
            c.rect(0.5 + parseInt(region[1], 10) * grid.bucketWidth,
                0.5 + parseInt(region[2], 10) * grid.bucketHeight,
                grid.bucketWidth,
                grid.bucketHeight);
        }

        c.lineWidth = 1;
        c.stroke();
    };

    /**
     * Description
     * @private
     * @method inspector
     * @param {inspector} inspector
     * @param {RenderingContext} context
     */
    Render.inspector = function(inspector, context) {
        var engine = inspector.engine,
            selected = inspector.selected,
            render = inspector.render,
            options = render.options,
            bounds;

        if (options.hasBounds) {
            var boundsWidth = render.bounds.max.x - render.bounds.min.x,
                boundsHeight = render.bounds.max.y - render.bounds.min.y,
                boundsScaleX = boundsWidth / render.options.width,
                boundsScaleY = boundsHeight / render.options.height;

            context.scale(1 / boundsScaleX, 1 / boundsScaleY);
            context.translate(-render.bounds.min.x, -render.bounds.min.y);
        }

        for (var i = 0; i < selected.length; i++) {
            var item = selected[i].data;

            context.translate(0.5, 0.5);
            context.lineWidth = 1;
            context.strokeStyle = 'rgba(255,165,0,0.9)';
            context.setLineDash([1,2]);

            switch (item.type) {

            case 'body':

                // render body selections
                bounds = item.bounds;
                context.beginPath();
                context.rect(Math.floor(bounds.min.x - 3), Math.floor(bounds.min.y - 3),
                    Math.floor(bounds.max.x - bounds.min.x + 6), Math.floor(bounds.max.y - bounds.min.y + 6));
                context.closePath();
                context.stroke();

                break;

            case 'constraint':

                // render constraint selections
                var point = item.pointA;
                if (item.bodyA)
                    point = item.pointB;
                context.beginPath();
                context.arc(point.x, point.y, 10, 0, 2 * Math.PI);
                context.closePath();
                context.stroke();

                break;

            }

            context.setLineDash([]);
            context.translate(-0.5, -0.5);
        }

        // render selection region
        if (inspector.selectStart !== null) {
            context.translate(0.5, 0.5);
            context.lineWidth = 1;
            context.strokeStyle = 'rgba(255,165,0,0.6)';
            context.fillStyle = 'rgba(255,165,0,0.1)';
            bounds = inspector.selectBounds;
            context.beginPath();
            context.rect(Math.floor(bounds.min.x), Math.floor(bounds.min.y),
                Math.floor(bounds.max.x - bounds.min.x), Math.floor(bounds.max.y - bounds.min.y));
            context.closePath();
            context.stroke();
            context.fill();
            context.translate(-0.5, -0.5);
        }

        if (options.hasBounds)
            context.setTransform(1, 0, 0, 1, 0, 0);
    };

    /**
     * Updates render timing.
     * @method _updateTiming
     * @private
     * @param {render} render
     * @param {number} time
     */
    var _updateTiming = function(render, time) {
        var engine = render.engine,
            timing = render.timing,
            historySize = timing.historySize,
            timestamp = engine.timing.timestamp;

        timing.delta = time - timing.lastTime || Render._goodDelta;
        timing.lastTime = time;

        timing.timestampElapsed = timestamp - timing.lastTimestamp || 0;
        timing.lastTimestamp = timestamp;

        timing.deltaHistory.unshift(timing.delta);
        timing.deltaHistory.length = Math.min(timing.deltaHistory.length, historySize);

        timing.engineDeltaHistory.unshift(engine.timing.lastDelta);
        timing.engineDeltaHistory.length = Math.min(timing.engineDeltaHistory.length, historySize);

        timing.timestampElapsedHistory.unshift(timing.timestampElapsed);
        timing.timestampElapsedHistory.length = Math.min(timing.timestampElapsedHistory.length, historySize);

        timing.engineElapsedHistory.unshift(engine.timing.lastElapsed);
        timing.engineElapsedHistory.length = Math.min(timing.engineElapsedHistory.length, historySize);

        timing.elapsedHistory.unshift(timing.lastElapsed);
        timing.elapsedHistory.length = Math.min(timing.elapsedHistory.length, historySize);
    };

    /**
     * Returns the mean value of the given numbers.
     * @method _mean
     * @private
     * @param {Number[]} values
     * @return {Number} the mean of given values
     */
    var _mean = function(values) {
        var result = 0;
        for (var i = 0; i < values.length; i += 1) {
            result += values[i];
        }
        return (result / values.length) || 0;
    };

    /**
     * @method _createCanvas
     * @private
     * @param {} width
     * @param {} height
     * @return canvas
     */
    var _createCanvas = function(width, height) {
        var canvas = document.createElement('canvas');
        canvas.width = width;
        canvas.height = height;
        canvas.oncontextmenu = function() { return false; };
        canvas.onselectstart = function() { return false; };
        return canvas;
    };

    /**
     * Gets the pixel ratio of the canvas.
     * @method _getPixelRatio
     * @private
     * @param {HTMLElement} canvas
     * @return {Number} pixel ratio
     */
    var _getPixelRatio = function(canvas) {
        var context = canvas.getContext('2d'),
            devicePixelRatio = window.devicePixelRatio || 1,
            backingStorePixelRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio
                                      || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio
                                      || context.backingStorePixelRatio || 1;

        return devicePixelRatio / backingStorePixelRatio;
    };

    /**
     * Gets the requested texture (an Image) via its path
     * @method _getTexture
     * @private
     * @param {render} render
     * @param {string} imagePath
     * @return {Image} texture
     */
    var _getTexture = function(render, imagePath) {
        var image = render.textures[imagePath];

        if (image)
            return image;

        image = render.textures[imagePath] = new Image();
        image.src = imagePath;

        return image;
    };

    /**
     * Applies the background to the canvas using CSS.
     * @method applyBackground
     * @private
     * @param {render} render
     * @param {string} background
     */
    var _applyBackground = function(render, background) {
        var cssBackground = background;

        if (/(jpg|gif|png)$/.test(background))
            cssBackground = 'url(' + background + ')';

        render.canvas.style.background = cssBackground;
        render.canvas.style.backgroundSize = "contain";
        render.currentBackground = background;
    };

    /*
    *
    *  Events Documentation
    *
    */

    /**
    * Fired before rendering
    *
    * @event beforeRender
    * @param {} event An event object
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired after rendering
    *
    * @event afterRender
    * @param {} event An event object
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /*
    *
    *  Properties Documentation
    *
    */

    /**
     * A back-reference to the `Matter.Render` module.
     *
     * @property controller
     * @type render
     */

    /**
     * A reference to the `Matter.Engine` instance to be used.
     *
     * @property engine
     * @type engine
     */

    /**
     * A reference to the element where the canvas is to be inserted (if `render.canvas` has not been specified)
     *
     * @property element
     * @type HTMLElement
     * @default null
     */

    /**
     * The canvas element to render to. If not specified, one will be created if `render.element` has been specified.
     *
     * @property canvas
     * @type HTMLCanvasElement
     * @default null
     */

    /**
     * A `Bounds` object that specifies the drawing view region.
     * Rendering will be automatically transformed and scaled to fit within the canvas size (`render.options.width` and `render.options.height`).
     * This allows for creating views that can pan or zoom around the scene.
     * You must also set `render.options.hasBounds` to `true` to enable bounded rendering.
     *
     * @property bounds
     * @type bounds
     */

    /**
     * The 2d rendering context from the `render.canvas` element.
     *
     * @property context
     * @type CanvasRenderingContext2D
     */

    /**
     * The sprite texture cache.
     *
     * @property textures
     * @type {}
     */

    /**
     * The mouse to render if `render.options.showMousePosition` is enabled.
     *
     * @property mouse
     * @type mouse
     * @default null
     */

    /**
     * The configuration options of the renderer.
     *
     * @property options
     * @type {}
     */

    /**
     * The target width in pixels of the `render.canvas` to be created.
     * See also the `options.pixelRatio` property to change render quality.
     *
     * @property options.width
     * @type number
     * @default 800
     */

    /**
     * The target height in pixels of the `render.canvas` to be created.
     * See also the `options.pixelRatio` property to change render quality.
     *
     * @property options.height
     * @type number
     * @default 600
     */

    /**
     * The [pixel ratio](https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio) to use when rendering.
     *
     * @property options.pixelRatio
     * @type number
     * @default 1
     */

    /**
     * A CSS background color string to use when `render.options.wireframes` is disabled.
     * This may be also set to `'transparent'` or equivalent.
     *
     * @property options.background
     * @type string
     * @default '#14151f'
     */

    /**
     * A CSS background color string to use when `render.options.wireframes` is enabled.
     * This may be also set to `'transparent'` or equivalent.
     *
     * @property options.wireframeBackground
     * @type string
     * @default '#14151f'
     */

    /**
     * A flag that specifies if `render.bounds` should be used when rendering.
     *
     * @property options.hasBounds
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable all debug information overlays together.  
     * This includes and has priority over the values of:
     *
     * - `render.options.showStats`
     * - `render.options.showPerformance`
     *
     * @property options.showDebug
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the engine stats info overlay.  
     * From left to right, the values shown are:
     *
     * - body parts total
     * - body total
     * - constraints total
     * - composites total
     * - collision pairs total
     *
     * @property options.showStats
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable performance charts.  
     * From left to right, the values shown are:
     *
     * - average render frequency (e.g. 60 fps)
     * - exact engine delta time used for last update (e.g. 16.66ms)
     * - average engine execution duration (e.g. 5.00ms)
     * - average render execution duration (e.g. 0.40ms)
     * - average effective play speed (e.g. '1.00x' is 'real-time')
     *
     * Each value is recorded over a fixed sample of past frames (60 frames).
     *
     * A chart shown below each value indicates the variance from the average over the sample.
     * The more stable or fixed the value is the flatter the chart will appear.
     *
     * @property options.showPerformance
     * @type boolean
     * @default false
     */
    
    /**
     * A flag to enable or disable rendering entirely.
     *
     * @property options.enabled
     * @type boolean
     * @default false
     */

    /**
     * A flag to toggle wireframe rendering otherwise solid fill rendering is used.
     *
     * @property options.wireframes
     * @type boolean
     * @default true
     */

    /**
     * A flag to enable or disable sleeping bodies indicators.
     *
     * @property options.showSleeping
     * @type boolean
     * @default true
     */

    /**
     * A flag to enable or disable the debug information overlay.
     *
     * @property options.showDebug
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the collision broadphase debug overlay.
     *
     * @property options.showBroadphase
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the body bounds debug overlay.
     *
     * @property options.showBounds
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the body velocity debug overlay.
     *
     * @property options.showVelocity
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the body collisions debug overlay.
     *
     * @property options.showCollisions
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the collision resolver separations debug overlay.
     *
     * @property options.showSeparations
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the body axes debug overlay.
     *
     * @property options.showAxes
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the body positions debug overlay.
     *
     * @property options.showPositions
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the body angle debug overlay.
     *
     * @property options.showAngleIndicator
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the body and part ids debug overlay.
     *
     * @property options.showIds
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the body vertex numbers debug overlay.
     *
     * @property options.showVertexNumbers
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the body convex hulls debug overlay.
     *
     * @property options.showConvexHulls
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the body internal edges debug overlay.
     *
     * @property options.showInternalEdges
     * @type boolean
     * @default false
     */

    /**
     * A flag to enable or disable the mouse position debug overlay.
     *
     * @property options.showMousePosition
     * @type boolean
     * @default false
     */

})();


/***/ }),
/* 17 */
/***/ (function(module, exports) {

/**
* The `Matter.Contact` module contains methods for creating and manipulating collision contacts.
*
* @class Contact
*/

var Contact = {};

module.exports = Contact;

(function() {

    /**
     * Creates a new contact.
     * @method create
     * @param {vertex} vertex
     * @return {contact} A new contact
     */
    Contact.create = function(vertex) {
        return {
            id: Contact.id(vertex),
            vertex: vertex,
            normalImpulse: 0,
            tangentImpulse: 0
        };
    };
    
    /**
     * Generates a contact id.
     * @method id
     * @param {vertex} vertex
     * @return {string} Unique contactID
     */
    Contact.id = function(vertex) {
        return vertex.body.id + '_' + vertex.index;
    };

})();


/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Engine` module contains methods for creating and manipulating engines.
* An engine is a controller that manages updating the simulation of the world.
* See `Matter.Runner` for an optional game loop utility.
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Engine
*/

var Engine = {};

module.exports = Engine;

var Sleeping = __webpack_require__(7);
var Resolver = __webpack_require__(19);
var Detector = __webpack_require__(13);
var Pairs = __webpack_require__(20);
var Grid = __webpack_require__(21);
var Events = __webpack_require__(4);
var Composite = __webpack_require__(5);
var Constraint = __webpack_require__(8);
var Common = __webpack_require__(0);
var Body = __webpack_require__(6);

(function() {

    /**
     * Creates a new engine. The options parameter is an object that specifies any properties you wish to override the defaults.
     * All properties have default values, and many are pre-calculated automatically based on other properties.
     * See the properties section below for detailed information on what you can pass via the `options` object.
     * @method create
     * @param {object} [options]
     * @return {engine} engine
     */
    Engine.create = function(options) {
        options = options || {};

        var defaults = {
            positionIterations: 6,
            velocityIterations: 4,
            constraintIterations: 2,
            enableSleeping: false,
            events: [],
            plugin: {},
            grid: null,
            gravity: {
                x: 0,
                y: 1,
                scale: 0.001
            },
            timing: {
                timestamp: 0,
                timeScale: 1,
                lastDelta: 0,
                lastElapsed: 0
            }
        };

        var engine = Common.extend(defaults, options);

        engine.world = options.world || Composite.create({ label: 'World' });
        engine.grid = Grid.create(options.grid || options.broadphase);
        engine.pairs = Pairs.create();

        // temporary back compatibility
        engine.world.gravity = engine.gravity;
        engine.broadphase = engine.grid;
        engine.metrics = {};
        
        return engine;
    };

    /**
     * Moves the simulation forward in time by `delta` ms.
     * The `correction` argument is an optional `Number` that specifies the time correction factor to apply to the update.
     * This can help improve the accuracy of the simulation in cases where `delta` is changing between updates.
     * The value of `correction` is defined as `delta / lastDelta`, i.e. the percentage change of `delta` over the last step.
     * Therefore the value is always `1` (no correction) when `delta` constant (or when no correction is desired, which is the default).
     * See the paper on <a href="http://lonesock.net/article/verlet.html">Time Corrected Verlet</a> for more information.
     *
     * Triggers `beforeUpdate` and `afterUpdate` events.
     * Triggers `collisionStart`, `collisionActive` and `collisionEnd` events.
     * @method update
     * @param {engine} engine
     * @param {number} [delta=16.666]
     * @param {number} [correction=1]
     */
    Engine.update = function(engine, delta, correction) {
        var startTime = Common.now();

        delta = delta || 1000 / 60;
        correction = correction || 1;

        var world = engine.world,
            timing = engine.timing,
            grid = engine.grid,
            gridPairs = [],
            i;

        // increment timestamp
        timing.timestamp += delta * timing.timeScale;
        timing.lastDelta = delta * timing.timeScale;

        // create an event object
        var event = {
            timestamp: timing.timestamp
        };

        Events.trigger(engine, 'beforeUpdate', event);

        // get lists of all bodies and constraints, no matter what composites they are in
        var allBodies = Composite.allBodies(world),
            allConstraints = Composite.allConstraints(world);

        // if sleeping enabled, call the sleeping controller
        if (engine.enableSleeping)
            Sleeping.update(allBodies, timing.timeScale);

        // applies gravity to all bodies
        Engine._bodiesApplyGravity(allBodies, engine.gravity);

        // update all body position and rotation by integration
        Engine._bodiesUpdate(allBodies, delta, timing.timeScale, correction, world.bounds);

        // update all constraints (first pass)
        Constraint.preSolveAll(allBodies);
        for (i = 0; i < engine.constraintIterations; i++) {
            Constraint.solveAll(allConstraints, timing.timeScale);
        }
        Constraint.postSolveAll(allBodies);

        // broadphase pass: find potential collision pairs

        // if world is dirty, we must flush the whole grid
        if (world.isModified)
            Grid.clear(grid);

        // update the grid buckets based on current bodies
        Grid.update(grid, allBodies, engine, world.isModified);
        gridPairs = grid.pairsList;

        // clear all composite modified flags
        if (world.isModified) {
            Composite.setModified(world, false, false, true);
        }

        // narrowphase pass: find actual collisions, then create or update collision pairs
        var collisions = Detector.collisions(gridPairs, engine);

        // update collision pairs
        var pairs = engine.pairs,
            timestamp = timing.timestamp;
        Pairs.update(pairs, collisions, timestamp);
        Pairs.removeOld(pairs, timestamp);

        // wake up bodies involved in collisions
        if (engine.enableSleeping)
            Sleeping.afterCollisions(pairs.list, timing.timeScale);

        // trigger collision events
        if (pairs.collisionStart.length > 0)
            Events.trigger(engine, 'collisionStart', { pairs: pairs.collisionStart });

        // iteratively resolve position between collisions
        Resolver.preSolvePosition(pairs.list);
        for (i = 0; i < engine.positionIterations; i++) {
            Resolver.solvePosition(pairs.list, timing.timeScale);
        }
        Resolver.postSolvePosition(allBodies);

        // update all constraints (second pass)
        Constraint.preSolveAll(allBodies);
        for (i = 0; i < engine.constraintIterations; i++) {
            Constraint.solveAll(allConstraints, timing.timeScale);
        }
        Constraint.postSolveAll(allBodies);

        // iteratively resolve velocity between collisions
        Resolver.preSolveVelocity(pairs.list);
        for (i = 0; i < engine.velocityIterations; i++) {
            Resolver.solveVelocity(pairs.list, timing.timeScale);
        }

        // trigger collision events
        if (pairs.collisionActive.length > 0)
            Events.trigger(engine, 'collisionActive', { pairs: pairs.collisionActive });

        if (pairs.collisionEnd.length > 0)
            Events.trigger(engine, 'collisionEnd', { pairs: pairs.collisionEnd });

        // clear force buffers
        Engine._bodiesClearForces(allBodies);

        Events.trigger(engine, 'afterUpdate', event);

        // log the time elapsed computing this update
        engine.timing.lastElapsed = Common.now() - startTime;

        return engine;
    };
    
    /**
     * Merges two engines by keeping the configuration of `engineA` but replacing the world with the one from `engineB`.
     * @method merge
     * @param {engine} engineA
     * @param {engine} engineB
     */
    Engine.merge = function(engineA, engineB) {
        Common.extend(engineA, engineB);
        
        if (engineB.world) {
            engineA.world = engineB.world;

            Engine.clear(engineA);

            var bodies = Composite.allBodies(engineA.world);

            for (var i = 0; i < bodies.length; i++) {
                var body = bodies[i];
                Sleeping.set(body, false);
                body.id = Common.nextId();
            }
        }
    };

    /**
     * Clears the engine including the world, pairs and broadphase.
     * @method clear
     * @param {engine} engine
     */
    Engine.clear = function(engine) {
        var world = engine.world,
            bodies = Composite.allBodies(world);

        Pairs.clear(engine.pairs);
        Grid.clear(engine.grid);
        Grid.update(engine.grid, bodies, engine, true);
    };

    /**
     * Zeroes the `body.force` and `body.torque` force buffers.
     * @method _bodiesClearForces
     * @private
     * @param {body[]} bodies
     */
    Engine._bodiesClearForces = function(bodies) {
        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i];

            // reset force buffers
            body.force.x = 0;
            body.force.y = 0;
            body.torque = 0;
        }
    };

    /**
     * Applys a mass dependant force to all given bodies.
     * @method _bodiesApplyGravity
     * @private
     * @param {body[]} bodies
     * @param {vector} gravity
     */
    Engine._bodiesApplyGravity = function(bodies, gravity) {
        var gravityScale = typeof gravity.scale !== 'undefined' ? gravity.scale : 0.001;

        if ((gravity.x === 0 && gravity.y === 0) || gravityScale === 0) {
            return;
        }
        
        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i];

            if (body.isStatic || body.isSleeping)
                continue;

            // apply gravity
            body.force.y += body.mass * gravity.y * gravityScale;
            body.force.x += body.mass * gravity.x * gravityScale;
        }
    };

    /**
     * Applys `Body.update` to all given `bodies`.
     * @method _bodiesUpdate
     * @private
     * @param {body[]} bodies
     * @param {number} deltaTime 
     * The amount of time elapsed between updates
     * @param {number} timeScale
     * @param {number} correction 
     * The Verlet correction factor (deltaTime / lastDeltaTime)
     * @param {bounds} worldBounds
     */
    Engine._bodiesUpdate = function(bodies, deltaTime, timeScale, correction, worldBounds) {
        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i];

            if (body.isStatic || body.isSleeping)
                continue;

            Body.update(body, deltaTime, timeScale, correction);
        }
    };

    /**
     * A deprecated alias for `Runner.run`, use `Matter.Runner.run(engine)` instead and see `Matter.Runner` for more information.
     * @deprecated use Matter.Runner.run(engine) instead
     * @method run
     * @param {engine} engine
     */

    /**
    * Fired just before an update
    *
    * @event beforeUpdate
    * @param {} event An event object
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired after engine update and all collision events
    *
    * @event afterUpdate
    * @param {} event An event object
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired after engine update, provides a list of all pairs that have started to collide in the current tick (if any)
    *
    * @event collisionStart
    * @param {} event An event object
    * @param {} event.pairs List of affected pairs
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired after engine update, provides a list of all pairs that are colliding in the current tick (if any)
    *
    * @event collisionActive
    * @param {} event An event object
    * @param {} event.pairs List of affected pairs
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired after engine update, provides a list of all pairs that have ended collision in the current tick (if any)
    *
    * @event collisionEnd
    * @param {} event An event object
    * @param {} event.pairs List of affected pairs
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /*
    *
    *  Properties Documentation
    *
    */

    /**
     * An integer `Number` that specifies the number of position iterations to perform each update.
     * The higher the value, the higher quality the simulation will be at the expense of performance.
     *
     * @property positionIterations
     * @type number
     * @default 6
     */

    /**
     * An integer `Number` that specifies the number of velocity iterations to perform each update.
     * The higher the value, the higher quality the simulation will be at the expense of performance.
     *
     * @property velocityIterations
     * @type number
     * @default 4
     */

    /**
     * An integer `Number` that specifies the number of constraint iterations to perform each update.
     * The higher the value, the higher quality the simulation will be at the expense of performance.
     * The default value of `2` is usually very adequate.
     *
     * @property constraintIterations
     * @type number
     * @default 2
     */

    /**
     * A flag that specifies whether the engine should allow sleeping via the `Matter.Sleeping` module.
     * Sleeping can improve stability and performance, but often at the expense of accuracy.
     *
     * @property enableSleeping
     * @type boolean
     * @default false
     */

    /**
     * An `Object` containing properties regarding the timing systems of the engine. 
     *
     * @property timing
     * @type object
     */

    /**
     * A `Number` that specifies the global scaling factor of time for all bodies.
     * A value of `0` freezes the simulation.
     * A value of `0.1` gives a slow-motion effect.
     * A value of `1.2` gives a speed-up effect.
     *
     * @property timing.timeScale
     * @type number
     * @default 1
     */

    /**
     * A `Number` that specifies the current simulation-time in milliseconds starting from `0`. 
     * It is incremented on every `Engine.update` by the given `delta` argument. 
     *
     * @property timing.timestamp
     * @type number
     * @default 0
     */

    /**
     * A `Number` that represents the total execution time elapsed during the last `Engine.update` in milliseconds.
     * It is updated by timing from the start of the last `Engine.update` call until it ends.
     *
     * This value will also include the total execution time of all event handlers directly or indirectly triggered by the engine update.
     *
     * @property timing.lastElapsed
     * @type number
     * @default 0
     */

    /**
     * A `Number` that represents the `delta` value used in the last engine update.
     *
     * @property timing.lastDelta
     * @type number
     * @default 0
     */

    /**
     * A `Matter.Grid` instance.
     *
     * @property grid
     * @type grid
     * @default a Matter.Grid instance
     */

    /**
     * Replaced by and now alias for `engine.grid`.
     *
     * @deprecated use `engine.grid`
     * @property broadphase
     * @type grid
     * @default a Matter.Grid instance
     */

    /**
     * The root `Matter.Composite` instance that will contain all bodies, constraints and other composites to be simulated by this engine.
     *
     * @property world
     * @type composite
     * @default a Matter.Composite instance
     */

    /**
     * An object reserved for storing plugin-specific properties.
     *
     * @property plugin
     * @type {}
     */

    /**
     * The gravity to apply on all bodies in `engine.world`.
     *
     * @property gravity
     * @type object
     */

    /**
     * The gravity x component.
     *
     * @property gravity.x
     * @type object
     * @default 0
     */

    /**
     * The gravity y component.
     *
     * @property gravity.y
     * @type object
     * @default 1
     */

    /**
     * The gravity scale factor.
     *
     * @property gravity.scale
     * @type object
     * @default 0.001
     */

})();


/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Resolver` module contains methods for resolving collision pairs.
*
* @class Resolver
*/

var Resolver = {};

module.exports = Resolver;

var Vertices = __webpack_require__(3);
var Vector = __webpack_require__(2);
var Common = __webpack_require__(0);
var Bounds = __webpack_require__(1);

(function() {

    Resolver._restingThresh = 4;
    Resolver._restingThreshTangent = 6;
    Resolver._positionDampen = 0.9;
    Resolver._positionWarming = 0.8;
    Resolver._frictionNormalMultiplier = 5;

    /**
     * Prepare pairs for position solving.
     * @method preSolvePosition
     * @param {pair[]} pairs
     */
    Resolver.preSolvePosition = function(pairs) {
        var i,
            pair,
            activeCount;

        // find total contacts on each body
        for (i = 0; i < pairs.length; i++) {
            pair = pairs[i];
            
            if (!pair.isActive)
                continue;
            
            activeCount = pair.activeContacts.length;
            pair.collision.parentA.totalContacts += activeCount;
            pair.collision.parentB.totalContacts += activeCount;
        }
    };

    /**
     * Find a solution for pair positions.
     * @method solvePosition
     * @param {pair[]} pairs
     * @param {number} timeScale
     */
    Resolver.solvePosition = function(pairs, timeScale) {
        var i,
            pair,
            collision,
            bodyA,
            bodyB,
            normal,
            bodyBtoA,
            contactShare,
            positionImpulse,
            contactCount = {},
            tempA = Vector._temp[0],
            tempB = Vector._temp[1],
            tempC = Vector._temp[2],
            tempD = Vector._temp[3];

        // find impulses required to resolve penetration
        for (i = 0; i < pairs.length; i++) {
            pair = pairs[i];
            
            if (!pair.isActive || pair.isSensor)
                continue;

            collision = pair.collision;
            bodyA = collision.parentA;
            bodyB = collision.parentB;
            normal = collision.normal;

            // get current separation between body edges involved in collision
            bodyBtoA = Vector.sub(Vector.add(bodyB.positionImpulse, bodyB.position, tempA), 
                Vector.add(bodyA.positionImpulse, 
                    Vector.sub(bodyB.position, collision.penetration, tempB), tempC), tempD);

            pair.separation = Vector.dot(normal, bodyBtoA);
        }
        
        for (i = 0; i < pairs.length; i++) {
            pair = pairs[i];

            if (!pair.isActive || pair.isSensor)
                continue;
            
            collision = pair.collision;
            bodyA = collision.parentA;
            bodyB = collision.parentB;
            normal = collision.normal;
            positionImpulse = (pair.separation - pair.slop) * timeScale;

            if (bodyA.isStatic || bodyB.isStatic)
                positionImpulse *= 2;
            
            if (!(bodyA.isStatic || bodyA.isSleeping)) {
                contactShare = Resolver._positionDampen / bodyA.totalContacts;
                bodyA.positionImpulse.x += normal.x * positionImpulse * contactShare;
                bodyA.positionImpulse.y += normal.y * positionImpulse * contactShare;
            }

            if (!(bodyB.isStatic || bodyB.isSleeping)) {
                contactShare = Resolver._positionDampen / bodyB.totalContacts;
                bodyB.positionImpulse.x -= normal.x * positionImpulse * contactShare;
                bodyB.positionImpulse.y -= normal.y * positionImpulse * contactShare;
            }
        }
    };

    /**
     * Apply position resolution.
     * @method postSolvePosition
     * @param {body[]} bodies
     */
    Resolver.postSolvePosition = function(bodies) {
        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i];

            // reset contact count
            body.totalContacts = 0;

            if (body.positionImpulse.x !== 0 || body.positionImpulse.y !== 0) {
                // update body geometry
                for (var j = 0; j < body.parts.length; j++) {
                    var part = body.parts[j];
                    Vertices.translate(part.vertices, body.positionImpulse);
                    Bounds.update(part.bounds, part.vertices, body.velocity);
                    part.position.x += body.positionImpulse.x;
                    part.position.y += body.positionImpulse.y;
                }

                // move the body without changing velocity
                body.positionPrev.x += body.positionImpulse.x;
                body.positionPrev.y += body.positionImpulse.y;

                if (Vector.dot(body.positionImpulse, body.velocity) < 0) {
                    // reset cached impulse if the body has velocity along it
                    body.positionImpulse.x = 0;
                    body.positionImpulse.y = 0;
                } else {
                    // warm the next iteration
                    body.positionImpulse.x *= Resolver._positionWarming;
                    body.positionImpulse.y *= Resolver._positionWarming;
                }
            }
        }
    };

    /**
     * Prepare pairs for velocity solving.
     * @method preSolveVelocity
     * @param {pair[]} pairs
     */
    Resolver.preSolveVelocity = function(pairs) {
        var i,
            j,
            pair,
            contacts,
            collision,
            bodyA,
            bodyB,
            normal,
            tangent,
            contact,
            contactVertex,
            normalImpulse,
            tangentImpulse,
            offset,
            impulse = Vector._temp[0],
            tempA = Vector._temp[1];
        
        for (i = 0; i < pairs.length; i++) {
            pair = pairs[i];
            
            if (!pair.isActive || pair.isSensor)
                continue;
            
            contacts = pair.activeContacts;
            collision = pair.collision;
            bodyA = collision.parentA;
            bodyB = collision.parentB;
            normal = collision.normal;
            tangent = collision.tangent;

            // resolve each contact
            for (j = 0; j < contacts.length; j++) {
                contact = contacts[j];
                contactVertex = contact.vertex;
                normalImpulse = contact.normalImpulse;
                tangentImpulse = contact.tangentImpulse;

                if (normalImpulse !== 0 || tangentImpulse !== 0) {
                    // total impulse from contact
                    impulse.x = (normal.x * normalImpulse) + (tangent.x * tangentImpulse);
                    impulse.y = (normal.y * normalImpulse) + (tangent.y * tangentImpulse);
                    
                    // apply impulse from contact
                    if (!(bodyA.isStatic || bodyA.isSleeping)) {
                        offset = Vector.sub(contactVertex, bodyA.position, tempA);
                        bodyA.positionPrev.x += impulse.x * bodyA.inverseMass;
                        bodyA.positionPrev.y += impulse.y * bodyA.inverseMass;
                        bodyA.anglePrev += Vector.cross(offset, impulse) * bodyA.inverseInertia;
                    }

                    if (!(bodyB.isStatic || bodyB.isSleeping)) {
                        offset = Vector.sub(contactVertex, bodyB.position, tempA);
                        bodyB.positionPrev.x -= impulse.x * bodyB.inverseMass;
                        bodyB.positionPrev.y -= impulse.y * bodyB.inverseMass;
                        bodyB.anglePrev -= Vector.cross(offset, impulse) * bodyB.inverseInertia;
                    }
                }
            }
        }
    };

    /**
     * Find a solution for pair velocities.
     * @method solveVelocity
     * @param {pair[]} pairs
     * @param {number} timeScale
     */
    Resolver.solveVelocity = function(pairs, timeScale) {
        var timeScaleSquared = timeScale * timeScale,
            impulse = Vector._temp[0],
            tempA = Vector._temp[1],
            tempB = Vector._temp[2],
            tempC = Vector._temp[3],
            tempD = Vector._temp[4],
            tempE = Vector._temp[5];
        
        for (var i = 0; i < pairs.length; i++) {
            var pair = pairs[i];
            
            if (!pair.isActive || pair.isSensor)
                continue;
            
            var collision = pair.collision,
                bodyA = collision.parentA,
                bodyB = collision.parentB,
                normal = collision.normal,
                tangent = collision.tangent,
                contacts = pair.activeContacts,
                contactShare = 1 / contacts.length;

            // update body velocities
            bodyA.velocity.x = bodyA.position.x - bodyA.positionPrev.x;
            bodyA.velocity.y = bodyA.position.y - bodyA.positionPrev.y;
            bodyB.velocity.x = bodyB.position.x - bodyB.positionPrev.x;
            bodyB.velocity.y = bodyB.position.y - bodyB.positionPrev.y;
            bodyA.angularVelocity = bodyA.angle - bodyA.anglePrev;
            bodyB.angularVelocity = bodyB.angle - bodyB.anglePrev;

            // resolve each contact
            for (var j = 0; j < contacts.length; j++) {
                var contact = contacts[j],
                    contactVertex = contact.vertex,
                    offsetA = Vector.sub(contactVertex, bodyA.position, tempA),
                    offsetB = Vector.sub(contactVertex, bodyB.position, tempB),
                    velocityPointA = Vector.add(bodyA.velocity, Vector.mult(Vector.perp(offsetA), bodyA.angularVelocity), tempC),
                    velocityPointB = Vector.add(bodyB.velocity, Vector.mult(Vector.perp(offsetB), bodyB.angularVelocity), tempD), 
                    relativeVelocity = Vector.sub(velocityPointA, velocityPointB, tempE),
                    normalVelocity = Vector.dot(normal, relativeVelocity);

                var tangentVelocity = Vector.dot(tangent, relativeVelocity),
                    tangentSpeed = Math.abs(tangentVelocity),
                    tangentVelocityDirection = Common.sign(tangentVelocity);

                // raw impulses
                var normalImpulse = (1 + pair.restitution) * normalVelocity,
                    normalForce = Common.clamp(pair.separation + normalVelocity, 0, 1) * Resolver._frictionNormalMultiplier;

                // coulomb friction
                var tangentImpulse = tangentVelocity,
                    maxFriction = Infinity;

                if (tangentSpeed > pair.friction * pair.frictionStatic * normalForce * timeScaleSquared) {
                    maxFriction = tangentSpeed;
                    tangentImpulse = Common.clamp(
                        pair.friction * tangentVelocityDirection * timeScaleSquared,
                        -maxFriction, maxFriction
                    );
                }

                // modify impulses accounting for mass, inertia and offset
                var oAcN = Vector.cross(offsetA, normal),
                    oBcN = Vector.cross(offsetB, normal),
                    share = contactShare / (bodyA.inverseMass + bodyB.inverseMass + bodyA.inverseInertia * oAcN * oAcN  + bodyB.inverseInertia * oBcN * oBcN);

                normalImpulse *= share;
                tangentImpulse *= share;

                // handle high velocity and resting collisions separately
                if (normalVelocity < 0 && normalVelocity * normalVelocity > Resolver._restingThresh * timeScaleSquared) {
                    // high normal velocity so clear cached contact normal impulse
                    contact.normalImpulse = 0;
                } else {
                    // solve resting collision constraints using Erin Catto's method (GDC08)
                    // impulse constraint tends to 0
                    var contactNormalImpulse = contact.normalImpulse;
                    contact.normalImpulse = Math.min(contact.normalImpulse + normalImpulse, 0);
                    normalImpulse = contact.normalImpulse - contactNormalImpulse;
                }

                // handle high velocity and resting collisions separately
                if (tangentVelocity * tangentVelocity > Resolver._restingThreshTangent * timeScaleSquared) {
                    // high tangent velocity so clear cached contact tangent impulse
                    contact.tangentImpulse = 0;
                } else {
                    // solve resting collision constraints using Erin Catto's method (GDC08)
                    // tangent impulse tends to -tangentSpeed or +tangentSpeed
                    var contactTangentImpulse = contact.tangentImpulse;
                    contact.tangentImpulse = Common.clamp(contact.tangentImpulse + tangentImpulse, -maxFriction, maxFriction);
                    tangentImpulse = contact.tangentImpulse - contactTangentImpulse;
                }

                // total impulse from contact
                impulse.x = (normal.x * normalImpulse) + (tangent.x * tangentImpulse);
                impulse.y = (normal.y * normalImpulse) + (tangent.y * tangentImpulse);
                
                // apply impulse from contact
                if (!(bodyA.isStatic || bodyA.isSleeping)) {
                    bodyA.positionPrev.x += impulse.x * bodyA.inverseMass;
                    bodyA.positionPrev.y += impulse.y * bodyA.inverseMass;
                    bodyA.anglePrev += Vector.cross(offsetA, impulse) * bodyA.inverseInertia;
                }

                if (!(bodyB.isStatic || bodyB.isSleeping)) {
                    bodyB.positionPrev.x -= impulse.x * bodyB.inverseMass;
                    bodyB.positionPrev.y -= impulse.y * bodyB.inverseMass;
                    bodyB.anglePrev -= Vector.cross(offsetB, impulse) * bodyB.inverseInertia;
                }
            }
        }
    };

})();


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Pairs` module contains methods for creating and manipulating collision pair sets.
*
* @class Pairs
*/

var Pairs = {};

module.exports = Pairs;

var Pair = __webpack_require__(9);
var Common = __webpack_require__(0);

(function() {
    
    Pairs._pairMaxIdleLife = 1000;

    /**
     * Creates a new pairs structure.
     * @method create
     * @param {object} options
     * @return {pairs} A new pairs structure
     */
    Pairs.create = function(options) {
        return Common.extend({ 
            table: {},
            list: [],
            collisionStart: [],
            collisionActive: [],
            collisionEnd: []
        }, options);
    };

    /**
     * Updates pairs given a list of collisions.
     * @method update
     * @param {object} pairs
     * @param {collision[]} collisions
     * @param {number} timestamp
     */
    Pairs.update = function(pairs, collisions, timestamp) {
        var pairsList = pairs.list,
            pairsTable = pairs.table,
            collisionStart = pairs.collisionStart,
            collisionEnd = pairs.collisionEnd,
            collisionActive = pairs.collisionActive,
            collision,
            pairId,
            pair,
            i;

        // clear collision state arrays, but maintain old reference
        collisionStart.length = 0;
        collisionEnd.length = 0;
        collisionActive.length = 0;

        for (i = 0; i < pairsList.length; i++) {
            pairsList[i].confirmedActive = false;
        }

        for (i = 0; i < collisions.length; i++) {
            collision = collisions[i];

            if (collision.collided) {
                pairId = Pair.id(collision.bodyA, collision.bodyB);

                pair = pairsTable[pairId];
                
                if (pair) {
                    // pair already exists (but may or may not be active)
                    if (pair.isActive) {
                        // pair exists and is active
                        collisionActive.push(pair);
                    } else {
                        // pair exists but was inactive, so a collision has just started again
                        collisionStart.push(pair);
                    }

                    // update the pair
                    Pair.update(pair, collision, timestamp);
                    pair.confirmedActive = true;
                } else {
                    // pair did not exist, create a new pair
                    pair = Pair.create(collision, timestamp);
                    pairsTable[pairId] = pair;

                    // push the new pair
                    collisionStart.push(pair);
                    pairsList.push(pair);
                }
            }
        }

        // deactivate previously active pairs that are now inactive
        for (i = 0; i < pairsList.length; i++) {
            pair = pairsList[i];
            if (pair.isActive && !pair.confirmedActive) {
                Pair.setActive(pair, false, timestamp);
                collisionEnd.push(pair);
            }
        }
    };
    
    /**
     * Finds and removes pairs that have been inactive for a set amount of time.
     * @method removeOld
     * @param {object} pairs
     * @param {number} timestamp
     */
    Pairs.removeOld = function(pairs, timestamp) {
        var pairsList = pairs.list,
            pairsTable = pairs.table,
            indexesToRemove = [],
            pair,
            collision,
            pairIndex,
            i;

        for (i = 0; i < pairsList.length; i++) {
            pair = pairsList[i];
            collision = pair.collision;
            
            // never remove sleeping pairs
            if (collision.bodyA.isSleeping || collision.bodyB.isSleeping) {
                pair.timeUpdated = timestamp;
                continue;
            }

            // if pair is inactive for too long, mark it to be removed
            if (timestamp - pair.timeUpdated > Pairs._pairMaxIdleLife) {
                indexesToRemove.push(i);
            }
        }

        // remove marked pairs
        for (i = 0; i < indexesToRemove.length; i++) {
            pairIndex = indexesToRemove[i] - i;
            pair = pairsList[pairIndex];
            delete pairsTable[pair.id];
            pairsList.splice(pairIndex, 1);
        }
    };

    /**
     * Clears the given pairs structure.
     * @method clear
     * @param {pairs} pairs
     * @return {pairs} pairs
     */
    Pairs.clear = function(pairs) {
        pairs.table = {};
        pairs.list.length = 0;
        pairs.collisionStart.length = 0;
        pairs.collisionActive.length = 0;
        pairs.collisionEnd.length = 0;
        return pairs;
    };

})();


/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Grid` module contains methods for creating and manipulating collision broadphase grid structures.
*
* @class Grid
*/

var Grid = {};

module.exports = Grid;

var Pair = __webpack_require__(9);
var Common = __webpack_require__(0);

(function() {

    /**
     * Creates a new grid.
     * @method create
     * @param {} options
     * @return {grid} A new grid
     */
    Grid.create = function(options) {
        var defaults = {
            buckets: {},
            pairs: {},
            pairsList: [],
            bucketWidth: 48,
            bucketHeight: 48
        };

        return Common.extend(defaults, options);
    };

    /**
     * The width of a single grid bucket.
     *
     * @property bucketWidth
     * @type number
     * @default 48
     */

    /**
     * The height of a single grid bucket.
     *
     * @property bucketHeight
     * @type number
     * @default 48
     */

    /**
     * Updates the grid.
     * @method update
     * @param {grid} grid
     * @param {body[]} bodies
     * @param {engine} engine
     * @param {boolean} forceUpdate
     */
    Grid.update = function(grid, bodies, engine, forceUpdate) {
        var i, col, row,
            world = engine.world,
            buckets = grid.buckets,
            bucket,
            bucketId,
            gridChanged = false;

        for (i = 0; i < bodies.length; i++) {
            var body = bodies[i];

            if (body.isSleeping && !forceUpdate)
                continue;

            // temporary back compatibility bounds check
            if (world.bounds && (body.bounds.max.x < world.bounds.min.x || body.bounds.min.x > world.bounds.max.x
                || body.bounds.max.y < world.bounds.min.y || body.bounds.min.y > world.bounds.max.y))
                continue;

            var newRegion = Grid._getRegion(grid, body);

            // if the body has changed grid region
            if (!body.region || newRegion.id !== body.region.id || forceUpdate) {

                if (!body.region || forceUpdate)
                    body.region = newRegion;

                var union = Grid._regionUnion(newRegion, body.region);

                // update grid buckets affected by region change
                // iterate over the union of both regions
                for (col = union.startCol; col <= union.endCol; col++) {
                    for (row = union.startRow; row <= union.endRow; row++) {
                        bucketId = Grid._getBucketId(col, row);
                        bucket = buckets[bucketId];

                        var isInsideNewRegion = (col >= newRegion.startCol && col <= newRegion.endCol
                                                && row >= newRegion.startRow && row <= newRegion.endRow);

                        var isInsideOldRegion = (col >= body.region.startCol && col <= body.region.endCol
                                                && row >= body.region.startRow && row <= body.region.endRow);

                        // remove from old region buckets
                        if (!isInsideNewRegion && isInsideOldRegion) {
                            if (isInsideOldRegion) {
                                if (bucket)
                                    Grid._bucketRemoveBody(grid, bucket, body);
                            }
                        }

                        // add to new region buckets
                        if (body.region === newRegion || (isInsideNewRegion && !isInsideOldRegion) || forceUpdate) {
                            if (!bucket)
                                bucket = Grid._createBucket(buckets, bucketId);
                            Grid._bucketAddBody(grid, bucket, body);
                        }
                    }
                }

                // set the new region
                body.region = newRegion;

                // flag changes so we can update pairs
                gridChanged = true;
            }
        }

        // update pairs list only if pairs changed (i.e. a body changed region)
        if (gridChanged)
            grid.pairsList = Grid._createActivePairsList(grid);
    };

    /**
     * Clears the grid.
     * @method clear
     * @param {grid} grid
     */
    Grid.clear = function(grid) {
        grid.buckets = {};
        grid.pairs = {};
        grid.pairsList = [];
    };

    /**
     * Finds the union of two regions.
     * @method _regionUnion
     * @private
     * @param {} regionA
     * @param {} regionB
     * @return {} region
     */
    Grid._regionUnion = function(regionA, regionB) {
        var startCol = Math.min(regionA.startCol, regionB.startCol),
            endCol = Math.max(regionA.endCol, regionB.endCol),
            startRow = Math.min(regionA.startRow, regionB.startRow),
            endRow = Math.max(regionA.endRow, regionB.endRow);

        return Grid._createRegion(startCol, endCol, startRow, endRow);
    };

    /**
     * Gets the region a given body falls in for a given grid.
     * @method _getRegion
     * @private
     * @param {} grid
     * @param {} body
     * @return {} region
     */
    Grid._getRegion = function(grid, body) {
        var bounds = body.bounds,
            startCol = Math.floor(bounds.min.x / grid.bucketWidth),
            endCol = Math.floor(bounds.max.x / grid.bucketWidth),
            startRow = Math.floor(bounds.min.y / grid.bucketHeight),
            endRow = Math.floor(bounds.max.y / grid.bucketHeight);

        return Grid._createRegion(startCol, endCol, startRow, endRow);
    };

    /**
     * Creates a region.
     * @method _createRegion
     * @private
     * @param {} startCol
     * @param {} endCol
     * @param {} startRow
     * @param {} endRow
     * @return {} region
     */
    Grid._createRegion = function(startCol, endCol, startRow, endRow) {
        return { 
            id: startCol + ',' + endCol + ',' + startRow + ',' + endRow,
            startCol: startCol, 
            endCol: endCol, 
            startRow: startRow, 
            endRow: endRow 
        };
    };

    /**
     * Gets the bucket id at the given position.
     * @method _getBucketId
     * @private
     * @param {} column
     * @param {} row
     * @return {string} bucket id
     */
    Grid._getBucketId = function(column, row) {
        return 'C' + column + 'R' + row;
    };

    /**
     * Creates a bucket.
     * @method _createBucket
     * @private
     * @param {} buckets
     * @param {} bucketId
     * @return {} bucket
     */
    Grid._createBucket = function(buckets, bucketId) {
        var bucket = buckets[bucketId] = [];
        return bucket;
    };

    /**
     * Adds a body to a bucket.
     * @method _bucketAddBody
     * @private
     * @param {} grid
     * @param {} bucket
     * @param {} body
     */
    Grid._bucketAddBody = function(grid, bucket, body) {
        // add new pairs
        for (var i = 0; i < bucket.length; i++) {
            var bodyB = bucket[i];

            if (body.id === bodyB.id || (body.isStatic && bodyB.isStatic))
                continue;

            // keep track of the number of buckets the pair exists in
            // important for Grid.update to work
            var pairId = Pair.id(body, bodyB),
                pair = grid.pairs[pairId];

            if (pair) {
                pair[2] += 1;
            } else {
                grid.pairs[pairId] = [body, bodyB, 1];
            }
        }

        // add to bodies (after pairs, otherwise pairs with self)
        bucket.push(body);
    };

    /**
     * Removes a body from a bucket.
     * @method _bucketRemoveBody
     * @private
     * @param {} grid
     * @param {} bucket
     * @param {} body
     */
    Grid._bucketRemoveBody = function(grid, bucket, body) {
        // remove from bucket
        bucket.splice(Common.indexOf(bucket, body), 1);

        // update pair counts
        for (var i = 0; i < bucket.length; i++) {
            // keep track of the number of buckets the pair exists in
            // important for _createActivePairsList to work
            var bodyB = bucket[i],
                pairId = Pair.id(body, bodyB),
                pair = grid.pairs[pairId];

            if (pair)
                pair[2] -= 1;
        }
    };

    /**
     * Generates a list of the active pairs in the grid.
     * @method _createActivePairsList
     * @private
     * @param {} grid
     * @return [] pairs
     */
    Grid._createActivePairsList = function(grid) {
        var pairKeys,
            pair,
            pairs = [];

        // grid.pairs is used as a hashmap
        pairKeys = Common.keys(grid.pairs);

        // iterate over grid.pairs
        for (var k = 0; k < pairKeys.length; k++) {
            pair = grid.pairs[pairKeys[k]];

            // if pair exists in at least one bucket
            // it is a pair that needs further collision testing so push it
            if (pair[2] > 0) {
                pairs.push(pair);
            } else {
                delete grid.pairs[pairKeys[k]];
            }
        }

        return pairs;
    };
    
})();


/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

var Matter = module.exports = __webpack_require__(23);

Matter.Axes = __webpack_require__(10);
Matter.Bodies = __webpack_require__(11);
Matter.Body = __webpack_require__(6);
Matter.Bounds = __webpack_require__(1);
Matter.Common = __webpack_require__(0);
Matter.Composite = __webpack_require__(5);
Matter.Composites = __webpack_require__(24);
Matter.Constraint = __webpack_require__(8);
Matter.Contact = __webpack_require__(17);
Matter.Detector = __webpack_require__(13);
Matter.Engine = __webpack_require__(18);
Matter.Events = __webpack_require__(4);
Matter.Grid = __webpack_require__(21);
Matter.Mouse = __webpack_require__(12);
Matter.MouseConstraint = __webpack_require__(25);
Matter.Pair = __webpack_require__(9);
Matter.Pairs = __webpack_require__(20);
Matter.Plugin = __webpack_require__(15);
Matter.Query = __webpack_require__(26);
Matter.Render = __webpack_require__(16);
Matter.Resolver = __webpack_require__(19);
Matter.Runner = __webpack_require__(27);
Matter.SAT = __webpack_require__(14);
Matter.Sleeping = __webpack_require__(7);
Matter.Svg = __webpack_require__(28);
Matter.Vector = __webpack_require__(2);
Matter.Vertices = __webpack_require__(3);
Matter.World = __webpack_require__(29);

// temporary back compatibility
Matter.Engine.run = Matter.Runner.run;
Matter.Common.deprecated(Matter.Engine, 'run', 'Engine.run ➤ use Matter.Runner.run(engine) instead');


/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter` module is the top level namespace. It also includes a function for installing plugins on top of the library.
*
* @class Matter
*/

var Matter = {};

module.exports = Matter;

var Plugin = __webpack_require__(15);
var Common = __webpack_require__(0);

(function() {

    /**
     * The library name.
     * @property name
     * @readOnly
     * @type {String}
     */
    Matter.name = 'matter-js';

    /**
     * The library version.
     * @property version
     * @readOnly
     * @type {String}
     */
    Matter.version =  true ? "0.17.1" : undefined;

    /**
     * A list of plugin dependencies to be installed. These are normally set and installed through `Matter.use`.
     * Alternatively you may set `Matter.uses` manually and install them by calling `Plugin.use(Matter)`.
     * @property uses
     * @type {Array}
     */
    Matter.uses = [];

    /**
     * The plugins that have been installed through `Matter.Plugin.install`. Read only.
     * @property used
     * @readOnly
     * @type {Array}
     */
    Matter.used = [];

    /**
     * Installs the given plugins on the `Matter` namespace.
     * This is a short-hand for `Plugin.use`, see it for more information.
     * Call this function once at the start of your code, with all of the plugins you wish to install as arguments.
     * Avoid calling this function multiple times unless you intend to manually control installation order.
     * @method use
     * @param ...plugin {Function} The plugin(s) to install on `base` (multi-argument).
     */
    Matter.use = function() {
        Plugin.use(Matter, Array.prototype.slice.call(arguments));
    };

    /**
     * Chains a function to excute before the original function on the given `path` relative to `Matter`.
     * See also docs for `Common.chain`.
     * @method before
     * @param {string} path The path relative to `Matter`
     * @param {function} func The function to chain before the original
     * @return {function} The chained function that replaced the original
     */
    Matter.before = function(path, func) {
        path = path.replace(/^Matter./, '');
        return Common.chainPathBefore(Matter, path, func);
    };

    /**
     * Chains a function to excute after the original function on the given `path` relative to `Matter`.
     * See also docs for `Common.chain`.
     * @method after
     * @param {string} path The path relative to `Matter`
     * @param {function} func The function to chain after the original
     * @return {function} The chained function that replaced the original
     */
    Matter.after = function(path, func) {
        path = path.replace(/^Matter./, '');
        return Common.chainPathAfter(Matter, path, func);
    };

})();


/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Composites` module contains factory methods for creating composite bodies
* with commonly used configurations (such as stacks and chains).
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Composites
*/

var Composites = {};

module.exports = Composites;

var Composite = __webpack_require__(5);
var Constraint = __webpack_require__(8);
var Common = __webpack_require__(0);
var Body = __webpack_require__(6);
var Bodies = __webpack_require__(11);
var deprecated = Common.deprecated;

(function() {

    /**
     * Create a new composite containing bodies created in the callback in a grid arrangement.
     * This function uses the body's bounds to prevent overlaps.
     * @method stack
     * @param {number} xx
     * @param {number} yy
     * @param {number} columns
     * @param {number} rows
     * @param {number} columnGap
     * @param {number} rowGap
     * @param {function} callback
     * @return {composite} A new composite containing objects created in the callback
     */
    Composites.stack = function(xx, yy, columns, rows, columnGap, rowGap, callback) {
        var stack = Composite.create({ label: 'Stack' }),
            x = xx,
            y = yy,
            lastBody,
            i = 0;

        for (var row = 0; row < rows; row++) {
            var maxHeight = 0;
            
            for (var column = 0; column < columns; column++) {
                var body = callback(x, y, column, row, lastBody, i);
                    
                if (body) {
                    var bodyHeight = body.bounds.max.y - body.bounds.min.y,
                        bodyWidth = body.bounds.max.x - body.bounds.min.x; 

                    if (bodyHeight > maxHeight)
                        maxHeight = bodyHeight;
                    
                    Body.translate(body, { x: bodyWidth * 0.5, y: bodyHeight * 0.5 });

                    x = body.bounds.max.x + columnGap;

                    Composite.addBody(stack, body);
                    
                    lastBody = body;
                    i += 1;
                } else {
                    x += columnGap;
                }
            }
            
            y += maxHeight + rowGap;
            x = xx;
        }

        return stack;
    };
    
    /**
     * Chains all bodies in the given composite together using constraints.
     * @method chain
     * @param {composite} composite
     * @param {number} xOffsetA
     * @param {number} yOffsetA
     * @param {number} xOffsetB
     * @param {number} yOffsetB
     * @param {object} options
     * @return {composite} A new composite containing objects chained together with constraints
     */
    Composites.chain = function(composite, xOffsetA, yOffsetA, xOffsetB, yOffsetB, options) {
        var bodies = composite.bodies;
        
        for (var i = 1; i < bodies.length; i++) {
            var bodyA = bodies[i - 1],
                bodyB = bodies[i],
                bodyAHeight = bodyA.bounds.max.y - bodyA.bounds.min.y,
                bodyAWidth = bodyA.bounds.max.x - bodyA.bounds.min.x, 
                bodyBHeight = bodyB.bounds.max.y - bodyB.bounds.min.y,
                bodyBWidth = bodyB.bounds.max.x - bodyB.bounds.min.x;
        
            var defaults = {
                bodyA: bodyA,
                pointA: { x: bodyAWidth * xOffsetA, y: bodyAHeight * yOffsetA },
                bodyB: bodyB,
                pointB: { x: bodyBWidth * xOffsetB, y: bodyBHeight * yOffsetB }
            };
            
            var constraint = Common.extend(defaults, options);
        
            Composite.addConstraint(composite, Constraint.create(constraint));
        }

        composite.label += ' Chain';
        
        return composite;
    };

    /**
     * Connects bodies in the composite with constraints in a grid pattern, with optional cross braces.
     * @method mesh
     * @param {composite} composite
     * @param {number} columns
     * @param {number} rows
     * @param {boolean} crossBrace
     * @param {object} options
     * @return {composite} The composite containing objects meshed together with constraints
     */
    Composites.mesh = function(composite, columns, rows, crossBrace, options) {
        var bodies = composite.bodies,
            row,
            col,
            bodyA,
            bodyB,
            bodyC;
        
        for (row = 0; row < rows; row++) {
            for (col = 1; col < columns; col++) {
                bodyA = bodies[(col - 1) + (row * columns)];
                bodyB = bodies[col + (row * columns)];
                Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyA, bodyB: bodyB }, options)));
            }

            if (row > 0) {
                for (col = 0; col < columns; col++) {
                    bodyA = bodies[col + ((row - 1) * columns)];
                    bodyB = bodies[col + (row * columns)];
                    Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyA, bodyB: bodyB }, options)));

                    if (crossBrace && col > 0) {
                        bodyC = bodies[(col - 1) + ((row - 1) * columns)];
                        Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyC, bodyB: bodyB }, options)));
                    }

                    if (crossBrace && col < columns - 1) {
                        bodyC = bodies[(col + 1) + ((row - 1) * columns)];
                        Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyC, bodyB: bodyB }, options)));
                    }
                }
            }
        }

        composite.label += ' Mesh';
        
        return composite;
    };
    
    /**
     * Create a new composite containing bodies created in the callback in a pyramid arrangement.
     * This function uses the body's bounds to prevent overlaps.
     * @method pyramid
     * @param {number} xx
     * @param {number} yy
     * @param {number} columns
     * @param {number} rows
     * @param {number} columnGap
     * @param {number} rowGap
     * @param {function} callback
     * @return {composite} A new composite containing objects created in the callback
     */
    Composites.pyramid = function(xx, yy, columns, rows, columnGap, rowGap, callback) {
        return Composites.stack(xx, yy, columns, rows, columnGap, rowGap, function(x, y, column, row, lastBody, i) {
            var actualRows = Math.min(rows, Math.ceil(columns / 2)),
                lastBodyWidth = lastBody ? lastBody.bounds.max.x - lastBody.bounds.min.x : 0;
            
            if (row > actualRows)
                return;
            
            // reverse row order
            row = actualRows - row;
            
            var start = row,
                end = columns - 1 - row;

            if (column < start || column > end)
                return;
            
            // retroactively fix the first body's position, since width was unknown
            if (i === 1) {
                Body.translate(lastBody, { x: (column + (columns % 2 === 1 ? 1 : -1)) * lastBodyWidth, y: 0 });
            }

            var xOffset = lastBody ? column * lastBodyWidth : 0;
            
            return callback(xx + xOffset + column * columnGap, y, column, row, lastBody, i);
        });
    };

    /**
     * This has now moved to the [newtonsCradle example](https://github.com/liabru/matter-js/blob/master/examples/newtonsCradle.js), follow that instead as this function is deprecated here.
     * @deprecated moved to newtonsCradle example
     * @method newtonsCradle
     * @param {number} xx
     * @param {number} yy
     * @param {number} number
     * @param {number} size
     * @param {number} length
     * @return {composite} A new composite newtonsCradle body
     */
    Composites.newtonsCradle = function(xx, yy, number, size, length) {
        var newtonsCradle = Composite.create({ label: 'Newtons Cradle' });

        for (var i = 0; i < number; i++) {
            var separation = 1.9,
                circle = Bodies.circle(xx + i * (size * separation), yy + length, size, 
                    { inertia: Infinity, restitution: 1, friction: 0, frictionAir: 0.0001, slop: 1 }),
                constraint = Constraint.create({ pointA: { x: xx + i * (size * separation), y: yy }, bodyB: circle });

            Composite.addBody(newtonsCradle, circle);
            Composite.addConstraint(newtonsCradle, constraint);
        }

        return newtonsCradle;
    };

    deprecated(Composites, 'newtonsCradle', 'Composites.newtonsCradle ➤ moved to newtonsCradle example');
    
    /**
     * This has now moved to the [car example](https://github.com/liabru/matter-js/blob/master/examples/car.js), follow that instead as this function is deprecated here.
     * @deprecated moved to car example
     * @method car
     * @param {number} xx
     * @param {number} yy
     * @param {number} width
     * @param {number} height
     * @param {number} wheelSize
     * @return {composite} A new composite car body
     */
    Composites.car = function(xx, yy, width, height, wheelSize) {
        var group = Body.nextGroup(true),
            wheelBase = 20,
            wheelAOffset = -width * 0.5 + wheelBase,
            wheelBOffset = width * 0.5 - wheelBase,
            wheelYOffset = 0;
    
        var car = Composite.create({ label: 'Car' }),
            body = Bodies.rectangle(xx, yy, width, height, { 
                collisionFilter: {
                    group: group
                },
                chamfer: {
                    radius: height * 0.5
                },
                density: 0.0002
            });
    
        var wheelA = Bodies.circle(xx + wheelAOffset, yy + wheelYOffset, wheelSize, { 
            collisionFilter: {
                group: group
            },
            friction: 0.8
        });
                    
        var wheelB = Bodies.circle(xx + wheelBOffset, yy + wheelYOffset, wheelSize, { 
            collisionFilter: {
                group: group
            },
            friction: 0.8
        });
                    
        var axelA = Constraint.create({
            bodyB: body,
            pointB: { x: wheelAOffset, y: wheelYOffset },
            bodyA: wheelA,
            stiffness: 1,
            length: 0
        });
                        
        var axelB = Constraint.create({
            bodyB: body,
            pointB: { x: wheelBOffset, y: wheelYOffset },
            bodyA: wheelB,
            stiffness: 1,
            length: 0
        });
        
        Composite.addBody(car, body);
        Composite.addBody(car, wheelA);
        Composite.addBody(car, wheelB);
        Composite.addConstraint(car, axelA);
        Composite.addConstraint(car, axelB);

        return car;
    };

    deprecated(Composites, 'car', 'Composites.car ➤ moved to car example');

    /**
     * This has now moved to the [softBody example](https://github.com/liabru/matter-js/blob/master/examples/softBody.js)
     * and the [cloth example](https://github.com/liabru/matter-js/blob/master/examples/cloth.js), follow those instead as this function is deprecated here.
     * @deprecated moved to softBody and cloth examples
     * @method softBody
     * @param {number} xx
     * @param {number} yy
     * @param {number} columns
     * @param {number} rows
     * @param {number} columnGap
     * @param {number} rowGap
     * @param {boolean} crossBrace
     * @param {number} particleRadius
     * @param {} particleOptions
     * @param {} constraintOptions
     * @return {composite} A new composite softBody
     */
    Composites.softBody = function(xx, yy, columns, rows, columnGap, rowGap, crossBrace, particleRadius, particleOptions, constraintOptions) {
        particleOptions = Common.extend({ inertia: Infinity }, particleOptions);
        constraintOptions = Common.extend({ stiffness: 0.2, render: { type: 'line', anchors: false } }, constraintOptions);

        var softBody = Composites.stack(xx, yy, columns, rows, columnGap, rowGap, function(x, y) {
            return Bodies.circle(x, y, particleRadius, particleOptions);
        });

        Composites.mesh(softBody, columns, rows, crossBrace, constraintOptions);

        softBody.label = 'Soft Body';

        return softBody;
    };

    deprecated(Composites, 'softBody', 'Composites.softBody ➤ moved to softBody and cloth examples');
})();


/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.MouseConstraint` module contains methods for creating mouse constraints.
* Mouse constraints are used for allowing user interaction, providing the ability to move bodies via the mouse or touch.
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class MouseConstraint
*/

var MouseConstraint = {};

module.exports = MouseConstraint;

var Vertices = __webpack_require__(3);
var Sleeping = __webpack_require__(7);
var Mouse = __webpack_require__(12);
var Events = __webpack_require__(4);
var Detector = __webpack_require__(13);
var Constraint = __webpack_require__(8);
var Composite = __webpack_require__(5);
var Common = __webpack_require__(0);
var Bounds = __webpack_require__(1);

(function() {

    /**
     * Creates a new mouse constraint.
     * All properties have default values, and many are pre-calculated automatically based on other properties.
     * See the properties section below for detailed information on what you can pass via the `options` object.
     * @method create
     * @param {engine} engine
     * @param {} options
     * @return {MouseConstraint} A new MouseConstraint
     */
    MouseConstraint.create = function(engine, options) {
        var mouse = (engine ? engine.mouse : null) || (options ? options.mouse : null);

        if (!mouse) {
            if (engine && engine.render && engine.render.canvas) {
                mouse = Mouse.create(engine.render.canvas);
            } else if (options && options.element) {
                mouse = Mouse.create(options.element);
            } else {
                mouse = Mouse.create();
                Common.warn('MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected');
            }
        }

        var constraint = Constraint.create({ 
            label: 'Mouse Constraint',
            pointA: mouse.position,
            pointB: { x: 0, y: 0 },
            length: 0.01, 
            stiffness: 0.1,
            angularStiffness: 1,
            render: {
                strokeStyle: '#90EE90',
                lineWidth: 3
            }
        });

        var defaults = {
            type: 'mouseConstraint',
            mouse: mouse,
            element: null,
            body: null,
            constraint: constraint,
            collisionFilter: {
                category: 0x0001,
                mask: 0xFFFFFFFF,
                group: 0
            }
        };

        var mouseConstraint = Common.extend(defaults, options);

        Events.on(engine, 'beforeUpdate', function() {
            var allBodies = Composite.allBodies(engine.world);
            MouseConstraint.update(mouseConstraint, allBodies);
            MouseConstraint._triggerEvents(mouseConstraint);
        });

        return mouseConstraint;
    };

    /**
     * Updates the given mouse constraint.
     * @private
     * @method update
     * @param {MouseConstraint} mouseConstraint
     * @param {body[]} bodies
     */
    MouseConstraint.update = function(mouseConstraint, bodies) {
        var mouse = mouseConstraint.mouse,
            constraint = mouseConstraint.constraint,
            body = mouseConstraint.body;

        if (mouse.button === 0) {
            if (!constraint.bodyB) {
                for (var i = 0; i < bodies.length; i++) {
                    body = bodies[i];
                    if (Bounds.contains(body.bounds, mouse.position) 
                            && Detector.canCollide(body.collisionFilter, mouseConstraint.collisionFilter)) {
                        for (var j = body.parts.length > 1 ? 1 : 0; j < body.parts.length; j++) {
                            var part = body.parts[j];
                            if (Vertices.contains(part.vertices, mouse.position)) {
                                constraint.pointA = mouse.position;
                                constraint.bodyB = mouseConstraint.body = body;
                                constraint.pointB = { x: mouse.position.x - body.position.x, y: mouse.position.y - body.position.y };
                                constraint.angleB = body.angle;

                                Sleeping.set(body, false);
                                Events.trigger(mouseConstraint, 'startdrag', { mouse: mouse, body: body });

                                break;
                            }
                        }
                    }
                }
            } else {
                Sleeping.set(constraint.bodyB, false);
                constraint.pointA = mouse.position;
            }
        } else {
            constraint.bodyB = mouseConstraint.body = null;
            constraint.pointB = null;

            if (body)
                Events.trigger(mouseConstraint, 'enddrag', { mouse: mouse, body: body });
        }
    };

    /**
     * Triggers mouse constraint events.
     * @method _triggerEvents
     * @private
     * @param {mouse} mouseConstraint
     */
    MouseConstraint._triggerEvents = function(mouseConstraint) {
        var mouse = mouseConstraint.mouse,
            mouseEvents = mouse.sourceEvents;

        if (mouseEvents.mousemove)
            Events.trigger(mouseConstraint, 'mousemove', { mouse: mouse });

        if (mouseEvents.mousedown)
            Events.trigger(mouseConstraint, 'mousedown', { mouse: mouse });

        if (mouseEvents.mouseup)
            Events.trigger(mouseConstraint, 'mouseup', { mouse: mouse });

        // reset the mouse state ready for the next step
        Mouse.clearSourceEvents(mouse);
    };

    /*
    *
    *  Events Documentation
    *
    */

    /**
    * Fired when the mouse has moved (or a touch moves) during the last step
    *
    * @event mousemove
    * @param {} event An event object
    * @param {mouse} event.mouse The engine's mouse instance
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired when the mouse is down (or a touch has started) during the last step
    *
    * @event mousedown
    * @param {} event An event object
    * @param {mouse} event.mouse The engine's mouse instance
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired when the mouse is up (or a touch has ended) during the last step
    *
    * @event mouseup
    * @param {} event An event object
    * @param {mouse} event.mouse The engine's mouse instance
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired when the user starts dragging a body
    *
    * @event startdrag
    * @param {} event An event object
    * @param {mouse} event.mouse The engine's mouse instance
    * @param {body} event.body The body being dragged
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired when the user ends dragging a body
    *
    * @event enddrag
    * @param {} event An event object
    * @param {mouse} event.mouse The engine's mouse instance
    * @param {body} event.body The body that has stopped being dragged
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /*
    *
    *  Properties Documentation
    *
    */

    /**
     * A `String` denoting the type of object.
     *
     * @property type
     * @type string
     * @default "constraint"
     * @readOnly
     */

    /**
     * The `Mouse` instance in use. If not supplied in `MouseConstraint.create`, one will be created.
     *
     * @property mouse
     * @type mouse
     * @default mouse
     */

    /**
     * The `Body` that is currently being moved by the user, or `null` if no body.
     *
     * @property body
     * @type body
     * @default null
     */

    /**
     * The `Constraint` object that is used to move the body during interaction.
     *
     * @property constraint
     * @type constraint
     */

    /**
     * An `Object` that specifies the collision filter properties.
     * The collision filter allows the user to define which types of body this mouse constraint can interact with.
     * See `body.collisionFilter` for more information.
     *
     * @property collisionFilter
     * @type object
     */

})();


/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Query` module contains methods for performing collision queries.
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Query
*/

var Query = {};

module.exports = Query;

var Vector = __webpack_require__(2);
var SAT = __webpack_require__(14);
var Bounds = __webpack_require__(1);
var Bodies = __webpack_require__(11);
var Vertices = __webpack_require__(3);

(function() {

    /**
     * Returns a list of collisions between `body` and `bodies`.
     * @method collides
     * @param {body} body
     * @param {body[]} bodies
     * @return {object[]} Collisions
     */
    Query.collides = function(body, bodies) {
        var collisions = [];

        for (var i = 0; i < bodies.length; i++) {
            var bodyA = bodies[i];
            
            if (Bounds.overlaps(bodyA.bounds, body.bounds)) {
                for (var j = bodyA.parts.length === 1 ? 0 : 1; j < bodyA.parts.length; j++) {
                    var part = bodyA.parts[j];

                    if (Bounds.overlaps(part.bounds, body.bounds)) {
                        var collision = SAT.collides(part, body);

                        if (collision.collided) {
                            collisions.push(collision);
                            break;
                        }
                    }
                }
            }
        }

        return collisions;
    };

    /**
     * Casts a ray segment against a set of bodies and returns all collisions, ray width is optional. Intersection points are not provided.
     * @method ray
     * @param {body[]} bodies
     * @param {vector} startPoint
     * @param {vector} endPoint
     * @param {number} [rayWidth]
     * @return {object[]} Collisions
     */
    Query.ray = function(bodies, startPoint, endPoint, rayWidth) {
        rayWidth = rayWidth || 1e-100;

        var rayAngle = Vector.angle(startPoint, endPoint),
            rayLength = Vector.magnitude(Vector.sub(startPoint, endPoint)),
            rayX = (endPoint.x + startPoint.x) * 0.5,
            rayY = (endPoint.y + startPoint.y) * 0.5,
            ray = Bodies.rectangle(rayX, rayY, rayLength, rayWidth, { angle: rayAngle }),
            collisions = Query.collides(ray, bodies);

        for (var i = 0; i < collisions.length; i += 1) {
            var collision = collisions[i];
            collision.body = collision.bodyB = collision.bodyA;            
        }

        return collisions;
    };

    /**
     * Returns all bodies whose bounds are inside (or outside if set) the given set of bounds, from the given set of bodies.
     * @method region
     * @param {body[]} bodies
     * @param {bounds} bounds
     * @param {bool} [outside=false]
     * @return {body[]} The bodies matching the query
     */
    Query.region = function(bodies, bounds, outside) {
        var result = [];

        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i],
                overlaps = Bounds.overlaps(body.bounds, bounds);
            if ((overlaps && !outside) || (!overlaps && outside))
                result.push(body);
        }

        return result;
    };

    /**
     * Returns all bodies whose vertices contain the given point, from the given set of bodies.
     * @method point
     * @param {body[]} bodies
     * @param {vector} point
     * @return {body[]} The bodies matching the query
     */
    Query.point = function(bodies, point) {
        var result = [];

        for (var i = 0; i < bodies.length; i++) {
            var body = bodies[i];
            
            if (Bounds.contains(body.bounds, point)) {
                for (var j = body.parts.length === 1 ? 0 : 1; j < body.parts.length; j++) {
                    var part = body.parts[j];

                    if (Bounds.contains(part.bounds, point)
                        && Vertices.contains(part.vertices, point)) {
                        result.push(body);
                        break;
                    }
                }
            }
        }

        return result;
    };

})();


/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Runner` module is an optional utility which provides a game loop, 
* that handles continuously updating a `Matter.Engine` for you within a browser.
* It is intended for development and debugging purposes, but may also be suitable for simple games.
* If you are using your own game loop instead, then you do not need the `Matter.Runner` module.
* Instead just call `Engine.update(engine, delta)` in your own loop.
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Runner
*/

var Runner = {};

module.exports = Runner;

var Events = __webpack_require__(4);
var Engine = __webpack_require__(18);
var Common = __webpack_require__(0);

(function() {

    var _requestAnimationFrame,
        _cancelAnimationFrame;

    if (typeof window !== 'undefined') {
        _requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame
                                      || window.mozRequestAnimationFrame || window.msRequestAnimationFrame;
   
        _cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame 
                                      || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;
    }

    if (!_requestAnimationFrame) {
        var _frameTimeout;

        _requestAnimationFrame = function(callback){ 
            _frameTimeout = setTimeout(function() { 
                callback(Common.now()); 
            }, 1000 / 60);
        };

        _cancelAnimationFrame = function() {
            clearTimeout(_frameTimeout);
        };
    }

    /**
     * Creates a new Runner. The options parameter is an object that specifies any properties you wish to override the defaults.
     * @method create
     * @param {} options
     */
    Runner.create = function(options) {
        var defaults = {
            fps: 60,
            correction: 1,
            deltaSampleSize: 60,
            counterTimestamp: 0,
            frameCounter: 0,
            deltaHistory: [],
            timePrev: null,
            timeScalePrev: 1,
            frameRequestId: null,
            isFixed: false,
            enabled: true
        };

        var runner = Common.extend(defaults, options);

        runner.delta = runner.delta || 1000 / runner.fps;
        runner.deltaMin = runner.deltaMin || 1000 / runner.fps;
        runner.deltaMax = runner.deltaMax || 1000 / (runner.fps * 0.5);
        runner.fps = 1000 / runner.delta;

        return runner;
    };

    /**
     * Continuously ticks a `Matter.Engine` by calling `Runner.tick` on the `requestAnimationFrame` event.
     * @method run
     * @param {engine} engine
     */
    Runner.run = function(runner, engine) {
        // create runner if engine is first argument
        if (typeof runner.positionIterations !== 'undefined') {
            engine = runner;
            runner = Runner.create();
        }

        (function render(time){
            runner.frameRequestId = _requestAnimationFrame(render);

            if (time && runner.enabled) {
                Runner.tick(runner, engine, time);
            }
        })();

        return runner;
    };

    /**
     * A game loop utility that updates the engine and renderer by one step (a 'tick').
     * Features delta smoothing, time correction and fixed or dynamic timing.
     * Consider just `Engine.update(engine, delta)` if you're using your own loop.
     * @method tick
     * @param {runner} runner
     * @param {engine} engine
     * @param {number} time
     */
    Runner.tick = function(runner, engine, time) {
        var timing = engine.timing,
            correction = 1,
            delta;

        // create an event object
        var event = {
            timestamp: timing.timestamp
        };

        Events.trigger(runner, 'beforeTick', event);

        if (runner.isFixed) {
            // fixed timestep
            delta = runner.delta;
        } else {
            // dynamic timestep based on wall clock between calls
            delta = (time - runner.timePrev) || runner.delta;
            runner.timePrev = time;

            // optimistically filter delta over a few frames, to improve stability
            runner.deltaHistory.push(delta);
            runner.deltaHistory = runner.deltaHistory.slice(-runner.deltaSampleSize);
            delta = Math.min.apply(null, runner.deltaHistory);
            
            // limit delta
            delta = delta < runner.deltaMin ? runner.deltaMin : delta;
            delta = delta > runner.deltaMax ? runner.deltaMax : delta;

            // correction for delta
            correction = delta / runner.delta;

            // update engine timing object
            runner.delta = delta;
        }

        // time correction for time scaling
        if (runner.timeScalePrev !== 0)
            correction *= timing.timeScale / runner.timeScalePrev;

        if (timing.timeScale === 0)
            correction = 0;

        runner.timeScalePrev = timing.timeScale;
        runner.correction = correction;

        // fps counter
        runner.frameCounter += 1;
        if (time - runner.counterTimestamp >= 1000) {
            runner.fps = runner.frameCounter * ((time - runner.counterTimestamp) / 1000);
            runner.counterTimestamp = time;
            runner.frameCounter = 0;
        }

        Events.trigger(runner, 'tick', event);

        // update
        Events.trigger(runner, 'beforeUpdate', event);
        Engine.update(engine, delta, correction);
        Events.trigger(runner, 'afterUpdate', event);

        Events.trigger(runner, 'afterTick', event);
    };

    /**
     * Ends execution of `Runner.run` on the given `runner`, by canceling the animation frame request event loop.
     * If you wish to only temporarily pause the engine, see `engine.enabled` instead.
     * @method stop
     * @param {runner} runner
     */
    Runner.stop = function(runner) {
        _cancelAnimationFrame(runner.frameRequestId);
    };

    /**
     * Alias for `Runner.run`.
     * @method start
     * @param {runner} runner
     * @param {engine} engine
     */
    Runner.start = function(runner, engine) {
        Runner.run(runner, engine);
    };

    /*
    *
    *  Events Documentation
    *
    */

    /**
    * Fired at the start of a tick, before any updates to the engine or timing
    *
    * @event beforeTick
    * @param {} event An event object
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired after engine timing updated, but just before update
    *
    * @event tick
    * @param {} event An event object
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired at the end of a tick, after engine update and after rendering
    *
    * @event afterTick
    * @param {} event An event object
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired before update
    *
    * @event beforeUpdate
    * @param {} event An event object
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /**
    * Fired after update
    *
    * @event afterUpdate
    * @param {} event An event object
    * @param {number} event.timestamp The engine.timing.timestamp of the event
    * @param {} event.source The source object of the event
    * @param {} event.name The name of the event
    */

    /*
    *
    *  Properties Documentation
    *
    */

    /**
     * A flag that specifies whether the runner is running or not.
     *
     * @property enabled
     * @type boolean
     * @default true
     */

    /**
     * A `Boolean` that specifies if the runner should use a fixed timestep (otherwise it is variable).
     * If timing is fixed, then the apparent simulation speed will change depending on the frame rate (but behaviour will be deterministic).
     * If the timing is variable, then the apparent simulation speed will be constant (approximately, but at the cost of determininism).
     *
     * @property isFixed
     * @type boolean
     * @default false
     */

    /**
     * A `Number` that specifies the time step between updates in milliseconds.
     * If `engine.timing.isFixed` is set to `true`, then `delta` is fixed.
     * If it is `false`, then `delta` can dynamically change to maintain the correct apparent simulation speed.
     *
     * @property delta
     * @type number
     * @default 1000 / 60
     */

})();


/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

/**
* The `Matter.Svg` module contains methods for converting SVG images into an array of vector points.
*
* To use this module you also need the SVGPathSeg polyfill: https://github.com/progers/pathseg
*
* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).
*
* @class Svg
*/

var Svg = {};

module.exports = Svg;

var Bounds = __webpack_require__(1);
var Common = __webpack_require__(0);

(function() {

    /**
     * Converts an SVG path into an array of vector points.
     * If the input path forms a concave shape, you must decompose the result into convex parts before use.
     * See `Bodies.fromVertices` which provides support for this.
     * Note that this function is not guaranteed to support complex paths (such as those with holes).
     * You must load the `pathseg.js` polyfill on newer browsers.
     * @method pathToVertices
     * @param {SVGPathElement} path
     * @param {Number} [sampleLength=15]
     * @return {Vector[]} points
     */
    Svg.pathToVertices = function(path, sampleLength) {
        if (typeof window !== 'undefined' && !('SVGPathSeg' in window)) {
            Common.warn('Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.');
        }

        // https://github.com/wout/svg.topoly.js/blob/master/svg.topoly.js
        var i, il, total, point, segment, segments, 
            segmentsQueue, lastSegment, 
            lastPoint, segmentIndex, points = [],
            lx, ly, length = 0, x = 0, y = 0;

        sampleLength = sampleLength || 15;

        var addPoint = function(px, py, pathSegType) {
            // all odd-numbered path types are relative except PATHSEG_CLOSEPATH (1)
            var isRelative = pathSegType % 2 === 1 && pathSegType > 1;

            // when the last point doesn't equal the current point add the current point
            if (!lastPoint || px != lastPoint.x || py != lastPoint.y) {
                if (lastPoint && isRelative) {
                    lx = lastPoint.x;
                    ly = lastPoint.y;
                } else {
                    lx = 0;
                    ly = 0;
                }

                var point = {
                    x: lx + px,
                    y: ly + py
                };

                // set last point
                if (isRelative || !lastPoint) {
                    lastPoint = point;
                }

                points.push(point);

                x = lx + px;
                y = ly + py;
            }
        };

        var addSegmentPoint = function(segment) {
            var segType = segment.pathSegTypeAsLetter.toUpperCase();

            // skip path ends
            if (segType === 'Z') 
                return;

            // map segment to x and y
            switch (segType) {

            case 'M':
            case 'L':
            case 'T':
            case 'C':
            case 'S':
            case 'Q':
                x = segment.x;
                y = segment.y;
                break;
            case 'H':
                x = segment.x;
                break;
            case 'V':
                y = segment.y;
                break;
            }

            addPoint(x, y, segment.pathSegType);
        };

        // ensure path is absolute
        Svg._svgPathToAbsolute(path);

        // get total length
        total = path.getTotalLength();

        // queue segments
        segments = [];
        for (i = 0; i < path.pathSegList.numberOfItems; i += 1)
            segments.push(path.pathSegList.getItem(i));

        segmentsQueue = segments.concat();

        // sample through path
        while (length < total) {
            // get segment at position
            segmentIndex = path.getPathSegAtLength(length);
            segment = segments[segmentIndex];

            // new segment
            if (segment != lastSegment) {
                while (segmentsQueue.length && segmentsQueue[0] != segment)
                    addSegmentPoint(segmentsQueue.shift());

                lastSegment = segment;
            }

            // add points in between when curving
            // TODO: adaptive sampling
            switch (segment.pathSegTypeAsLetter.toUpperCase()) {

            case 'C':
            case 'T':
            case 'S':
            case 'Q':
            case 'A':
                point = path.getPointAtLength(length);
                addPoint(point.x, point.y, 0);
                break;

            }

            // increment by sample value
            length += sampleLength;
        }

        // add remaining segments not passed by sampling
        for (i = 0, il = segmentsQueue.length; i < il; ++i)
            addSegmentPoint(segmentsQueue[i]);

        return points;
    };

    Svg._svgPathToAbsolute = function(path) {
        // http://phrogz.net/convert-svg-path-to-all-absolute-commands
        // Copyright (c) Gavin Kistner
        // http://phrogz.net/js/_ReuseLicense.txt
        // Modifications: tidy formatting and naming
        var x0, y0, x1, y1, x2, y2, segs = path.pathSegList,
            x = 0, y = 0, len = segs.numberOfItems;

        for (var i = 0; i < len; ++i) {
            var seg = segs.getItem(i),
                segType = seg.pathSegTypeAsLetter;

            if (/[MLHVCSQTA]/.test(segType)) {
                if ('x' in seg) x = seg.x;
                if ('y' in seg) y = seg.y;
            } else {
                if ('x1' in seg) x1 = x + seg.x1;
                if ('x2' in seg) x2 = x + seg.x2;
                if ('y1' in seg) y1 = y + seg.y1;
                if ('y2' in seg) y2 = y + seg.y2;
                if ('x' in seg) x += seg.x;
                if ('y' in seg) y += seg.y;

                switch (segType) {

                case 'm':
                    segs.replaceItem(path.createSVGPathSegMovetoAbs(x, y), i);
                    break;
                case 'l':
                    segs.replaceItem(path.createSVGPathSegLinetoAbs(x, y), i);
                    break;
                case 'h':
                    segs.replaceItem(path.createSVGPathSegLinetoHorizontalAbs(x), i);
                    break;
                case 'v':
                    segs.replaceItem(path.createSVGPathSegLinetoVerticalAbs(y), i);
                    break;
                case 'c':
                    segs.replaceItem(path.createSVGPathSegCurvetoCubicAbs(x, y, x1, y1, x2, y2), i);
                    break;
                case 's':
                    segs.replaceItem(path.createSVGPathSegCurvetoCubicSmoothAbs(x, y, x2, y2), i);
                    break;
                case 'q':
                    segs.replaceItem(path.createSVGPathSegCurvetoQuadraticAbs(x, y, x1, y1), i);
                    break;
                case 't':
                    segs.replaceItem(path.createSVGPathSegCurvetoQuadraticSmoothAbs(x, y), i);
                    break;
                case 'a':
                    segs.replaceItem(path.createSVGPathSegArcAbs(x, y, seg.r1, seg.r2, seg.angle, seg.largeArcFlag, seg.sweepFlag), i);
                    break;
                case 'z':
                case 'Z':
                    x = x0;
                    y = y0;
                    break;

                }
            }

            if (segType == 'M' || segType == 'm') {
                x0 = x;
                y0 = y;
            }
        }
    };

})();

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

/**
* This module has now been replaced by `Matter.Composite`.
*
* All usage should be migrated to the equivalent functions found on `Matter.Composite`.
* For example `World.add(world, body)` now becomes `Composite.add(world, body)`.
*
* The property `world.gravity` has been moved to `engine.gravity`.
*
* For back-compatibility purposes this module will remain as a direct alias to `Matter.Composite` in the short term during migration.
* Eventually this alias module will be marked as deprecated and then later removed in a future release.
*
* @class World
*/

var World = {};

module.exports = World;

var Composite = __webpack_require__(5);
var Common = __webpack_require__(0);

(function() {

    /**
     * See above, aliases for back compatibility only
     */
    World.create = Composite.create;
    World.add = Composite.add;
    World.remove = Composite.remove;
    World.clear = Composite.clear;
    World.addComposite = Composite.addComposite;
    World.addBody = Composite.addBody;
    World.addConstraint = Composite.addConstraint;

})();


/***/ })
/******/ ]);
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/webfontloader/webfontloader.js":
/*!*****************************************************!*\
  !*** ./node_modules/webfontloader/webfontloader.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&("style"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}
function w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}
function ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,"link",{rel:"stylesheet",href:b,media:"all"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error("Stylesheet failed to load");d()}):setTimeout(function(){e=!0;d()},0);u(a,"head",b)}
function A(a,b,c,d){var e=a.c.getElementsByTagName("head")[0];if(e){var f=t(a,"script",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,"HEAD"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error("Script load timeout")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||"-"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\W_]+/g,"").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+" "+(a.f+"00")+" 300px "+I(a.c)}function I(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1!=d.indexOf(" ")||/^\d/.test(d)?b.push("'"+d+"'"):b.push(d)}return b.join(",")}function J(a){return a.a+a.f}function H(a){var b="normal";"o"===a.a?b="oblique":"i"===a.a&&(b="italic");return b}
function ga(a){var b=4,c="n",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F("-");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c("wf","loading")]);K(a,"loading")}function L(a){if(a.g){var b=y(a.f,a.a.c("wf","active")),c=[],d=[a.a.c("wf","loading")];b||c.push(a.a.c("wf","inactive"));w(a.f,c,d)}K(a,"inactive")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function N(a){u(a.c,"body",a.a)}function O(a){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+I(a.c)+";"+("font-style:"+H(a)+";font-weight:"+(a.f+"00")+";")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||"BESbswy";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+",serif",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+",sans-serif",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G("serif",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G("sans-serif",J(this.a));a=
O(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:"serif",C:"sans-serif"},S=null;function T(){if(null===S){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f["sans-serif"]=this.m.a.offsetWidth;this.A=q();U(this)};
function la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f["sans-serif"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c("wf",a.c,J(a).toString(),"active")],[b.a.c("wf",a.c,J(a).toString(),"loading"),b.a.c("wf",a.c,J(a).toString(),"inactive")]);K(b,"fontactive",a);this.m=!0;na(this)};
W.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c("wf",a.c,J(a).toString(),"active")),d=[],e=[b.a.c("wf",a.c,J(a).toString(),"loading")];c||d.push(b.a.c("wf",a.c,J(a).toString(),"inactive"));w(b.f,d,e)}K(b,"fontinactive",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c("wf","active")],[a.a.c("wf","loading"),a.a.c("wf","inactive")]),K(a,"active")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};
function qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c("wf",x.c,J(x).toString(),"loading")]);K(r,"fontloading",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);
X=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}
ra.prototype.load=function(a){function b(){if(f["__mti_fntLst"+d]){var c=f["__mti_fntLst"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||"https://fast.fonts.net/jsapi")+"/"+d+".js"+(e?"?v="+e:""),function(e){e?a([]):(f["__MonotypeConfiguration__"+
d]=function(){return c.a},b())}).id="__MonotypeAPIScript__"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(":"),d[1])for(var h=d[1].split(","),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||""}var ua="https://fonts.googleapis.com/css";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(":");3==e.length&&a.f.push(e.pop());var f="";2==e.length&&""!=e[1]&&(f=":");a.a.push(e.join(f))}}
function wa(a){if(0==a.a.length)throw Error("No fonts to load!");if(-1!=a.c.indexOf("kit="))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,"+"));b=a.c+"?family="+c.join("%7C");0<a.f.length&&(b+="&subset="+a.f.join(","));0<a.g.length&&(b+="&text="+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}
var za={latin:"BESbswy","latin-ext":"\u00e7\u00f6\u00fc\u011f\u015f",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},Aa={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Ba={i:"i",italic:"i",n:"n",normal:"n"},
Ca=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;
function Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(":"),e=d[0].replace(/\+/g," "),f=["n4"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(","),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k="";else{k=n[2];k=null==k||""==k?"n":Ba[k];n=n[1];if(null==n||""==n)n="4";else var r=Aa[n],n=r?r:isNaN(n)?"4":n.substr(0,1);k=[k,n].join("")}}else k="";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(","):
g,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||"https://use.typekit.net")+"/"+b+".js",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga("font-weight:"+h.weight+";font-style:"+h.style)))}a(d.a)},A(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+ea(this.c)+"/"+b+".js",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)}; true?!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(){return Z}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):undefined;}());


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./package.json":
/*!**********************!*\
  !*** ./package.json ***!
  \**********************/
/*! exports provided: name, description, version, scripts, author, devDependencies, dependencies, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"name\":\"marshmallow-magician\",\"description\":\"Bullet hell arcade\",\"version\":\"0.0.1\",\"scripts\":{\"start\":\"node node_modules/@denishussar/html5-game-engine/bin/index.js run standalone --host localhost --port 8081\",\"start-share\":\"node node_modules/@denishussar/html5-game-engine/bin/index.js run standalone --host 0.0.0.0 --port 8081\",\"build\":\"node node_modules/@denishussar/html5-game-engine/bin/index.js release game standalone\",\"cc\":\"node tools/createController\",\"locale\":\"node tools/parseLocale\"},\"author\":\"Marshmallow Magicians\",\"devDependencies\":{\"@types/es6-promise\":\"0.0.32\",\"@types/howler\":\"2.1.2\",\"@types/matter-js\":\"^0.17.6\",\"@types/pixi.js\":\"4.8.9\",\"csv-parse\":\"^4.15.4\"},\"dependencies\":{\"@denishussar/html5-game-engine\":\"^2.0.5\",\"@lingui/core\":\"^3.12.1\",\"howler\":\"2.0.9\",\"matter-js\":\"^0.17.1\",\"pixi-spine\":\"1.6.2\",\"pixi-virtual-joystick\":\"^0.4.1\",\"pixi.js\":\"4.8.9\",\"webfontloader\":\"^1.6.28\"}}");

/***/ }),

/***/ "./src/GameInstance.ts":
/*!*****************************!*\
  !*** ./src/GameInstance.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.GameInstance = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameModel_1 = __webpack_require__(/*! ./models/GameModel */ "./src/models/GameModel.ts");
var RootController_1 = __webpack_require__(/*! ./RootController */ "./src/RootController.ts");
var VersionController_1 = __webpack_require__(/*! ./VersionController */ "./src/VersionController.ts");
var PreloaderGameController_1 = __webpack_require__(/*! ./controllers/Common/Preloader/PreloaderGameController */ "./src/controllers/Common/Preloader/PreloaderGameController.ts");
var Hooks_1 = __webpack_require__(/*! ./utils/Hooks */ "./src/utils/Hooks.ts");
var BackgroundController_1 = __webpack_require__(/*! ./controllers/Game/BackgroundController */ "./src/controllers/Game/BackgroundController.ts");
var GameInstance = (function (_super) {
    __extends(GameInstance, _super);
    function GameInstance(options) {
        var _this = _super.call(this) || this;
        _this.shadowUpdateEnabled = true;
        return _this;
    }
    GameInstance.prototype.onContentLoaded = function () {
        _super.prototype.onContentLoaded.call(this);
    };
    GameInstance.prototype.onCreate = function () {
        Hooks_1.hook.viewport = this._container;
    };
    GameInstance.prototype.getPreloadersConfiguration = function () {
        return {
            childControllers: {
                loading: {
                    controller: PreloaderGameController_1.PreloaderGameController,
                    options: {
                        preloader: false,
                    },
                },
                preloader: {
                    controller: PreloaderGameController_1.PreloaderGameController,
                    options: {
                        preloader: true,
                    },
                },
            },
        };
    };
    GameInstance.prototype.getConfiguration = function () {
        return {
            childControllers: {
                background: {
                    controller: BackgroundController_1.BackgroundController,
                },
                rootController: {
                    controller: RootController_1.RootController,
                    model: this.$model,
                    options: {
                        version: this.version,
                    },
                },
                version: {
                    controller: VersionController_1.VersionController,
                    options: {
                        version: this.version,
                    },
                },
            },
        };
    };
    GameInstance.prototype.onLandscape = function () {
    };
    GameInstance.prototype.onInitialize = function () {
    };
    GameInstance.prototype.onPortrait = function () {
    };
    __decorate([
        html5_game_engine_1.Inject,
        __metadata("design:type", GameModel_1.GameModel)
    ], GameInstance.prototype, "$model", void 0);
    GameInstance = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object])
    ], GameInstance);
    return GameInstance;
}(html5_game_engine_1.GameInstanceBase));
exports.GameInstance = GameInstance;


/***/ }),

/***/ "./src/PhysicsEngine.ts":
/*!******************************!*\
  !*** ./src/PhysicsEngine.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.CREATE_FIREBALL_EVENT = exports.PhysicsEngine = void 0;
var matter_js_1 = __webpack_require__(/*! matter-js */ "./node_modules/matter-js/build/matter.js");
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var PhysicsConstant_1 = __webpack_require__(/*! ./constants/PhysicsConstant */ "./src/constants/PhysicsConstant.ts");
var GameModel_1 = __webpack_require__(/*! ./models/GameModel */ "./src/models/GameModel.ts");
var fireballRadius = PhysicsConstant_1.PhysicsConstant.fireballRadius;
var PhysicsEngine = (function () {
    function PhysicsEngine(gameModel, modelEvents) {
        this.gameModel = gameModel;
        this.modelEvents = modelEvents;
        this.engine = matter_js_1.Engine.create();
        this.runner = matter_js_1.Runner.create();
        this.events = matter_js_1.Events;
        this.model = this.gameModel.physic;
        this.engine.gravity.x = 0;
        this.engine.gravity.y = 0;
        matter_js_1.Composite.add(this.engine.world, __spreadArrays(this.model.walls, [
            this.model.playerCollision,
            this.model.gold
        ], this.model.levers, this.model.cornerCircles));
        matter_js_1.Runner.run(this.runner, this.engine);
    }
    PhysicsEngine.prototype.subscribe = function (event, callback) {
        matter_js_1.Events.on(this.engine, event, callback);
    };
    PhysicsEngine.prototype.reset = function () {
        matter_js_1.Composite.remove(this.engine.world, __spreadArrays(this.model.fireballs));
    };
    PhysicsEngine.prototype.createFireball = function (x, y, direction) {
        console.log("createFireball", direction);
        var fireball = matter_js_1.Bodies.circle(x, y, fireballRadius, {
            inertia: Infinity,
            force: direction,
            restitution: 1,
            frictionAir: 0,
            friction: 0,
            collisionFilter: {
                category: 2,
                mask: 1,
            },
        });
        console.log("ss");
        this.model.fireballs.unshift(fireball);
        this.modelEvents.dispatch(this.model, exports.CREATE_FIREBALL_EVENT, fireball);
        console.log("before compos");
        matter_js_1.Composite.add(this.engine.world, [fireball]);
        console.log("afters compos");
    };
    PhysicsEngine = __decorate([
        html5_game_engine_1.Singleton,
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [GameModel_1.GameModel,
            html5_game_engine_1.ModelEvents])
    ], PhysicsEngine);
    return PhysicsEngine;
}());
exports.PhysicsEngine = PhysicsEngine;
exports.CREATE_FIREBALL_EVENT = "CreateFireball";


/***/ }),

/***/ "./src/RootController.ts":
/*!*******************************!*\
  !*** ./src/RootController.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.RootController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ./logic/GameLogic */ "./src/logic/GameLogic.ts");
var LevelRootController_1 = __webpack_require__(/*! ./controllers/Game/LevelRootController */ "./src/controllers/Game/LevelRootController.ts");
var JoystickController_1 = __webpack_require__(/*! ./controllers/Game/JoystickController */ "./src/controllers/Game/JoystickController.ts");
var SoundConstants_1 = __webpack_require__(/*! ./constants/SoundConstants */ "./src/constants/SoundConstants.ts");
var RootController = (function (_super) {
    __extends(RootController, _super);
    function RootController(_options, _random, _gameLogic) {
        var _this = _super.call(this, "RootController") || this;
        _this._options = _options;
        _this._random = _random;
        _this._gameLogic = _gameLogic;
        return _this;
    }
    RootController.prototype.getConfiguration = function () {
        return {
            childControllers: {
                levelRoot: {
                    controller: LevelRootController_1.LevelRootController,
                    model: this.$model,
                },
                joystick: {
                    controller: JoystickController_1.JoystickController,
                    model: this.$model,
                },
            },
            resources: {
                font0: new html5_game_engine_1.FontResourceItem("AlligatorManRUS"),
            },
            modelWatch: {},
            sounds: [
                {
                    "id": SoundConstants_1.SoundConstants.COINS,
                    "type": html5_game_engine_1.SoundType.SFX,
                },
                {
                    "id": SoundConstants_1.SoundConstants.FIREBALL,
                    "type": html5_game_engine_1.SoundType.SFX,
                },
                {
                    "id": SoundConstants_1.SoundConstants.MANHOLE,
                    "type": html5_game_engine_1.SoundType.SFX,
                },
                {
                    "id": SoundConstants_1.SoundConstants.LEVER,
                    "type": html5_game_engine_1.SoundType.SFX,
                },
                {
                    "id": SoundConstants_1.SoundConstants.LIFE_LOSS,
                    "type": html5_game_engine_1.SoundType.SFX,
                },
                {
                    "id": SoundConstants_1.SoundConstants.MUSIC_MAIN,
                    "type": html5_game_engine_1.SoundType.Music,
                },
                {
                    "id": SoundConstants_1.SoundConstants.MUSIC_ACTION,
                    "type": html5_game_engine_1.SoundType.Music,
                },
                {
                    "id": SoundConstants_1.SoundConstants.RICOCHET,
                    "type": html5_game_engine_1.SoundType.SFX,
                },
            ],
        };
    };
    RootController.prototype.onInitialize = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.soundManager.play(SoundConstants_1.SoundConstants.MUSIC_MAIN, true, SoundConstants_1.SoundLevels.musicMain);
                alert("\u041E\u0434\u043D\u0430\u0436\u0434\u044B \u0434\u043E\u0431\u043B\u0435\u0441\u0442\u043D\u044B\u0435 \u043C\u0430\u0433\u0438 \u0417\u0435\u0444\u0438\u0440\u043D\u043E\u0433\u043E \u043A\u043E\u0440\u043E\u043B\u0435\u0441\u0442\u0432\u0430 \u043E\u0431\u043D\u0430\u0440\u0443\u0436\u0438\u043B\u0438 \u0433\u0440\u043E\u0431\u043D\u0438\u0446\u0443 \u0434\u0440\u0435\u0432\u043D\u0435\u0433\u043E \u041F\u043E\u0432\u0435\u043B\u0438\u0442\u0435\u043B\u044F \u041B\u0430\u043A\u0440\u0438\u0446\u044B. \u041F\u043E\u0432\u0441\u044E\u0434\u0443 \u0431\u044B\u043B\u0438 \u043F\u0440\u0435\u0434\u043E\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043D\u0438\u044F \u043E \u0442\u043E\u043C, \u0447\u0442\u043E\u0431\u044B \u043D\u0438\u043A\u0442\u043E \u043D\u0435 \u0442\u0440\u043E\u0433\u0430\u043B \u0435\u0433\u043E \u0441\u043E\u043A\u0440\u043E\u0432\u0438\u0449\u0430, \u043D\u043E \u0436\u0430\u0434\u043D\u043E\u0441\u0442\u044C \u043C\u0430\u0433\u043E\u0432 \u0432\u0437\u044F\u043B\u0430 \u0432\u0435\u0440\u0445: \u043E\u043D\u0438 \u0443\u043D\u0435\u0441\u043B\u0438 \u0432\u0441\u0435 \u0441\u043E\u043A\u0440\u043E\u0432\u0438\u0449\u0430 \u0432 \u0441\u0432\u043E\u044E \u0412\u043E\u043B\u0448\u0435\u0431\u043D\u0443\u044E \u0431\u0430\u0448\u043D\u044E.\n\u0421\u043F\u0443\u0441\u0442\u044F \u043D\u0435\u0434\u0435\u043B\u044E \u0432 \u0431\u0430\u0448\u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u043E\u0441\u044C \u0447\u0442\u043E-\u0442\u043E \u0441\u0442\u0440\u0430\u043D\u043D\u043E\u0435: \u043D\u0435\u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043C\u0430\u0433\u0438 \u043D\u0430\u0447\u0438\u043D\u0430\u043B\u0438 \u0431\u043E\u0440\u043C\u043E\u0442\u0430\u0442\u044C \u043D\u0430 \u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E\u043C \u044F\u0437\u044B\u043A\u0435, \u0430 \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u0440\u0430\u0437\u0438\u043B\u0430 \u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u0431\u043E\u043B\u0435\u0437\u043D\u044C. \u0421\u0442\u0440\u0430\u043D\u043D\u043E\u0441\u0442\u0438 \u0441\u0442\u0430\u043D\u043E\u0432\u0438\u043B\u0438\u0441\u044C \u0432\u0441\u0451 \u0441\u0438\u043B\u044C\u043D\u0435\u0435 \u0438 \u0441\u0438\u043B\u044C\u043D\u0435\u0435, \u0430 \u043D\u0435\u043A\u043E\u0442\u043E\u0440\u044B\u0445 \u043C\u0430\u0433\u043E\u0432 \u0434\u0430\u0436\u0435 \u043E\u0431\u0443\u044F\u043B\u0430 \u0430\u0433\u0440\u0435\u0441\u0441\u0438\u044F. \u0412\u0441\u0435 \u0437\u043D\u0430\u043B\u0438, \u0447\u0442\u043E \u0432\u0438\u043D\u043E\u0439 \u044D\u0442\u043E\u043C\u0443 \u0431\u044B\u043B\u0438 \u0441\u043E\u043A\u0440\u043E\u0432\u0438\u0449\u0430 \u041F\u043E\u0432\u0435\u043B\u0438\u0442\u0435\u043B\u044F \u041B\u0430\u043A\u0440\u0438\u0446\u044B, \u043D\u043E \u0442\u043E\u043B\u044C\u043A\u043E \u043E\u0434\u043D\u0430 \u0417\u0435\u0444\u0438\u0440\u043A\u0430 \u0438\u043C\u0435\u043B\u0430 \u0441\u043C\u0435\u043B\u043E\u0441\u0442\u044C \u043F\u043E\u0439\u0442\u0438 \u0438 \u0443\u043D\u0438\u0447\u0442\u043E\u0436\u0438\u0442\u044C \u0438\u0445. \u0412\u043E\u043E\u0440\u0443\u0436\u0438\u0432\u0448\u0438\u0441\u044C \u0432\u043E\u043B\u0448\u0435\u0431\u043D\u043E\u0439 \u043F\u0430\u043B\u043E\u0447\u043A\u043E\u0439 \u0438 \u0441\u0442\u0440\u0430\u043D\u043D\u044B\u043C \u0430\u0440\u0442\u0435\u0444\u0430\u043A\u0442\u043E\u043C \u0441 \u0443\u0440\u043E\u043A\u043E\u0432 \u0425\u0440\u043E\u043D\u043E\u043C\u0430\u0433\u0438\u0438, \u043E\u043D\u0430 \u043D\u0430\u0447\u0430\u043B\u0430 \u043F\u043E\u0434\u043D\u0438\u043C\u0430\u0442\u044C\u0441\u044F \u043A \u0421\u043E\u043A\u0440\u043E\u0432\u0438\u0449\u043D\u0438\u0446\u0435.\n\u041F\u043E\u043F\u0430\u0432 \u0432 \u0441\u043E\u043A\u0440\u043E\u0432\u0438\u0449\u043D\u0438\u0446\u0443, \u0417\u0435\u0444\u0438\u0440\u043A\u0430 \u0441\u043E\u0431\u0440\u0430\u043B\u0430 \u0432\u0441\u0435 \u0441\u0432\u043E\u0438 \u0441\u0438\u043B\u044B \u0438 \u0437\u043D\u0430\u043D\u0438\u044F, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043D\u044B\u0435 \u0437\u0430 3 \u0443\u0440\u043E\u043A\u0430 \u041A\u043E\u043B\u0434\u043E\u0432\u0441\u0442\u0432\u0430, \u0438 \u043C\u0435\u0442\u043D\u0443\u043B\u0430 \u041E\u0433\u043D\u0435\u043D\u043D\u044B\u0439 \u0428\u0430\u0440 \u0432 \u043A\u0443\u0447\u0443 \u043F\u0440\u043E\u043A\u043B\u044F\u0442\u043E\u0433\u043E \u0437\u043E\u043B\u043E\u0442\u0430. \u041A\u0430\u043A\u043E\u0432\u043E \u0436\u0435 \u0431\u044B\u043B\u043E \u0435\u0451 \u0443\u0434\u0438\u0432\u043B\u0435\u043D\u0438\u0435, \u043A\u043E\u0433\u0434\u0430 \u043F\u0440\u043E\u043B\u0435\u0442\u0435\u0432 \u0441\u043A\u0432\u043E\u0437\u044C \u0440\u0430\u0441\u043F\u043B\u0430\u0432\u043B\u0435\u043D\u043D\u043E\u0435 \u0437\u043E\u043B\u043E\u0442\u043E, \u0428\u0430\u0440 \u043E\u0442\u0441\u043A\u043E\u0447\u0438\u043B \u043E\u0442 \u0437\u0430\u0449\u0438\u0442\u043D\u043E\u0433\u043E \u0431\u0430\u0440\u044C\u0435\u0440\u0430 \u0421\u043E\u043A\u0440\u043E\u0432\u0438\u0449\u043D\u0438\u0446\u044B \u043F\u0440\u044F\u043C\u043E \u0432 \u043D\u0435\u0451! \u0412\u043E\u0437\u0434\u0443\u0445 \u043F\u0440\u043E\u043F\u0438\u0442\u0430\u043B\u0441\u044F \u0437\u0430\u043F\u0430\u0445\u043E\u043C \u0436\u0436\u0451\u043D\u043E\u0433\u043E \u0441\u0430\u0445\u0430\u0440\u0430, \u0430 \u0417\u0435\u0444\u0438\u0440\u043A\u0430 \u043F\u043E\u043D\u044F\u043B\u0430, \u0447\u0442\u043E \u044D\u0442\u043E \u043A\u043E\u043D\u0435\u0446...\n\u041A\u0430\u043A \u0432\u0434\u0440\u0443\u0433 \u043E\u043D\u0430 \u0441\u043D\u043E\u0432\u0430 \u0441\u0442\u043E\u0438\u0442 \u043F\u0435\u0440\u0435\u0434 \u043D\u0435\u0432\u0440\u0435\u0434\u0438\u043C\u043E\u0439 \u0433\u0440\u0443\u0434\u043E\u0439 \u0441\u043E\u043A\u0440\u043E\u0432\u0438\u0449, \u0430 \u0430\u0440\u0442\u0435\u0444\u0430\u043A\u0442, \u0447\u0442\u043E \u043E\u043D\u0430 \u0443\u043C\u044B\u043A\u043D\u0443\u043B\u0430, \u043D\u0430\u0447\u0430\u043B \u0442\u0430\u0438\u043D\u0441\u0442\u0432\u0435\u043D\u043D\u043E \u0441\u0432\u0435\u0442\u0438\u0442\u0441\u044F.\n\"\u0412 \u044D\u0442\u043E\u0442 \u0440\u0430\u0437, \u0442\u043E\u0447\u043D\u043E \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u0441\u044F!\" - \u043F\u043E\u0434\u0443\u043C\u0430\u043B\u0430 \u0417\u0435\u0444\u0438\u0440\u043A\u0430 \u0438 \u0441\u043D\u043E\u0432\u0430 \u043D\u0430\u0447\u0430\u043B\u0430 \u0437\u0430\u043A\u0438\u0434\u044B\u0432\u0430\u0442\u044C \u041E\u0433\u043D\u0435\u043D\u043D\u044B\u043C\u0438 \u0448\u0430\u0440\u0430\u043C\u0438 \u0437\u043B\u043E\u0441\u0447\u0430\u0441\u0442\u043D\u043E\u0435 \u0441\u043E\u043A\u0440\u043E\u0432\u0438\u0449\u0435.");
                return [2];
            });
        });
    };
    RootController.prototype.onLandscape = function () {
    };
    RootController.prototype.onPortrait = function () {
    };
    RootController.prototype.onResize = function (width, height, scale) {
    };
    RootController.prototype.onUpdate = function (frameRate) {
        this._gameLogic.update(frameRate);
    };
    RootController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], RootController);
    return RootController;
}(html5_game_engine_1.SimpleBaseController));
exports.RootController = RootController;


/***/ }),

/***/ "./src/VersionController.ts":
/*!**********************************!*\
  !*** ./src/VersionController.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.VersionController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var VersionController = (function (_super) {
    __extends(VersionController, _super);
    function VersionController(_options) {
        var _this = _super.call(this, "VersionController") || this;
        _this._options = _options;
        return _this;
    }
    VersionController.prototype.getConfiguration = function () {
        return {
            childControllers: {},
        };
    };
    VersionController.prototype.onInitialize = function () {
        this._versionLabel = new html5_game_engine_1.MultiStyleText("v." + this._options.version, {
            "default": {
                fontSize: 32,
                fill: 0x000000,
                align: "center",
                stroke: 1,
                strokeThickness: 2,
            },
            "b": {
                fontFamily: "Bold",
            },
        });
        this._versionLabel.anchor = new PIXI.ObservablePoint(null, null, 0, 1);
        this._versionLabel.alpha = .2;
        this.display.addChild(this._versionLabel);
    };
    VersionController.prototype.onLandscape = function () {
    };
    VersionController.prototype.onPortrait = function () {
    };
    VersionController.prototype.onResize = function (width, height, scale) {
        this.y = height / scale / 2;
        this.x = -width / scale / 2;
    };
    VersionController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object])
    ], VersionController);
    return VersionController;
}(html5_game_engine_1.SimpleBaseController));
exports.VersionController = VersionController;


/***/ }),

/***/ "./src/constants/GameConstants.ts":
/*!****************************************!*\
  !*** ./src/constants/GameConstants.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.GameConstants = void 0;
var GameConstants;
(function (GameConstants) {
    GameConstants.timer = 60;
    GameConstants.wallSpeed = .1;
    GameConstants.goldHealth = 10000;
    GameConstants.goldStage = [
        0,
        GameConstants.goldHealth * .05,
        GameConstants.goldHealth * .10,
        GameConstants.goldHealth * .25,
        GameConstants.goldHealth * .50,
    ];
    GameConstants.goldMinimalHealth = 0;
    GameConstants.playerDamage = 1;
    GameConstants.playerHealth = 3;
    GameConstants.playerMinHealth = 0;
    GameConstants.playerSpeed = .04;
    GameConstants.dashCooldown = 2.5 * 1000;
    GameConstants.fireballDamage = 1;
    GameConstants.fireballCooldown = 3 * 1000;
})(GameConstants = exports.GameConstants || (exports.GameConstants = {}));


/***/ }),

/***/ "./src/constants/PhysicsConstant.ts":
/*!******************************************!*\
  !*** ./src/constants/PhysicsConstant.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.PhysicsConstant = void 0;
var PhysicsConstant;
(function (PhysicsConstant) {
    PhysicsConstant.thick = 300;
    PhysicsConstant.width = 960 + PhysicsConstant.thick;
    PhysicsConstant.height = 960 + PhysicsConstant.thick;
    PhysicsConstant.padding = 30 + PhysicsConstant.thick / 2;
    PhysicsConstant.center = { x: 0, y: 0 };
    PhysicsConstant.fireballRadius = 15;
    PhysicsConstant.goldRadius = [10, 20, 40, 60, 90];
    PhysicsConstant.leverRadius = 45;
    PhysicsConstant.collisionRadius = 30;
    PhysicsConstant.startPlayerPosition = { x: PhysicsConstant.center.x, y: PhysicsConstant.center.y + 2 * PhysicsConstant.height / 6 };
    PhysicsConstant.dashPower = .1;
    PhysicsConstant.topEdge = PhysicsConstant.center.y - PhysicsConstant.height / 2;
    PhysicsConstant.rightEdge = PhysicsConstant.center.x + PhysicsConstant.width / 2;
    PhysicsConstant.bottomEdge = PhysicsConstant.center.y + PhysicsConstant.height / 2;
    PhysicsConstant.leftEdge = PhysicsConstant.center.x - PhysicsConstant.width / 2;
    PhysicsConstant.leftTopCorner = { x: PhysicsConstant.leftEdge, y: PhysicsConstant.topEdge };
    PhysicsConstant.rightTopCorner = { x: PhysicsConstant.rightEdge, y: PhysicsConstant.topEdge };
    PhysicsConstant.leftBottomCorner = { x: PhysicsConstant.leftEdge, y: PhysicsConstant.bottomEdge };
    PhysicsConstant.rightBottomCorner = { x: PhysicsConstant.rightEdge, y: PhysicsConstant.bottomEdge };
    PhysicsConstant.topEdgeWithPadding = PhysicsConstant.topEdge + PhysicsConstant.padding;
    PhysicsConstant.rightEdgeWithPadding = PhysicsConstant.rightEdge - PhysicsConstant.padding;
    PhysicsConstant.bottomEdgeWithPadding = PhysicsConstant.bottomEdge - PhysicsConstant.padding;
    PhysicsConstant.leftEdgeWithPadding = PhysicsConstant.leftEdge + PhysicsConstant.padding;
    PhysicsConstant.leftTopCornerWithPadding = { x: PhysicsConstant.leftEdgeWithPadding, y: PhysicsConstant.topEdgeWithPadding };
    PhysicsConstant.rightTopCornerWithPadding = { x: PhysicsConstant.rightEdgeWithPadding, y: PhysicsConstant.topEdgeWithPadding };
    PhysicsConstant.leftBottomCornerWithPadding = { x: PhysicsConstant.leftEdgeWithPadding, y: PhysicsConstant.bottomEdgeWithPadding };
    PhysicsConstant.rightBottomCornerWithPadding = { x: PhysicsConstant.rightEdgeWithPadding, y: PhysicsConstant.bottomEdgeWithPadding };
})(PhysicsConstant = exports.PhysicsConstant || (exports.PhysicsConstant = {}));


/***/ }),

/***/ "./src/constants/SoundConstants.ts":
/*!*****************************************!*\
  !*** ./src/constants/SoundConstants.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.SoundLevels = exports.SoundConstants = void 0;
var SoundConstants = (function () {
    function SoundConstants() {
    }
    SoundConstants.COINS = "COINS";
    SoundConstants.FIREBALL = "FIREBALL";
    SoundConstants.MANHOLE = "HATCH";
    SoundConstants.LEVER = "LEVER";
    SoundConstants.LIFE_LOSS = "LIFE_LOSS";
    SoundConstants.MUSIC_MAIN = "MUSIC_MAIN";
    SoundConstants.MUSIC_ACTION = "MUSIC_ACTION";
    SoundConstants.RICOCHET = "RICOCHET";
    return SoundConstants;
}());
exports.SoundConstants = SoundConstants;
var k_m = .5;
var k_e = .5;
var SoundLevels = (function () {
    function SoundLevels() {
    }
    SoundLevels.musicMain = 1 * k_m;
    SoundLevels.musicAction = 1 * k_m;
    SoundLevels.manhole = 1 * k_e;
    SoundLevels.ricochet = .5 * k_e;
    SoundLevels.coin = .5 * k_e;
    SoundLevels.charAction = 1 * k_e;
    SoundLevels.fireball = 1 * k_e;
    SoundLevels.lever = 1 * k_e;
    SoundLevels.lifeLoss = 1 * k_e;
    return SoundLevels;
}());
exports.SoundLevels = SoundLevels;


/***/ }),

/***/ "./src/controllers/AnimationContents.ts":
/*!**********************************************!*\
  !*** ./src/controllers/AnimationContents.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.AnimationContents = void 0;
var AnimationContents = (function () {
    function AnimationContents() {
    }
    AnimationContents.PRELOADER_SCREEN_JSON = __webpack_require__(/*! ../../animate/PreloaderScreen.json */ "./animate/PreloaderScreen.json");
    AnimationContents.LEVEL_CONTENT_JSON = __webpack_require__(/*! ../../animate/LevelContent.json */ "./animate/LevelContent.json");
    return AnimationContents;
}());
exports.AnimationContents = AnimationContents;


/***/ }),

/***/ "./src/controllers/Common/ButtonController.ts":
/*!****************************************************!*\
  !*** ./src/controllers/Common/ButtonController.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ButtonController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var ButtonController = (function (_super) {
    __extends(ButtonController, _super);
    function ButtonController(_options, _arenaApi) {
        var _this = _super.call(this, "ButtonController") || this;
        _this._options = _options;
        _this._arenaApi = _arenaApi;
        _this._pointerDown = false;
        _this._pointerOver = false;
        _this._pressed = false;
        _this._enabled = true;
        _this.selected = false;
        return _this;
    }
    ButtonController.prototype.getConfiguration = function () {
        var _a;
        var _this = this;
        var keyboard = null;
        if (this._options.hotKey) {
            keyboard = (_a = {},
                _a[html5_game_engine_1.Key[this._options.hotKey]] = {
                    pressed: function () {
                        if (!_this._enabled) {
                            return;
                        }
                        _this._pressed = true;
                        _this.gotoAndStop("down");
                    },
                    released: function () {
                        if (!_this._enabled || !_this._pressed) {
                            return;
                        }
                        _this._pressed = false;
                        _this.gotoAndStop("up");
                        _this._options.onClick();
                    },
                    down: function () {
                    },
                },
                _a);
        }
        return {
            childControllers: {},
            onPointerDown: function () {
                if (!_this._enabled) {
                    return;
                }
                _this._pointerDown = true;
                _this.gotoAndStop("down");
            },
            onPointerOut: function () {
                if (!_this._enabled) {
                    return;
                }
                if (!_this._pointerDown) {
                    _this.gotoAndStop(_this.selected ? "down" : "up");
                }
                _this._pointerOver = false;
            },
            onPointerOver: function () {
                if (!_this._enabled) {
                    return;
                }
                if (_this._pointerDown) {
                    _this.gotoAndStop("down");
                }
                else {
                    _this.gotoAndStop(_this.selected ? "down" : "over");
                }
                _this._pointerOver = true;
            },
            onPointerUp: function () {
                if (!_this._enabled) {
                    _this.gotoAndStop("up");
                    return;
                }
                _this._pointerDown = false;
                if (_this._pointerOver) {
                    _this.gotoAndStop(_this.selected ? "down" : "over");
                }
                else {
                    _this.gotoAndStop(_this.selected ? "down" : "up");
                }
            },
            onPointerUpOutside: function () {
                if (!_this._enabled) {
                    return;
                }
                _this.gotoAndStop(_this.selected ? "down" : "up");
                _this._pointerDown = false;
            },
            onTap: function () {
                var enabled = _this._enabled;
                if (!enabled) {
                    return;
                }
                _this._options.onClick();
                if (enabled) {
                }
            },
            keyboard: keyboard,
        };
    };
    ButtonController.prototype.toggle = function (select) {
        this.selected = select;
        this.gotoAndStop(this.selected ? "down" : "up");
    };
    ButtonController.prototype.disabled = function () {
        this.gotoAndStop("disabled");
        this._enabled = false;
        this._pressed = false;
        this._pointerDown = false;
    };
    ButtonController.prototype.enabled = function () {
        this._enabled = true;
        this.gotoAndStop("up");
    };
    ButtonController.prototype.onInitialize = function () {
        var _a, _b;
        var label = ((_b = (_a = this._options.label) === null || _a === void 0 ? void 0 : _a.toString()) === null || _b === void 0 ? void 0 : _b.toUpperCase()) || "";
        this.setTextByQuery("button_text", label);
        if (this._options.textPosition) {
            this.setTextVerticalAlignByQuery("button_text", this._options.textPosition);
        }
        if (this._options.nonInteractive) {
            this.display.interactive = !this._options.nonInteractive;
        }
    };
    ButtonController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameApiBase])
    ], ButtonController);
    return ButtonController;
}(html5_game_engine_1.AnimationBaseController));
exports.ButtonController = ButtonController;


/***/ }),

/***/ "./src/controllers/Common/Preloader/PreloaderGameController.ts":
/*!*********************************************************************!*\
  !*** ./src/controllers/Common/Preloader/PreloaderGameController.ts ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.PreloaderGameController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../../../logic/GameLogic */ "./src/logic/GameLogic.ts");
var AnimationContents_1 = __webpack_require__(/*! ../../AnimationContents */ "./src/controllers/AnimationContents.ts");
var Hooks_1 = __webpack_require__(/*! ../../../utils/Hooks */ "./src/utils/Hooks.ts");
var DialogScale_1 = __webpack_require__(/*! ../../../utils/DialogScale */ "./src/utils/DialogScale.ts");
var PreloaderGameController = (function (_super) {
    __extends(PreloaderGameController, _super);
    function PreloaderGameController(_options, _gameLogic) {
        var _this = _super.call(this, "PreloaderGameController") || this;
        _this._options = _options;
        _this._gameLogic = _gameLogic;
        _this.oldWidth = 0;
        _this.oldHeight = 0;
        return _this;
    }
    PreloaderGameController.prototype.getConfiguration = function () {
        return {
            animationContent: AnimationContents_1.AnimationContents.PRELOADER_SCREEN_JSON,
            libraryName: "preloader_screen",
            childControllers: {},
        };
    };
    PreloaderGameController.prototype.onInitialize = function () {
        this.gotoAndStop(0);
        this.setTextStyleByQuery("loading_text", {
            stroke: "#000000",
            strokeThickness: 16,
        });
        this.canvasDom = document.querySelector("#gameCanvas");
        if (this._options.preloader)
            setTimeout(this.resizeOnUpdate.bind(this), 500);
    };
    PreloaderGameController.prototype.onUpdate = function (frameRate) {
    };
    PreloaderGameController.prototype.onLoadingProgress = function (progress) {
        this.gotoAndStopByQuery("preloader", Math.floor(progress * 21));
    };
    PreloaderGameController.prototype.onHide = function () {
        this.gotoAndStopByQuery("preloader", 0);
    };
    PreloaderGameController.prototype.onShow = function () {
    };
    PreloaderGameController.prototype.resizeOnUpdate = function () {
        var width = this.renderer.renderer.width;
        var height = this.renderer.renderer.height;
        if ((width != this.oldWidth) &&
            (height != this.oldHeight)) {
            var scale = Math.min(width / 1000, height / 1000);
            if (Hooks_1.hook.viewport && this.container) {
                console.log(Hooks_1.hook);
                Hooks_1.hook.viewport.x = this.renderer.renderer.width / 2;
                Hooks_1.hook.viewport.y = this.renderer.renderer.height / 2;
            }
            this.onResize(width, height, scale);
            this.oldHeight = height;
            this.oldWidth = width;
            console.log("scaled", {
                width: width,
                height: height,
                scale: scale,
                viewX: Hooks_1.hook.viewport.x,
                viewY: Hooks_1.hook.viewport.y,
            });
        }
        setTimeout(this.resizeOnUpdate.bind(this), 500);
    };
    PreloaderGameController.prototype.onResize = function (width, height, scale) {
        var sizeW = width / scale;
        var sizeH = height / scale;
        DialogScale_1.scaleModal(this, width, height, scale, 1080, 1080);
        var bg = this.container.getChildByName("bg");
        bg.scale.x = bg.scale.y = Math.max(sizeH / 1080, sizeW / 1920) / this.scaleX;
    };
    PreloaderGameController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, GameLogic_1.GameLogic])
    ], PreloaderGameController);
    return PreloaderGameController;
}(html5_game_engine_1.AnimationLoadingBaseController));
exports.PreloaderGameController = PreloaderGameController;


/***/ }),

/***/ "./src/controllers/FireballsController.ts":
/*!************************************************!*\
  !*** ./src/controllers/FireballsController.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.FireballsController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../logic/GameLogic */ "./src/logic/GameLogic.ts");
var ProjectileController_1 = __webpack_require__(/*! ./ProjectileController */ "./src/controllers/ProjectileController.ts");
var AnimationContents_1 = __webpack_require__(/*! ./AnimationContents */ "./src/controllers/AnimationContents.ts");
var PhysicsEngine_1 = __webpack_require__(/*! ../PhysicsEngine */ "./src/PhysicsEngine.ts");
var FireballsController = (function (_super) {
    __extends(FireballsController, _super);
    function FireballsController(options, random, gameLogic) {
        var _this = _super.call(this, "FireballsController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        _this.ballsCounter = 0;
        return _this;
    }
    FireballsController.prototype.getConfiguration = function () {
        var _a;
        var _this = this;
        return {
            modelEvents: (_a = {},
                _a[PhysicsEngine_1.CREATE_FIREBALL_EVENT] = function (fireball) {
                    console.log("fireball");
                    _this.addProjectileController(fireball);
                },
                _a.nextLevel = function () {
                    console.log("REMOVE ALL");
                    for (var i = 0; i < _this.ballsCounter; i++) {
                        _this.removeChildControllerByName("fireball_" + i);
                    }
                    _this.ballsCounter = 0;
                },
                _a),
        };
    };
    FireballsController.prototype.addProjectileController = function (last) {
        this.addChildControllerAsync({
            animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
            libraryName: "fireball",
            controller: ProjectileController_1.ProjectileController,
            model: last,
        }, false, "fireball_" + (this.ballsCounter++));
    };
    FireballsController.prototype.onInitialize = function () {
    };
    FireballsController.prototype.onLandscape = function () {
    };
    FireballsController.prototype.onPortrait = function () {
    };
    FireballsController.prototype.onUpdate = function (frameRate) {
    };
    FireballsController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], FireballsController);
    return FireballsController;
}(html5_game_engine_1.SimpleBaseController));
exports.FireballsController = FireballsController;


/***/ }),

/***/ "./src/controllers/Game/BackgroundController.ts":
/*!******************************************************!*\
  !*** ./src/controllers/Game/BackgroundController.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.BackgroundController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../../logic/GameLogic */ "./src/logic/GameLogic.ts");
var AnimationContents_1 = __webpack_require__(/*! ../AnimationContents */ "./src/controllers/AnimationContents.ts");
var BackgroundController = (function (_super) {
    __extends(BackgroundController, _super);
    function BackgroundController(options, random, gameLogic) {
        var _this = _super.call(this, "BackgroundController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        return _this;
    }
    BackgroundController.prototype.getConfiguration = function () {
        return {
            animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
            libraryName: "wall",
        };
    };
    BackgroundController.prototype.onInitialize = function () {
    };
    BackgroundController.prototype.onLandscape = function () {
    };
    BackgroundController.prototype.onPortrait = function () {
    };
    BackgroundController.prototype.onUpdate = function (frameRate) {
    };
    BackgroundController.prototype.onResize = function (width, height, scale) {
        var size = Math.max(width, height) / scale;
        this.display.scale.set(size / 2048);
    };
    BackgroundController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], BackgroundController);
    return BackgroundController;
}(html5_game_engine_1.AnimationBaseController));
exports.BackgroundController = BackgroundController;


/***/ }),

/***/ "./src/controllers/Game/CharacterController.ts":
/*!*****************************************************!*\
  !*** ./src/controllers/Game/CharacterController.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.CharacterController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../../logic/GameLogic */ "./src/logic/GameLogic.ts");
var AnimationContents_1 = __webpack_require__(/*! ../AnimationContents */ "./src/controllers/AnimationContents.ts");
var GameConstants_1 = __webpack_require__(/*! ../../constants/GameConstants */ "./src/constants/GameConstants.ts");
var fireballCooldown = GameConstants_1.GameConstants.fireballCooldown;
var CharacterController = (function (_super) {
    __extends(CharacterController, _super);
    function CharacterController(options, random, gameLogic) {
        var _this = _super.call(this, "CharacterController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        return _this;
    }
    CharacterController.prototype.getConfiguration = function () {
        var _this = this;
        return {
            animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
            libraryName: "magician",
            keyboard: {
                pressed: function (keyCode, event) { return _this.gameLogic.pressKey(keyCode); },
                released: function (keyCode, event) { return _this.gameLogic.releaseKey(keyCode); },
            },
            modelWatch: {
                direction: function () { return _this.display.scale.x *= -1; },
                fireballCooldown: function (newValue, oldValue) { return _this.updateStaff(newValue, oldValue); },
            },
        };
    };
    CharacterController.prototype.onInitialize = function () {
        var _this = this;
        this.gotoAndStopByQuery("staff", 3);
        var _loop_1 = function (i) {
            setTimeout(function () { return _this.gotoAndPlayByQuery("star_" + i, 0, true); }, 200 * i);
        };
        for (var i = 0; i < 3; i++) {
            _loop_1(i);
        }
    };
    CharacterController.prototype.onLandscape = function () {
    };
    CharacterController.prototype.onPortrait = function () {
    };
    CharacterController.prototype.onUpdate = function (frameRate) {
        var bounds = this.$model.collision.bounds;
        var A = bounds.min;
        var B = bounds.max;
        var width = B.x - A.x;
        var height = B.y - A.y;
        this.x = A.x + width / 2;
        this.y = A.y + height / 2;
    };
    CharacterController.prototype.onResize = function (width, height, scale) {
        this.display.scale.set(.4);
    };
    CharacterController.prototype.updateStaff = function (newValue, oldValue) {
        if (newValue <= 0 && oldValue > 0) {
            this.gotoAndStopByQuery("staff", 3);
        }
        else if (newValue < 1000 && oldValue > 1000) {
            this.gotoAndStopByQuery("staff", 2);
        }
        else if (newValue < 2000 && oldValue > 2000) {
            this.gotoAndStopByQuery("staff", 1);
        }
        else if (newValue >= fireballCooldown && oldValue < fireballCooldown) {
            this.gotoAndStopByQuery("staff", 0);
        }
    };
    CharacterController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], CharacterController);
    return CharacterController;
}(html5_game_engine_1.AnimationBaseController));
exports.CharacterController = CharacterController;


/***/ }),

/***/ "./src/controllers/Game/JoystickController.ts":
/*!****************************************************!*\
  !*** ./src/controllers/Game/JoystickController.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.JoystickController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var AnimationContents_1 = __webpack_require__(/*! ../AnimationContents */ "./src/controllers/AnimationContents.ts");
var GameLogic_1 = __webpack_require__(/*! ../../logic/GameLogic */ "./src/logic/GameLogic.ts");
var distanceBetweenPoints_1 = __webpack_require__(/*! ../../utils/geometry/distanceBetweenPoints */ "./src/utils/geometry/distanceBetweenPoints.ts");
var maxStickRadius = 100;
var padding = 150;
var JoystickController = (function (_super) {
    __extends(JoystickController, _super);
    function JoystickController(_options, _gameLogic) {
        var _this = _super.call(this, "JoystickController") || this;
        _this._options = _options;
        _this._gameLogic = _gameLogic;
        _this._pointerDown = false;
        _this._pointerOver = false;
        _this._pressed = false;
        _this._enabled = true;
        return _this;
    }
    JoystickController.prototype.getConfiguration = function () {
        var _this = this;
        return {
            animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
            libraryName: "gamepad_joystick",
            childControllers: {},
            modelWatch: {},
            onPointerDown: function () {
                if (!_this._enabled) {
                    return;
                }
                _this._pointerDown = true;
            },
            onPointerOut: function () {
                if (!_this._enabled) {
                    return;
                }
                if (!_this._pointerDown) {
                }
                _this._pointerOver = false;
            },
            onPointerOver: function () {
                if (!_this._enabled) {
                    return;
                }
                if (_this._pointerDown) {
                }
                else {
                }
                _this._pointerOver = true;
            },
            onPointerUp: function () {
                if (!_this._enabled) {
                    return;
                }
                _this._pointerDown = false;
                _this.setPosByQuery("stick", 0, 0);
                _this._gameLogic.unitMoveStop([1, 1]);
                if (_this._pointerOver) {
                }
                else {
                }
            },
            onPointerUpOutside: function () {
                if (!_this._enabled) {
                    return;
                }
                _this._pointerDown = false;
                _this.setPosByQuery("stick", 0, 0);
                _this._gameLogic.unitMoveStop([1, 1]);
            },
            onPointerMove: function (e) {
                if (!_this._pointerDown) {
                    return;
                }
                var x = e.screenPosition.x;
                var y = e.screenPosition.y;
                var length = Math.sqrt(x * x + y * y);
                var n = [x / length, y / length];
                _this._gameLogic.unitMoveStart(n);
                if (length > maxStickRadius) {
                    var newPos = distanceBetweenPoints_1.findPoint2D({ x: 0, y: 0 }, { x: x, y: y }, maxStickRadius);
                    x = newPos.x;
                    y = newPos.y;
                }
                _this.setPosByQuery("stick", x, y);
            },
        };
    };
    JoystickController.prototype.onInitialize = function () {
    };
    JoystickController.prototype.onResize = function (width, height, scale) {
        this.display.scale.set(.6);
        this.x = -width / scale / 2 + padding;
        this.y = height / scale / 2 - padding;
    };
    JoystickController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, GameLogic_1.GameLogic])
    ], JoystickController);
    return JoystickController;
}(html5_game_engine_1.AnimationBaseController));
exports.JoystickController = JoystickController;


/***/ }),

/***/ "./src/controllers/Game/LevelRootController.ts":
/*!*****************************************************!*\
  !*** ./src/controllers/Game/LevelRootController.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LevelRootController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../../logic/GameLogic */ "./src/logic/GameLogic.ts");
var PhysicsEngine_1 = __webpack_require__(/*! ../../PhysicsEngine */ "./src/PhysicsEngine.ts");
var WallsController_1 = __webpack_require__(/*! ./WallsController */ "./src/controllers/Game/WallsController.ts");
var CharacterController_1 = __webpack_require__(/*! ./CharacterController */ "./src/controllers/Game/CharacterController.ts");
var FireballsController_1 = __webpack_require__(/*! ../FireballsController */ "./src/controllers/FireballsController.ts");
var LeversController_1 = __webpack_require__(/*! ../LeversController */ "./src/controllers/LeversController.ts");
var AnimationContents_1 = __webpack_require__(/*! ../AnimationContents */ "./src/controllers/AnimationContents.ts");
var GoldController_1 = __webpack_require__(/*! ../GoldController */ "./src/controllers/GoldController.ts");
var TopPanelController_1 = __webpack_require__(/*! ../TopPanelController */ "./src/controllers/TopPanelController.ts");
var ScoreController_1 = __webpack_require__(/*! ../ScoreController */ "./src/controllers/ScoreController.ts");
var ManholeController_1 = __webpack_require__(/*! ../ManholeController */ "./src/controllers/ManholeController.ts");
var paddingTop = 30;
var paddingLeft = 30;
var LevelRootController = (function (_super) {
    __extends(LevelRootController, _super);
    function LevelRootController(options, random, gameLogic, physicsFactory) {
        var _this = _super.call(this, "LevelRootController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        _this.physicsFactory = physicsFactory;
        return _this;
    }
    LevelRootController.prototype.getConfiguration = function () {
        var _this = this;
        return {
            onPointerDown: function (e) { return _this.gameLogic.throwFireball(e.screenPosition); },
            childControllers: {
                walls: {
                    controller: WallsController_1.WallsController,
                    model: this.$model,
                },
                manhole: {
                    animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
                    libraryName: "manhole",
                    controller: ManholeController_1.ManholeController,
                    model: this.$model,
                },
                levers: {
                    controller: LeversController_1.LeversController,
                    model: this.$model,
                },
                gold: {
                    animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
                    libraryName: "gold_ui",
                    controller: GoldController_1.GoldController,
                    model: this.$model,
                },
                character: {
                    controller: CharacterController_1.CharacterController,
                    model: this.$model.player,
                },
                fireballsPool: {
                    controller: FireballsController_1.FireballsController,
                    model: this.$model.physic,
                },
                topPanel: {
                    animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
                    libraryName: "ui_top",
                    controller: TopPanelController_1.TopPanelController,
                    model: this.$model,
                },
                bottomPanel: {
                    animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
                    libraryName: "ui_bottom",
                    controller: ScoreController_1.ScoreController,
                    model: this.$model,
                },
            },
        };
    };
    LevelRootController.prototype.onInitialize = function () { };
    LevelRootController.prototype.onLandscape = function () {
    };
    LevelRootController.prototype.onPortrait = function () {
    };
    LevelRootController.prototype.onUpdate = function (frameRate) {
    };
    LevelRootController.prototype.onResize = function (width, height, scale) {
        this.$childControllers.get("topPanel").y = -height / scale / 2;
        var topPanel = this.$childControllers.get("topPanel");
        var bottomPanel = this.$childControllers.get("bottomPanel");
        topPanel.y = -height / scale / 2 + paddingTop;
        topPanel.setPosXByQuery("life", -width / scale / 2 + paddingLeft);
        topPanel.setPosXByQuery("ui_top_left", width / scale / 2 - paddingLeft);
        bottomPanel.y = height / scale / 2 - paddingTop;
    };
    LevelRootController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __param(3, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic,
            PhysicsEngine_1.PhysicsEngine])
    ], LevelRootController);
    return LevelRootController;
}(html5_game_engine_1.SimpleBaseController));
exports.LevelRootController = LevelRootController;


/***/ }),

/***/ "./src/controllers/Game/WallsController.ts":
/*!*************************************************!*\
  !*** ./src/controllers/Game/WallsController.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.WallsController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../../logic/GameLogic */ "./src/logic/GameLogic.ts");
var AnimationContents_1 = __webpack_require__(/*! ../AnimationContents */ "./src/controllers/AnimationContents.ts");
var WallsController = (function (_super) {
    __extends(WallsController, _super);
    function WallsController(options, random, gameLogic) {
        var _this = _super.call(this, "WallsController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        _this.count = 1;
        _this.step = .0002;
        return _this;
    }
    WallsController.prototype.getConfiguration = function () {
        var _this = this;
        return {
            animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
            libraryName: "floor",
            childControllers: {},
            modelEvents: {
                nextLevel: function () { return _this.display.children[1].scale.set(1); },
            },
        };
    };
    WallsController.prototype.onInitialize = function () {
        console.log("floor", this.display, this.display.scale);
    };
    WallsController.prototype.onLandscape = function () {
    };
    WallsController.prototype.onPortrait = function () {
    };
    WallsController.prototype.onUpdate = function (frameRate) {
        if (this.$model.timer <= 0 && this.count > 0) {
            this.count -= this.step;
            this.display.children[1].scale.set(this.count);
        }
    };
    WallsController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], WallsController);
    return WallsController;
}(html5_game_engine_1.AnimationBaseController));
exports.WallsController = WallsController;


/***/ }),

/***/ "./src/controllers/GoldController.ts":
/*!*******************************************!*\
  !*** ./src/controllers/GoldController.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.GoldController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../logic/GameLogic */ "./src/logic/GameLogic.ts");
var GoldController = (function (_super) {
    __extends(GoldController, _super);
    function GoldController(options, random, gameLogic) {
        var _this = _super.call(this, "GoldController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        return _this;
    }
    GoldController.prototype.getConfiguration = function () {
        var _a;
        var _this = this;
        return {
            modelWatch: {
                goldHealth: function (newValue) { return _this.setTextByQuery("gold_health", newValue.toFixed(0)); },
                goldStage: function (newValue) { return _this.gotoAndStopByQuery("gold", newValue); },
            },
            modelEvents: (_a = {},
                _a[GameLogic_1.GOLD_DROPPED] = function () { return _this.fadeOut(); },
                _a["nextLevel"] = function () { return _this.nextLevel(); },
                _a),
        };
    };
    GoldController.prototype.fadeOut = function () {
        var _this = this;
        this.interval = setInterval(function () {
            _this.alpha -= .02;
        }, 50);
        this.timeout = setTimeout(function () {
            clearInterval(_this.interval);
        }, 5000);
    };
    GoldController.prototype.onInitialize = function () {
        this.setTextByQuery("gold_health", this.$model.goldHealth.toFixed(0));
        this.gotoAndStopByQuery("gold", 4);
    };
    GoldController.prototype.onLandscape = function () {
    };
    GoldController.prototype.onPortrait = function () {
    };
    GoldController.prototype.onUpdate = function (frameRate) {
    };
    GoldController.prototype.nextLevel = function () {
        clearInterval(this.interval);
        clearTimeout(this.timeout);
        this.alpha = 1;
    };
    GoldController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], GoldController);
    return GoldController;
}(html5_game_engine_1.AnimationBaseController));
exports.GoldController = GoldController;


/***/ }),

/***/ "./src/controllers/LeverController.ts":
/*!********************************************!*\
  !*** ./src/controllers/LeverController.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LeverController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../logic/GameLogic */ "./src/logic/GameLogic.ts");
var LeverController = (function (_super) {
    __extends(LeverController, _super);
    function LeverController(options, random, gameLogic) {
        var _this = _super.call(this, "LeverController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        return _this;
    }
    LeverController.prototype.getConfiguration = function () {
        var _this = this;
        return {
            modelWatch: {
                state: function () { return _this.updateState(); },
            },
        };
    };
    LeverController.prototype.onInitialize = function () {
        this.updateState();
    };
    LeverController.prototype.updateState = function () {
        this.gotoAndStop(this.$model.state);
        this.x = this.$model.position.x;
        this.y = this.$model.position.y;
    };
    LeverController.prototype.onLandscape = function () {
    };
    LeverController.prototype.onPortrait = function () {
    };
    LeverController.prototype.onUpdate = function (frameRate) {
    };
    LeverController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], LeverController);
    return LeverController;
}(html5_game_engine_1.AnimationBaseController));
exports.LeverController = LeverController;


/***/ }),

/***/ "./src/controllers/LeversController.ts":
/*!*********************************************!*\
  !*** ./src/controllers/LeversController.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LeversController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../logic/GameLogic */ "./src/logic/GameLogic.ts");
var LeverController_1 = __webpack_require__(/*! ./LeverController */ "./src/controllers/LeverController.ts");
var AnimationContents_1 = __webpack_require__(/*! ./AnimationContents */ "./src/controllers/AnimationContents.ts");
var LeversController = (function (_super) {
    __extends(LeversController, _super);
    function LeversController(options, random, gameLogic) {
        var _this = _super.call(this, "LeversController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        return _this;
    }
    LeversController.prototype.getConfiguration = function () {
        return {
            childControllers: {
                lever_1: {
                    animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
                    libraryName: "lever",
                    controller: LeverController_1.LeverController,
                    model: this.$model.levers[0],
                },
                lever_2: {
                    animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
                    libraryName: "lever",
                    controller: LeverController_1.LeverController,
                    model: this.$model.levers[1],
                },
            },
        };
    };
    LeversController.prototype.onInitialize = function () {
    };
    LeversController.prototype.onLandscape = function () {
    };
    LeversController.prototype.onPortrait = function () {
    };
    LeversController.prototype.onUpdate = function (frameRate) {
    };
    LeversController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], LeversController);
    return LeversController;
}(html5_game_engine_1.SimpleBaseController));
exports.LeversController = LeversController;


/***/ }),

/***/ "./src/controllers/LifeController.ts":
/*!*******************************************!*\
  !*** ./src/controllers/LifeController.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LifeController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../logic/GameLogic */ "./src/logic/GameLogic.ts");
var LifeController = (function (_super) {
    __extends(LifeController, _super);
    function LifeController(options, random, gameLogic) {
        var _this = _super.call(this, "LifeController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        return _this;
    }
    LifeController.prototype.getConfiguration = function () {
        var _this = this;
        return {
            modelWatch: {
                health: function (newValue) { return _this.gotoAndStop("h_" + newValue); },
            },
        };
    };
    LifeController.prototype.onInitialize = function () {
        this.gotoAndStop("h_" + this.$model.health);
    };
    LifeController.prototype.onLandscape = function () {
    };
    LifeController.prototype.onPortrait = function () {
    };
    LifeController.prototype.onUpdate = function (frameRate) {
    };
    LifeController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], LifeController);
    return LifeController;
}(html5_game_engine_1.AnimationBaseController));
exports.LifeController = LifeController;


/***/ }),

/***/ "./src/controllers/ManholeController.ts":
/*!**********************************************!*\
  !*** ./src/controllers/ManholeController.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ManholeController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../logic/GameLogic */ "./src/logic/GameLogic.ts");
var ManholeController = (function (_super) {
    __extends(ManholeController, _super);
    function ManholeController(options, random, gameLogic) {
        var _this = _super.call(this, "ManholeController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        return _this;
    }
    ManholeController.prototype.getConfiguration = function () {
        var _this = this;
        return {
            modelWatch: {
                isManholeOpen: function () { return _this.updateState(); },
            },
        };
    };
    ManholeController.prototype.onInitialize = function () {
        this.updateState();
    };
    ManholeController.prototype.updateState = function () {
        this.gotoAndStop((this.$model.isManholeOpen) ? 1 : 0);
    };
    ManholeController.prototype.onLandscape = function () {
    };
    ManholeController.prototype.onPortrait = function () {
    };
    ManholeController.prototype.onUpdate = function (frameRate) {
    };
    ManholeController.prototype.onResize = function (width, height, scale) {
        this.display.scale.set(.8);
    };
    ManholeController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], ManholeController);
    return ManholeController;
}(html5_game_engine_1.AnimationBaseController));
exports.ManholeController = ManholeController;


/***/ }),

/***/ "./src/controllers/ProjectileController.ts":
/*!*************************************************!*\
  !*** ./src/controllers/ProjectileController.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProjectileController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../logic/GameLogic */ "./src/logic/GameLogic.ts");
var ProjectileController = (function (_super) {
    __extends(ProjectileController, _super);
    function ProjectileController(options, random, gameLogic) {
        var _this = _super.call(this, "ProjectileController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        return _this;
    }
    ProjectileController.prototype.getConfiguration = function () {
        return {};
    };
    ProjectileController.prototype.updatePosition = function () {
        this.x = this.$model.position.x;
        this.y = this.$model.position.y;
        this.rotation = Math.atan2(this.$model.velocity.x, -this.$model.velocity.y);
        console.log(this.$model.speed);
    };
    ProjectileController.prototype.onInitialize = function () {
        this.framerate = 60;
        this.loop = true;
        this.play();
    };
    ProjectileController.prototype.onLandscape = function () {
    };
    ProjectileController.prototype.onPortrait = function () {
    };
    ProjectileController.prototype.onUpdate = function (frameRate) {
        this.updatePosition();
    };
    ProjectileController.prototype.onResize = function (width, height, scale) {
        this.display.scale.set(.5);
    };
    ProjectileController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], ProjectileController);
    return ProjectileController;
}(html5_game_engine_1.AnimationBaseController));
exports.ProjectileController = ProjectileController;


/***/ }),

/***/ "./src/controllers/ScoreController.ts":
/*!********************************************!*\
  !*** ./src/controllers/ScoreController.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ScoreController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../logic/GameLogic */ "./src/logic/GameLogic.ts");
var AnimationContents_1 = __webpack_require__(/*! ./AnimationContents */ "./src/controllers/AnimationContents.ts");
var ButtonController_1 = __webpack_require__(/*! ./Common/ButtonController */ "./src/controllers/Common/ButtonController.ts");
var ScoreController = (function (_super) {
    __extends(ScoreController, _super);
    function ScoreController(options, random, gameLogic) {
        var _this = _super.call(this, "ScoreController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        return _this;
    }
    ScoreController.prototype.getConfiguration = function () {
        var _this = this;
        return {
            childControllers: {
                btn_teleport: {
                    animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
                    libraryName: "btn_teleport",
                    controller: ButtonController_1.ButtonController,
                    options: {
                        onClick: function () { return _this.gameLogic.dash(); },
                    },
                },
                btn_liver: {
                    animationContent: AnimationContents_1.AnimationContents.LEVEL_CONTENT_JSON,
                    libraryName: "btn_liver",
                    controller: ButtonController_1.ButtonController,
                    options: {
                        onClick: function () { return _this.gameLogic.toggleLever(); },
                    },
                },
            },
            modelWatch: {
                playerScore: function (newValue) { return _this.setTextByQuery("score", newValue.toFixed(0)); },
                canToggleLever: function () { return _this.updateLeverButton(); },
                dashCooldown: function () { return _this.updateDashButton(); },
            },
        };
    };
    ScoreController.prototype.updateLeverButton = function () {
        this.$childControllers.get("btn_liver").alpha = (this.$model.canToggleLever) ? 1 : .5;
    };
    ScoreController.prototype.updateDashButton = function () {
        this.$childControllers.get("btn_teleport").alpha = (this.$model.dashCooldown > 0) ? .5 : 1;
    };
    ScoreController.prototype.onInitialize = function () {
        this.setTextByQuery("score", this.$model.playerScore.toFixed(0));
        this.updateLeverButton();
        this.updateDashButton();
    };
    ScoreController.prototype.onLandscape = function () {
    };
    ScoreController.prototype.onPortrait = function () {
    };
    ScoreController.prototype.onUpdate = function (frameRate) {
    };
    ScoreController.prototype.onResize = function (width, height, scale) {
        var scaleBtn = .6;
        var padding = 25;
        var radius = 328 / 2 * scaleBtn;
        var paddingWithRadius = radius + padding;
        var btnTp = this.$childControllers.get("btn_teleport");
        var btnToggleLeverthis = this.$childControllers.get("btn_liver");
        btnTp.display.scale.set(scaleBtn);
        btnToggleLeverthis.display.scale.set(scaleBtn);
        btnTp.x = width / scale / 2 - paddingWithRadius;
        btnTp.y = -paddingWithRadius;
        btnToggleLeverthis.x = width / scale / 2 - paddingWithRadius;
        btnToggleLeverthis.y = -radius * 2 - paddingWithRadius - padding;
    };
    ScoreController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], ScoreController);
    return ScoreController;
}(html5_game_engine_1.AnimationBaseController));
exports.ScoreController = ScoreController;


/***/ }),

/***/ "./src/controllers/TopPanelController.ts":
/*!***********************************************!*\
  !*** ./src/controllers/TopPanelController.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TopPanelController = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameLogic_1 = __webpack_require__(/*! ../logic/GameLogic */ "./src/logic/GameLogic.ts");
var LifeController_1 = __webpack_require__(/*! ./LifeController */ "./src/controllers/LifeController.ts");
var GameConstants_1 = __webpack_require__(/*! ../constants/GameConstants */ "./src/constants/GameConstants.ts");
var timer = GameConstants_1.GameConstants.timer;
var TopPanelController = (function (_super) {
    __extends(TopPanelController, _super);
    function TopPanelController(options, random, gameLogic) {
        var _this = _super.call(this, "TopPanelController") || this;
        _this.options = options;
        _this.random = random;
        _this.gameLogic = gameLogic;
        return _this;
    }
    TopPanelController.prototype.getConfiguration = function () {
        var _this = this;
        return {
            childControllers: {
                life: {
                    instanceName: "life",
                    controller: LifeController_1.LifeController,
                    model: this.$model.player,
                },
            },
            modelWatch: {
                timer: function () { return _this.updateTime(); },
            },
        };
    };
    TopPanelController.prototype.onInitialize = function () {
    };
    TopPanelController.prototype.onLandscape = function () {
    };
    TopPanelController.prototype.onPortrait = function () {
    };
    TopPanelController.prototype.onUpdate = function (frameRate) {
    };
    TopPanelController.prototype.updateTime = function () {
        var time = this.$model.timer;
        if (time < 0)
            return;
        var timeText = (time > 60) ? "1:" + ((time % 60 < 10) ? "0" + time % 60 : time % 60) : time.toFixed(0);
        this.setTextByQuery("ui_top_left.ui_timer.time", timeText);
        this.gotoAndStopByQuery("ui_top_left.ui_timer.progress_bar_timer", Math.floor(100 - time * 99 / timer));
    };
    TopPanelController = __decorate([
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [Object, html5_game_engine_1.GameRandom,
            GameLogic_1.GameLogic])
    ], TopPanelController);
    return TopPanelController;
}(html5_game_engine_1.AnimationBaseController));
exports.TopPanelController = TopPanelController;


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameInstance_1 = __webpack_require__(/*! ./GameInstance */ "./src/GameInstance.ts");
var WebFont = __webpack_require__(/*! webfontloader */ "./node_modules/webfontloader/webfontloader.js");
var SoundConstants_1 = __webpack_require__(/*! ./constants/SoundConstants */ "./src/constants/SoundConstants.ts");
var gameCfg = __webpack_require__(/*! ../game-config.json */ "./game-config.json");
var version = __webpack_require__(/*! ../package.json */ "./package.json").version;
var main = (function () {
    function main() {
        var _this = this;
        WebFont.load({
            custom: {
                families: [
                    "Times New Roman",
                    "Arial Black",
                ],
            },
            loading: function () {
                _this.startGame();
            },
        });
    }
    main.prototype.startGame = function () {
        return new html5_game_engine_1.Game({
            main: GameInstance_1.GameInstance,
            version: version,
            sounds: [
                {
                    "id": SoundConstants_1.SoundConstants.COINS,
                    "path": "/sounds/coins-3.mp3",
                },
                {
                    "id": SoundConstants_1.SoundConstants.FIREBALL,
                    "path": "/sounds/fireball-1.mp3",
                },
                {
                    "id": SoundConstants_1.SoundConstants.MANHOLE,
                    "path": "/sounds/hatch-1.mp3",
                },
                {
                    "id": SoundConstants_1.SoundConstants.LEVER,
                    "path": "/sounds/lever-1.mp3",
                },
                {
                    "id": SoundConstants_1.SoundConstants.LIFE_LOSS,
                    "path": "/sounds/life-loss-1.mp3",
                },
                {
                    "id": SoundConstants_1.SoundConstants.MUSIC_MAIN,
                    "path": "/sounds/Music_Main-1.mp3",
                },
                {
                    "id": SoundConstants_1.SoundConstants.MUSIC_ACTION,
                    "path": "/sounds/Music_Action-1.mp3",
                },
                {
                    "id": SoundConstants_1.SoundConstants.RICOCHET,
                    "path": "/sounds/ricochet-1.wav",
                },
            ],
            assetsRoot: gameCfg.resourcesRoot,
            elementId: "gamePlace",
            noWebGL: false,
            backgroundColor: 0x89C0FC,
            clearBeforeRender: true,
            transparent: false,
            showStats: false,
            disableContextMenu: true,
            antialias: false,
            fps: 60,
            gameId: gameCfg.gameId,
        });
    };
    return main;
}());
exports.default = main;
new main();


/***/ }),

/***/ "./src/logic/GameLogic.ts":
/*!********************************!*\
  !*** ./src/logic/GameLogic.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.GameLogic = exports.GOLD_DROPPED = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameModel_1 = __webpack_require__(/*! ../models/GameModel */ "./src/models/GameModel.ts");
var dist_1 = __webpack_require__(/*! @denishussar/html5-game-engine/dist */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var PlayerModel_1 = __webpack_require__(/*! ../models/PlayerModel */ "./src/models/PlayerModel.ts");
var PhysicsEngine_1 = __webpack_require__(/*! ../PhysicsEngine */ "./src/PhysicsEngine.ts");
var matter_js_1 = __webpack_require__(/*! matter-js */ "./node_modules/matter-js/build/matter.js");
var distanceBetweenPoints_1 = __webpack_require__(/*! ../utils/geometry/distanceBetweenPoints */ "./src/utils/geometry/distanceBetweenPoints.ts");
var GameConstants_1 = __webpack_require__(/*! ../constants/GameConstants */ "./src/constants/GameConstants.ts");
var SoundConstants_1 = __webpack_require__(/*! ../constants/SoundConstants */ "./src/constants/SoundConstants.ts");
var PhysicsConstant_1 = __webpack_require__(/*! ../constants/PhysicsConstant */ "./src/constants/PhysicsConstant.ts");
var goldMinimalHealth = GameConstants_1.GameConstants.goldMinimalHealth;
var fireballDamage = GameConstants_1.GameConstants.fireballDamage;
var playerMinHealth = GameConstants_1.GameConstants.playerMinHealth;
var goldStage = GameConstants_1.GameConstants.goldStage;
var fireballCooldown = GameConstants_1.GameConstants.fireballCooldown;
var wallSpeed = GameConstants_1.GameConstants.wallSpeed;
var dashCooldown = GameConstants_1.GameConstants.dashCooldown;
var dashPower = PhysicsConstant_1.PhysicsConstant.dashPower;
exports.GOLD_DROPPED = "GOLD_DROPPED";
var GameLogic = (function () {
    function GameLogic(gameModel, random, modelEvents, storageManager, physicsEngine, soundManager) {
        this.gameModel = gameModel;
        this.random = random;
        this.modelEvents = modelEvents;
        this.storageManager = storageManager;
        this.physicsEngine = physicsEngine;
        this.soundManager = soundManager;
        this.physicsModel = this.gameModel.physic;
        this.count = 0;
        this.playerDashCollisionFilter = {
            category: 2,
            mask: 1,
        };
        this.playerCollision = this.gameModel.player.collision.collisionFilter;
        this.physicsEngine.subscribe("collisionStart", this.collisionStartHandler.bind(this));
        this.physicsEngine.subscribe("collisionEnd", this.collisionEndHandler.bind(this));
    }
    GameLogic.prototype.collisionStartHandler = function (event) {
        var bodyA = event.pairs[0].bodyA;
        var bodyB = event.pairs[0].bodyB;
        var isPlayer = bodyA === this.gameModel.player.collision || bodyB === this.gameModel.player.collision;
        var isProjectile = this.gameModel.physic.fireballs.find(function (ball) { return ball === bodyA || ball === bodyB; });
        var isGold = bodyA === this.gameModel.physic.gold || bodyB === this.gameModel.physic.gold;
        var isLever = this.gameModel.physic.levers.find(function (lever) { return lever === bodyA || lever === bodyB; });
        if (isPlayer && isProjectile) {
            this.damagePlayer();
        }
        else if (isGold && isProjectile && !this.gameModel.isGoldDropped) {
            this.damageGold();
        }
        else if (isPlayer && isLever) {
            this.hoverLever(isLever);
        }
        else if (isPlayer && isGold && this.gameModel.isManholeOpen) {
            this.goToNextLevel();
        }
    };
    GameLogic.prototype.collisionEndHandler = function (event) {
        var bodyA = event.pairs[0].bodyA;
        var bodyB = event.pairs[0].bodyB;
        var isPlayer = bodyA === this.gameModel.player.collision || bodyB === this.gameModel.player.collision;
        var isProjectile = this.gameModel.physic.fireballs.find(function (ball) { return ball === bodyA || ball === bodyB; });
        var isGold = bodyA === this.gameModel.physic.gold || bodyB === this.gameModel.physic.gold;
        var isLever = this.gameModel.physic.levers.find(function (lever) { return lever === bodyA || lever === bodyB; });
        var isWall = this.gameModel.physic.walls.find(function (wall) { return wall === bodyA || wall === bodyB; });
        if (isProjectile && isProjectile.speed < 4) {
            var multiplier = 4.03 / isProjectile.speed;
            matter_js_1.Body.setVelocity(isProjectile, matter_js_1.Vector.create(isProjectile.velocity.x * multiplier, isProjectile.velocity.y * multiplier));
            console.log("SET SPEED");
        }
        if (isPlayer && isProjectile && !this.gameModel.isGoldDropped) {
        }
        else if (isGold && isProjectile) {
        }
        else if (isPlayer && isLever) {
            this.unhoverLever(isLever);
        }
        else if (isPlayer && isGold && this.gameModel.isManholeOpen) {
        }
        else if (isWall && isProjectile) {
            this.soundManager.playSound(SoundConstants_1.SoundConstants.RICOCHET, 0, SoundConstants_1.SoundLevels.ricochet);
        }
    };
    GameLogic.prototype.damageGold = function () {
        this.soundManager.playSound(SoundConstants_1.SoundConstants.COINS, 0, SoundConstants_1.SoundLevels.coin);
        this.gameModel.goldHealth -= this.gameModel.player.damage;
        this.gameModel.playerScore += this.gameModel.player.damage;
        if (goldStage[this.gameModel.goldStage] >= this.gameModel.goldHealth)
            this.gameModel.goldStage -= 1;
        if (this.gameModel.goldHealth <= goldMinimalHealth)
            this.win();
    };
    GameLogic.prototype.damagePlayer = function () {
        if (this.gameModel.player.isImmortal)
            return;
        this.setImmortality();
        this.soundManager.playSound(SoundConstants_1.SoundConstants.LIFE_LOSS, 0, SoundConstants_1.SoundLevels.lifeLoss);
        this.gameModel.player.health -= fireballDamage;
        if (this.gameModel.player.health <= playerMinHealth)
            this.lose();
    };
    GameLogic.prototype.hoverLever = function (leverBody) {
        this.gameModel.canToggleLever = true;
        var lever = this.gameModel.levers.find(function (lever) { return lever.trigger === leverBody; });
        lever.state = (lever.state === "off") ? "hover" : "on";
    };
    GameLogic.prototype.unhoverLever = function (leverBody) {
        this.gameModel.canToggleLever = false;
        var lever = this.gameModel.levers.find(function (lever) { return lever.trigger === leverBody; });
        lever.state = (lever.state === "hover") ? "off" : "on";
    };
    GameLogic.prototype.goToNextLevel = function () {
        alert("Отличный раунд! Давай выбьем всю стружку из этого куска металла!");
        this.gameModel.reset();
        this.physicsEngine.reset();
        this.modelEvents.dispatch(this.gameModel, "nextLevel");
        this.modelEvents.dispatch(this.physicsModel, "nextLevel");
    };
    GameLogic.prototype.win = function () {
        alert("You are win!");
    };
    GameLogic.prototype.lose = function () {
        alert("Ты поджарен! Отматываем назад...");
        window.location.reload();
    };
    GameLogic.prototype.pressKey = function (key) {
        if (true) {
            this.gameModel.wasdState[key] = 1;
            switch (key) {
                case html5_game_engine_1.Key.D:
                case html5_game_engine_1.Key.RIGHT:
                    this.unitMoveStart([1, 0]);
                    break;
                case html5_game_engine_1.Key.A:
                case html5_game_engine_1.Key.LEFT:
                    this.unitMoveStart([-1, 0]);
                    break;
                case html5_game_engine_1.Key.W:
                case html5_game_engine_1.Key.UP:
                    this.unitMoveStart([0, -1]);
                    break;
                case html5_game_engine_1.Key.S:
                case html5_game_engine_1.Key.DOWN:
                    this.unitMoveStart([0, 1]);
                    break;
                case html5_game_engine_1.Key.SPACE:
                    this.dash();
                    break;
            }
        }
    };
    GameLogic.prototype.releaseKey = function (key) {
        this.gameModel.wasdState[key] = 0;
        switch (key) {
            case html5_game_engine_1.Key.D:
            case html5_game_engine_1.Key.RIGHT:
                this.unitMoveStop([1, 0]);
                if (this.gameModel.wasdState[html5_game_engine_1.Key.A] || this.gameModel.wasdState[html5_game_engine_1.Key.LEFT])
                    this.unitMoveStart([-1, 0]);
                break;
            case html5_game_engine_1.Key.A:
            case html5_game_engine_1.Key.LEFT:
                this.unitMoveStop([-1, 0]);
                if (this.gameModel.wasdState[html5_game_engine_1.Key.D] || this.gameModel.wasdState[html5_game_engine_1.Key.RIGHT])
                    this.unitMoveStart([1, 0]);
                break;
            case html5_game_engine_1.Key.W:
            case html5_game_engine_1.Key.UP:
                this.unitMoveStop([0, -1]);
                if (this.gameModel.wasdState[html5_game_engine_1.Key.S] || this.gameModel.wasdState[html5_game_engine_1.Key.DOWN])
                    this.unitMoveStart([0, -1]);
                break;
            case html5_game_engine_1.Key.S:
            case html5_game_engine_1.Key.DOWN:
                this.unitMoveStop([0, 1]);
                if (this.gameModel.wasdState[html5_game_engine_1.Key.W] || this.gameModel.wasdState[html5_game_engine_1.Key.UP])
                    this.unitMoveStart([0, 1]);
                break;
            case html5_game_engine_1.Key.E:
            case html5_game_engine_1.Key.F:
            case html5_game_engine_1.Key.ENTER:
                this.toggleLever();
        }
    };
    GameLogic.prototype.toggleLever = function () {
        var lever = this.gameModel.levers.find(function (lever) { return lever.state === "hover"; });
        if (lever) {
            lever.state = "on";
            this.soundManager.playSound(SoundConstants_1.SoundConstants.LEVER, 0, SoundConstants_1.SoundLevels.lever);
        }
        if (!this.gameModel.levers.find(function (lever) { return lever.state != "on"; }))
            this.openManhole();
    };
    GameLogic.prototype.openManhole = function () {
        this.gameModel.isManholeOpen = true;
        this.gameModel.isGoldDropped = true;
        this.modelEvents.dispatch(this.gameModel, exports.GOLD_DROPPED);
        this.soundManager.playSound(SoundConstants_1.SoundConstants.MANHOLE, 0, SoundConstants_1.SoundLevels.manhole);
    };
    GameLogic.prototype.unitMoveStart = function (direction) {
        var unit = this.gameModel.player;
        if (unit) {
            unit.move = [
                direction[0] || unit.move[0],
                direction[1] || unit.move[1],
            ];
        }
    };
    GameLogic.prototype.unitMoveStop = function (direction) {
        var unit = this.gameModel.player;
        if (unit) {
            unit.move = [
                direction[0] ? 0 : unit.move[0],
                direction[1] ? 0 : unit.move[1],
            ];
        }
    };
    GameLogic.prototype.update = function (frameRate) {
        this.count += frameRate;
        this.physicsUpdate(frameRate);
        this.gameModel.fireballCooldown -= frameRate * 1000;
        this.gameModel.dashCooldown -= frameRate * 1000;
        if (this.count > 1) {
            this.count = 0;
            this.gameModel.timer--;
        }
    };
    GameLogic.prototype.physicsUpdate = function (frameRate) {
        var player = this.gameModel.player;
        var moveX = player.move[0];
        var moveY = player.move[1];
        if (moveX === 0 && moveY === 0)
            return;
        player.direction = (moveX > 0) ? PlayerModel_1.PlayerDirection.right : PlayerModel_1.PlayerDirection.left;
        var absX = Math.abs(moveX);
        var absY = Math.abs(moveY);
        if (absX + absY > 1.1) {
            if (absX > 1 / Math.sqrt(2))
                moveX /= Math.sqrt(2);
            if (absY > 1 / Math.sqrt(2))
                moveY /= Math.sqrt(2);
        }
        else {
        }
        console.log(moveX, moveY);
        this.physicsModel.playerCollision.force.x += moveX * player.speed;
        this.physicsModel.playerCollision.force.y += moveY * player.speed;
        if (this.gameModel.timer <= 0)
            this.wallTrapUpdate();
    };
    GameLogic.prototype.wallTrapUpdate = function () {
        var topWall = this.physicsModel.topWall;
        matter_js_1.Body.setPosition(topWall, matter_js_1.Vector.create(topWall.position.x, topWall.position.y + wallSpeed));
        var bottomWall = this.physicsModel.bottomWall;
        matter_js_1.Body.setPosition(bottomWall, matter_js_1.Vector.create(bottomWall.position.x, bottomWall.position.y - wallSpeed));
        var leftWall = this.physicsModel.leftWall;
        matter_js_1.Body.setPosition(leftWall, matter_js_1.Vector.create(leftWall.position.x + wallSpeed, leftWall.position.y));
        var rightWall = this.physicsModel.rightWall;
        matter_js_1.Body.setPosition(rightWall, matter_js_1.Vector.create(rightWall.position.x - wallSpeed, rightWall.position.y));
    };
    GameLogic.prototype.throwFireball = function (pos) {
        if (this.gameModel.fireballCooldown > 0 || Math.abs(pos.x) > 480 || Math.abs(pos.y) > 480)
            return;
        this.gameModel.fireballCooldown = fireballCooldown;
        this.soundManager.playSound(SoundConstants_1.SoundConstants.FIREBALL, 0, SoundConstants_1.SoundLevels.fireball);
        this.setImmortality();
        this.gameModel.levers.forEach(function (lever) { return lever.state = (lever.state === "hover") ? "hover" : "off"; });
        if (this.gameModel.isManholeOpen) {
            this.soundManager.playSound(SoundConstants_1.SoundConstants.MANHOLE, 0, SoundConstants_1.SoundLevels.manhole);
            this.gameModel.isManholeOpen = false;
        }
        var playerPos = this.physicsModel.playerCollision.position;
        var x = (pos.x - playerPos.x);
        var y = (pos.y - playerPos.y);
        var vec = distanceBetweenPoints_1.findPoint2D({ x: 0, y: 0 }, { x: x, y: y }, .01);
        this.physicsEngine.createFireball(playerPos.x, playerPos.y, matter_js_1.Vector.create(vec.x, vec.y));
    };
    GameLogic.prototype.setImmortality = function (time) {
        var _this = this;
        if (time === void 0) { time = 500; }
        this.gameModel.player.isImmortal = true;
        clearTimeout(this.timeoutImmortality);
        this.timeoutImmortality = setTimeout(function () {
            _this.gameModel.player.isImmortal = false;
        }, time);
    };
    GameLogic.prototype.dash = function () {
        var _this = this;
        if (this.gameModel.dashCooldown > 0)
            return;
        this.gameModel.dashCooldown = dashCooldown;
        clearTimeout(this.timeoutDash);
        var prev = this.gameModel.player.collision.collisionFilter;
        this.gameModel.player.collision.collisionFilter = this.playerDashCollisionFilter;
        this.timeoutDash = setTimeout(function () {
            _this.gameModel.player.collision.collisionFilter = _this.playerCollision;
        }, 300);
        this.gameModel.player.collision.force.x += this.gameModel.player.collision.velocity.x * dashPower;
        this.gameModel.player.collision.force.y += this.gameModel.player.collision.velocity.y * dashPower;
    };
    GameLogic = __decorate([
        html5_game_engine_1.Singleton,
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __param(3, html5_game_engine_1.Inject),
        __param(4, html5_game_engine_1.Inject),
        __param(5, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [GameModel_1.GameModel,
            html5_game_engine_1.GameRandom,
            html5_game_engine_1.ModelEvents,
            dist_1.GameStorageManager,
            PhysicsEngine_1.PhysicsEngine,
            html5_game_engine_1.SoundManager])
    ], GameLogic);
    return GameLogic;
}());
exports.GameLogic = GameLogic;


/***/ }),

/***/ "./src/models/GameModel.ts":
/*!*********************************!*\
  !*** ./src/models/GameModel.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LeverModel = exports.GameModel = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var PlayerModel_1 = __webpack_require__(/*! ./PlayerModel */ "./src/models/PlayerModel.ts");
var PhysicsModel_1 = __webpack_require__(/*! ./PhysicsModel */ "./src/models/PhysicsModel.ts");
var GameConstants_1 = __webpack_require__(/*! ../constants/GameConstants */ "./src/constants/GameConstants.ts");
var matter_js_1 = __webpack_require__(/*! matter-js */ "./node_modules/matter-js/build/matter.js");
var PhysicsConstant_1 = __webpack_require__(/*! ../constants/PhysicsConstant */ "./src/constants/PhysicsConstant.ts");
var goldHealth = GameConstants_1.GameConstants.goldHealth;
var timer = GameConstants_1.GameConstants.timer;
var startPlayerPosition = PhysicsConstant_1.PhysicsConstant.startPlayerPosition;
var GameModel = (function () {
    function GameModel(random, modelEvents, player) {
        this.random = random;
        this.modelEvents = modelEvents;
        this.player = player;
        this.wasdState = new Map;
        this.physic = new PhysicsModel_1.PhysicsModel();
        this.levers = [new LeverModel(), new LeverModel()];
        this.canToggleLever = false;
        this.goldHealth = goldHealth;
        this.goldStage = 4;
        this.playerScore = 0;
        this.isManholeOpen = false;
        this.isGoldDropped = false;
        this.timer = timer;
        this.player.collision = this.physic.playerCollision;
        this.createLevers();
    }
    Object.defineProperty(GameModel.prototype, "fireballCooldown", {
        get: function () {
            return this.player.fireballCooldown;
        },
        set: function (value) {
            this.player.fireballCooldown = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameModel.prototype, "dashCooldown", {
        get: function () {
            return this.player.dashCooldown;
        },
        set: function (value) {
            this.player.dashCooldown = value;
        },
        enumerable: false,
        configurable: true
    });
    GameModel.prototype.reset = function () {
        this.wasdState.clear();
        this.physic.reset();
        this.player.reset();
        matter_js_1.Body.setPosition(this.physic.playerCollision, matter_js_1.Vector.create(startPlayerPosition.x, startPlayerPosition.y));
        this.createLevers();
        this.isManholeOpen = false;
        this.isGoldDropped = false;
        this.timer = timer;
    };
    GameModel.prototype.restart = function () { };
    GameModel.prototype.createLevers = function () {
        var angular = this.random.float(0, Math.PI);
        var radius = 300;
        var x = radius * Math.cos(angular);
        var y = radius * Math.sin(angular);
        this.levers[0].position = { x: -x, y: -y };
        this.levers[1].position = { x: x, y: y };
        this.levers[0].trigger = this.physic.lever1;
        matter_js_1.Body.setPosition(this.physic.lever1, matter_js_1.Vector.create(this.levers[0].position.x, this.levers[0].position.y));
        this.levers[1].trigger = this.physic.lever2;
        matter_js_1.Body.setPosition(this.physic.lever2, matter_js_1.Vector.create(this.levers[1].position.x, this.levers[1].position.y));
        this.levers[0].state = "off";
        this.levers[1].state = "off";
    };
    GameModel = __decorate([
        html5_game_engine_1.Singleton,
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __param(2, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [html5_game_engine_1.GameRandom,
            html5_game_engine_1.ModelEvents,
            PlayerModel_1.PlayerModel])
    ], GameModel);
    return GameModel;
}());
exports.GameModel = GameModel;
var LeverModel = (function () {
    function LeverModel() {
        this.state = "off";
        this.position = { x: 0, y: 0 };
    }
    return LeverModel;
}());
exports.LeverModel = LeverModel;


/***/ }),

/***/ "./src/models/PhysicsModel.ts":
/*!************************************!*\
  !*** ./src/models/PhysicsModel.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.PhysicsModel = void 0;
var matter_js_1 = __webpack_require__(/*! matter-js */ "./node_modules/matter-js/build/matter.js");
var PhysicsConstant_1 = __webpack_require__(/*! ../constants/PhysicsConstant */ "./src/constants/PhysicsConstant.ts");
var worldWidth = PhysicsConstant_1.PhysicsConstant.width;
var wordlHeight = PhysicsConstant_1.PhysicsConstant.height;
var padding = PhysicsConstant_1.PhysicsConstant.padding;
var topEdge = PhysicsConstant_1.PhysicsConstant.topEdge;
var bottomEdge = PhysicsConstant_1.PhysicsConstant.bottomEdge;
var leftEdge = PhysicsConstant_1.PhysicsConstant.leftEdge;
var rightEdge = PhysicsConstant_1.PhysicsConstant.rightEdge;
var startPlayerPosition = PhysicsConstant_1.PhysicsConstant.startPlayerPosition;
var playerRadius = PhysicsConstant_1.PhysicsConstant.collisionRadius;
var goldRadius = PhysicsConstant_1.PhysicsConstant.goldRadius;
var leverRadius = PhysicsConstant_1.PhysicsConstant.leverRadius;
var topEdgeWithPadding = PhysicsConstant_1.PhysicsConstant.topEdgeWithPadding;
var leftEdgeWithPadding = PhysicsConstant_1.PhysicsConstant.leftEdgeWithPadding;
var rightEdgeWithPadding = PhysicsConstant_1.PhysicsConstant.rightEdgeWithPadding;
var bottomEdgeWithPadding = PhysicsConstant_1.PhysicsConstant.bottomEdgeWithPadding;
var stat = function () { return { isStatic: true }; };
var rotate45 = function () { return { angle: Math.PI / 3 }; };
var sides = 3;
var size = 20;
var PhysicsModel = (function () {
    function PhysicsModel() {
        this.topWall = matter_js_1.Bodies.rectangle(0, topEdge + padding / 2, worldWidth, padding, stat());
        this.leftWall = matter_js_1.Bodies.rectangle(leftEdge + padding / 2, 0, padding, wordlHeight, stat());
        this.rightWall = matter_js_1.Bodies.rectangle(rightEdge - padding / 2, 0, padding, wordlHeight, stat());
        this.bottomWall = matter_js_1.Bodies.rectangle(0, bottomEdge - padding / 2, worldWidth, padding, stat());
        this.walls = [this.topWall, this.leftWall, this.rightWall, this.bottomWall];
        this.cornerCircle1 = matter_js_1.Bodies.polygon(leftEdgeWithPadding, topEdgeWithPadding, sides, size, stat());
        this.cornerCircle2 = matter_js_1.Bodies.polygon(rightEdgeWithPadding, topEdgeWithPadding, sides, size, stat());
        this.cornerCircle3 = matter_js_1.Bodies.polygon(leftEdgeWithPadding, bottomEdgeWithPadding, sides, size, stat());
        this.cornerCircle4 = matter_js_1.Bodies.polygon(rightEdgeWithPadding, bottomEdgeWithPadding, sides, size, stat());
        this.cornerCircles = [this.cornerCircle1, this.cornerCircle2, this.cornerCircle3, this.cornerCircle4];
        this.lever1 = matter_js_1.Bodies.circle(0, 0, leverRadius, {
            isStatic: true,
            isSensor: true,
        });
        this.lever2 = matter_js_1.Bodies.circle(200, 200, leverRadius, {
            isStatic: true,
            isSensor: true,
        });
        this.levers = [this.lever1, this.lever2];
        this.gold = matter_js_1.Bodies.circle(0, 0, goldRadius[4], stat());
        this.playerCollision = matter_js_1.Bodies.circle(startPlayerPosition.x, startPlayerPosition.y, playerRadius, {
            inertia: Infinity,
            frictionAir: .4,
        });
        this.fireballs = [];
    }
    PhysicsModel.prototype.reset = function () {
        matter_js_1.Body.setPosition(this.topWall, matter_js_1.Vector.create(0, topEdge + padding / 2));
        matter_js_1.Body.setPosition(this.leftWall, matter_js_1.Vector.create(leftEdge + padding / 2, 0));
        matter_js_1.Body.setPosition(this.rightWall, matter_js_1.Vector.create(rightEdge - padding / 2, 0));
        matter_js_1.Body.setPosition(this.bottomWall, matter_js_1.Vector.create(0, bottomEdge - padding / 2));
    };
    return PhysicsModel;
}());
exports.PhysicsModel = PhysicsModel;


/***/ }),

/***/ "./src/models/PlayerModel.ts":
/*!***********************************!*\
  !*** ./src/models/PlayerModel.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerModel = exports.PlayerDirection = void 0;
var html5_game_engine_1 = __webpack_require__(/*! @denishussar/html5-game-engine */ "./node_modules/@denishussar/html5-game-engine/dist/index.js");
var GameConstants_1 = __webpack_require__(/*! ../constants/GameConstants */ "./src/constants/GameConstants.ts");
var playerSpeed = GameConstants_1.GameConstants.playerSpeed;
var playerHealth = GameConstants_1.GameConstants.playerHealth;
var playerDamage = GameConstants_1.GameConstants.playerDamage;
var PlayerDirection;
(function (PlayerDirection) {
    PlayerDirection[PlayerDirection["left"] = 0] = "left";
    PlayerDirection[PlayerDirection["right"] = 1] = "right";
})(PlayerDirection = exports.PlayerDirection || (exports.PlayerDirection = {}));
var PlayerModel = (function () {
    function PlayerModel(_$random, _$modelEvents) {
        this._$random = _$random;
        this._$modelEvents = _$modelEvents;
        this.move = [0, 0];
        this.speed = playerSpeed;
        this.direction = PlayerDirection.right;
        this.health = playerHealth;
        this.damage = playerDamage;
        this.isImmortal = false;
        this.fireballCooldown = 0;
        this.dashCooldown = 0;
    }
    PlayerModel.prototype.reset = function () {
        this.move = [0, 0];
        this.direction = PlayerDirection.right;
        this.isImmortal = false;
        this.fireballCooldown = 0;
    };
    PlayerModel = __decorate([
        html5_game_engine_1.Singleton,
        __param(0, html5_game_engine_1.Inject),
        __param(1, html5_game_engine_1.Inject),
        __metadata("design:paramtypes", [html5_game_engine_1.GameRandom,
            html5_game_engine_1.ModelEvents])
    ], PlayerModel);
    return PlayerModel;
}());
exports.PlayerModel = PlayerModel;


/***/ }),

/***/ "./src/utils/DialogScale.ts":
/*!**********************************!*\
  !*** ./src/utils/DialogScale.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.scaleModal = void 0;
exports.scaleModal = function (modal, width, height, scale, _width, _height) {
    var sizeW = width / scale;
    var sizeH = height / scale;
    var containerScale = Math.min(sizeW / _width, sizeH / _height);
    modal.scaleX = containerScale;
    modal.scaleY = containerScale;
};


/***/ }),

/***/ "./src/utils/Hooks.ts":
/*!****************************!*\
  !*** ./src/utils/Hooks.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.hook = void 0;
exports.hook = {
    viewport: null,
};


/***/ }),

/***/ "./src/utils/geometry/distanceBetweenPoints.ts":
/*!*****************************************************!*\
  !*** ./src/utils/geometry/distanceBetweenPoints.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.findPoint2D = exports.distanceBetweenPoint3D = exports.distanceBetweenPoint2D = exports.distanceBetweenPoints = void 0;
function distanceBetweenPoints(a, b) {
    if (a.z !== undefined)
        return distanceBetweenPoint2D(a, b);
    else
        return distanceBetweenPoint3D(a, b);
}
exports.distanceBetweenPoints = distanceBetweenPoints;
function distanceBetweenPoint2D(a, b) {
    return Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));
}
exports.distanceBetweenPoint2D = distanceBetweenPoint2D;
function distanceBetweenPoint3D(a, b) {
    return Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2) + Math.pow(b.z - a.z, 2));
}
exports.distanceBetweenPoint3D = distanceBetweenPoint3D;
function findPoint2D(a, b, lenA) {
    var res = { x: b.x - a.x, y: b.y - a.y };
    var k = lenA / distanceBetweenPoint2D(a, b);
    res.x = res.x * k;
    res.y = res.y * k;
    res.x = res.x + a.x;
    res.y = res.y + a.y;
    return res;
}
exports.findPoint2D = findPoint2D;


/***/ })

/******/ });
//# sourceMappingURL=main.js.map